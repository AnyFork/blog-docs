const Fp={},Bk="modulepreload",Hp={},Nk="/blog-docs/",ln=function(s,a){return!a||a.length===0?s():Promise.all(a.map(e=>{if(e=`${Nk}${e}`,e in Hp)return;Hp[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const i=document.createElement("link");if(i.rel=t?"stylesheet":Bk,t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t)return new Promise((p,l)=>{i.addEventListener("load",p),i.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>s())},zk={"v-8daa1a0e":()=>ln(()=>import("./index.html19.js"),[]).then(({data:n})=>n),"v-db9b3b8e":()=>ln(()=>import("./index.html20.js"),[]).then(({data:n})=>n),"v-cc63cd18":()=>ln(()=>import("./algoliaSearch.html2.js"),[]).then(({data:n})=>n),"v-65bd7028":()=>ln(()=>import("./blogDocs.html2.js"),[]).then(({data:n})=>n),"v-9b67abf4":()=>ln(()=>import("./firends.html2.js"),[]).then(({data:n})=>n),"v-22a1c62c":()=>ln(()=>import("./githubPages.html2.js"),[]).then(({data:n})=>n),"v-57fe6fac":()=>ln(()=>import("./hotlinking.html2.js"),[]).then(({data:n})=>n),"v-3ba2686a":()=>ln(()=>import("./imageHost.html2.js"),[]).then(({data:n})=>n),"v-a60cbc14":()=>ln(()=>import("./internetResource.html2.js"),[]).then(({data:n})=>n),"v-351c6704":()=>ln(()=>import("./walineServer.html2.js"),[]).then(({data:n})=>n),"v-3706649a":()=>ln(()=>import("./404.html2.js"),[]).then(({data:n})=>n),"v-5bc93818":()=>ln(()=>import("./index.html21.js"),[]).then(({data:n})=>n),"v-744d024e":()=>ln(()=>import("./index.html22.js"),[]).then(({data:n})=>n),"v-e52c881c":()=>ln(()=>import("./index.html23.js"),[]).then(({data:n})=>n),"v-01560935":()=>ln(()=>import("./index.html24.js"),[]).then(({data:n})=>n),"v-5831b135":()=>ln(()=>import("./index.html25.js"),[]).then(({data:n})=>n),"v-05b88e01":()=>ln(()=>import("./index.html26.js"),[]).then(({data:n})=>n),"v-4110d7ce":()=>ln(()=>import("./index.html27.js"),[]).then(({data:n})=>n),"v-1eec4968":()=>ln(()=>import("./index.html28.js"),[]).then(({data:n})=>n),"v-13b66e9c":()=>ln(()=>import("./index.html29.js"),[]).then(({data:n})=>n),"v-3a134560":()=>ln(()=>import("./index.html30.js"),[]).then(({data:n})=>n),"v-9f17d77e":()=>ln(()=>import("./index.html31.js"),[]).then(({data:n})=>n),"v-200bf6bc":()=>ln(()=>import("./index.html32.js"),[]).then(({data:n})=>n),"v-2d060772":()=>ln(()=>import("./index.html33.js"),[]).then(({data:n})=>n),"v-aac522f2":()=>ln(()=>import("./index.html34.js"),[]).then(({data:n})=>n),"v-726261d4":()=>ln(()=>import("./index.html35.js"),[]).then(({data:n})=>n),"v-36b75823":()=>ln(()=>import("./index.html36.js"),[]).then(({data:n})=>n)};function Zi(n,s){const a=Object.create(null),e=n.split(",");for(let t=0;t<e.length;t++)a[e[t]]=!0;return s?t=>!!a[t.toLowerCase()]:t=>!!a[t]}const Hk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gk=Zi(Hk);function Zr(n){return!!n||n===""}function ks(n){if(un(n)){const s={};for(let a=0;a<n.length;a++){const e=n[a],t=Hn(e)?qk(e):ks(e);if(t)for(const o in t)s[o]=t[o]}return s}else{if(Hn(n))return n;if(Wn(n))return n}}const Vk=/;(?![^(]*\))/g,Uk=/:(.+)/;function qk(n){const s={};return n.split(Vk).forEach(a=>{if(a){const e=a.split(Uk);e.length>1&&(s[e[0].trim()]=e[1].trim())}}),s}function es(n){let s="";if(Hn(n))s=n;else if(un(n))for(let a=0;a<n.length;a++){const e=es(n[a]);e&&(s+=e+" ")}else if(Wn(n))for(const a in n)n[a]&&(s+=a+" ");return s.trim()}function Wk(n,s){if(n.length!==s.length)return!1;let a=!0;for(let e=0;a&&e<n.length;e++)a=xa(n[e],s[e]);return a}function xa(n,s){if(n===s)return!0;let a=Gp(n),e=Gp(s);if(a||e)return a&&e?n.getTime()===s.getTime():!1;if(a=Oe(n),e=Oe(s),a||e)return n===s;if(a=un(n),e=un(s),a||e)return a&&e?Wk(n,s):!1;if(a=Wn(n),e=Wn(s),a||e){if(!a||!e)return!1;const t=Object.keys(n).length,o=Object.keys(s).length;if(t!==o)return!1;for(const i in n){const p=n.hasOwnProperty(i),l=s.hasOwnProperty(i);if(p&&!l||!p&&l||!xa(n[i],s[i]))return!1}}return String(n)===String(s)}function np(n,s){return n.findIndex(a=>xa(a,s))}const Ln=n=>Hn(n)?n:n==null?"":un(n)||Wn(n)&&(n.toString===au||!Sn(n.toString))?JSON.stringify(n,nu,2):String(n),nu=(n,s)=>s&&s.__v_isRef?nu(n,s.value):Ga(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((a,[e,t])=>(a[`${e} =>`]=t,a),{})}:Za(s)?{[`Set(${s.size})`]:[...s.values()]}:Wn(s)&&!un(s)&&!eu(s)?String(s):s,zn={},Ha=[],xs=()=>{},Yk=()=>!1,Xk=/^on[^a-z]/,We=n=>Xk.test(n),sp=n=>n.startsWith("onUpdate:"),ts=Object.assign,ap=(n,s)=>{const a=n.indexOf(s);a>-1&&n.splice(a,1)},Jk=Object.prototype.hasOwnProperty,On=(n,s)=>Jk.call(n,s),un=Array.isArray,Ga=n=>Ye(n)==="[object Map]",Za=n=>Ye(n)==="[object Set]",Gp=n=>Ye(n)==="[object Date]",Sn=n=>typeof n=="function",Hn=n=>typeof n=="string",Oe=n=>typeof n=="symbol",Wn=n=>n!==null&&typeof n=="object",su=n=>Wn(n)&&Sn(n.then)&&Sn(n.catch),au=Object.prototype.toString,Ye=n=>au.call(n),Kk=n=>Ye(n).slice(8,-1),eu=n=>Ye(n)==="[object Object]",ep=n=>Hn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ye=Zi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),io=n=>{const s=Object.create(null);return a=>s[a]||(s[a]=n(a))},Qk=/-(\w)/g,As=io(n=>n.replace(Qk,(s,a)=>a?a.toUpperCase():"")),Zk=/\B([A-Z])/g,$a=io(n=>n.replace(Zk,"-$1").toLowerCase()),po=io(n=>n.charAt(0).toUpperCase()+n.slice(1)),Eo=io(n=>n?`on${po(n)}`:""),Ae=(n,s)=>!Object.is(n,s),It=(n,s)=>{for(let a=0;a<n.length;a++)n[a](s)},Ft=(n,s,a)=>{Object.defineProperty(n,s,{configurable:!0,enumerable:!1,value:a})},Le=n=>{const s=parseFloat(n);return isNaN(s)?n:s};let Vp;const nm=()=>Vp||(Vp=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let us;class sm{constructor(s=!1){this.active=!0,this.effects=[],this.cleanups=[],!s&&us&&(this.parent=us,this.index=(us.scopes||(us.scopes=[])).push(this)-1)}run(s){if(this.active){const a=us;try{return us=this,s()}finally{us=a}}}on(){us=this}off(){us=this.parent}stop(s){if(this.active){let a,e;for(a=0,e=this.effects.length;a<e;a++)this.effects[a].stop();for(a=0,e=this.cleanups.length;a<e;a++)this.cleanups[a]();if(this.scopes)for(a=0,e=this.scopes.length;a<e;a++)this.scopes[a].stop(!0);if(this.parent&&!s){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function am(n,s=us){s&&s.active&&s.effects.push(n)}function tp(){return us}function op(n){us&&us.cleanups.push(n)}const ip=n=>{const s=new Set(n);return s.w=0,s.n=0,s},tu=n=>(n.w&ea)>0,ou=n=>(n.n&ea)>0,em=({deps:n})=>{if(n.length)for(let s=0;s<n.length;s++)n[s].w|=ea},tm=n=>{const{deps:s}=n;if(s.length){let a=0;for(let e=0;e<s.length;e++){const t=s[e];tu(t)&&!ou(t)?t.delete(n):s[a++]=t,t.w&=~ea,t.n&=~ea}s.length=a}},ki=new WeakMap;let ve=0,ea=1;const mi=30;let ws;const wa=Symbol(""),vi=Symbol("");class pp{constructor(s,a=null,e){this.fn=s,this.scheduler=a,this.active=!0,this.deps=[],this.parent=void 0,am(this,e)}run(){if(!this.active)return this.fn();let s=ws,a=sa;for(;s;){if(s===this)return;s=s.parent}try{return this.parent=ws,ws=this,sa=!0,ea=1<<++ve,ve<=mi?em(this):Up(this),this.fn()}finally{ve<=mi&&tm(this),ea=1<<--ve,ws=this.parent,sa=a,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ws===this?this.deferStop=!0:this.active&&(Up(this),this.onStop&&this.onStop(),this.active=!1)}}function Up(n){const{deps:s}=n;if(s.length){for(let a=0;a<s.length;a++)s[a].delete(n);s.length=0}}let sa=!0;const iu=[];function ne(){iu.push(sa),sa=!1}function se(){const n=iu.pop();sa=n===void 0?!0:n}function vs(n,s,a){if(sa&&ws){let e=ki.get(n);e||ki.set(n,e=new Map);let t=e.get(a);t||e.set(a,t=ip()),pu(t)}}function pu(n,s){let a=!1;ve<=mi?ou(n)||(n.n|=ea,a=!tu(n)):a=!n.has(ws),a&&(n.add(ws),ws.deps.push(n))}function Gs(n,s,a,e,t,o){const i=ki.get(n);if(!i)return;let p=[];if(s==="clear")p=[...i.values()];else if(a==="length"&&un(n))i.forEach((l,c)=>{(c==="length"||c>=e)&&p.push(l)});else switch(a!==void 0&&p.push(i.get(a)),s){case"add":un(n)?ep(a)&&p.push(i.get("length")):(p.push(i.get(wa)),Ga(n)&&p.push(i.get(vi)));break;case"delete":un(n)||(p.push(i.get(wa)),Ga(n)&&p.push(i.get(vi)));break;case"set":Ga(n)&&p.push(i.get(wa));break}if(p.length===1)p[0]&&hi(p[0]);else{const l=[];for(const c of p)c&&l.push(...c);hi(ip(l))}}function hi(n,s){const a=un(n)?n:[...n];for(const e of a)e.computed&&qp(e);for(const e of a)e.computed||qp(e)}function qp(n,s){(n!==ws||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const om=Zi("__proto__,__v_isRef,__isVue"),lu=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Oe)),im=lp(),pm=lp(!1,!0),lm=lp(!0),Wp=cm();function cm(){const n={};return["includes","indexOf","lastIndexOf"].forEach(s=>{n[s]=function(...a){const e=Mn(this);for(let o=0,i=this.length;o<i;o++)vs(e,"get",o+"");const t=e[s](...a);return t===-1||t===!1?e[s](...a.map(Mn)):t}}),["push","pop","shift","unshift","splice"].forEach(s=>{n[s]=function(...a){ne();const e=Mn(this)[s].apply(this,a);return se(),e}}),n}function lp(n=!1,s=!1){return function(e,t,o){if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return s;if(t==="__v_raw"&&o===(n?s?$m:ku:s?du:uu).get(e))return e;const i=un(e);if(!n&&i&&On(Wp,t))return Reflect.get(Wp,t,o);const p=Reflect.get(e,t,o);return(Oe(t)?lu.has(t):om(t))||(n||vs(e,"get",t),s)?p:ns(p)?i&&ep(t)?p:p.value:Wn(p)?n?co(p):pa(p):p}}const rm=cu(),um=cu(!0);function cu(n=!1){return function(a,e,t,o){let i=a[e];if(De(i)&&ns(i)&&!ns(t))return!1;if(!n&&!De(t)&&(gi(t)||(t=Mn(t),i=Mn(i)),!un(a)&&ns(i)&&!ns(t)))return i.value=t,!0;const p=un(a)&&ep(e)?Number(e)<a.length:On(a,e),l=Reflect.set(a,e,t,o);return a===Mn(o)&&(p?Ae(t,i)&&Gs(a,"set",e,t):Gs(a,"add",e,t)),l}}function dm(n,s){const a=On(n,s);n[s];const e=Reflect.deleteProperty(n,s);return e&&a&&Gs(n,"delete",s,void 0),e}function km(n,s){const a=Reflect.has(n,s);return(!Oe(s)||!lu.has(s))&&vs(n,"has",s),a}function mm(n){return vs(n,"iterate",un(n)?"length":wa),Reflect.ownKeys(n)}const ru={get:im,set:rm,deleteProperty:dm,has:km,ownKeys:mm},vm={get:lm,set(n,s){return!0},deleteProperty(n,s){return!0}},hm=ts({},ru,{get:pm,set:um}),cp=n=>n,lo=n=>Reflect.getPrototypeOf(n);function pt(n,s,a=!1,e=!1){n=n.__v_raw;const t=Mn(n),o=Mn(s);a||(s!==o&&vs(t,"get",s),vs(t,"get",o));const{has:i}=lo(t),p=e?cp:a?dp:Me;if(i.call(t,s))return p(n.get(s));if(i.call(t,o))return p(n.get(o));n!==t&&n.get(s)}function lt(n,s=!1){const a=this.__v_raw,e=Mn(a),t=Mn(n);return s||(n!==t&&vs(e,"has",n),vs(e,"has",t)),n===t?a.has(n):a.has(n)||a.has(t)}function ct(n,s=!1){return n=n.__v_raw,!s&&vs(Mn(n),"iterate",wa),Reflect.get(n,"size",n)}function Yp(n){n=Mn(n);const s=Mn(this);return lo(s).has.call(s,n)||(s.add(n),Gs(s,"add",n,n)),this}function Xp(n,s){s=Mn(s);const a=Mn(this),{has:e,get:t}=lo(a);let o=e.call(a,n);o||(n=Mn(n),o=e.call(a,n));const i=t.call(a,n);return a.set(n,s),o?Ae(s,i)&&Gs(a,"set",n,s):Gs(a,"add",n,s),this}function Jp(n){const s=Mn(this),{has:a,get:e}=lo(s);let t=a.call(s,n);t||(n=Mn(n),t=a.call(s,n)),e&&e.call(s,n);const o=s.delete(n);return t&&Gs(s,"delete",n,void 0),o}function Kp(){const n=Mn(this),s=n.size!==0,a=n.clear();return s&&Gs(n,"clear",void 0,void 0),a}function rt(n,s){return function(e,t){const o=this,i=o.__v_raw,p=Mn(i),l=s?cp:n?dp:Me;return!n&&vs(p,"iterate",wa),i.forEach((c,r)=>e.call(t,l(c),l(r),o))}}function ut(n,s,a){return function(...e){const t=this.__v_raw,o=Mn(t),i=Ga(o),p=n==="entries"||n===Symbol.iterator&&i,l=n==="keys"&&i,c=t[n](...e),r=a?cp:s?dp:Me;return!s&&vs(o,"iterate",l?vi:wa),{next(){const{value:k,done:d}=c.next();return d?{value:k,done:d}:{value:p?[r(k[0]),r(k[1])]:r(k),done:d}},[Symbol.iterator](){return this}}}}function Ws(n){return function(...s){return n==="delete"?!1:this}}function gm(){const n={get(o){return pt(this,o)},get size(){return ct(this)},has:lt,add:Yp,set:Xp,delete:Jp,clear:Kp,forEach:rt(!1,!1)},s={get(o){return pt(this,o,!1,!0)},get size(){return ct(this)},has:lt,add:Yp,set:Xp,delete:Jp,clear:Kp,forEach:rt(!1,!0)},a={get(o){return pt(this,o,!0)},get size(){return ct(this,!0)},has(o){return lt.call(this,o,!0)},add:Ws("add"),set:Ws("set"),delete:Ws("delete"),clear:Ws("clear"),forEach:rt(!0,!1)},e={get(o){return pt(this,o,!0,!0)},get size(){return ct(this,!0)},has(o){return lt.call(this,o,!0)},add:Ws("add"),set:Ws("set"),delete:Ws("delete"),clear:Ws("clear"),forEach:rt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=ut(o,!1,!1),a[o]=ut(o,!0,!1),s[o]=ut(o,!1,!0),e[o]=ut(o,!0,!0)}),[n,a,s,e]}const[bm,fm,ym,_m]=gm();function rp(n,s){const a=s?n?_m:ym:n?fm:bm;return(e,t,o)=>t==="__v_isReactive"?!n:t==="__v_isReadonly"?n:t==="__v_raw"?e:Reflect.get(On(a,t)&&t in e?a:e,t,o)}const wm={get:rp(!1,!1)},Sm={get:rp(!1,!0)},xm={get:rp(!0,!1)},uu=new WeakMap,du=new WeakMap,ku=new WeakMap,$m=new WeakMap;function Cm(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Em(n){return n.__v_skip||!Object.isExtensible(n)?0:Cm(Kk(n))}function pa(n){return De(n)?n:up(n,!1,ru,wm,uu)}function Tm(n){return up(n,!1,hm,Sm,du)}function co(n){return up(n,!0,vm,xm,ku)}function up(n,s,a,e,t){if(!Wn(n)||n.__v_raw&&!(s&&n.__v_isReactive))return n;const o=t.get(n);if(o)return o;const i=Em(n);if(i===0)return n;const p=new Proxy(n,i===2?e:a);return t.set(n,p),p}function Va(n){return De(n)?Va(n.__v_raw):!!(n&&n.__v_isReactive)}function De(n){return!!(n&&n.__v_isReadonly)}function gi(n){return!!(n&&n.__v_isShallow)}function mu(n){return Va(n)||De(n)}function Mn(n){const s=n&&n.__v_raw;return s?Mn(s):n}function vu(n){return Ft(n,"__v_skip",!0),n}const Me=n=>Wn(n)?pa(n):n,dp=n=>Wn(n)?co(n):n;function hu(n){sa&&ws&&(n=Mn(n),pu(n.dep||(n.dep=ip())))}function gu(n,s){n=Mn(n),n.dep&&hi(n.dep)}function ns(n){return!!(n&&n.__v_isRef===!0)}function an(n){return bu(n,!1)}function kp(n){return bu(n,!0)}function bu(n,s){return ns(n)?n:new Pm(n,s)}class Pm{constructor(s,a){this.__v_isShallow=a,this.dep=void 0,this.__v_isRef=!0,this._rawValue=a?s:Mn(s),this._value=a?s:Me(s)}get value(){return hu(this),this._value}set value(s){s=this.__v_isShallow?s:Mn(s),Ae(s,this._rawValue)&&(this._rawValue=s,this._value=this.__v_isShallow?s:Me(s),gu(this))}}function fn(n){return ns(n)?n.value:n}const Im={get:(n,s,a)=>fn(Reflect.get(n,s,a)),set:(n,s,a,e)=>{const t=n[s];return ns(t)&&!ns(a)?(t.value=a,!0):Reflect.set(n,s,a,e)}};function fu(n){return Va(n)?n:new Proxy(n,Im)}function JS(n){const s=un(n)?new Array(n.length):{};for(const a in n)s[a]=Am(n,a);return s}class Om{constructor(s,a,e){this._object=s,this._key=a,this._defaultValue=e,this.__v_isRef=!0}get value(){const s=this._object[this._key];return s===void 0?this._defaultValue:s}set value(s){this._object[this._key]=s}}function Am(n,s,a){const e=n[s];return ns(e)?e:new Om(n,s,a)}class Lm{constructor(s,a,e,t){this._setter=a,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new pp(s,()=>{this._dirty||(this._dirty=!0,gu(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!t,this.__v_isReadonly=e}get value(){const s=Mn(this);return hu(s),(s._dirty||!s._cacheable)&&(s._dirty=!1,s._value=s.effect.run()),s._value}set value(s){this._setter(s)}}function Dm(n,s,a=!1){let e,t;const o=Sn(n);return o?(e=n,t=xs):(e=n.get,t=n.set),new Lm(e,t,o||!t,a)}function aa(n,s,a,e){let t;try{t=e?n(...e):n()}catch(o){Xe(o,s,a)}return t}function bs(n,s,a,e){if(Sn(n)){const o=aa(n,s,a,e);return o&&su(o)&&o.catch(i=>{Xe(i,s,a)}),o}const t=[];for(let o=0;o<n.length;o++)t.push(bs(n[o],s,a,e));return t}function Xe(n,s,a,e=!0){const t=s?s.vnode:null;if(s){let o=s.parent;const i=s.proxy,p=a;for(;o;){const c=o.ec;if(c){for(let r=0;r<c.length;r++)if(c[r](n,i,p)===!1)return}o=o.parent}const l=s.appContext.config.errorHandler;if(l){aa(l,null,10,[n,i,p]);return}}Mm(n,a,t,e)}function Mm(n,s,a,e=!0){console.error(n)}let Bt=!1,bi=!1;const ds=[];let js=0;const _e=[];let he=null,Ma=0;const we=[];let Ks=null,ja=0;const yu=Promise.resolve();let mp=null,fi=null;function Je(n){const s=mp||yu;return n?s.then(this?n.bind(this):n):s}function jm(n){let s=js+1,a=ds.length;for(;s<a;){const e=s+a>>>1;je(ds[e])<n?s=e+1:a=e}return s}function vp(n){(!ds.length||!ds.includes(n,Bt&&n.allowRecurse?js+1:js))&&n!==fi&&(n.id==null?ds.push(n):ds.splice(jm(n.id),0,n),_u())}function _u(){!Bt&&!bi&&(bi=!0,mp=yu.then(Su))}function Rm(n){const s=ds.indexOf(n);s>js&&ds.splice(s,1)}function wu(n,s,a,e){un(n)?a.push(...n):(!s||!s.includes(n,n.allowRecurse?e+1:e))&&a.push(n),_u()}function Fm(n){wu(n,he,_e,Ma)}function Bm(n){wu(n,Ks,we,ja)}function ro(n,s=null){if(_e.length){for(fi=s,he=[...new Set(_e)],_e.length=0,Ma=0;Ma<he.length;Ma++)he[Ma]();he=null,Ma=0,fi=null,ro(n,s)}}function Nt(n){if(ro(),we.length){const s=[...new Set(we)];if(we.length=0,Ks){Ks.push(...s);return}for(Ks=s,Ks.sort((a,e)=>je(a)-je(e)),ja=0;ja<Ks.length;ja++)Ks[ja]();Ks=null,ja=0}}const je=n=>n.id==null?1/0:n.id;function Su(n){bi=!1,Bt=!0,ro(n),ds.sort((a,e)=>je(a)-je(e));const s=xs;try{for(js=0;js<ds.length;js++){const a=ds[js];a&&a.active!==!1&&aa(a,null,14)}}finally{js=0,ds.length=0,Nt(),Bt=!1,mp=null,(ds.length||_e.length||we.length)&&Su(n)}}function Nm(n,s,...a){if(n.isUnmounted)return;const e=n.vnode.props||zn;let t=a;const o=s.startsWith("update:"),i=o&&s.slice(7);if(i&&i in e){const r=`${i==="modelValue"?"model":i}Modifiers`,{number:k,trim:d}=e[r]||zn;d&&(t=a.map(u=>u.trim())),k&&(t=a.map(Le))}let p,l=e[p=Eo(s)]||e[p=Eo(As(s))];!l&&o&&(l=e[p=Eo($a(s))]),l&&bs(l,n,6,t);const c=e[p+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[p])return;n.emitted[p]=!0,bs(c,n,6,t)}}function xu(n,s,a=!1){const e=s.emitsCache,t=e.get(n);if(t!==void 0)return t;const o=n.emits;let i={},p=!1;if(!Sn(n)){const l=c=>{const r=xu(c,s,!0);r&&(p=!0,ts(i,r))};!a&&s.mixins.length&&s.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!o&&!p?(e.set(n,null),null):(un(o)?o.forEach(l=>i[l]=null):ts(i,o),e.set(n,i),i)}function uo(n,s){return!n||!We(s)?!1:(s=s.slice(2).replace(/Once$/,""),On(n,s[0].toLowerCase()+s.slice(1))||On(n,$a(s))||On(n,s))}let is=null,ko=null;function zt(n){const s=is;return is=n,ko=n&&n.type.__scopeId||null,s}function Ke(n){ko=n}function Qe(){ko=null}function Ba(n,s=is,a){if(!s||n._n)return n;const e=(...t)=>{e._d&&ll(-1);const o=zt(s),i=n(...t);return zt(o),e._d&&ll(1),i};return e._n=!0,e._c=!0,e._d=!0,e}function To(n){const{type:s,vnode:a,proxy:e,withProxy:t,props:o,propsOptions:[i],slots:p,attrs:l,emit:c,render:r,renderCache:k,data:d,setupState:u,ctx:m,inheritAttrs:v}=n;let b,h;const g=zt(n);try{if(a.shapeFlag&4){const y=t||e;b=_s(r.call(y,y,k,o,u,d,m)),h=l}else{const y=s;b=_s(y.length>1?y(o,{attrs:l,slots:p,emit:c}):y(o,null)),h=s.props?l:zm(l)}}catch(y){Se.length=0,Xe(y,n,1),b=En(ms)}let _=b;if(h&&v!==!1){const y=Object.keys(h),{shapeFlag:x}=_;y.length&&x&7&&(i&&y.some(sp)&&(h=Hm(h,i)),_=ta(_,h))}return a.dirs&&(_=ta(_),_.dirs=_.dirs?_.dirs.concat(a.dirs):a.dirs),a.transition&&(_.transition=a.transition),b=_,zt(g),b}const zm=n=>{let s;for(const a in n)(a==="class"||a==="style"||We(a))&&((s||(s={}))[a]=n[a]);return s},Hm=(n,s)=>{const a={};for(const e in n)(!sp(e)||!(e.slice(9)in s))&&(a[e]=n[e]);return a};function Gm(n,s,a){const{props:e,children:t,component:o}=n,{props:i,children:p,patchFlag:l}=s,c=o.emitsOptions;if(s.dirs||s.transition)return!0;if(a&&l>=0){if(l&1024)return!0;if(l&16)return e?Qp(e,i,c):!!i;if(l&8){const r=s.dynamicProps;for(let k=0;k<r.length;k++){const d=r[k];if(i[d]!==e[d]&&!uo(c,d))return!0}}}else return(t||p)&&(!p||!p.$stable)?!0:e===i?!1:e?i?Qp(e,i,c):!0:!!i;return!1}function Qp(n,s,a){const e=Object.keys(s);if(e.length!==Object.keys(n).length)return!0;for(let t=0;t<e.length;t++){const o=e[t];if(s[o]!==n[o]&&!uo(a,o))return!0}return!1}function Vm({vnode:n,parent:s},a){for(;s&&s.subTree===n;)(n=s.vnode).el=a,s=s.parent}const Um=n=>n.__isSuspense;function $u(n,s){s&&s.pendingBranch?un(n)?s.effects.push(...n):s.effects.push(n):Bm(n)}function zs(n,s){if(Zn){let a=Zn.provides;const e=Zn.parent&&Zn.parent.provides;e===a&&(a=Zn.provides=Object.create(e)),a[n]=s}}function Xn(n,s,a=!1){const e=Zn||is;if(e){const t=e.parent==null?e.vnode.appContext&&e.vnode.appContext.provides:e.parent.provides;if(t&&n in t)return t[n];if(arguments.length>1)return a&&Sn(s)?s.call(e.proxy):s}}function qm(n,s){return mo(n,null,s)}function Wm(n,s){return mo(n,null,{flush:"post"})}const Zp={};function Vn(n,s,a){return mo(n,s,a)}function mo(n,s,{immediate:a,deep:e,flush:t,onTrack:o,onTrigger:i}=zn){const p=Zn;let l,c=!1,r=!1;if(ns(n)?(l=()=>n.value,c=gi(n)):Va(n)?(l=()=>n,e=!0):un(n)?(r=!0,c=n.some(h=>Va(h)||gi(h)),l=()=>n.map(h=>{if(ns(h))return h.value;if(Va(h))return _a(h);if(Sn(h))return aa(h,p,2)})):Sn(n)?s?l=()=>aa(n,p,2):l=()=>{if(!(p&&p.isUnmounted))return k&&k(),bs(n,p,3,[d])}:l=xs,s&&e){const h=l;l=()=>_a(h())}let k,d=h=>{k=b.onStop=()=>{aa(h,p,4)}};if(Xa)return d=xs,s?a&&bs(s,p,3,[l(),r?[]:void 0,d]):l(),xs;let u=r?[]:Zp;const m=()=>{if(!!b.active)if(s){const h=b.run();(e||c||(r?h.some((g,_)=>Ae(g,u[_])):Ae(h,u)))&&(k&&k(),bs(s,p,3,[h,u===Zp?void 0:u,d]),u=h)}else b.run()};m.allowRecurse=!!s;let v;t==="sync"?v=m:t==="post"?v=()=>cs(m,p&&p.suspense):v=()=>Fm(m);const b=new pp(l,v);return s?a?m():u=b.run():t==="post"?cs(b.run.bind(b),p&&p.suspense):b.run(),()=>{b.stop(),p&&p.scope&&ap(p.scope.effects,b)}}function Ym(n,s,a){const e=this.proxy,t=Hn(n)?n.includes(".")?Cu(e,n):()=>e[n]:n.bind(e,e);let o;Sn(s)?o=s:(o=s.handler,a=s);const i=Zn;Ya(this);const p=mo(t,o.bind(e),a);return i?Ya(i):Sa(),p}function Cu(n,s){const a=s.split(".");return()=>{let e=n;for(let t=0;t<a.length&&e;t++)e=e[a[t]];return e}}function _a(n,s){if(!Wn(n)||n.__v_skip||(s=s||new Set,s.has(n)))return n;if(s.add(n),ns(n))_a(n.value,s);else if(un(n))for(let a=0;a<n.length;a++)_a(n[a],s);else if(Za(n)||Ga(n))n.forEach(a=>{_a(a,s)});else if(eu(n))for(const a in n)_a(n[a],s);return n}function Xm(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qn(()=>{n.isMounted=!0}),ho(()=>{n.isUnmounting=!0}),n}const hs=[Function,Array],Jm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hs,onEnter:hs,onAfterEnter:hs,onEnterCancelled:hs,onBeforeLeave:hs,onLeave:hs,onAfterLeave:hs,onLeaveCancelled:hs,onBeforeAppear:hs,onAppear:hs,onAfterAppear:hs,onAppearCancelled:hs},setup(n,{slots:s}){const a=bo(),e=Xm();let t;return()=>{const o=s.default&&Pu(s.default(),!0);if(!o||!o.length)return;let i=o[0];if(o.length>1){for(const v of o)if(v.type!==ms){i=v;break}}const p=Mn(n),{mode:l}=p;if(e.isLeaving)return Po(i);const c=nl(i);if(!c)return Po(i);const r=yi(c,p,e,a);_i(c,r);const k=a.subTree,d=k&&nl(k);let u=!1;const{getTransitionKey:m}=c.type;if(m){const v=m();t===void 0?t=v:v!==t&&(t=v,u=!0)}if(d&&d.type!==ms&&(!fa(c,d)||u)){const v=yi(d,p,e,a);if(_i(d,v),l==="out-in")return e.isLeaving=!0,v.afterLeave=()=>{e.isLeaving=!1,a.update()},Po(i);l==="in-out"&&c.type!==ms&&(v.delayLeave=(b,h,g)=>{const _=Tu(e,d);_[String(d.key)]=d,b._leaveCb=()=>{h(),b._leaveCb=void 0,delete r.delayedLeave},r.delayedLeave=g})}return i}}},Eu=Jm;function Tu(n,s){const{leavingVNodes:a}=n;let e=a.get(s.type);return e||(e=Object.create(null),a.set(s.type,e)),e}function yi(n,s,a,e){const{appear:t,mode:o,persisted:i=!1,onBeforeEnter:p,onEnter:l,onAfterEnter:c,onEnterCancelled:r,onBeforeLeave:k,onLeave:d,onAfterLeave:u,onLeaveCancelled:m,onBeforeAppear:v,onAppear:b,onAfterAppear:h,onAppearCancelled:g}=s,_=String(n.key),y=Tu(a,n),x=(w,G)=>{w&&bs(w,e,9,G)},O=(w,G)=>{const U=G[1];x(w,G),un(w)?w.every(D=>D.length<=1)&&U():w.length<=1&&U()},I={mode:o,persisted:i,beforeEnter(w){let G=p;if(!a.isMounted)if(t)G=v||p;else return;w._leaveCb&&w._leaveCb(!0);const U=y[_];U&&fa(n,U)&&U.el._leaveCb&&U.el._leaveCb(),x(G,[w])},enter(w){let G=l,U=c,D=r;if(!a.isMounted)if(t)G=b||l,U=h||c,D=g||r;else return;let C=!1;const E=w._enterCb=A=>{C||(C=!0,A?x(D,[w]):x(U,[w]),I.delayedLeave&&I.delayedLeave(),w._enterCb=void 0)};G?O(G,[w,E]):E()},leave(w,G){const U=String(n.key);if(w._enterCb&&w._enterCb(!0),a.isUnmounting)return G();x(k,[w]);let D=!1;const C=w._leaveCb=E=>{D||(D=!0,G(),E?x(m,[w]):x(u,[w]),w._leaveCb=void 0,y[U]===n&&delete y[U])};y[U]=n,d?O(d,[w,C]):C()},clone(w){return yi(w,s,a,e)}};return I}function Po(n){if(Ze(n))return n=ta(n),n.children=null,n}function nl(n){return Ze(n)?n.children?n.children[0]:void 0:n}function _i(n,s){n.shapeFlag&6&&n.component?_i(n.component.subTree,s):n.shapeFlag&128?(n.ssContent.transition=s.clone(n.ssContent),n.ssFallback.transition=s.clone(n.ssFallback)):n.transition=s}function Pu(n,s=!1,a){let e=[],t=0;for(let o=0;o<n.length;o++){let i=n[o];const p=a==null?i.key:String(a)+String(i.key!=null?i.key:o);i.type===Rn?(i.patchFlag&128&&t++,e=e.concat(Pu(i.children,s,p))):(s||i.type!==ms)&&e.push(p!=null?ta(i,{key:p}):i)}if(t>1)for(let o=0;o<e.length;o++)e[o].patchFlag=-2;return e}function jn(n){return Sn(n)?{setup:n,name:n.name}:n}const Ua=n=>!!n.type.__asyncLoader;function In(n){Sn(n)&&(n={loader:n});const{loader:s,loadingComponent:a,errorComponent:e,delay:t=200,timeout:o,suspensible:i=!0,onError:p}=n;let l=null,c,r=0;const k=()=>(r++,l=null,d()),d=()=>{let u;return l||(u=l=s().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),p)return new Promise((v,b)=>{p(m,()=>v(k()),()=>b(m),r+1)});throw m}).then(m=>u!==l&&l?l:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),c=m,m)))};return jn({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return c},setup(){const u=Zn;if(c)return()=>Io(c,u);const m=g=>{l=null,Xe(g,u,13,!e)};if(i&&u.suspense||Xa)return d().then(g=>()=>Io(g,u)).catch(g=>(m(g),()=>e?En(e,{error:g}):null));const v=an(!1),b=an(),h=an(!!t);return t&&setTimeout(()=>{h.value=!1},t),o!=null&&setTimeout(()=>{if(!v.value&&!b.value){const g=new Error(`Async component timed out after ${o}ms.`);m(g),b.value=g}},o),d().then(()=>{v.value=!0,u.parent&&Ze(u.parent.vnode)&&vp(u.parent.update)}).catch(g=>{m(g),b.value=g}),()=>{if(v.value&&c)return Io(c,u);if(b.value&&e)return En(e,{error:b.value});if(a&&!h.value)return En(a)}}})}function Io(n,{vnode:{ref:s,props:a,children:e,shapeFlag:t},parent:o}){const i=En(n,a,e);return i.ref=s,i}const Ze=n=>n.type.__isKeepAlive;function Km(n,s){Iu(n,"a",s)}function Qm(n,s){Iu(n,"da",s)}function Iu(n,s,a=Zn){const e=n.__wdc||(n.__wdc=()=>{let t=a;for(;t;){if(t.isDeactivated)return;t=t.parent}return n()});if(vo(s,e,a),a){let t=a.parent;for(;t&&t.parent;)Ze(t.parent.vnode)&&Zm(e,s,a,t),t=t.parent}}function Zm(n,s,a,e){const t=vo(s,n,e,!0);nt(()=>{ap(e[s],t)},a)}function vo(n,s,a=Zn,e=!1){if(a){const t=a[n]||(a[n]=[]),o=s.__weh||(s.__weh=(...i)=>{if(a.isUnmounted)return;ne(),Ya(a);const p=bs(s,a,n,i);return Sa(),se(),p});return e?t.unshift(o):t.push(o),o}}const qs=n=>(s,a=Zn)=>(!Xa||n==="sp")&&vo(n,s,a),Ou=qs("bm"),Qn=qs("m"),nv=qs("bu"),sv=qs("u"),ho=qs("bum"),nt=qs("um"),av=qs("sp"),ev=qs("rtg"),tv=qs("rtc");function ov(n,s=Zn){vo("ec",n,s)}function qn(n,s){const a=is;if(a===null)return n;const e=fo(a)||a.proxy,t=n.dirs||(n.dirs=[]);for(let o=0;o<s.length;o++){let[i,p,l,c=zn]=s[o];Sn(i)&&(i={mounted:i,updated:i}),i.deep&&_a(p),t.push({dir:i,instance:e,value:p,oldValue:void 0,arg:l,modifiers:c})}return n}function Ts(n,s,a,e){const t=n.dirs,o=s&&s.dirs;for(let i=0;i<t.length;i++){const p=t[i];o&&(p.oldValue=o[i].value);let l=p.dir[e];l&&(ne(),bs(l,a,8,[n.el,p,n,s]),se())}}const hp="components";function Kn(n,s){return Lu(hp,n,!0,s)||n}const Au=Symbol();function iv(n){return Hn(n)?Lu(hp,n,!1)||n:n||Au}function Lu(n,s,a=!0,e=!1){const t=is||Zn;if(t){const o=t.type;if(n===hp){const p=jv(o,!1);if(p&&(p===s||p===As(s)||p===po(As(s))))return o}const i=sl(t[n]||o[n],s)||sl(t.appContext[n],s);return!i&&e?o:i}}function sl(n,s){return n&&(n[s]||n[As(s)]||n[po(As(s))])}function Ps(n,s,a,e){let t;const o=a&&a[e];if(un(n)||Hn(n)){t=new Array(n.length);for(let i=0,p=n.length;i<p;i++)t[i]=s(n[i],i,void 0,o&&o[i])}else if(typeof n=="number"){t=new Array(n);for(let i=0;i<n;i++)t[i]=s(i+1,i,void 0,o&&o[i])}else if(Wn(n))if(n[Symbol.iterator])t=Array.from(n,(i,p)=>s(i,p,void 0,o&&o[p]));else{const i=Object.keys(n);t=new Array(i.length);for(let p=0,l=i.length;p<l;p++){const c=i[p];t[p]=s(n[c],c,p,o&&o[p])}}else t=[];return a&&(a[e]=t),t}function gp(n,s,a={},e,t){if(is.isCE||is.parent&&Ua(is.parent)&&is.parent.isCE)return En("slot",s==="default"?null:{name:s},e&&e());let o=n[s];o&&o._c&&(o._d=!1),J();const i=o&&Du(o(a)),p=Ls(Rn,{key:a.key||`_${s}`},i||(e?e():[]),i&&n._===1?64:-2);return!t&&p.scopeId&&(p.slotScopeIds=[p.scopeId+"-s"]),o&&o._c&&(o._d=!0),p}function Du(n){return n.some(s=>Ut(s)?!(s.type===ms||s.type===Rn&&!Du(s.children)):!0)?n:null}const wi=n=>n?Wu(n)?fo(n)||n.proxy:wi(n.parent):null,Ht=ts(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>wi(n.parent),$root:n=>wi(n.root),$emit:n=>n.emit,$options:n=>ju(n),$forceUpdate:n=>n.f||(n.f=()=>vp(n.update)),$nextTick:n=>n.n||(n.n=Je.bind(n.proxy)),$watch:n=>Ym.bind(n)}),pv={get({_:n},s){const{ctx:a,setupState:e,data:t,props:o,accessCache:i,type:p,appContext:l}=n;let c;if(s[0]!=="$"){const u=i[s];if(u!==void 0)switch(u){case 1:return e[s];case 2:return t[s];case 4:return a[s];case 3:return o[s]}else{if(e!==zn&&On(e,s))return i[s]=1,e[s];if(t!==zn&&On(t,s))return i[s]=2,t[s];if((c=n.propsOptions[0])&&On(c,s))return i[s]=3,o[s];if(a!==zn&&On(a,s))return i[s]=4,a[s];Si&&(i[s]=0)}}const r=Ht[s];let k,d;if(r)return s==="$attrs"&&vs(n,"get",s),r(n);if((k=p.__cssModules)&&(k=k[s]))return k;if(a!==zn&&On(a,s))return i[s]=4,a[s];if(d=l.config.globalProperties,On(d,s))return d[s]},set({_:n},s,a){const{data:e,setupState:t,ctx:o}=n;return t!==zn&&On(t,s)?(t[s]=a,!0):e!==zn&&On(e,s)?(e[s]=a,!0):On(n.props,s)||s[0]==="$"&&s.slice(1)in n?!1:(o[s]=a,!0)},has({_:{data:n,setupState:s,accessCache:a,ctx:e,appContext:t,propsOptions:o}},i){let p;return!!a[i]||n!==zn&&On(n,i)||s!==zn&&On(s,i)||(p=o[0])&&On(p,i)||On(e,i)||On(Ht,i)||On(t.config.globalProperties,i)},defineProperty(n,s,a){return a.get!=null?n._.accessCache[s]=0:On(a,"value")&&this.set(n,s,a.value,null),Reflect.defineProperty(n,s,a)}};let Si=!0;function lv(n){const s=ju(n),a=n.proxy,e=n.ctx;Si=!1,s.beforeCreate&&al(s.beforeCreate,n,"bc");const{data:t,computed:o,methods:i,watch:p,provide:l,inject:c,created:r,beforeMount:k,mounted:d,beforeUpdate:u,updated:m,activated:v,deactivated:b,beforeDestroy:h,beforeUnmount:g,destroyed:_,unmounted:y,render:x,renderTracked:O,renderTriggered:I,errorCaptured:w,serverPrefetch:G,expose:U,inheritAttrs:D,components:C,directives:E,filters:A}=s;if(c&&cv(c,e,null,n.appContext.config.unwrapInjectedRef),i)for(const q in i){const nn=i[q];Sn(nn)&&(e[q]=nn.bind(a))}if(t){const q=t.call(a,a);Wn(q)&&(n.data=pa(q))}if(Si=!0,o)for(const q in o){const nn=o[q],yn=Sn(nn)?nn.bind(a,a):Sn(nn.get)?nn.get.bind(a,a):xs,N=!Sn(nn)&&Sn(nn.set)?nn.set.bind(a):xs,X=vn({get:yn,set:N});Object.defineProperty(e,q,{enumerable:!0,configurable:!0,get:()=>X.value,set:en=>X.value=en})}if(p)for(const q in p)Mu(p[q],e,a,q);if(l){const q=Sn(l)?l.call(a):l;Reflect.ownKeys(q).forEach(nn=>{zs(nn,q[nn])})}r&&al(r,n,"c");function j(q,nn){un(nn)?nn.forEach(yn=>q(yn.bind(a))):nn&&q(nn.bind(a))}if(j(Ou,k),j(Qn,d),j(nv,u),j(sv,m),j(Km,v),j(Qm,b),j(ov,w),j(tv,O),j(ev,I),j(ho,g),j(nt,y),j(av,G),un(U))if(U.length){const q=n.exposed||(n.exposed={});U.forEach(nn=>{Object.defineProperty(q,nn,{get:()=>a[nn],set:yn=>a[nn]=yn})})}else n.exposed||(n.exposed={});x&&n.render===xs&&(n.render=x),D!=null&&(n.inheritAttrs=D),C&&(n.components=C),E&&(n.directives=E)}function cv(n,s,a=xs,e=!1){un(n)&&(n=xi(n));for(const t in n){const o=n[t];let i;Wn(o)?"default"in o?i=Xn(o.from||t,o.default,!0):i=Xn(o.from||t):i=Xn(o),ns(i)&&e?Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get:()=>i.value,set:p=>i.value=p}):s[t]=i}}function al(n,s,a){bs(un(n)?n.map(e=>e.bind(s.proxy)):n.bind(s.proxy),s,a)}function Mu(n,s,a,e){const t=e.includes(".")?Cu(a,e):()=>a[e];if(Hn(n)){const o=s[n];Sn(o)&&Vn(t,o)}else if(Sn(n))Vn(t,n.bind(a));else if(Wn(n))if(un(n))n.forEach(o=>Mu(o,s,a,e));else{const o=Sn(n.handler)?n.handler.bind(a):s[n.handler];Sn(o)&&Vn(t,o,n)}}function ju(n){const s=n.type,{mixins:a,extends:e}=s,{mixins:t,optionsCache:o,config:{optionMergeStrategies:i}}=n.appContext,p=o.get(s);let l;return p?l=p:!t.length&&!a&&!e?l=s:(l={},t.length&&t.forEach(c=>Gt(l,c,i,!0)),Gt(l,s,i)),o.set(s,l),l}function Gt(n,s,a,e=!1){const{mixins:t,extends:o}=s;o&&Gt(n,o,a,!0),t&&t.forEach(i=>Gt(n,i,a,!0));for(const i in s)if(!(e&&i==="expose")){const p=rv[i]||a&&a[i];n[i]=p?p(n[i],s[i]):s[i]}return n}const rv={data:el,props:va,emits:va,methods:va,computed:va,beforeCreate:ps,created:ps,beforeMount:ps,mounted:ps,beforeUpdate:ps,updated:ps,beforeDestroy:ps,beforeUnmount:ps,destroyed:ps,unmounted:ps,activated:ps,deactivated:ps,errorCaptured:ps,serverPrefetch:ps,components:va,directives:va,watch:dv,provide:el,inject:uv};function el(n,s){return s?n?function(){return ts(Sn(n)?n.call(this,this):n,Sn(s)?s.call(this,this):s)}:s:n}function uv(n,s){return va(xi(n),xi(s))}function xi(n){if(un(n)){const s={};for(let a=0;a<n.length;a++)s[n[a]]=n[a];return s}return n}function ps(n,s){return n?[...new Set([].concat(n,s))]:s}function va(n,s){return n?ts(ts(Object.create(null),n),s):s}function dv(n,s){if(!n)return s;if(!s)return n;const a=ts(Object.create(null),n);for(const e in s)a[e]=ps(n[e],s[e]);return a}function kv(n,s,a,e=!1){const t={},o={};Ft(o,go,1),n.propsDefaults=Object.create(null),Ru(n,s,t,o);for(const i in n.propsOptions[0])i in t||(t[i]=void 0);a?n.props=e?t:Tm(t):n.type.props?n.props=t:n.props=o,n.attrs=o}function mv(n,s,a,e){const{props:t,attrs:o,vnode:{patchFlag:i}}=n,p=Mn(t),[l]=n.propsOptions;let c=!1;if((e||i>0)&&!(i&16)){if(i&8){const r=n.vnode.dynamicProps;for(let k=0;k<r.length;k++){let d=r[k];if(uo(n.emitsOptions,d))continue;const u=s[d];if(l)if(On(o,d))u!==o[d]&&(o[d]=u,c=!0);else{const m=As(d);t[m]=$i(l,p,m,u,n,!1)}else u!==o[d]&&(o[d]=u,c=!0)}}}else{Ru(n,s,t,o)&&(c=!0);let r;for(const k in p)(!s||!On(s,k)&&((r=$a(k))===k||!On(s,r)))&&(l?a&&(a[k]!==void 0||a[r]!==void 0)&&(t[k]=$i(l,p,k,void 0,n,!0)):delete t[k]);if(o!==p)for(const k in o)(!s||!On(s,k)&&!0)&&(delete o[k],c=!0)}c&&Gs(n,"set","$attrs")}function Ru(n,s,a,e){const[t,o]=n.propsOptions;let i=!1,p;if(s)for(let l in s){if(ye(l))continue;const c=s[l];let r;t&&On(t,r=As(l))?!o||!o.includes(r)?a[r]=c:(p||(p={}))[r]=c:uo(n.emitsOptions,l)||(!(l in e)||c!==e[l])&&(e[l]=c,i=!0)}if(o){const l=Mn(a),c=p||zn;for(let r=0;r<o.length;r++){const k=o[r];a[k]=$i(t,l,k,c[k],n,!On(c,k))}}return i}function $i(n,s,a,e,t,o){const i=n[a];if(i!=null){const p=On(i,"default");if(p&&e===void 0){const l=i.default;if(i.type!==Function&&Sn(l)){const{propsDefaults:c}=t;a in c?e=c[a]:(Ya(t),e=c[a]=l.call(null,s),Sa())}else e=l}i[0]&&(o&&!p?e=!1:i[1]&&(e===""||e===$a(a))&&(e=!0))}return e}function Fu(n,s,a=!1){const e=s.propsCache,t=e.get(n);if(t)return t;const o=n.props,i={},p=[];let l=!1;if(!Sn(n)){const r=k=>{l=!0;const[d,u]=Fu(k,s,!0);ts(i,d),u&&p.push(...u)};!a&&s.mixins.length&&s.mixins.forEach(r),n.extends&&r(n.extends),n.mixins&&n.mixins.forEach(r)}if(!o&&!l)return e.set(n,Ha),Ha;if(un(o))for(let r=0;r<o.length;r++){const k=As(o[r]);tl(k)&&(i[k]=zn)}else if(o)for(const r in o){const k=As(r);if(tl(k)){const d=o[r],u=i[k]=un(d)||Sn(d)?{type:d}:d;if(u){const m=pl(Boolean,u.type),v=pl(String,u.type);u[0]=m>-1,u[1]=v<0||m<v,(m>-1||On(u,"default"))&&p.push(k)}}}const c=[i,p];return e.set(n,c),c}function tl(n){return n[0]!=="$"}function ol(n){const s=n&&n.toString().match(/^\s*function (\w+)/);return s?s[1]:n===null?"null":""}function il(n,s){return ol(n)===ol(s)}function pl(n,s){return un(s)?s.findIndex(a=>il(a,n)):Sn(s)&&il(s,n)?0:-1}const Bu=n=>n[0]==="_"||n==="$stable",bp=n=>un(n)?n.map(_s):[_s(n)],vv=(n,s,a)=>{if(s._n)return s;const e=Ba((...t)=>bp(s(...t)),a);return e._c=!1,e},Nu=(n,s,a)=>{const e=n._ctx;for(const t in n){if(Bu(t))continue;const o=n[t];if(Sn(o))s[t]=vv(t,o,e);else if(o!=null){const i=bp(o);s[t]=()=>i}}},zu=(n,s)=>{const a=bp(s);n.slots.default=()=>a},hv=(n,s)=>{if(n.vnode.shapeFlag&32){const a=s._;a?(n.slots=Mn(s),Ft(s,"_",a)):Nu(s,n.slots={})}else n.slots={},s&&zu(n,s);Ft(n.slots,go,1)},gv=(n,s,a)=>{const{vnode:e,slots:t}=n;let o=!0,i=zn;if(e.shapeFlag&32){const p=s._;p?a&&p===1?o=!1:(ts(t,s),!a&&p===1&&delete t._):(o=!s.$stable,Nu(s,t)),i=s}else s&&(zu(n,s),i={default:1});if(o)for(const p in t)!Bu(p)&&!(p in i)&&delete t[p]};function Hu(){return{app:null,config:{isNativeTag:Yk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bv=0;function fv(n,s){return function(e,t=null){Sn(e)||(e=Object.assign({},e)),t!=null&&!Wn(t)&&(t=null);const o=Hu(),i=new Set;let p=!1;const l=o.app={_uid:bv++,_component:e,_props:t,_container:null,_context:o,_instance:null,version:Fv,get config(){return o.config},set config(c){},use(c,...r){return i.has(c)||(c&&Sn(c.install)?(i.add(c),c.install(l,...r)):Sn(c)&&(i.add(c),c(l,...r))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,r){return r?(o.components[c]=r,l):o.components[c]},directive(c,r){return r?(o.directives[c]=r,l):o.directives[c]},mount(c,r,k){if(!p){const d=En(e,t);return d.appContext=o,r&&s?s(d,c):n(d,c,k),p=!0,l._container=c,c.__vue_app__=l,fo(d.component)||d.component.proxy}},unmount(){p&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,r){return o.provides[c]=r,l}};return l}}function Vt(n,s,a,e,t=!1){if(un(n)){n.forEach((d,u)=>Vt(d,s&&(un(s)?s[u]:s),a,e,t));return}if(Ua(e)&&!t)return;const o=e.shapeFlag&4?fo(e.component)||e.component.proxy:e.el,i=t?null:o,{i:p,r:l}=n,c=s&&s.r,r=p.refs===zn?p.refs={}:p.refs,k=p.setupState;if(c!=null&&c!==l&&(Hn(c)?(r[c]=null,On(k,c)&&(k[c]=null)):ns(c)&&(c.value=null)),Sn(l))aa(l,p,12,[i,r]);else{const d=Hn(l),u=ns(l);if(d||u){const m=()=>{if(n.f){const v=d?r[l]:l.value;t?un(v)&&ap(v,o):un(v)?v.includes(o)||v.push(o):d?(r[l]=[o],On(k,l)&&(k[l]=r[l])):(l.value=[o],n.k&&(r[n.k]=l.value))}else d?(r[l]=i,On(k,l)&&(k[l]=i)):u&&(l.value=i,n.k&&(r[n.k]=i))};i?(m.id=-1,cs(m,a)):m()}}}let Ys=!1;const dt=n=>/svg/.test(n.namespaceURI)&&n.tagName!=="foreignObject",kt=n=>n.nodeType===8;function yv(n){const{mt:s,p:a,o:{patchProp:e,createText:t,nextSibling:o,parentNode:i,remove:p,insert:l,createComment:c}}=n,r=(h,g)=>{if(!g.hasChildNodes()){a(null,h,g),Nt(),g._vnode=h;return}Ys=!1,k(g.firstChild,h,null,null,null),Nt(),g._vnode=h,Ys&&console.error("Hydration completed but contains mismatches.")},k=(h,g,_,y,x,O=!1)=>{const I=kt(h)&&h.data==="[",w=()=>v(h,g,_,y,x,I),{type:G,ref:U,shapeFlag:D,patchFlag:C}=g,E=h.nodeType;g.el=h,C===-2&&(O=!1,g.dynamicChildren=null);let A=null;switch(G){case Re:E!==3?g.children===""?(l(g.el=t(""),i(h),h),A=h):A=w():(h.data!==g.children&&(Ys=!0,h.data=g.children),A=o(h));break;case ms:E!==8||I?A=w():A=o(h);break;case qa:if(E!==1&&E!==3)A=w();else{A=h;const M=!g.children.length;for(let j=0;j<g.staticCount;j++)M&&(g.children+=A.nodeType===1?A.outerHTML:A.data),j===g.staticCount-1&&(g.anchor=A),A=o(A);return A}break;case Rn:I?A=m(h,g,_,y,x,O):A=w();break;default:if(D&1)E!==1||g.type.toLowerCase()!==h.tagName.toLowerCase()?A=w():A=d(h,g,_,y,x,O);else if(D&6){g.slotScopeIds=x;const M=i(h);if(s(g,M,null,_,y,dt(M),O),A=I?b(h):o(h),A&&kt(A)&&A.data==="teleport end"&&(A=o(A)),Ua(g)){let j;I?(j=En(Rn),j.anchor=A?A.previousSibling:M.lastChild):j=h.nodeType===3?fs(""):En("div"),j.el=h,g.component.subTree=j}}else D&64?E!==8?A=w():A=g.type.hydrate(h,g,_,y,x,O,n,u):D&128&&(A=g.type.hydrate(h,g,_,y,dt(i(h)),x,O,n,k))}return U!=null&&Vt(U,null,y,g),A},d=(h,g,_,y,x,O)=>{O=O||!!g.dynamicChildren;const{type:I,props:w,patchFlag:G,shapeFlag:U,dirs:D}=g,C=I==="input"&&D||I==="option";if(C||G!==-1){if(D&&Ts(g,null,_,"created"),w)if(C||!O||G&48)for(const A in w)(C&&A.endsWith("value")||We(A)&&!ye(A))&&e(h,A,null,w[A],!1,void 0,_);else w.onClick&&e(h,"onClick",null,w.onClick,!1,void 0,_);let E;if((E=w&&w.onVnodeBeforeMount)&&gs(E,_,g),D&&Ts(g,null,_,"beforeMount"),((E=w&&w.onVnodeMounted)||D)&&$u(()=>{E&&gs(E,_,g),D&&Ts(g,null,_,"mounted")},y),U&16&&!(w&&(w.innerHTML||w.textContent))){let A=u(h.firstChild,g,h,_,y,x,O);for(;A;){Ys=!0;const M=A;A=A.nextSibling,p(M)}}else U&8&&h.textContent!==g.children&&(Ys=!0,h.textContent=g.children)}return h.nextSibling},u=(h,g,_,y,x,O,I)=>{I=I||!!g.dynamicChildren;const w=g.children,G=w.length;for(let U=0;U<G;U++){const D=I?w[U]:w[U]=_s(w[U]);if(h)h=k(h,D,y,x,O,I);else{if(D.type===Re&&!D.children)continue;Ys=!0,a(null,D,_,null,y,x,dt(_),O)}}return h},m=(h,g,_,y,x,O)=>{const{slotScopeIds:I}=g;I&&(x=x?x.concat(I):I);const w=i(h),G=u(o(h),g,w,_,y,x,O);return G&&kt(G)&&G.data==="]"?o(g.anchor=G):(Ys=!0,l(g.anchor=c("]"),w,G),G)},v=(h,g,_,y,x,O)=>{if(Ys=!0,g.el=null,O){const G=b(h);for(;;){const U=o(h);if(U&&U!==G)p(U);else break}}const I=o(h),w=i(h);return p(h),a(null,g,w,I,_,y,dt(w),x),I},b=h=>{let g=0;for(;h;)if(h=o(h),h&&kt(h)&&(h.data==="["&&g++,h.data==="]")){if(g===0)return o(h);g--}return h};return[r,k]}const cs=$u;function _v(n){return wv(n,yv)}function wv(n,s){const a=nm();a.__VUE__=!0;const{insert:e,remove:t,patchProp:o,createElement:i,createText:p,createComment:l,setText:c,setElementText:r,parentNode:k,nextSibling:d,setScopeId:u=xs,cloneNode:m,insertStaticContent:v}=n,b=(f,S,T,L=null,F=null,B=null,Y=!1,H=null,Q=!!S.dynamicChildren)=>{if(f===S)return;f&&!fa(f,S)&&(L=K(f),wn(f,F,B,!0),f=null),S.patchFlag===-2&&(Q=!1,S.dynamicChildren=null);const{type:z,ref:rn,shapeFlag:cn}=S;switch(z){case Re:h(f,S,T,L);break;case ms:g(f,S,T,L);break;case qa:f==null&&_(S,T,L,Y);break;case Rn:E(f,S,T,L,F,B,Y,H,Q);break;default:cn&1?O(f,S,T,L,F,B,Y,H,Q):cn&6?A(f,S,T,L,F,B,Y,H,Q):(cn&64||cn&128)&&z.process(f,S,T,L,F,B,Y,H,Q,$n)}rn!=null&&F&&Vt(rn,f&&f.ref,B,S||f,!S)},h=(f,S,T,L)=>{if(f==null)e(S.el=p(S.children),T,L);else{const F=S.el=f.el;S.children!==f.children&&c(F,S.children)}},g=(f,S,T,L)=>{f==null?e(S.el=l(S.children||""),T,L):S.el=f.el},_=(f,S,T,L)=>{[f.el,f.anchor]=v(f.children,S,T,L,f.el,f.anchor)},y=({el:f,anchor:S},T,L)=>{let F;for(;f&&f!==S;)F=d(f),e(f,T,L),f=F;e(S,T,L)},x=({el:f,anchor:S})=>{let T;for(;f&&f!==S;)T=d(f),t(f),f=T;t(S)},O=(f,S,T,L,F,B,Y,H,Q)=>{Y=Y||S.type==="svg",f==null?I(S,T,L,F,B,Y,H,Q):U(f,S,F,B,Y,H,Q)},I=(f,S,T,L,F,B,Y,H)=>{let Q,z;const{type:rn,props:cn,shapeFlag:on,transition:gn,patchFlag:Cn,dirs:Bn}=f;if(f.el&&m!==void 0&&Cn===-1)Q=f.el=m(f.el);else{if(Q=f.el=i(f.type,B,cn&&cn.is,cn),on&8?r(Q,f.children):on&16&&G(f.children,Q,null,L,F,B&&rn!=="foreignObject",Y,H),Bn&&Ts(f,null,L,"created"),cn){for(const Un in cn)Un!=="value"&&!ye(Un)&&o(Q,Un,null,cn[Un],B,f.children,L,F,R);"value"in cn&&o(Q,"value",null,cn.value),(z=cn.onVnodeBeforeMount)&&gs(z,L,f)}w(Q,f,f.scopeId,Y,L)}Bn&&Ts(f,null,L,"beforeMount");const Nn=(!F||F&&!F.pendingBranch)&&gn&&!gn.persisted;Nn&&gn.beforeEnter(Q),e(Q,S,T),((z=cn&&cn.onVnodeMounted)||Nn||Bn)&&cs(()=>{z&&gs(z,L,f),Nn&&gn.enter(Q),Bn&&Ts(f,null,L,"mounted")},F)},w=(f,S,T,L,F)=>{if(T&&u(f,T),L)for(let B=0;B<L.length;B++)u(f,L[B]);if(F){let B=F.subTree;if(S===B){const Y=F.vnode;w(f,Y,Y.scopeId,Y.slotScopeIds,F.parent)}}},G=(f,S,T,L,F,B,Y,H,Q=0)=>{for(let z=Q;z<f.length;z++){const rn=f[z]=H?Qs(f[z]):_s(f[z]);b(null,rn,S,T,L,F,B,Y,H)}},U=(f,S,T,L,F,B,Y)=>{const H=S.el=f.el;let{patchFlag:Q,dynamicChildren:z,dirs:rn}=S;Q|=f.patchFlag&16;const cn=f.props||zn,on=S.props||zn;let gn;T&&la(T,!1),(gn=on.onVnodeBeforeUpdate)&&gs(gn,T,S,f),rn&&Ts(S,f,T,"beforeUpdate"),T&&la(T,!0);const Cn=F&&S.type!=="foreignObject";if(z?D(f.dynamicChildren,z,H,T,L,Cn,B):Y||yn(f,S,H,null,T,L,Cn,B,!1),Q>0){if(Q&16)C(H,S,cn,on,T,L,F);else if(Q&2&&cn.class!==on.class&&o(H,"class",null,on.class,F),Q&4&&o(H,"style",cn.style,on.style,F),Q&8){const Bn=S.dynamicProps;for(let Nn=0;Nn<Bn.length;Nn++){const Un=Bn[Nn],ys=cn[Un],Ea=on[Un];(Ea!==ys||Un==="value")&&o(H,Un,ys,Ea,F,f.children,T,L,R)}}Q&1&&f.children!==S.children&&r(H,S.children)}else!Y&&z==null&&C(H,S,cn,on,T,L,F);((gn=on.onVnodeUpdated)||rn)&&cs(()=>{gn&&gs(gn,T,S,f),rn&&Ts(S,f,T,"updated")},L)},D=(f,S,T,L,F,B,Y)=>{for(let H=0;H<S.length;H++){const Q=f[H],z=S[H],rn=Q.el&&(Q.type===Rn||!fa(Q,z)||Q.shapeFlag&70)?k(Q.el):T;b(Q,z,rn,null,L,F,B,Y,!0)}},C=(f,S,T,L,F,B,Y)=>{if(T!==L){for(const H in L){if(ye(H))continue;const Q=L[H],z=T[H];Q!==z&&H!=="value"&&o(f,H,z,Q,Y,S.children,F,B,R)}if(T!==zn)for(const H in T)!ye(H)&&!(H in L)&&o(f,H,T[H],null,Y,S.children,F,B,R);"value"in L&&o(f,"value",T.value,L.value)}},E=(f,S,T,L,F,B,Y,H,Q)=>{const z=S.el=f?f.el:p(""),rn=S.anchor=f?f.anchor:p("");let{patchFlag:cn,dynamicChildren:on,slotScopeIds:gn}=S;gn&&(H=H?H.concat(gn):gn),f==null?(e(z,T,L),e(rn,T,L),G(S.children,T,rn,F,B,Y,H,Q)):cn>0&&cn&64&&on&&f.dynamicChildren?(D(f.dynamicChildren,on,T,F,B,Y,H),(S.key!=null||F&&S===F.subTree)&&Gu(f,S,!0)):yn(f,S,T,rn,F,B,Y,H,Q)},A=(f,S,T,L,F,B,Y,H,Q)=>{S.slotScopeIds=H,f==null?S.shapeFlag&512?F.ctx.activate(S,T,L,Y,Q):M(S,T,L,F,B,Y,Q):j(f,S,Q)},M=(f,S,T,L,F,B,Y)=>{const H=f.component=Ov(f,L,F);if(Ze(f)&&(H.ctx.renderer=$n),Av(H),H.asyncDep){if(F&&F.registerDep(H,q),!f.el){const Q=H.subTree=En(ms);g(null,Q,S,T)}return}q(H,f,S,T,F,B,Y)},j=(f,S,T)=>{const L=S.component=f.component;if(Gm(f,S,T))if(L.asyncDep&&!L.asyncResolved){nn(L,S,T);return}else L.next=S,Rm(L.update),L.update();else S.el=f.el,L.vnode=S},q=(f,S,T,L,F,B,Y)=>{const H=()=>{if(f.isMounted){let{next:rn,bu:cn,u:on,parent:gn,vnode:Cn}=f,Bn=rn,Nn;la(f,!1),rn?(rn.el=Cn.el,nn(f,rn,Y)):rn=Cn,cn&&It(cn),(Nn=rn.props&&rn.props.onVnodeBeforeUpdate)&&gs(Nn,gn,rn,Cn),la(f,!0);const Un=To(f),ys=f.subTree;f.subTree=Un,b(ys,Un,k(ys.el),K(ys),f,F,B),rn.el=Un.el,Bn===null&&Vm(f,Un.el),on&&cs(on,F),(Nn=rn.props&&rn.props.onVnodeUpdated)&&cs(()=>gs(Nn,gn,rn,Cn),F)}else{let rn;const{el:cn,props:on}=S,{bm:gn,m:Cn,parent:Bn}=f,Nn=Ua(S);if(la(f,!1),gn&&It(gn),!Nn&&(rn=on&&on.onVnodeBeforeMount)&&gs(rn,Bn,S),la(f,!0),cn&&mn){const Un=()=>{f.subTree=To(f),mn(cn,f.subTree,f,F,null)};Nn?S.type.__asyncLoader().then(()=>!f.isUnmounted&&Un()):Un()}else{const Un=f.subTree=To(f);b(null,Un,T,L,f,F,B),S.el=Un.el}if(Cn&&cs(Cn,F),!Nn&&(rn=on&&on.onVnodeMounted)){const Un=S;cs(()=>gs(rn,Bn,Un),F)}(S.shapeFlag&256||Bn&&Ua(Bn.vnode)&&Bn.vnode.shapeFlag&256)&&f.a&&cs(f.a,F),f.isMounted=!0,S=T=L=null}},Q=f.effect=new pp(H,()=>vp(z),f.scope),z=f.update=()=>Q.run();z.id=f.uid,la(f,!0),z()},nn=(f,S,T)=>{S.component=f;const L=f.vnode.props;f.vnode=S,f.next=null,mv(f,S.props,L,T),gv(f,S.children,T),ne(),ro(void 0,f.update),se()},yn=(f,S,T,L,F,B,Y,H,Q=!1)=>{const z=f&&f.children,rn=f?f.shapeFlag:0,cn=S.children,{patchFlag:on,shapeFlag:gn}=S;if(on>0){if(on&128){X(z,cn,T,L,F,B,Y,H,Q);return}else if(on&256){N(z,cn,T,L,F,B,Y,H,Q);return}}gn&8?(rn&16&&R(z,F,B),cn!==z&&r(T,cn)):rn&16?gn&16?X(z,cn,T,L,F,B,Y,H,Q):R(z,F,B,!0):(rn&8&&r(T,""),gn&16&&G(cn,T,L,F,B,Y,H,Q))},N=(f,S,T,L,F,B,Y,H,Q)=>{f=f||Ha,S=S||Ha;const z=f.length,rn=S.length,cn=Math.min(z,rn);let on;for(on=0;on<cn;on++){const gn=S[on]=Q?Qs(S[on]):_s(S[on]);b(f[on],gn,T,null,F,B,Y,H,Q)}z>rn?R(f,F,B,!0,!1,cn):G(S,T,L,F,B,Y,H,Q,cn)},X=(f,S,T,L,F,B,Y,H,Q)=>{let z=0;const rn=S.length;let cn=f.length-1,on=rn-1;for(;z<=cn&&z<=on;){const gn=f[z],Cn=S[z]=Q?Qs(S[z]):_s(S[z]);if(fa(gn,Cn))b(gn,Cn,T,null,F,B,Y,H,Q);else break;z++}for(;z<=cn&&z<=on;){const gn=f[cn],Cn=S[on]=Q?Qs(S[on]):_s(S[on]);if(fa(gn,Cn))b(gn,Cn,T,null,F,B,Y,H,Q);else break;cn--,on--}if(z>cn){if(z<=on){const gn=on+1,Cn=gn<rn?S[gn].el:L;for(;z<=on;)b(null,S[z]=Q?Qs(S[z]):_s(S[z]),T,Cn,F,B,Y,H,Q),z++}}else if(z>on)for(;z<=cn;)wn(f[z],F,B,!0),z++;else{const gn=z,Cn=z,Bn=new Map;for(z=Cn;z<=on;z++){const rs=S[z]=Q?Qs(S[z]):_s(S[z]);rs.key!=null&&Bn.set(rs.key,z)}let Nn,Un=0;const ys=on-Cn+1;let Ea=!1,Bp=0;const ie=new Array(ys);for(z=0;z<ys;z++)ie[z]=0;for(z=gn;z<=cn;z++){const rs=f[z];if(Un>=ys){wn(rs,F,B,!0);continue}let Es;if(rs.key!=null)Es=Bn.get(rs.key);else for(Nn=Cn;Nn<=on;Nn++)if(ie[Nn-Cn]===0&&fa(rs,S[Nn])){Es=Nn;break}Es===void 0?wn(rs,F,B,!0):(ie[Es-Cn]=z+1,Es>=Bp?Bp=Es:Ea=!0,b(rs,S[Es],T,null,F,B,Y,H,Q),Un++)}const Np=Ea?Sv(ie):Ha;for(Nn=Np.length-1,z=ys-1;z>=0;z--){const rs=Cn+z,Es=S[rs],zp=rs+1<rn?S[rs+1].el:L;ie[z]===0?b(null,Es,T,zp,F,B,Y,H,Q):Ea&&(Nn<0||z!==Np[Nn]?en(Es,T,zp,2):Nn--)}}},en=(f,S,T,L,F=null)=>{const{el:B,type:Y,transition:H,children:Q,shapeFlag:z}=f;if(z&6){en(f.component.subTree,S,T,L);return}if(z&128){f.suspense.move(S,T,L);return}if(z&64){Y.move(f,S,T,$n);return}if(Y===Rn){e(B,S,T);for(let cn=0;cn<Q.length;cn++)en(Q[cn],S,T,L);e(f.anchor,S,T);return}if(Y===qa){y(f,S,T);return}if(L!==2&&z&1&&H)if(L===0)H.beforeEnter(B),e(B,S,T),cs(()=>H.enter(B),F);else{const{leave:cn,delayLeave:on,afterLeave:gn}=H,Cn=()=>e(B,S,T),Bn=()=>{cn(B,()=>{Cn(),gn&&gn()})};on?on(B,Cn,Bn):Bn()}else e(B,S,T)},wn=(f,S,T,L=!1,F=!1)=>{const{type:B,props:Y,ref:H,children:Q,dynamicChildren:z,shapeFlag:rn,patchFlag:cn,dirs:on}=f;if(H!=null&&Vt(H,null,T,f,!0),rn&256){S.ctx.deactivate(f);return}const gn=rn&1&&on,Cn=!Ua(f);let Bn;if(Cn&&(Bn=Y&&Y.onVnodeBeforeUnmount)&&gs(Bn,S,f),rn&6)W(f.component,T,L);else{if(rn&128){f.suspense.unmount(T,L);return}gn&&Ts(f,null,S,"beforeUnmount"),rn&64?f.type.remove(f,S,T,F,$n,L):z&&(B!==Rn||cn>0&&cn&64)?R(z,S,T,!1,!0):(B===Rn&&cn&384||!F&&rn&16)&&R(Q,S,T),L&&xn(f)}(Cn&&(Bn=Y&&Y.onVnodeUnmounted)||gn)&&cs(()=>{Bn&&gs(Bn,S,f),gn&&Ts(f,null,S,"unmounted")},T)},xn=f=>{const{type:S,el:T,anchor:L,transition:F}=f;if(S===Rn){P(T,L);return}if(S===qa){x(f);return}const B=()=>{t(T),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(f.shapeFlag&1&&F&&!F.persisted){const{leave:Y,delayLeave:H}=F,Q=()=>Y(T,B);H?H(f.el,B,Q):Q()}else B()},P=(f,S)=>{let T;for(;f!==S;)T=d(f),t(f),f=T;t(S)},W=(f,S,T)=>{const{bum:L,scope:F,update:B,subTree:Y,um:H}=f;L&&It(L),F.stop(),B&&(B.active=!1,wn(Y,f,S,T)),H&&cs(H,S),cs(()=>{f.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},R=(f,S,T,L=!1,F=!1,B=0)=>{for(let Y=B;Y<f.length;Y++)wn(f[Y],S,T,L,F)},K=f=>f.shapeFlag&6?K(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el),_n=(f,S,T)=>{f==null?S._vnode&&wn(S._vnode,null,null,!0):b(S._vnode||null,f,S,null,null,null,T),Nt(),S._vnode=f},$n={p:b,um:wn,m:en,r:xn,mt:M,mc:G,pc:yn,pbc:D,n:K,o:n};let dn,mn;return s&&([dn,mn]=s($n)),{render:_n,hydrate:dn,createApp:fv(_n,dn)}}function la({effect:n,update:s},a){n.allowRecurse=s.allowRecurse=a}function Gu(n,s,a=!1){const e=n.children,t=s.children;if(un(e)&&un(t))for(let o=0;o<e.length;o++){const i=e[o];let p=t[o];p.shapeFlag&1&&!p.dynamicChildren&&((p.patchFlag<=0||p.patchFlag===32)&&(p=t[o]=Qs(t[o]),p.el=i.el),a||Gu(i,p))}}function Sv(n){const s=n.slice(),a=[0];let e,t,o,i,p;const l=n.length;for(e=0;e<l;e++){const c=n[e];if(c!==0){if(t=a[a.length-1],n[t]<c){s[e]=t,a.push(e);continue}for(o=0,i=a.length-1;o<i;)p=o+i>>1,n[a[p]]<c?o=p+1:i=p;c<n[a[o]]&&(o>0&&(s[e]=a[o-1]),a[o]=e)}}for(o=a.length,i=a[o-1];o-- >0;)a[o]=i,i=s[i];return a}const xv=n=>n.__isTeleport,Rn=Symbol(void 0),Re=Symbol(void 0),ms=Symbol(void 0),qa=Symbol(void 0),Se=[];let Ss=null;function J(n=!1){Se.push(Ss=n?null:[])}function $v(){Se.pop(),Ss=Se[Se.length-1]||null}let Fe=1;function ll(n){Fe+=n}function Vu(n){return n.dynamicChildren=Fe>0?Ss||Ha:null,$v(),Fe>0&&Ss&&Ss.push(n),n}function sn(n,s,a,e,t,o){return Vu(V(n,s,a,e,t,o,!0))}function Ls(n,s,a,e,t){return Vu(En(n,s,a,e,t,!0))}function Ut(n){return n?n.__v_isVNode===!0:!1}function fa(n,s){return n.type===s.type&&n.key===s.key}const go="__vInternal",Uu=({key:n})=>n!=null?n:null,Ot=({ref:n,ref_key:s,ref_for:a})=>n!=null?Hn(n)||ns(n)||Sn(n)?{i:is,r:n,k:s,f:!!a}:n:null;function V(n,s=null,a=null,e=0,t=null,o=n===Rn?0:1,i=!1,p=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:s,key:s&&Uu(s),ref:s&&Ot(s),scopeId:ko,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:e,dynamicProps:t,dynamicChildren:null,appContext:null};return p?(fp(l,a),o&128&&n.normalize(l)):a&&(l.shapeFlag|=Hn(a)?8:16),Fe>0&&!i&&Ss&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Ss.push(l),l}const En=Cv;function Cv(n,s=null,a=null,e=0,t=null,o=!1){if((!n||n===Au)&&(n=ms),Ut(n)){const p=ta(n,s,!0);return a&&fp(p,a),Fe>0&&!o&&Ss&&(p.shapeFlag&6?Ss[Ss.indexOf(n)]=p:Ss.push(p)),p.patchFlag|=-2,p}if(Rv(n)&&(n=n.__vccOpts),s){s=Ev(s);let{class:p,style:l}=s;p&&!Hn(p)&&(s.class=es(p)),Wn(l)&&(mu(l)&&!un(l)&&(l=ts({},l)),s.style=ks(l))}const i=Hn(n)?1:Um(n)?128:xv(n)?64:Wn(n)?4:Sn(n)?2:0;return V(n,s,a,e,t,i,o,!0)}function Ev(n){return n?mu(n)||go in n?ts({},n):n:null}function ta(n,s,a=!1){const{props:e,ref:t,patchFlag:o,children:i}=n,p=s?Tv(e||{},s):e;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:p,key:p&&Uu(p),ref:s&&s.ref?a&&t?un(t)?t.concat(Ot(s)):[t,Ot(s)]:Ot(s):t,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:i,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:s&&n.type!==Rn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ta(n.ssContent),ssFallback:n.ssFallback&&ta(n.ssFallback),el:n.el,anchor:n.anchor}}function fs(n=" ",s=0){return En(Re,null,n,s)}function qu(n,s){const a=En(qa,null,n);return a.staticCount=s,a}function Tn(n="",s=!1){return s?(J(),Ls(ms,null,n)):En(ms,null,n)}function _s(n){return n==null||typeof n=="boolean"?En(ms):un(n)?En(Rn,null,n.slice()):typeof n=="object"?Qs(n):En(Re,null,String(n))}function Qs(n){return n.el===null||n.memo?n:ta(n)}function fp(n,s){let a=0;const{shapeFlag:e}=n;if(s==null)s=null;else if(un(s))a=16;else if(typeof s=="object")if(e&65){const t=s.default;t&&(t._c&&(t._d=!1),fp(n,t()),t._c&&(t._d=!0));return}else{a=32;const t=s._;!t&&!(go in s)?s._ctx=is:t===3&&is&&(is.slots._===1?s._=1:(s._=2,n.patchFlag|=1024))}else Sn(s)?(s={default:s,_ctx:is},a=32):(s=String(s),e&64?(a=16,s=[fs(s)]):a=8);n.children=s,n.shapeFlag|=a}function Tv(...n){const s={};for(let a=0;a<n.length;a++){const e=n[a];for(const t in e)if(t==="class")s.class!==e.class&&(s.class=es([s.class,e.class]));else if(t==="style")s.style=ks([s.style,e.style]);else if(We(t)){const o=s[t],i=e[t];i&&o!==i&&!(un(o)&&o.includes(i))&&(s[t]=o?[].concat(o,i):i)}else t!==""&&(s[t]=e[t])}return s}function gs(n,s,a,e=null){bs(n,s,7,[a,e])}const Pv=Hu();let Iv=0;function Ov(n,s,a){const e=n.type,t=(s?s.appContext:n.appContext)||Pv,o={uid:Iv++,vnode:n,type:e,parent:s,appContext:t,root:null,next:null,subTree:null,effect:null,update:null,scope:new sm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(t.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fu(e,t),emitsOptions:xu(e,t),emit:null,emitted:null,propsDefaults:zn,inheritAttrs:e.inheritAttrs,ctx:zn,data:zn,props:zn,attrs:zn,slots:zn,refs:zn,setupState:zn,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=s?s.root:o,o.emit=Nm.bind(null,o),n.ce&&n.ce(o),o}let Zn=null;const bo=()=>Zn||is,Ya=n=>{Zn=n,n.scope.on()},Sa=()=>{Zn&&Zn.scope.off(),Zn=null};function Wu(n){return n.vnode.shapeFlag&4}let Xa=!1;function Av(n,s=!1){Xa=s;const{props:a,children:e}=n.vnode,t=Wu(n);kv(n,a,t,s),hv(n,e);const o=t?Lv(n,s):void 0;return Xa=!1,o}function Lv(n,s){const a=n.type;n.accessCache=Object.create(null),n.proxy=vu(new Proxy(n.ctx,pv));const{setup:e}=a;if(e){const t=n.setupContext=e.length>1?Mv(n):null;Ya(n),ne();const o=aa(e,n,0,[n.props,t]);if(se(),Sa(),su(o)){if(o.then(Sa,Sa),s)return o.then(i=>{cl(n,i,s)}).catch(i=>{Xe(i,n,0)});n.asyncDep=o}else cl(n,o,s)}else Yu(n,s)}function cl(n,s,a){Sn(s)?n.type.__ssrInlineRender?n.ssrRender=s:n.render=s:Wn(s)&&(n.setupState=fu(s)),Yu(n,a)}let rl;function Yu(n,s,a){const e=n.type;if(!n.render){if(!s&&rl&&!e.render){const t=e.template;if(t){const{isCustomElement:o,compilerOptions:i}=n.appContext.config,{delimiters:p,compilerOptions:l}=e,c=ts(ts({isCustomElement:o,delimiters:p},i),l);e.render=rl(t,c)}}n.render=e.render||xs}Ya(n),ne(),lv(n),se(),Sa()}function Dv(n){return new Proxy(n.attrs,{get(s,a){return vs(n,"get","$attrs"),s[a]}})}function Mv(n){const s=e=>{n.exposed=e||{}};let a;return{get attrs(){return a||(a=Dv(n))},slots:n.slots,emit:n.emit,expose:s}}function fo(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(fu(vu(n.exposed)),{get(s,a){if(a in s)return s[a];if(a in Ht)return Ht[a](n)}}))}function jv(n,s=!0){return Sn(n)?n.displayName||n.name:n.name||s&&n.__name}function Rv(n){return Sn(n)&&"__vccOpts"in n}const vn=(n,s)=>Dm(n,s,Xa);function Z(n,s,a){const e=arguments.length;return e===2?Wn(s)&&!un(s)?Ut(s)?En(n,null,[s]):En(n,s):En(n,null,s):(e>3?a=Array.prototype.slice.call(arguments,2):e===3&&Ut(a)&&(a=[a]),En(n,s,a))}const Fv="3.2.37",Bv="http://www.w3.org/2000/svg",ya=typeof document!="undefined"?document:null,ul=ya&&ya.createElement("template"),Nv={insert:(n,s,a)=>{s.insertBefore(n,a||null)},remove:n=>{const s=n.parentNode;s&&s.removeChild(n)},createElement:(n,s,a,e)=>{const t=s?ya.createElementNS(Bv,n):ya.createElement(n,a?{is:a}:void 0);return n==="select"&&e&&e.multiple!=null&&t.setAttribute("multiple",e.multiple),t},createText:n=>ya.createTextNode(n),createComment:n=>ya.createComment(n),setText:(n,s)=>{n.nodeValue=s},setElementText:(n,s)=>{n.textContent=s},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ya.querySelector(n),setScopeId(n,s){n.setAttribute(s,"")},cloneNode(n){const s=n.cloneNode(!0);return"_value"in n&&(s._value=n._value),s},insertStaticContent(n,s,a,e,t,o){const i=a?a.previousSibling:s.lastChild;if(t&&(t===o||t.nextSibling))for(;s.insertBefore(t.cloneNode(!0),a),!(t===o||!(t=t.nextSibling)););else{ul.innerHTML=e?`<svg>${n}</svg>`:n;const p=ul.content;if(e){const l=p.firstChild;for(;l.firstChild;)p.appendChild(l.firstChild);p.removeChild(l)}s.insertBefore(p,a)}return[i?i.nextSibling:s.firstChild,a?a.previousSibling:s.lastChild]}};function zv(n,s,a){const e=n._vtc;e&&(s=(s?[s,...e]:[...e]).join(" ")),s==null?n.removeAttribute("class"):a?n.setAttribute("class",s):n.className=s}function Hv(n,s,a){const e=n.style,t=Hn(a);if(a&&!t){for(const o in a)Ci(e,o,a[o]);if(s&&!Hn(s))for(const o in s)a[o]==null&&Ci(e,o,"")}else{const o=e.display;t?s!==a&&(e.cssText=a):s&&n.removeAttribute("style"),"_vod"in n&&(e.display=o)}}const dl=/\s*!important$/;function Ci(n,s,a){if(un(a))a.forEach(e=>Ci(n,s,e));else if(a==null&&(a=""),s.startsWith("--"))n.setProperty(s,a);else{const e=Gv(n,s);dl.test(a)?n.setProperty($a(e),a.replace(dl,""),"important"):n[e]=a}}const kl=["Webkit","Moz","ms"],Oo={};function Gv(n,s){const a=Oo[s];if(a)return a;let e=As(s);if(e!=="filter"&&e in n)return Oo[s]=e;e=po(e);for(let t=0;t<kl.length;t++){const o=kl[t]+e;if(o in n)return Oo[s]=o}return s}const ml="http://www.w3.org/1999/xlink";function Vv(n,s,a,e,t){if(e&&s.startsWith("xlink:"))a==null?n.removeAttributeNS(ml,s.slice(6,s.length)):n.setAttributeNS(ml,s,a);else{const o=Gk(s);a==null||o&&!Zr(a)?n.removeAttribute(s):n.setAttribute(s,o?"":a)}}function Uv(n,s,a,e,t,o,i){if(s==="innerHTML"||s==="textContent"){e&&i(e,t,o),n[s]=a==null?"":a;return}if(s==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=a;const l=a==null?"":a;(n.value!==l||n.tagName==="OPTION")&&(n.value=l),a==null&&n.removeAttribute(s);return}let p=!1;if(a===""||a==null){const l=typeof n[s];l==="boolean"?a=Zr(a):a==null&&l==="string"?(a="",p=!0):l==="number"&&(a=0,p=!0)}try{n[s]=a}catch{}p&&n.removeAttribute(s)}const[Xu,qv]=(()=>{let n=Date.now,s=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(n=performance.now.bind(performance));const a=navigator.userAgent.match(/firefox\/(\d+)/i);s=!!(a&&Number(a[1])<=53)}return[n,s]})();let Ei=0;const Wv=Promise.resolve(),Yv=()=>{Ei=0},Xv=()=>Ei||(Wv.then(Yv),Ei=Xu());function Rs(n,s,a,e){n.addEventListener(s,a,e)}function Jv(n,s,a,e){n.removeEventListener(s,a,e)}function Kv(n,s,a,e,t=null){const o=n._vei||(n._vei={}),i=o[s];if(e&&i)i.value=e;else{const[p,l]=Qv(s);if(e){const c=o[s]=Zv(e,t);Rs(n,p,c,l)}else i&&(Jv(n,p,i,l),o[s]=void 0)}}const vl=/(?:Once|Passive|Capture)$/;function Qv(n){let s;if(vl.test(n)){s={};let a;for(;a=n.match(vl);)n=n.slice(0,n.length-a[0].length),s[a[0].toLowerCase()]=!0}return[$a(n.slice(2)),s]}function Zv(n,s){const a=e=>{const t=e.timeStamp||Xu();(qv||t>=a.attached-1)&&bs(nh(e,a.value),s,5,[e])};return a.value=n,a.attached=Xv(),a}function nh(n,s){if(un(s)){const a=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{a.call(n),n._stopped=!0},s.map(e=>t=>!t._stopped&&e&&e(t))}else return s}const hl=/^on[a-z]/,sh=(n,s,a,e,t=!1,o,i,p,l)=>{s==="class"?zv(n,e,t):s==="style"?Hv(n,a,e):We(s)?sp(s)||Kv(n,s,a,e,i):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):ah(n,s,e,t))?Uv(n,s,e,o,i,p,l):(s==="true-value"?n._trueValue=e:s==="false-value"&&(n._falseValue=e),Vv(n,s,e,t))};function ah(n,s,a,e){return e?!!(s==="innerHTML"||s==="textContent"||s in n&&hl.test(s)&&Sn(a)):s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&n.tagName==="INPUT"||s==="type"&&n.tagName==="TEXTAREA"||hl.test(s)&&Hn(a)?!1:s in n}function Ca(n){const s=bo();if(!s)return;const a=()=>Ti(s.subTree,n(s.proxy));Wm(a),Qn(()=>{const e=new MutationObserver(a);e.observe(s.subTree.el.parentNode,{childList:!0}),nt(()=>e.disconnect())})}function Ti(n,s){if(n.shapeFlag&128){const a=n.suspense;n=a.activeBranch,a.pendingBranch&&!a.isHydrating&&a.effects.push(()=>{Ti(a.activeBranch,s)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)gl(n.el,s);else if(n.type===Rn)n.children.forEach(a=>Ti(a,s));else if(n.type===qa){let{el:a,anchor:e}=n;for(;a&&(gl(a,s),a!==e);)a=a.nextSibling}}function gl(n,s){if(n.nodeType===1){const a=n.style;for(const e in s)a.setProperty(`--${e}`,s[e])}}const Xs="transition",pe="animation",st=(n,{slots:s})=>Z(Eu,eh(n),s);st.displayName="Transition";const Ju={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};st.props=ts({},Eu.props,Ju);const ca=(n,s=[])=>{un(n)?n.forEach(a=>a(...s)):n&&n(...s)},bl=n=>n?un(n)?n.some(s=>s.length>1):n.length>1:!1;function eh(n){const s={};for(const C in n)C in Ju||(s[C]=n[C]);if(n.css===!1)return s;const{name:a="v",type:e,duration:t,enterFromClass:o=`${a}-enter-from`,enterActiveClass:i=`${a}-enter-active`,enterToClass:p=`${a}-enter-to`,appearFromClass:l=o,appearActiveClass:c=i,appearToClass:r=p,leaveFromClass:k=`${a}-leave-from`,leaveActiveClass:d=`${a}-leave-active`,leaveToClass:u=`${a}-leave-to`}=n,m=th(t),v=m&&m[0],b=m&&m[1],{onBeforeEnter:h,onEnter:g,onEnterCancelled:_,onLeave:y,onLeaveCancelled:x,onBeforeAppear:O=h,onAppear:I=g,onAppearCancelled:w=_}=s,G=(C,E,A)=>{ra(C,E?r:p),ra(C,E?c:i),A&&A()},U=(C,E)=>{C._isLeaving=!1,ra(C,k),ra(C,u),ra(C,d),E&&E()},D=C=>(E,A)=>{const M=C?I:g,j=()=>G(E,C,A);ca(M,[E,j]),fl(()=>{ra(E,C?l:o),Js(E,C?r:p),bl(M)||yl(E,e,v,j)})};return ts(s,{onBeforeEnter(C){ca(h,[C]),Js(C,o),Js(C,i)},onBeforeAppear(C){ca(O,[C]),Js(C,l),Js(C,c)},onEnter:D(!1),onAppear:D(!0),onLeave(C,E){C._isLeaving=!0;const A=()=>U(C,E);Js(C,k),ph(),Js(C,d),fl(()=>{!C._isLeaving||(ra(C,k),Js(C,u),bl(y)||yl(C,e,b,A))}),ca(y,[C,A])},onEnterCancelled(C){G(C,!1),ca(_,[C])},onAppearCancelled(C){G(C,!0),ca(w,[C])},onLeaveCancelled(C){U(C),ca(x,[C])}})}function th(n){if(n==null)return null;if(Wn(n))return[Ao(n.enter),Ao(n.leave)];{const s=Ao(n);return[s,s]}}function Ao(n){return Le(n)}function Js(n,s){s.split(/\s+/).forEach(a=>a&&n.classList.add(a)),(n._vtc||(n._vtc=new Set)).add(s)}function ra(n,s){s.split(/\s+/).forEach(e=>e&&n.classList.remove(e));const{_vtc:a}=n;a&&(a.delete(s),a.size||(n._vtc=void 0))}function fl(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let oh=0;function yl(n,s,a,e){const t=n._endId=++oh,o=()=>{t===n._endId&&e()};if(a)return setTimeout(o,a);const{type:i,timeout:p,propCount:l}=ih(n,s);if(!i)return e();const c=i+"end";let r=0;const k=()=>{n.removeEventListener(c,d),o()},d=u=>{u.target===n&&++r>=l&&k()};setTimeout(()=>{r<l&&k()},p+1),n.addEventListener(c,d)}function ih(n,s){const a=window.getComputedStyle(n),e=m=>(a[m]||"").split(", "),t=e(Xs+"Delay"),o=e(Xs+"Duration"),i=_l(t,o),p=e(pe+"Delay"),l=e(pe+"Duration"),c=_l(p,l);let r=null,k=0,d=0;s===Xs?i>0&&(r=Xs,k=i,d=o.length):s===pe?c>0&&(r=pe,k=c,d=l.length):(k=Math.max(i,c),r=k>0?i>c?Xs:pe:null,d=r?r===Xs?o.length:l.length:0);const u=r===Xs&&/\b(transform|all)(,|$)/.test(a[Xs+"Property"]);return{type:r,timeout:k,propCount:d,hasTransform:u}}function _l(n,s){for(;n.length<s.length;)n=n.concat(n);return Math.max(...s.map((a,e)=>wl(a)+wl(n[e])))}function wl(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function ph(){return document.body.offsetHeight}const oa=n=>{const s=n.props["onUpdate:modelValue"]||!1;return un(s)?a=>It(s,a):s};function lh(n){n.target.composing=!0}function Sl(n){const s=n.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const Pi={created(n,{modifiers:{lazy:s,trim:a,number:e}},t){n._assign=oa(t);const o=e||t.props&&t.props.type==="number";Rs(n,s?"change":"input",i=>{if(i.target.composing)return;let p=n.value;a&&(p=p.trim()),o&&(p=Le(p)),n._assign(p)}),a&&Rs(n,"change",()=>{n.value=n.value.trim()}),s||(Rs(n,"compositionstart",lh),Rs(n,"compositionend",Sl),Rs(n,"change",Sl))},mounted(n,{value:s}){n.value=s==null?"":s},beforeUpdate(n,{value:s,modifiers:{lazy:a,trim:e,number:t}},o){if(n._assign=oa(o),n.composing||document.activeElement===n&&n.type!=="range"&&(a||e&&n.value.trim()===s||(t||n.type==="number")&&Le(n.value)===s))return;const i=s==null?"":s;n.value!==i&&(n.value=i)}},ch={deep:!0,created(n,s,a){n._assign=oa(a),Rs(n,"change",()=>{const e=n._modelValue,t=Ja(n),o=n.checked,i=n._assign;if(un(e)){const p=np(e,t),l=p!==-1;if(o&&!l)i(e.concat(t));else if(!o&&l){const c=[...e];c.splice(p,1),i(c)}}else if(Za(e)){const p=new Set(e);o?p.add(t):p.delete(t),i(p)}else i(Ku(n,o))})},mounted:xl,beforeUpdate(n,s,a){n._assign=oa(a),xl(n,s,a)}};function xl(n,{value:s,oldValue:a},e){n._modelValue=s,un(s)?n.checked=np(s,e.props.value)>-1:Za(s)?n.checked=s.has(e.props.value):s!==a&&(n.checked=xa(s,Ku(n,!0)))}const rh={created(n,{value:s},a){n.checked=xa(s,a.props.value),n._assign=oa(a),Rs(n,"change",()=>{n._assign(Ja(n))})},beforeUpdate(n,{value:s,oldValue:a},e){n._assign=oa(e),s!==a&&(n.checked=xa(s,e.props.value))}},uh={deep:!0,created(n,{value:s,modifiers:{number:a}},e){const t=Za(s);Rs(n,"change",()=>{const o=Array.prototype.filter.call(n.options,i=>i.selected).map(i=>a?Le(Ja(i)):Ja(i));n._assign(n.multiple?t?new Set(o):o:o[0])}),n._assign=oa(e)},mounted(n,{value:s}){$l(n,s)},beforeUpdate(n,s,a){n._assign=oa(a)},updated(n,{value:s}){$l(n,s)}};function $l(n,s){const a=n.multiple;if(!(a&&!un(s)&&!Za(s))){for(let e=0,t=n.options.length;e<t;e++){const o=n.options[e],i=Ja(o);if(a)un(s)?o.selected=np(s,i)>-1:o.selected=s.has(i);else if(xa(Ja(o),s)){n.selectedIndex!==e&&(n.selectedIndex=e);return}}!a&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Ja(n){return"_value"in n?n._value:n.value}function Ku(n,s){const a=s?"_trueValue":"_falseValue";return a in n?n[a]:s}const dh={created(n,s,a){mt(n,s,a,null,"created")},mounted(n,s,a){mt(n,s,a,null,"mounted")},beforeUpdate(n,s,a,e){mt(n,s,a,e,"beforeUpdate")},updated(n,s,a,e){mt(n,s,a,e,"updated")}};function kh(n,s){switch(n){case"SELECT":return uh;case"TEXTAREA":return Pi;default:switch(s){case"checkbox":return ch;case"radio":return rh;default:return Pi}}}function mt(n,s,a,e,t){const i=kh(n.tagName,a.props&&a.props.type)[t];i&&i(n,s,a,e)}const mh=["ctrl","shift","alt","meta"],vh={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,s)=>mh.some(a=>n[`${a}Key`]&&!s.includes(a))},Cl=(n,s)=>(a,...e)=>{for(let t=0;t<s.length;t++){const o=vh[s[t]];if(o&&o(a,s))return}return n(a,...e)},hh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},KS=(n,s)=>a=>{if(!("key"in a))return;const e=$a(a.key);if(s.some(t=>t===e||hh[t]===e))return n(a)},Jn={beforeMount(n,{value:s},{transition:a}){n._vod=n.style.display==="none"?"":n.style.display,a&&s?a.beforeEnter(n):le(n,s)},mounted(n,{value:s},{transition:a}){a&&s&&a.enter(n)},updated(n,{value:s,oldValue:a},{transition:e}){!s!=!a&&(e?s?(e.beforeEnter(n),le(n,!0),e.enter(n)):e.leave(n,()=>{le(n,!1)}):le(n,s))},beforeUnmount(n,{value:s}){le(n,s)}};function le(n,s){n.style.display=s?n._vod:"none"}const gh=ts({patchProp:sh},Nv);let Lo,El=!1;function bh(){return Lo=El?Lo:_v(gh),El=!0,Lo}const fh=(...n)=>{const s=bh().createApp(...n),{mount:a}=s;return s.mount=e=>{const t=yh(e);if(t)return a(t,!0,t instanceof SVGElement)},s};function yh(n){return Hn(n)?document.querySelector(n):n}const _h=JSON.parse('{"base":"/blog-docs/","lang":"zh-CN","title":"\u5C0F\u7D2B\u5FF5\u6C81","description":"\u8D44\u6599\u6587\u6863\u6C47\u96C6\u7F51\u7AD9","head":[["link",{"rel":"shortcut icon","type":"image/x-icon","href":"/blog-docs/favicon.ico"}],["meta",{"name":"viewport","content":"width=device-width,initial-scale=1,user-scalable=no"}],["link",{"rel":"manifest","href":"/blog-docs/manifest.json"}],["meta",{"name":"theme-color","content":"#3eaf7c"}],["script",{"language":"javascript","type":"text/javascript","src":"/blog-docs/js/jquery.min.js"}],["script",{"language":"javascript","type":"text/javascript","src":"/blog-docs/js/flux.min.js"}]],"locales":{}}');var wh=([n,s,a])=>n==="meta"&&s.name?`${n}.${s.name}`:["title","base"].includes(n)?n:n==="template"&&s.id?`${n}.${s.id}`:JSON.stringify([n,s,a]),Sh=n=>{const s=new Set,a=[];return n.forEach(e=>{const t=wh(e);s.has(t)||(s.add(t),a.push(e))}),a},xh=n=>/^(https?:)?\/\//.test(n),QS=n=>/^mailto:/.test(n),ZS=n=>/^tel:/.test(n),Qu=n=>Object.prototype.toString.call(n)==="[object Object]",$h=n=>n.replace(/\/$/,""),Ch=n=>n.replace(/^\//,""),Zu=(n,s)=>{const a=Object.keys(n).sort((e,t)=>{const o=t.split("/").length-e.split("/").length;return o!==0?o:t.length-e.length});for(const e of a)if(s.startsWith(e))return e;return"/"},Eh=(n,s="/")=>n.replace(/^(https?:)?\/\/[^/]*/,"").replace(new RegExp(`^${s}`),"/");const nd={"v-8daa1a0e":In(()=>ln(()=>import("./index.html.js"),[])),"v-db9b3b8e":In(()=>ln(()=>import("./index.html2.js"),[])),"v-cc63cd18":In(()=>ln(()=>import("./algoliaSearch.html.js"),[])),"v-65bd7028":In(()=>ln(()=>import("./blogDocs.html.js"),[])),"v-9b67abf4":In(()=>ln(()=>import("./firends.html.js"),[])),"v-22a1c62c":In(()=>ln(()=>import("./githubPages.html.js"),[])),"v-57fe6fac":In(()=>ln(()=>import("./hotlinking.html.js"),[])),"v-3ba2686a":In(()=>ln(()=>import("./imageHost.html.js"),[])),"v-a60cbc14":In(()=>ln(()=>import("./internetResource.html.js"),[])),"v-351c6704":In(()=>ln(()=>import("./walineServer.html.js"),[])),"v-3706649a":In(()=>ln(()=>import("./404.html.js"),[])),"v-5bc93818":In(()=>ln(()=>import("./index.html3.js"),[])),"v-744d024e":In(()=>ln(()=>import("./index.html4.js"),[])),"v-e52c881c":In(()=>ln(()=>import("./index.html5.js"),[])),"v-01560935":In(()=>ln(()=>import("./index.html6.js"),[])),"v-5831b135":In(()=>ln(()=>import("./index.html7.js"),[])),"v-05b88e01":In(()=>ln(()=>import("./index.html8.js"),[])),"v-4110d7ce":In(()=>ln(()=>import("./index.html9.js"),[])),"v-1eec4968":In(()=>ln(()=>import("./index.html10.js"),[])),"v-13b66e9c":In(()=>ln(()=>import("./index.html11.js"),[])),"v-3a134560":In(()=>ln(()=>import("./index.html12.js"),[])),"v-9f17d77e":In(()=>ln(()=>import("./index.html13.js"),[])),"v-200bf6bc":In(()=>ln(()=>import("./index.html14.js"),[])),"v-2d060772":In(()=>ln(()=>import("./index.html15.js"),[])),"v-aac522f2":In(()=>ln(()=>import("./index.html16.js"),[])),"v-726261d4":In(()=>ln(()=>import("./index.html17.js"),[])),"v-36b75823":In(()=>ln(()=>import("./index.html18.js"),[]))},Th={404:In(()=>ln(()=>import("./404.js"),[])),Layout:In(()=>ln(()=>import("./Layout.js"),["assets/js/Layout.js","assets/js/Layout2.js"])),Category:In(()=>ln(()=>import("./Category.js"),["assets/js/Category.js","assets/js/Layout2.js"])),Tag:In(()=>ln(()=>import("./Tag.js"),["assets/js/Tag.js","assets/js/Layout2.js"])),Timeline:In(()=>ln(()=>import("./Timeline.js"),["assets/js/Timeline.js","assets/js/Layout2.js"]))};var sd=an(zk),ad=co({key:"",path:"",title:"",lang:"",frontmatter:{},excerpt:"",headers:[]}),Fs=an(ad),ae=()=>Fs;Fp.webpackHot&&(__VUE_HMR_RUNTIME__.updatePageData=n=>{sd.value[n.key]=()=>Promise.resolve(n),n.key===Fs.value.key&&(Fs.value=n)});var ed=Symbol(""),at=()=>{const n=Xn(ed);if(!n)throw new Error("usePageFrontmatter() is called without provider.");return n},td=Symbol(""),Ph=()=>{const n=Xn(td);if(!n)throw new Error("usePageHead() is called without provider.");return n},Ih=Symbol(""),od=Symbol(""),yp=()=>{const n=Xn(od);if(!n)throw new Error("usePageLang() is called without provider.");return n},_p=Symbol(""),yo=()=>{const n=Xn(_p);if(!n)throw new Error("useRouteLocale() is called without provider.");return n},na=an(_h),wp=()=>na;Fp.webpackHot&&(__VUE_HMR_RUNTIME__.updateSiteData=n=>{na.value=n});var id=Symbol(""),nx=()=>{const n=Xn(id);if(!n)throw new Error("useSiteLocaleData() is called without provider.");return n},Oh=Symbol(""),ha=pa({resolvePageData:async n=>{const s=sd.value[n],a=await(s==null?void 0:s());return a!=null?a:ad},resolvePageFrontmatter:n=>n.frontmatter,resolvePageHead:(n,s,a)=>{const e=Hn(s.description)?s.description:a.description,t=[...un(s.head)?s.head:[],...a.head,["title",{},n],["meta",{name:"description",content:e}]];return Sh(t)},resolvePageHeadTitle:(n,s)=>`${n.title?`${n.title} | `:""}${s.title}`,resolvePageLang:n=>n.lang||"en",resolveRouteLocale:(n,s)=>Zu(n,s),resolveSiteLocaleData:(n,s)=>({...n,...n.locales[s]})}),Ah=jn({name:"ClientOnly",setup(n,s){const a=an(!1);return Qn(()=>{a.value=!0}),()=>{var e,t;return a.value?(t=(e=s.slots).default)==null?void 0:t.call(e):null}}}),Lh=jn({name:"Content",props:{pageKey:{type:String,required:!1,default:""}},setup(n){const s=ae(),a=vn(()=>nd[n.pageKey||s.value.key]);return()=>a.value?Z(a.value):Z("div","404 Not Found")}}),Tl=jn({name:"Vuepress",setup(){const n=ae(),s=vn(()=>{let a;if(n.value.path){const e=n.value.frontmatter.layout;Hn(e)?a=e:a="Layout"}else a="404";return Th[a]||Kn(a,!1)});return()=>Z(s.value)}}),qt=n=>xh(n)?n:`${wp().value.base}${Ch(n)}`,Yn=n=>n;function Sp(n,s,a){var e,t,o;s===void 0&&(s=50),a===void 0&&(a={});var i=(e=a.isImmediate)!=null&&e,p=(t=a.callback)!=null&&t,l=a.maxWait,c=Date.now(),r=[];function k(){if(l!==void 0){var u=Date.now()-c;if(u+s>=l)return l-u}return s}var d=function(){var u=[].slice.call(arguments),m=this;return new Promise(function(v,b){var h=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!i){var _=n.apply(m,u);p&&p(_),r.forEach(function(y){return(0,y.resolve)(_)}),r=[]}},k()),h){var g=n.apply(m,u);return p&&p(g),v(g)}r.push({resolve:v,reject:b})})};return d.cancel=function(u){o!==void 0&&clearTimeout(o),r.forEach(function(m){return(0,m.reject)(u)}),r=[]},d}/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ra=typeof window!="undefined";function Dh(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const Fn=Object.assign;function Do(n,s){const a={};for(const e in s){const t=s[e];a[e]=$s(t)?t.map(n):n(t)}return a}const xe=()=>{},$s=Array.isArray,Mh=/\/$/,jh=n=>n.replace(Mh,"");function Mo(n,s,a="/"){let e,t={},o="",i="";const p=s.indexOf("#");let l=s.indexOf("?");return p<l&&p>=0&&(l=-1),l>-1&&(e=s.slice(0,l),o=s.slice(l+1,p>-1?p:s.length),t=n(o)),p>-1&&(e=e||s.slice(0,p),i=s.slice(p,s.length)),e=Nh(e!=null?e:s,a),{fullPath:e+(o&&"?")+o+i,path:e,query:t,hash:i}}function Rh(n,s){const a=s.query?n(s.query):"";return s.path+(a&&"?")+a+(s.hash||"")}function Pl(n,s){return!s||!n.toLowerCase().startsWith(s.toLowerCase())?n:n.slice(s.length)||"/"}function Fh(n,s,a){const e=s.matched.length-1,t=a.matched.length-1;return e>-1&&e===t&&Ka(s.matched[e],a.matched[t])&&pd(s.params,a.params)&&n(s.query)===n(a.query)&&s.hash===a.hash}function Ka(n,s){return(n.aliasOf||n)===(s.aliasOf||s)}function pd(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const a in n)if(!Bh(n[a],s[a]))return!1;return!0}function Bh(n,s){return $s(n)?Il(n,s):$s(s)?Il(s,n):n===s}function Il(n,s){return $s(s)?n.length===s.length&&n.every((a,e)=>a===s[e]):n.length===1&&n[0]===s}function Nh(n,s){if(n.startsWith("/"))return n;if(!n)return s;const a=s.split("/"),e=n.split("/");let t=a.length-1,o,i;for(o=0;o<e.length;o++)if(i=e[o],i!==".")if(i==="..")t>1&&t--;else break;return a.slice(0,t).join("/")+"/"+e.slice(o-(o===e.length?1:0)).join("/")}var Be;(function(n){n.pop="pop",n.push="push"})(Be||(Be={}));var $e;(function(n){n.back="back",n.forward="forward",n.unknown=""})($e||($e={}));function zh(n){if(!n)if(Ra){const s=document.querySelector("base");n=s&&s.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),jh(n)}const Hh=/^[^#]+#/;function Gh(n,s){return n.replace(Hh,"#")+s}function Vh(n,s){const a=document.documentElement.getBoundingClientRect(),e=n.getBoundingClientRect();return{behavior:s.behavior,left:e.left-a.left-(s.left||0),top:e.top-a.top-(s.top||0)}}const _o=()=>({left:window.pageXOffset,top:window.pageYOffset});function Uh(n){let s;if("el"in n){const a=n.el,e=typeof a=="string"&&a.startsWith("#"),t=typeof a=="string"?e?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!t)return;s=Vh(t,n)}else s=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(s):window.scrollTo(s.left!=null?s.left:window.pageXOffset,s.top!=null?s.top:window.pageYOffset)}function Ol(n,s){return(history.state?history.state.position-s:-1)+n}const Ii=new Map;function qh(n,s){Ii.set(n,s)}function Wh(n){const s=Ii.get(n);return Ii.delete(n),s}let Yh=()=>location.protocol+"//"+location.host;function ld(n,s){const{pathname:a,search:e,hash:t}=s,o=n.indexOf("#");if(o>-1){let p=t.includes(n.slice(o))?n.slice(o).length:1,l=t.slice(p);return l[0]!=="/"&&(l="/"+l),Pl(l,"")}return Pl(a,n)+e+t}function Xh(n,s,a,e){let t=[],o=[],i=null;const p=({state:d})=>{const u=ld(n,location),m=a.value,v=s.value;let b=0;if(d){if(a.value=u,s.value=d,i&&i===m){i=null;return}b=v?d.position-v.position:0}else e(u);t.forEach(h=>{h(a.value,m,{delta:b,type:Be.pop,direction:b?b>0?$e.forward:$e.back:$e.unknown})})};function l(){i=a.value}function c(d){t.push(d);const u=()=>{const m=t.indexOf(d);m>-1&&t.splice(m,1)};return o.push(u),u}function r(){const{history:d}=window;!d.state||d.replaceState(Fn({},d.state,{scroll:_o()}),"")}function k(){for(const d of o)d();o=[],window.removeEventListener("popstate",p),window.removeEventListener("beforeunload",r)}return window.addEventListener("popstate",p),window.addEventListener("beforeunload",r),{pauseListeners:l,listen:c,destroy:k}}function Al(n,s,a,e=!1,t=!1){return{back:n,current:s,forward:a,replaced:e,position:window.history.length,scroll:t?_o():null}}function Jh(n){const{history:s,location:a}=window,e={value:ld(n,a)},t={value:s.state};t.value||o(e.value,{back:null,current:e.value,forward:null,position:s.length-1,replaced:!0,scroll:null},!0);function o(l,c,r){const k=n.indexOf("#"),d=k>-1?(a.host&&document.querySelector("base")?n:n.slice(k))+l:Yh()+n+l;try{s[r?"replaceState":"pushState"](c,"",d),t.value=c}catch(u){console.error(u),a[r?"replace":"assign"](d)}}function i(l,c){const r=Fn({},s.state,Al(t.value.back,l,t.value.forward,!0),c,{position:t.value.position});o(l,r,!0),e.value=l}function p(l,c){const r=Fn({},t.value,s.state,{forward:l,scroll:_o()});o(r.current,r,!0);const k=Fn({},Al(e.value,l,null),{position:r.position+1},c);o(l,k,!1),e.value=l}return{location:e,state:t,push:p,replace:i}}function Kh(n){n=zh(n);const s=Jh(n),a=Xh(n,s.state,s.location,s.replace);function e(o,i=!0){i||a.pauseListeners(),history.go(o)}const t=Fn({location:"",base:n,go:e,createHref:Gh.bind(null,n)},s,a);return Object.defineProperty(t,"location",{enumerable:!0,get:()=>s.location.value}),Object.defineProperty(t,"state",{enumerable:!0,get:()=>s.state.value}),t}function Qh(n){return typeof n=="string"||n&&typeof n=="object"}function cd(n){return typeof n=="string"||typeof n=="symbol"}const Ms={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},rd=Symbol("");var Ll;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Ll||(Ll={}));function Qa(n,s){return Fn(new Error,{type:n,[rd]:!0},s)}function Ds(n,s){return n instanceof Error&&rd in n&&(s==null||!!(n.type&s))}const Dl="[^/]+?",Zh={sensitive:!1,strict:!1,start:!0,end:!0},ng=/[.+*?^${}()[\]/\\]/g;function sg(n,s){const a=Fn({},Zh,s),e=[];let t=a.start?"^":"";const o=[];for(const c of n){const r=c.length?[]:[90];a.strict&&!c.length&&(t+="/");for(let k=0;k<c.length;k++){const d=c[k];let u=40+(a.sensitive?.25:0);if(d.type===0)k||(t+="/"),t+=d.value.replace(ng,"\\$&"),u+=40;else if(d.type===1){const{value:m,repeatable:v,optional:b,regexp:h}=d;o.push({name:m,repeatable:v,optional:b});const g=h||Dl;if(g!==Dl){u+=10;try{new RegExp(`(${g})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${m}" (${g}): `+y.message)}}let _=v?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;k||(_=b&&c.length<2?`(?:/${_})`:"/"+_),b&&(_+="?"),t+=_,u+=20,b&&(u+=-8),v&&(u+=-20),g===".*"&&(u+=-50)}r.push(u)}e.push(r)}if(a.strict&&a.end){const c=e.length-1;e[c][e[c].length-1]+=.7000000000000001}a.strict||(t+="/?"),a.end?t+="$":a.strict&&(t+="(?:/|$)");const i=new RegExp(t,a.sensitive?"":"i");function p(c){const r=c.match(i),k={};if(!r)return null;for(let d=1;d<r.length;d++){const u=r[d]||"",m=o[d-1];k[m.name]=u&&m.repeatable?u.split("/"):u}return k}function l(c){let r="",k=!1;for(const d of n){(!k||!r.endsWith("/"))&&(r+="/"),k=!1;for(const u of d)if(u.type===0)r+=u.value;else if(u.type===1){const{value:m,repeatable:v,optional:b}=u,h=m in c?c[m]:"";if($s(h)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const g=$s(h)?h.join("/"):h;if(!g)if(b)d.length<2&&(r.endsWith("/")?r=r.slice(0,-1):k=!0);else throw new Error(`Missing required param "${m}"`);r+=g}}return r||"/"}return{re:i,score:e,keys:o,parse:p,stringify:l}}function ag(n,s){let a=0;for(;a<n.length&&a<s.length;){const e=s[a]-n[a];if(e)return e;a++}return n.length<s.length?n.length===1&&n[0]===40+40?-1:1:n.length>s.length?s.length===1&&s[0]===40+40?1:-1:0}function eg(n,s){let a=0;const e=n.score,t=s.score;for(;a<e.length&&a<t.length;){const o=ag(e[a],t[a]);if(o)return o;a++}if(Math.abs(t.length-e.length)===1){if(Ml(e))return 1;if(Ml(t))return-1}return t.length-e.length}function Ml(n){const s=n[n.length-1];return n.length>0&&s[s.length-1]<0}const tg={type:0,value:""},og=/[a-zA-Z0-9_]/;function ig(n){if(!n)return[[]];if(n==="/")return[[tg]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function s(u){throw new Error(`ERR (${a})/"${c}": ${u}`)}let a=0,e=a;const t=[];let o;function i(){o&&t.push(o),o=[]}let p=0,l,c="",r="";function k(){!c||(a===0?o.push({type:0,value:c}):a===1||a===2||a===3?(o.length>1&&(l==="*"||l==="+")&&s(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:r,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):s("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;p<n.length;){if(l=n[p++],l==="\\"&&a!==2){e=a,a=4;continue}switch(a){case 0:l==="/"?(c&&k(),i()):l===":"?(k(),a=1):d();break;case 4:d(),a=e;break;case 1:l==="("?a=2:og.test(l)?d():(k(),a=0,l!=="*"&&l!=="?"&&l!=="+"&&p--);break;case 2:l===")"?r[r.length-1]=="\\"?r=r.slice(0,-1)+l:a=3:r+=l;break;case 3:k(),a=0,l!=="*"&&l!=="?"&&l!=="+"&&p--,r="";break;default:s("Unknown state");break}}return a===2&&s(`Unfinished custom RegExp for param "${c}"`),k(),i(),t}function pg(n,s,a){const e=sg(ig(n.path),a),t=Fn(e,{record:n,parent:s,children:[],alias:[]});return s&&!t.record.aliasOf==!s.record.aliasOf&&s.children.push(t),t}function lg(n,s){const a=[],e=new Map;s=Fl({strict:!1,end:!0,sensitive:!1},s);function t(r){return e.get(r)}function o(r,k,d){const u=!d,m=cg(r);m.aliasOf=d&&d.record;const v=Fl(s,r),b=[m];if("alias"in r){const _=typeof r.alias=="string"?[r.alias]:r.alias;for(const y of _)b.push(Fn({},m,{components:d?d.record.components:m.components,path:y,aliasOf:d?d.record:m}))}let h,g;for(const _ of b){const{path:y}=_;if(k&&y[0]!=="/"){const x=k.record.path,O=x[x.length-1]==="/"?"":"/";_.path=k.record.path+(y&&O+y)}if(h=pg(_,k,v),d?d.alias.push(h):(g=g||h,g!==h&&g.alias.push(h),u&&r.name&&!Rl(h)&&i(r.name)),m.children){const x=m.children;for(let O=0;O<x.length;O++)o(x[O],h,d&&d.children[O])}d=d||h,l(h)}return g?()=>{i(g)}:xe}function i(r){if(cd(r)){const k=e.get(r);k&&(e.delete(r),a.splice(a.indexOf(k),1),k.children.forEach(i),k.alias.forEach(i))}else{const k=a.indexOf(r);k>-1&&(a.splice(k,1),r.record.name&&e.delete(r.record.name),r.children.forEach(i),r.alias.forEach(i))}}function p(){return a}function l(r){let k=0;for(;k<a.length&&eg(r,a[k])>=0&&(r.record.path!==a[k].record.path||!ud(r,a[k]));)k++;a.splice(k,0,r),r.record.name&&!Rl(r)&&e.set(r.record.name,r)}function c(r,k){let d,u={},m,v;if("name"in r&&r.name){if(d=e.get(r.name),!d)throw Qa(1,{location:r});v=d.record.name,u=Fn(jl(k.params,d.keys.filter(g=>!g.optional).map(g=>g.name)),r.params&&jl(r.params,d.keys.map(g=>g.name))),m=d.stringify(u)}else if("path"in r)m=r.path,d=a.find(g=>g.re.test(m)),d&&(u=d.parse(m),v=d.record.name);else{if(d=k.name?e.get(k.name):a.find(g=>g.re.test(k.path)),!d)throw Qa(1,{location:r,currentLocation:k});v=d.record.name,u=Fn({},k.params,r.params),m=d.stringify(u)}const b=[];let h=d;for(;h;)b.unshift(h.record),h=h.parent;return{name:v,path:m,params:u,matched:b,meta:ug(b)}}return n.forEach(r=>o(r)),{addRoute:o,resolve:c,removeRoute:i,getRoutes:p,getRecordMatcher:t}}function jl(n,s){const a={};for(const e of s)e in n&&(a[e]=n[e]);return a}function cg(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:rg(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function rg(n){const s={},a=n.props||!1;if("component"in n)s.default=a;else for(const e in n.components)s[e]=typeof a=="boolean"?a:a[e];return s}function Rl(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function ug(n){return n.reduce((s,a)=>Fn(s,a.meta),{})}function Fl(n,s){const a={};for(const e in n)a[e]=e in s?s[e]:n[e];return a}function ud(n,s){return s.children.some(a=>a===n||ud(n,a))}const dd=/#/g,dg=/&/g,kg=/\//g,mg=/=/g,vg=/\?/g,kd=/\+/g,hg=/%5B/g,gg=/%5D/g,md=/%5E/g,bg=/%60/g,vd=/%7B/g,fg=/%7C/g,hd=/%7D/g,yg=/%20/g;function xp(n){return encodeURI(""+n).replace(fg,"|").replace(hg,"[").replace(gg,"]")}function _g(n){return xp(n).replace(vd,"{").replace(hd,"}").replace(md,"^")}function Oi(n){return xp(n).replace(kd,"%2B").replace(yg,"+").replace(dd,"%23").replace(dg,"%26").replace(bg,"`").replace(vd,"{").replace(hd,"}").replace(md,"^")}function wg(n){return Oi(n).replace(mg,"%3D")}function Sg(n){return xp(n).replace(dd,"%23").replace(vg,"%3F")}function xg(n){return n==null?"":Sg(n).replace(kg,"%2F")}function Wt(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function $g(n){const s={};if(n===""||n==="?")return s;const e=(n[0]==="?"?n.slice(1):n).split("&");for(let t=0;t<e.length;++t){const o=e[t].replace(kd," "),i=o.indexOf("="),p=Wt(i<0?o:o.slice(0,i)),l=i<0?null:Wt(o.slice(i+1));if(p in s){let c=s[p];$s(c)||(c=s[p]=[c]),c.push(l)}else s[p]=l}return s}function Bl(n){let s="";for(let a in n){const e=n[a];if(a=wg(a),e==null){e!==void 0&&(s+=(s.length?"&":"")+a);continue}($s(e)?e.map(o=>o&&Oi(o)):[e&&Oi(e)]).forEach(o=>{o!==void 0&&(s+=(s.length?"&":"")+a,o!=null&&(s+="="+o))})}return s}function Cg(n){const s={};for(const a in n){const e=n[a];e!==void 0&&(s[a]=$s(e)?e.map(t=>t==null?null:""+t):e==null?e:""+e)}return s}const Eg=Symbol(""),Nl=Symbol(""),wo=Symbol(""),$p=Symbol(""),Ai=Symbol("");function ce(){let n=[];function s(e){return n.push(e),()=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)}}function a(){n=[]}return{add:s,list:()=>n,reset:a}}function Zs(n,s,a,e,t){const o=e&&(e.enterCallbacks[t]=e.enterCallbacks[t]||[]);return()=>new Promise((i,p)=>{const l=k=>{k===!1?p(Qa(4,{from:a,to:s})):k instanceof Error?p(k):Qh(k)?p(Qa(2,{from:s,to:k})):(o&&e.enterCallbacks[t]===o&&typeof k=="function"&&o.push(k),i())},c=n.call(e&&e.instances[t],s,a,l);let r=Promise.resolve(c);n.length<3&&(r=r.then(l)),r.catch(k=>p(k))})}function jo(n,s,a,e){const t=[];for(const o of n)for(const i in o.components){let p=o.components[i];if(!(s!=="beforeRouteEnter"&&!o.instances[i]))if(Tg(p)){const c=(p.__vccOpts||p)[s];c&&t.push(Zs(c,a,e,o,i))}else{let l=p();t.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${o.path}"`));const r=Dh(c)?c.default:c;o.components[i]=r;const d=(r.__vccOpts||r)[s];return d&&Zs(d,a,e,o,i)()}))}}return t}function Tg(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function zl(n){const s=Xn(wo),a=Xn($p),e=vn(()=>s.resolve(fn(n.to))),t=vn(()=>{const{matched:l}=e.value,{length:c}=l,r=l[c-1],k=a.matched;if(!r||!k.length)return-1;const d=k.findIndex(Ka.bind(null,r));if(d>-1)return d;const u=Hl(l[c-2]);return c>1&&Hl(r)===u&&k[k.length-1].path!==u?k.findIndex(Ka.bind(null,l[c-2])):d}),o=vn(()=>t.value>-1&&Ag(a.params,e.value.params)),i=vn(()=>t.value>-1&&t.value===a.matched.length-1&&pd(a.params,e.value.params));function p(l={}){return Og(l)?s[fn(n.replace)?"replace":"push"](fn(n.to)).catch(xe):Promise.resolve()}return{route:e,href:vn(()=>e.value.href),isActive:o,isExactActive:i,navigate:p}}const Pg=jn({name:"RouterLink",compatConfig:{RotateLoading:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:zl,setup(n,{slots:s}){const a=pa(zl(n)),{options:e}=Xn(wo),t=vn(()=>({[Gl(n.activeClass,e.linkActiveClass,"router-link-active")]:a.isActive,[Gl(n.exactActiveClass,e.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const o=s.default&&s.default(a);return n.custom?o:Z("a",{"aria-current":a.isExactActive?n.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:t.value},o)}}}),Ig=Pg;function Og(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const s=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return n.preventDefault&&n.preventDefault(),!0}}function Ag(n,s){for(const a in s){const e=s[a],t=n[a];if(typeof e=="string"){if(e!==t)return!1}else if(!$s(t)||t.length!==e.length||e.some((o,i)=>o!==t[i]))return!1}return!0}function Hl(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Gl=(n,s,a)=>n!=null?n:s!=null?s:a,Lg=jn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{RotateLoading:3},setup(n,{attrs:s,slots:a}){const e=Xn(Ai),t=vn(()=>n.route||e.value),o=Xn(Nl,0),i=vn(()=>{let c=fn(o);const{matched:r}=t.value;let k;for(;(k=r[c])&&!k.components;)c++;return c}),p=vn(()=>t.value.matched[i.value]);zs(Nl,vn(()=>i.value+1)),zs(Eg,p),zs(Ai,t);const l=an();return Vn(()=>[l.value,p.value,n.name],([c,r,k],[d,u,m])=>{r&&(r.instances[k]=c,u&&u!==r&&c&&c===d&&(r.leaveGuards.size||(r.leaveGuards=u.leaveGuards),r.updateGuards.size||(r.updateGuards=u.updateGuards))),c&&r&&(!u||!Ka(r,u)||!d)&&(r.enterCallbacks[k]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=t.value,r=n.name,k=p.value,d=k&&k.components[r];if(!d)return Vl(a.default,{Component:d,route:c});const u=k.props[r],m=u?u===!0?c.params:typeof u=="function"?u(c):u:null,b=Z(d,Fn({},m,s,{onVnodeUnmounted:h=>{h.component.isUnmounted&&(k.instances[r]=null)},ref:l}));return Vl(a.default,{Component:b,route:c})||b}}});function Vl(n,s){if(!n)return null;const a=n(s);return a.length===1?a[0]:a}const gd=Lg;function Dg(n){const s=lg(n.routes,n),a=n.parseQuery||$g,e=n.stringifyQuery||Bl,t=n.history,o=ce(),i=ce(),p=ce(),l=kp(Ms);let c=Ms;Ra&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const r=Do.bind(null,P=>""+P),k=Do.bind(null,xg),d=Do.bind(null,Wt);function u(P,W){let R,K;return cd(P)?(R=s.getRecordMatcher(P),K=W):K=P,s.addRoute(K,R)}function m(P){const W=s.getRecordMatcher(P);W&&s.removeRoute(W)}function v(){return s.getRoutes().map(P=>P.record)}function b(P){return!!s.getRecordMatcher(P)}function h(P,W){if(W=Fn({},W||l.value),typeof P=="string"){const mn=Mo(a,P,W.path),f=s.resolve({path:mn.path},W),S=t.createHref(mn.fullPath);return Fn(mn,f,{params:d(f.params),hash:Wt(mn.hash),redirectedFrom:void 0,href:S})}let R;if("path"in P)R=Fn({},P,{path:Mo(a,P.path,W.path).path});else{const mn=Fn({},P.params);for(const f in mn)mn[f]==null&&delete mn[f];R=Fn({},P,{params:k(P.params)}),W.params=k(W.params)}const K=s.resolve(R,W),_n=P.hash||"";K.params=r(d(K.params));const $n=Rh(e,Fn({},P,{hash:_g(_n),path:K.path})),dn=t.createHref($n);return Fn({fullPath:$n,hash:_n,query:e===Bl?Cg(P.query):P.query||{}},K,{redirectedFrom:void 0,href:dn})}function g(P){return typeof P=="string"?Mo(a,P,l.value.path):Fn({},P)}function _(P,W){if(c!==P)return Qa(8,{from:W,to:P})}function y(P){return I(P)}function x(P){return y(Fn(g(P),{replace:!0}))}function O(P){const W=P.matched[P.matched.length-1];if(W&&W.redirect){const{redirect:R}=W;let K=typeof R=="function"?R(P):R;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=g(K):{path:K},K.params={}),Fn({query:P.query,hash:P.hash,params:"path"in K?{}:P.params},K)}}function I(P,W){const R=c=h(P),K=l.value,_n=P.state,$n=P.force,dn=P.replace===!0,mn=O(R);if(mn)return I(Fn(g(mn),{state:typeof mn=="object"?Fn({},_n,mn.state):_n,force:$n,replace:dn}),W||R);const f=R;f.redirectedFrom=W;let S;return!$n&&Fh(e,K,R)&&(S=Qa(16,{to:f,from:K}),N(K,K,!0,!1)),(S?Promise.resolve(S):G(f,K)).catch(T=>Ds(T)?Ds(T,2)?T:yn(T):q(T,f,K)).then(T=>{if(T){if(Ds(T,2))return I(Fn({replace:dn},g(T.to),{state:typeof T.to=="object"?Fn({},_n,T.to.state):_n,force:$n}),W||f)}else T=D(f,K,!0,dn,_n);return U(f,K,T),T})}function w(P,W){const R=_(P,W);return R?Promise.reject(R):Promise.resolve()}function G(P,W){let R;const[K,_n,$n]=Mg(P,W);R=jo(K.reverse(),"beforeRouteLeave",P,W);for(const mn of K)mn.leaveGuards.forEach(f=>{R.push(Zs(f,P,W))});const dn=w.bind(null,P,W);return R.push(dn),Ta(R).then(()=>{R=[];for(const mn of o.list())R.push(Zs(mn,P,W));return R.push(dn),Ta(R)}).then(()=>{R=jo(_n,"beforeRouteUpdate",P,W);for(const mn of _n)mn.updateGuards.forEach(f=>{R.push(Zs(f,P,W))});return R.push(dn),Ta(R)}).then(()=>{R=[];for(const mn of P.matched)if(mn.beforeEnter&&!W.matched.includes(mn))if($s(mn.beforeEnter))for(const f of mn.beforeEnter)R.push(Zs(f,P,W));else R.push(Zs(mn.beforeEnter,P,W));return R.push(dn),Ta(R)}).then(()=>(P.matched.forEach(mn=>mn.enterCallbacks={}),R=jo($n,"beforeRouteEnter",P,W),R.push(dn),Ta(R))).then(()=>{R=[];for(const mn of i.list())R.push(Zs(mn,P,W));return R.push(dn),Ta(R)}).catch(mn=>Ds(mn,8)?mn:Promise.reject(mn))}function U(P,W,R){for(const K of p.list())K(P,W,R)}function D(P,W,R,K,_n){const $n=_(P,W);if($n)return $n;const dn=W===Ms,mn=Ra?history.state:{};R&&(K||dn?t.replace(P.fullPath,Fn({scroll:dn&&mn&&mn.scroll},_n)):t.push(P.fullPath,_n)),l.value=P,N(P,W,R,dn),yn()}let C;function E(){C||(C=t.listen((P,W,R)=>{if(!xn.listening)return;const K=h(P),_n=O(K);if(_n){I(Fn(_n,{replace:!0}),K).catch(xe);return}c=K;const $n=l.value;Ra&&qh(Ol($n.fullPath,R.delta),_o()),G(K,$n).catch(dn=>Ds(dn,12)?dn:Ds(dn,2)?(I(dn.to,K).then(mn=>{Ds(mn,20)&&!R.delta&&R.type===Be.pop&&t.go(-1,!1)}).catch(xe),Promise.reject()):(R.delta&&t.go(-R.delta,!1),q(dn,K,$n))).then(dn=>{dn=dn||D(K,$n,!1),dn&&(R.delta&&!Ds(dn,8)?t.go(-R.delta,!1):R.type===Be.pop&&Ds(dn,20)&&t.go(-1,!1)),U(K,$n,dn)}).catch(xe)}))}let A=ce(),M=ce(),j;function q(P,W,R){yn(P);const K=M.list();return K.length?K.forEach(_n=>_n(P,W,R)):console.error(P),Promise.reject(P)}function nn(){return j&&l.value!==Ms?Promise.resolve():new Promise((P,W)=>{A.add([P,W])})}function yn(P){return j||(j=!P,E(),A.list().forEach(([W,R])=>P?R(P):W()),A.reset()),P}function N(P,W,R,K){const{scrollBehavior:_n}=n;if(!Ra||!_n)return Promise.resolve();const $n=!R&&Wh(Ol(P.fullPath,0))||(K||!R)&&history.state&&history.state.scroll||null;return Je().then(()=>_n(P,W,$n)).then(dn=>dn&&Uh(dn)).catch(dn=>q(dn,P,W))}const X=P=>t.go(P);let en;const wn=new Set,xn={currentRoute:l,listening:!0,addRoute:u,removeRoute:m,hasRoute:b,getRoutes:v,resolve:h,options:n,push:y,replace:x,go:X,back:()=>X(-1),forward:()=>X(1),beforeEach:o.add,beforeResolve:i.add,afterEach:p.add,onError:M.add,isReady:nn,install(P){const W=this;P.component("RouterLink",Ig),P.component("RouterView",gd),P.config.globalProperties.$router=W,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>fn(l)}),Ra&&!en&&l.value===Ms&&(en=!0,y(t.location).catch(_n=>{}));const R={};for(const _n in Ms)R[_n]=vn(()=>l.value[_n]);P.provide(wo,W),P.provide($p,pa(R)),P.provide(Ai,l);const K=P.unmount;wn.add(P),P.unmount=function(){wn.delete(P),wn.size<1&&(c=Ms,C&&C(),C=null,l.value=Ms,en=!1,j=!1),K()}}};return xn}function Ta(n){return n.reduce((s,a)=>s.then(()=>a()),Promise.resolve())}function Mg(n,s){const a=[],e=[],t=[],o=Math.max(s.matched.length,n.matched.length);for(let i=0;i<o;i++){const p=s.matched[i];p&&(n.matched.find(c=>Ka(c,p))?e.push(p):a.push(p));const l=n.matched[i];l&&(s.matched.find(c=>Ka(c,l))||t.push(l))}return[a,e,t]}function So(){return Xn(wo)}function et(){return Xn($p)}const jg=({headerLinkSelector:n,headerAnchorSelector:s,delay:a,offset:e=5})=>{const t=So(),o=ae(),p=Sp(()=>{var b,h,g,_;const l=Math.max(window.scrollY,document.documentElement.scrollTop,document.body.scrollTop);if(Math.abs(l-0)<e){Ul(t,{hash:"",force:!0});return}const r=window.innerHeight+l,k=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.abs(k-r)<e,u=Array.from(document.querySelectorAll(n)),v=Array.from(document.querySelectorAll(s)).filter(y=>u.some(x=>x.hash===y.hash));for(let y=0;y<v.length;y++){const x=v[y],O=v[y+1],I=l>=((h=(b=x.parentElement)==null?void 0:b.offsetTop)!=null?h:0)-e,w=!O||l<((_=(g=O.parentElement)==null?void 0:g.offsetTop)!=null?_:0)-e;if(!(I&&w))continue;const U=decodeURIComponent(t.currentRoute.value.hash),D=decodeURIComponent(x.hash);if(U===D)return;if(d){for(let C=y+1;C<v.length;C++)if(U===decodeURIComponent(v[C].hash))return}Ul(t,{hash:D,force:!0});return}},a);Qn(()=>{p(),window.addEventListener("scroll",p)}),ho(()=>{window.removeEventListener("scroll",p)}),Vn(()=>o.value.path,p)},Ul=async(n,...s)=>{const{scrollBehavior:a}=n.options;n.options.scrollBehavior=void 0,await n.replace(...s).finally(()=>n.options.scrollBehavior=a)},Rg="a.sidebar-item",Fg=".header-anchor",Bg=300,Ng=5;var zg=Yn({setup(){jg({headerLinkSelector:Rg,headerAnchorSelector:Fg,delay:Bg,offset:Ng})}});const ql=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Hg=()=>window.scrollTo({top:0,behavior:"smooth"});const Gg=jn({name:"BackToTop",setup(){const n=an(0),s=vn(()=>n.value>300),a=Sp(()=>{n.value=ql()},100);Qn(()=>{n.value=ql(),window.addEventListener("scroll",()=>a())});const e=Z("div",{class:"back-to-top",onClick:Hg});return()=>Z(st,{name:"back-to-top"},()=>s.value?e:null)}});var Vg=Yn({rootComponents:[Gg]});const Ug=Z("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[Z("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),Z("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),qg=jn({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(n){const s=yo(),a=vn(()=>{var e;return(e=n.locales[s.value])!=null?e:{openInNewWindow:"open in new window"}});return()=>Z("span",[Ug,Z("span",{class:"external-link-icon-sr-only"},a.value.openInNewWindow)])}}),Wg={"/":{openInNewWindow:"open in new window"}};var Yg=Yn({enhance({app:n}){n.component("ExternalLinkIcon",Z(qg,{locales:Wg}))}});/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */var ga=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},vt=function(s){return s.tagName==="IMG"},Xg=function(s){return NodeList.prototype.isPrototypeOf(s)},At=function(s){return s&&s.nodeType===1},Wl=function(s){var a=s.currentSrc||s.src;return a.substr(-4).toLowerCase()===".svg"},Yl=function(s){try{return Array.isArray(s)?s.filter(vt):Xg(s)?[].slice.call(s).filter(vt):At(s)?[s].filter(vt):typeof s=="string"?[].slice.call(document.querySelectorAll(s)).filter(vt):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},Jg=function(s){var a=document.createElement("div");return a.classList.add("medium-zoom-overlay"),a.style.background=s,a},Kg=function(s){var a=s.getBoundingClientRect(),e=a.top,t=a.left,o=a.width,i=a.height,p=s.cloneNode(),l=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return p.removeAttribute("id"),p.style.position="absolute",p.style.top=e+l+"px",p.style.left=t+c+"px",p.style.width=o+"px",p.style.height=i+"px",p.style.transform="",p},Pa=function(s,a){var e=ga({bubbles:!1,cancelable:!1,detail:void 0},a);if(typeof window.CustomEvent=="function")return new CustomEvent(s,e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(s,e.bubbles,e.cancelable,e.detail),t},Qg=function n(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=window.Promise||function(C){function E(){}C(E,E)},t=function(C){var E=C.target;if(E===G){m();return}_.indexOf(E)!==-1&&v({target:E})},o=function(){if(!(x||!w.original)){var C=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(O-C)>I.scrollOffset&&setTimeout(m,150)}},i=function(C){var E=C.key||C.keyCode;(E==="Escape"||E==="Esc"||E===27)&&m()},p=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=C;if(C.background&&(G.style.background=C.background),C.container&&C.container instanceof Object&&(E.container=ga({},I.container,C.container)),C.template){var A=At(C.template)?C.template:document.querySelector(C.template);E.template=A}return I=ga({},I,E),_.forEach(function(M){M.dispatchEvent(Pa("medium-zoom:update",{detail:{zoom:U}}))}),U},l=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(ga({},I,C))},c=function(){for(var C=arguments.length,E=Array(C),A=0;A<C;A++)E[A]=arguments[A];var M=E.reduce(function(j,q){return[].concat(j,Yl(q))},[]);return M.filter(function(j){return _.indexOf(j)===-1}).forEach(function(j){_.push(j),j.classList.add("medium-zoom-image")}),y.forEach(function(j){var q=j.type,nn=j.listener,yn=j.options;M.forEach(function(N){N.addEventListener(q,nn,yn)})}),U},r=function(){for(var C=arguments.length,E=Array(C),A=0;A<C;A++)E[A]=arguments[A];w.zoomed&&m();var M=E.length>0?E.reduce(function(j,q){return[].concat(j,Yl(q))},[]):_;return M.forEach(function(j){j.classList.remove("medium-zoom-image"),j.dispatchEvent(Pa("medium-zoom:detach",{detail:{zoom:U}}))}),_=_.filter(function(j){return M.indexOf(j)===-1}),U},k=function(C,E){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _.forEach(function(M){M.addEventListener("medium-zoom:"+C,E,A)}),y.push({type:"medium-zoom:"+C,listener:E,options:A}),U},d=function(C,E){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _.forEach(function(M){M.removeEventListener("medium-zoom:"+C,E,A)}),y=y.filter(function(M){return!(M.type==="medium-zoom:"+C&&M.listener.toString()===E.toString())}),U},u=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=C.target,A=function(){var j={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},q=void 0,nn=void 0;if(I.container)if(I.container instanceof Object)j=ga({},j,I.container),q=j.width-j.left-j.right-I.margin*2,nn=j.height-j.top-j.bottom-I.margin*2;else{var yn=At(I.container)?I.container:document.querySelector(I.container),N=yn.getBoundingClientRect(),X=N.width,en=N.height,wn=N.left,xn=N.top;j=ga({},j,{width:X,height:en,left:wn,top:xn})}q=q||j.width-I.margin*2,nn=nn||j.height-I.margin*2;var P=w.zoomedHd||w.original,W=Wl(P)?q:P.naturalWidth||q,R=Wl(P)?nn:P.naturalHeight||nn,K=P.getBoundingClientRect(),_n=K.top,$n=K.left,dn=K.width,mn=K.height,f=Math.min(W,q)/dn,S=Math.min(R,nn)/mn,T=Math.min(f,S),L=(-$n+(q-dn)/2+I.margin+j.left)/T,F=(-_n+(nn-mn)/2+I.margin+j.top)/T,B="scale("+T+") translate3d("+L+"px, "+F+"px, 0)";w.zoomed.style.transform=B,w.zoomedHd&&(w.zoomedHd.style.transform=B)};return new e(function(M){if(E&&_.indexOf(E)===-1){M(U);return}var j=function X(){x=!1,w.zoomed.removeEventListener("transitionend",X),w.original.dispatchEvent(Pa("medium-zoom:opened",{detail:{zoom:U}})),M(U)};if(w.zoomed){M(U);return}if(E)w.original=E;else if(_.length>0){var q=_;w.original=q[0]}else{M(U);return}if(w.original.dispatchEvent(Pa("medium-zoom:open",{detail:{zoom:U}})),O=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,x=!0,w.zoomed=Kg(w.original),document.body.appendChild(G),I.template){var nn=At(I.template)?I.template:document.querySelector(I.template);w.template=document.createElement("div"),w.template.appendChild(nn.content.cloneNode(!0)),document.body.appendChild(w.template)}if(document.body.appendChild(w.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),w.original.classList.add("medium-zoom-image--hidden"),w.zoomed.classList.add("medium-zoom-image--opened"),w.zoomed.addEventListener("click",m),w.zoomed.addEventListener("transitionend",j),w.original.getAttribute("data-zoom-src")){w.zoomedHd=w.zoomed.cloneNode(),w.zoomedHd.removeAttribute("srcset"),w.zoomedHd.removeAttribute("sizes"),w.zoomedHd.src=w.zoomed.getAttribute("data-zoom-src"),w.zoomedHd.onerror=function(){clearInterval(yn),console.warn("Unable to reach the zoom image target "+w.zoomedHd.src),w.zoomedHd=null,A()};var yn=setInterval(function(){w.zoomedHd.complete&&(clearInterval(yn),w.zoomedHd.classList.add("medium-zoom-image--opened"),w.zoomedHd.addEventListener("click",m),document.body.appendChild(w.zoomedHd),A())},10)}else if(w.original.hasAttribute("srcset")){w.zoomedHd=w.zoomed.cloneNode(),w.zoomedHd.removeAttribute("sizes"),w.zoomedHd.removeAttribute("loading");var N=w.zoomedHd.addEventListener("load",function(){w.zoomedHd.removeEventListener("load",N),w.zoomedHd.classList.add("medium-zoom-image--opened"),w.zoomedHd.addEventListener("click",m),document.body.appendChild(w.zoomedHd),A()})}else A()})},m=function(){return new e(function(C){if(x||!w.original){C(U);return}var E=function A(){w.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(w.zoomed),w.zoomedHd&&document.body.removeChild(w.zoomedHd),document.body.removeChild(G),w.zoomed.classList.remove("medium-zoom-image--opened"),w.template&&document.body.removeChild(w.template),x=!1,w.zoomed.removeEventListener("transitionend",A),w.original.dispatchEvent(Pa("medium-zoom:closed",{detail:{zoom:U}})),w.original=null,w.zoomed=null,w.zoomedHd=null,w.template=null,C(U)};x=!0,document.body.classList.remove("medium-zoom--opened"),w.zoomed.style.transform="",w.zoomedHd&&(w.zoomedHd.style.transform=""),w.template&&(w.template.style.transition="opacity 150ms",w.template.style.opacity=0),w.original.dispatchEvent(Pa("medium-zoom:close",{detail:{zoom:U}})),w.zoomed.addEventListener("transitionend",E)})},v=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=C.target;return w.original?m():u({target:E})},b=function(){return I},h=function(){return _},g=function(){return w.original},_=[],y=[],x=!1,O=0,I=a,w={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(s)==="[object Object]"?I=s:(s||typeof s=="string")&&c(s),I=ga({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},I);var G=Jg(I.background);document.addEventListener("click",t),document.addEventListener("keyup",i),document.addEventListener("scroll",o),window.addEventListener("resize",m);var U={open:u,close:m,toggle:v,update:p,clone:l,attach:c,detach:r,on:k,off:d,getOptions:b,getImages:h,getZoomedImage:g};return U};function Zg(n,s){s===void 0&&(s={});var a=s.insertAt;if(!(!n||typeof document=="undefined")){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",a==="top"&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}}var nb=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";Zg(nb);var sb=Qg;const ab=Symbol("mediumZoom");const eb=".theme-default-content > img, .theme-default-content :not(a) > img",tb={},ob=300;var ib=Yn({enhance({app:n,router:s}){const a=sb(tb);a.refresh=(e=eb)=>{a.detach(),a.attach(e)},n.provide(ab,a),s.afterEach(()=>{setTimeout(()=>a.refresh(),ob)})}});/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */const An={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:n=>{const s=An.isStarted();n=Ro(n,An.settings.minimum,1),An.status=n===1?null:n;const a=An.render(!s),e=a.querySelector(An.settings.barSelector),t=An.settings.speed,o=An.settings.easing;return a.offsetWidth,pb(i=>{ht(e,{transform:"translate3d("+Xl(n)+"%,0,0)",transition:"all "+t+"ms "+o}),n===1?(ht(a,{transition:"none",opacity:"1"}),a.offsetWidth,setTimeout(function(){ht(a,{transition:"all "+t+"ms linear",opacity:"0"}),setTimeout(function(){An.remove(),i()},t)},t)):setTimeout(()=>i(),t)}),An},isStarted:()=>typeof An.status=="number",start:()=>{An.status||An.set(0);const n=()=>{setTimeout(()=>{!An.status||(An.trickle(),n())},An.settings.trickleSpeed)};return An.settings.trickle&&n(),An},done:n=>!n&&!An.status?An:An.inc(.3+.5*Math.random()).set(1),inc:n=>{let s=An.status;return s?(typeof n!="number"&&(n=(1-s)*Ro(Math.random()*s,.1,.95)),s=Ro(s+n,0,.994),An.set(s)):An.start()},trickle:()=>An.inc(Math.random()*An.settings.trickleRate),render:n=>{if(An.isRendered())return document.getElementById("nprogress");Jl(document.documentElement,"nprogress-busy");const s=document.createElement("div");s.id="nprogress",s.innerHTML=An.settings.template;const a=s.querySelector(An.settings.barSelector),e=n?"-100":Xl(An.status||0),t=document.querySelector(An.settings.parent);return ht(a,{transition:"all 0 linear",transform:"translate3d("+e+"%,0,0)"}),t!==document.body&&Jl(t,"nprogress-custom-parent"),t==null||t.appendChild(s),s},remove:()=>{Kl(document.documentElement,"nprogress-busy"),Kl(document.querySelector(An.settings.parent),"nprogress-custom-parent");const n=document.getElementById("nprogress");n&&lb(n)},isRendered:()=>!!document.getElementById("nprogress")},Ro=(n,s,a)=>n<s?s:n>a?a:n,Xl=n=>(-1+n)*100,pb=function(){const n=[];function s(){const a=n.shift();a&&a(s)}return function(a){n.push(a),n.length===1&&s()}}(),ht=function(){const n=["Webkit","O","Moz","ms"],s={};function a(i){return i.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(p,l){return l.toUpperCase()})}function e(i){const p=document.body.style;if(i in p)return i;let l=n.length;const c=i.charAt(0).toUpperCase()+i.slice(1);let r;for(;l--;)if(r=n[l]+c,r in p)return r;return i}function t(i){return i=a(i),s[i]||(s[i]=e(i))}function o(i,p,l){p=t(p),i.style[p]=l}return function(i,p){for(const l in p){const c=p[l];c!==void 0&&Object.prototype.hasOwnProperty.call(p,l)&&o(i,l,c)}}}(),bd=(n,s)=>(typeof n=="string"?n:Cp(n)).indexOf(" "+s+" ")>=0,Jl=(n,s)=>{const a=Cp(n),e=a+s;bd(a,s)||(n.className=e.substring(1))},Kl=(n,s)=>{const a=Cp(n);if(!bd(n,s))return;const e=a.replace(" "+s+" "," ");n.className=e.substring(1,e.length-1)},Cp=n=>(" "+(n.className||"")+" ").replace(/\s+/gi," "),lb=n=>{n&&n.parentNode&&n.parentNode.removeChild(n)};const cb=()=>{Qn(()=>{const n=So(),s=new Set;s.add(n.currentRoute.value.path),n.beforeEach(a=>{s.has(a.path)||An.start()}),n.afterEach(a=>{s.add(a.path),An.done()})})};var rb=Yn({setup(){cb()}});const ub=JSON.parse(`{"logo":"/images/logo.png","author":"\u5C0F\u7D2B\u5FF5\u6C81","authorAvatar":"/images/logo.png","repo":"https://github.com/AnyFork/blog-docs","docsDir":"docs","editLinks":true,"editLinkText":"\u5728 GitHub \u4E0A\u7F16\u8F91\u6B64\u9875\uFF01","docsBranch":"main","lastUpdated":true,"lastUpdatedText":"\u4E0A\u6B21\u66F4\u65B0","contributors":true,"contributorsText":"\u8D21\u732E\u8005","socialLinks":[{"icon":"GithubOutlined","link":"https://anyFork.github.io/blog-docs/"},{"icon":"GoogleCircleFilled","link":"https://anyFork.gitee.io/blog-docs/"},{"icon":"CloudOutlined","link":"https://www.anyfork.top"}],"friendLink":[{"title":"vuepress 2.X","link":"https://v2.vuepress.vuejs.org/zh/"},{"title":"vuepress-theme-reco 2.x","link":"http://v2.vuepress-reco.recoluan.com/"},{"title":"TypeScript\u4E2D\u6587\u6587\u6863","link":"https://ts.yayujs.com/"},{"title":"Vite 3.X\u4E2D\u6587\u6587\u6863","link":"https://cn.vitejs.dev/"},{"title":"vuepress-theme-hope 2.x","link":"https://vuepress-theme-hope.github.io/v2/zh/guide/"},{"title":"MarkDown\u529F\u80FD\u589E\u5F3A\u63D2\u4EF6","link":"https://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/#%E4%B8%80%E9%94%AE%E5%90%AF%E7%94%A8%E6%89%80%E6%9C%89%E5%8A%9F%E8%83%BD"}],"colorMode":"auto","sidebarDepth":3,"navbar":[{"text":"\u9996\u9875","link":"/","icon":"HomeOutlined"},{"text":"\u5206\u7C7B","link":"/category/","icon":"AppstoreOutlined"},{"text":"\u6807\u7B7E","link":"/tag/","icon":"TagsOutlined"},{"text":"\u65F6\u95F4\u8F74","link":"/timeline/","icon":"ClockCircleTwotone"},{"text":"Java\u6587\u6863","children":[{"text":"Java\u8BBE\u8BA1\u6A21\u5F0F","link":"/posts/design-pattern/","activeMatch":"/posts/design-pattern/"}]}],"sidebar":{},"locales":{"/":{"selectLanguageName":"English"}},"colorModeSwitch":true,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","editLink":true,"notFound":["There's nothing here.","How did we get here?","That's a Four-Oh-Four.","Looks like we've got some broken links."],"backToHome":"Take me home","openInNewWindow":"open in new window","toggleColorMode":"toggle color mode","toggleSidebar":"toggle sidebar"}`),fd=an(ub),db=()=>fd;Fp.webpackHot&&(__VUE_HMR_RUNTIME__.updateThemeData=n=>{fd.value=n});const yd=Symbol(""),kb=()=>{const n=Xn(yd);if(!n)throw new Error("useThemeLocaleData() is called without provider.");return n},mb=(n,s)=>{var a;return{...n,...(a=n.locales)==null?void 0:a[s]}};var vb=Yn({enhance({app:n}){const s=db(),a=n._context.provides[_p],e=vn(()=>mb(s.value,a.value));n.provide(yd,e),Object.defineProperties(n.config.globalProperties,{$theme:{get(){return s.value}},$themeLocale:{get(){return e.value}}})}}),as=(n,s)=>{const a=n.__vccOpts||n;for(const[e,t]of s)a[e]=t;return a};const hb=jn({__name:"Badge",props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(n){return(s,a)=>(J(),sn("span",{class:es(["badge",n.type]),style:ks({verticalAlign:n.vertical})},[gp(s.$slots,"default",{},()=>[fs(Ln(n.text),1)])],6))}});var gb=as(hb,[["__file","Badge.vue"]]);const bb=jn({name:"CodeGroup",setup(n,{slots:s}){const a=an(-1),e=an([]),t=(p=a.value)=>{p<e.value.length-1?a.value=p+1:a.value=0,e.value[a.value].focus()},o=(p=a.value)=>{p>0?a.value=p-1:a.value=e.value.length-1,e.value[a.value].focus()},i=(p,l)=>{p.key===" "||p.key==="Enter"?(p.preventDefault(),a.value=l):p.key==="ArrowRight"?(p.preventDefault(),t(l)):p.key==="ArrowLeft"&&(p.preventDefault(),o(l))};return()=>{var l;const p=(((l=s.default)==null?void 0:l.call(s))||[]).filter(c=>c.type.name==="CodeGroupItem").map(c=>(c.props===null&&(c.props={}),c));return p.length===0?null:(a.value<0||a.value>p.length-1?(a.value=p.findIndex(c=>c.props.active===""||c.props.active===!0),a.value===-1&&(a.value=0)):p.forEach((c,r)=>{c.props.active=r===a.value}),Z("div",{class:"code-group"},[Z("div",{class:"code-group__nav"},Z("ul",{class:"code-group__ul"},p.map((c,r)=>{const k=r===a.value;return Z("li",{class:"code-group__li"},Z("button",{ref:d=>{d&&(e.value[r]=d)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":k},ariaPressed:k,ariaExpanded:k,onClick:()=>a.value=r,onKeydown:d=>i(d,r)},c.props.title))}))),p]))}}}),fb=["aria-selected"],yb=jn({name:"CodeGroupItem"}),_b=jn({...yb,props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(n){return(s,a)=>(J(),sn("div",{class:es(["code-group-item",{"code-group-item__active":n.active}]),"aria-selected":n.active},[gp(s.$slots,"default")],10,fb))}});var wb=as(_b,[["__file","CodeGroupItem.vue"]]),Ql;const tt=typeof window!="undefined",Sb=n=>typeof n=="string",Fo=()=>{};tt&&((Ql=window==null?void 0:window.navigator)==null?void 0:Ql.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function xb(n,s){function a(...e){n(()=>s.apply(this,e),{fn:s,thisArg:this,args:e})}return a}const _d=n=>n();function $b(n=_d){const s=an(!0);function a(){s.value=!1}function e(){s.value=!0}return{isActive:s,pause:a,resume:e,eventFilter:(...o)=>{s.value&&n(...o)}}}function wd(n){return tp()?(op(n),!0):!1}function Cb(n,s=!0){bo()?Ou(n):s?n():Je(n)}function sx(n=!1,s={}){const{truthyValue:a=!0,falsyValue:e=!1}=s,t=ns(n),o=an(n);function i(p){return arguments.length?(o.value=p,o.value):(o.value=o.value===fn(a)?fn(e):fn(a),o.value)}return t?i:[o,i]}var Zl=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,Tb=Object.prototype.propertyIsEnumerable,Pb=(n,s)=>{var a={};for(var e in n)Eb.call(n,e)&&s.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&Zl)for(var e of Zl(n))s.indexOf(e)<0&&Tb.call(n,e)&&(a[e]=n[e]);return a};function Ib(n,s,a={}){const e=a,{eventFilter:t=_d}=e,o=Pb(e,["eventFilter"]);return Vn(n,xb(t,s),o)}var Ob=Object.defineProperty,Ab=Object.defineProperties,Lb=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,Sd=Object.prototype.hasOwnProperty,xd=Object.prototype.propertyIsEnumerable,nc=(n,s,a)=>s in n?Ob(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a,Db=(n,s)=>{for(var a in s||(s={}))Sd.call(s,a)&&nc(n,a,s[a]);if(Yt)for(var a of Yt(s))xd.call(s,a)&&nc(n,a,s[a]);return n},Mb=(n,s)=>Ab(n,Lb(s)),jb=(n,s)=>{var a={};for(var e in n)Sd.call(n,e)&&s.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&Yt)for(var e of Yt(n))s.indexOf(e)<0&&xd.call(n,e)&&(a[e]=n[e]);return a};function Rb(n,s,a={}){const e=a,{eventFilter:t}=e,o=jb(e,["eventFilter"]),{eventFilter:i,pause:p,resume:l,isActive:c}=$b(t);return{stop:Ib(n,s,Mb(Db({},o),{eventFilter:i})),pause:p,resume:l,isActive:c}}function Fb(n){var s;const a=fn(n);return(s=a==null?void 0:a.$el)!=null?s:a}const Xt=tt?window:void 0;tt&&window.document;tt&&window.navigator;tt&&window.location;function Bb(...n){let s,a,e,t;if(Sb(n[0])?([a,e,t]=n,s=Xt):[s,a,e,t]=n,!s)return Fo;let o=Fo;const i=Vn(()=>Fb(s),l=>{o(),l&&(l.addEventListener(a,e,t),o=()=>{l.removeEventListener(a,e,t),o=Fo})},{immediate:!0,flush:"post"}),p=()=>{i(),o()};return wd(p),p}function Nb(n,s={}){const{window:a=Xt}=s,e=Boolean(a&&"matchMedia"in a&&typeof a.matchMedia=="function");let t;const o=an(!1),i=()=>{!e||(t||(t=a.matchMedia(n)),o.value=t.matches)};return Cb(()=>{i(),t&&("addEventListener"in t?t.addEventListener("change",i):t.addListener(i),wd(()=>{"removeEventListener"in t?t.removeEventListener("change",i):t.removeListener(i)}))}),o}const Li=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Di="__vueuse_ssr_handlers__";Li[Di]=Li[Di]||{};const zb=Li[Di];function Hb(n,s){return zb[n]||s}function Gb(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"||Array.isArray(n)?"object":Number.isNaN(n)?"any":"number"}const Vb={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}};function Ub(n,s,a,e={}){var t;const{flush:o="pre",deep:i=!0,listenToStorageChanges:p=!0,writeDefaults:l=!0,shallow:c,window:r=Xt,eventFilter:k,onError:d=O=>{console.error(O)}}=e,u=(c?kp:an)(s);if(!a)try{a=Hb("getDefaultStorage",()=>{var O;return(O=Xt)==null?void 0:O.localStorage})()}catch(O){d(O)}if(!a)return u;const m=fn(s),v=Gb(m),b=(t=e.serializer)!=null?t:Vb[v],{pause:h,resume:g}=Rb(u,()=>_(u.value),{flush:o,deep:i,eventFilter:k});return r&&p&&Bb(r,"storage",x),x(),u;function _(O){try{O==null?a.removeItem(n):a.setItem(n,b.write(O))}catch(I){d(I)}}function y(O){if(!(O&&O.key!==n)){h();try{const I=O?O.newValue:a.getItem(n);return I==null?(l&&m!==null&&a.setItem(n,b.write(m)),m):typeof I!="string"?I:b.read(I)}catch(I){d(I)}finally{g()}}}function x(O){O&&O.key!==n||(u.value=y(O))}}function qb(n){return Nb("(prefers-color-scheme: dark)",n)}var sc;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(sc||(sc={}));const $d=Symbol(""),ax=()=>{const n=Xn($d);if(!n)throw new Error("useDarkMode() is called without provider.");return n},Wb=()=>{const n=Pd(),s=qb(),a=Ub("vuepress-color-scheme",n.value.colorMode),e=vn({get(){return n.value.colorModeSwitch?a.value==="auto"?s.value:a.value==="dark":n.value.colorMode==="dark"},set(t){t===s.value?a.value="auto":a.value=t?"dark":"light"}});zs($d,e),Yb(e)},Yb=n=>{const s=(a=n.value)=>{const e=window==null?void 0:window.document.querySelector("html");e==null||e.classList.toggle("dark",a)};Qn(()=>{Vn(n,s,{immediate:!0})}),nt(()=>s())},Cd=(...n)=>{const a=So().resolve(...n),e=a.matched[a.matched.length-1];if(!(e!=null&&e.redirect))return a;const{redirect:t}=e,o=Sn(t)?t(a):t,i=Hn(o)?{path:o}:o;return Cd({hash:a.hash,query:a.query,params:a.params,...i})},Xb=n=>{const s=Cd(encodeURI(n));return{text:s.meta.title||n,link:s.name==="404"?n:s.fullPath}};let Bo=null,re=null;const Jb={wait:()=>Bo,pending:()=>{Bo=new Promise(n=>re=n)},resolve:()=>{re==null||re(),Bo=null,re=null}},Kb=()=>Jb,Ed=Symbol("sidebarItems"),ex=()=>{const n=Xn(Ed);if(!n)throw new Error("useSidebarItems() is called without provider.");return n},Qb=()=>{const n=Pd(),s=at(),a=vn(()=>Zb(s.value,n.value));zs(Ed,a)},Zb=(n,s)=>{var t,o,i,p;const a=(o=(t=n.sidebar)!=null?t:s.sidebar)!=null?o:"auto",e=(p=(i=n.sidebarDepth)!=null?i:s.sidebarDepth)!=null?p:2;return n.home||a===!1?[]:a==="auto"?sf(e):un(a)?Td(a,e):Qu(a)?af(a,e):[]},nf=(n,s)=>({text:n.title,link:`#${n.slug}`,children:Ep(n.children,s)}),Ep=(n,s)=>s>0?n.map(a=>nf(a,s-1)):[],sf=n=>{const s=ae();return[{text:s.value.title,children:Ep(s.value.headers,n)}]},Td=(n,s)=>{const a=et(),e=ae(),t=o=>{var p;let i;if(Hn(o)?i=Xb(o):i=o,i.children)return{...i,children:i.children.map(l=>t(l))};if(i.link===a.path){const l=((p=e.value.headers[0])==null?void 0:p.level)===1?e.value.headers[0].children:e.value.headers;return{...i,children:Ep(l,s)}}return i};return n.map(o=>t(o))},af=(n,s)=>{var o;const a=et(),e=Zu(n,a.path),t=(o=n[e])!=null?o:[];return Td(t,s)},Pd=()=>kb();var ef=Yn({enhance({app:n,router:s}){n.component("Badge",gb),n.component("CodeGroup",bb),n.component("CodeGroupItem",wb),n.component("AutoLinkExternalIcon",()=>{const e=n.component("ExternalLinkIcon");return e?Z(e):null}),n.component("NavbarSearch",()=>{const e=n.component("Docsearch")||n.component("SearchBox");return e?Z(e):null});const a=s.options.scrollBehavior;s.options.scrollBehavior=async(...e)=>(await Kb().wait(),a(...e))},setup(){Wb(),Qb()}}),tf={enhance:({app:n})=>{n.component("Icon",In(()=>ln(()=>import("./Icon.js"),[]))),n.component("Loading",In(()=>ln(()=>Promise.resolve().then(function(){return RS}),void 0))),n.component("Pagination",In(()=>ln(()=>import("./Pagination.js"),[])))}};/*! @docsearch/js 3.2.1 | MIT License | © Algolia, Inc. and contributors | https://docsearch.algolia.com */function ac(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function Dn(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ac(Object(a),!0).forEach(function(e){of(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):ac(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Ne(n){return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ne(n)}function of(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Mi(){return Mi=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},Mi.apply(this,arguments)}function pf(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function Jt(n,s){return function(a){if(Array.isArray(a))return a}(n)||function(a,e){var t=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var o,i,p=[],l=!0,c=!1;try{for(t=t.call(a);!(l=(o=t.next()).done)&&(p.push(o.value),!e||p.length!==e);l=!0);}catch(r){c=!0,i=r}finally{try{l||t.return==null||t.return()}finally{if(c)throw i}}return p}}(n,s)||Id(n,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kt(n){return function(s){if(Array.isArray(s))return ji(s)}(n)||function(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(n)||Id(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Id(n,s){if(n){if(typeof n=="string")return ji(n,s);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ji(n,s):void 0}}function ji(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}var kn,Ce,Od,ec,Ad,Qt={},Tp=[],lf=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ns(n,s){for(var a in s)n[a]=s[a];return n}function Ld(n){var s=n.parentNode;s&&s.removeChild(n)}function Is(n,s,a){var e,t,o,i=arguments,p={};for(o in s)o=="key"?e=s[o]:o=="ref"?t=s[o]:p[o]=s[o];if(arguments.length>3)for(a=[a],o=3;o<arguments.length;o++)a.push(i[o]);if(a!=null&&(p.children=a),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)p[o]===void 0&&(p[o]=n.defaultProps[o]);return Ee(n,p,e,t,null)}function Ee(n,s,a,e,t){var o={type:n,props:s,key:a,ref:e,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:t==null?++kn.__v:t};return kn.vnode!=null&&kn.vnode(o),o}function ia(n){return n.children}function Os(n,s){this.props=n,this.context=s}function ze(n,s){if(s==null)return n.__?ze(n.__,n.__.__k.indexOf(n)+1):null;for(var a;s<n.__k.length;s++)if((a=n.__k[s])!=null&&a.__e!=null)return a.__e;return typeof n.type=="function"?ze(n):null}function Dd(n){var s,a;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,s=0;s<n.__k.length;s++)if((a=n.__k[s])!=null&&a.__e!=null){n.__e=n.__c.base=a.__e;break}return Dd(n)}}function Ri(n){(!n.__d&&(n.__d=!0)&&Ce.push(n)&&!Zt.__r++||ec!==kn.debounceRendering)&&((ec=kn.debounceRendering)||Od)(Zt)}function Zt(){for(var n;Zt.__r=Ce.length;)n=Ce.sort(function(s,a){return s.__v.__b-a.__v.__b}),Ce=[],n.some(function(s){var a,e,t,o,i,p;s.__d&&(i=(o=(a=s).__v).__e,(p=a.__P)&&(e=[],(t=Ns({},o)).__v=o.__v+1,Pp(p,o,t,a.__n,p.ownerSVGElement!==void 0,o.__h!=null?[i]:null,e,i==null?ze(o):i,o.__h),Fd(e,o),o.__e!=i&&Dd(o)))})}function Md(n,s,a,e,t,o,i,p,l,c){var r,k,d,u,m,v,b,h=e&&e.__k||Tp,g=h.length;for(a.__k=[],r=0;r<s.length;r++)if((u=a.__k[r]=(u=s[r])==null||typeof u=="boolean"?null:typeof u=="string"||typeof u=="number"?Ee(null,u,null,null,u):Array.isArray(u)?Ee(ia,{children:u},null,null,null):u.__b>0?Ee(u.type,u.props,u.key,null,u.__v):u)!=null){if(u.__=a,u.__b=a.__b+1,(d=h[r])===null||d&&u.key==d.key&&u.type===d.type)h[r]=void 0;else for(k=0;k<g;k++){if((d=h[k])&&u.key==d.key&&u.type===d.type){h[k]=void 0;break}d=null}Pp(n,u,d=d||Qt,t,o,i,p,l,c),m=u.__e,(k=u.ref)&&d.ref!=k&&(b||(b=[]),d.ref&&b.push(d.ref,null,u),b.push(k,u.__c||m,u)),m!=null?(v==null&&(v=m),typeof u.type=="function"&&u.__k!=null&&u.__k===d.__k?u.__d=l=jd(u,l,n):l=Rd(n,u,d,h,m,l),c||a.type!=="option"?typeof a.type=="function"&&(a.__d=l):n.value=""):l&&d.__e==l&&l.parentNode!=n&&(l=ze(d))}for(a.__e=v,r=g;r--;)h[r]!=null&&(typeof a.type=="function"&&h[r].__e!=null&&h[r].__e==a.__d&&(a.__d=ze(e,r+1)),Nd(h[r],h[r]));if(b)for(r=0;r<b.length;r++)Bd(b[r],b[++r],b[++r])}function jd(n,s,a){var e,t;for(e=0;e<n.__k.length;e++)(t=n.__k[e])&&(t.__=n,s=typeof t.type=="function"?jd(t,s,a):Rd(a,t,t,n.__k,t.__e,s));return s}function Hs(n,s){return s=s||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(a){Hs(a,s)}):s.push(n)),s}function Rd(n,s,a,e,t,o){var i,p,l;if(s.__d!==void 0)i=s.__d,s.__d=void 0;else if(a==null||t!=o||t.parentNode==null)n:if(o==null||o.parentNode!==n)n.appendChild(t),i=null;else{for(p=o,l=0;(p=p.nextSibling)&&l<e.length;l+=2)if(p==t)break n;n.insertBefore(t,o),i=o}return i!==void 0?i:t.nextSibling}function tc(n,s,a){s[0]==="-"?n.setProperty(s,a):n[s]=a==null?"":typeof a!="number"||lf.test(s)?a:a+"px"}function gt(n,s,a,e,t){var o;n:if(s==="style")if(typeof a=="string")n.style.cssText=a;else{if(typeof e=="string"&&(n.style.cssText=e=""),e)for(s in e)a&&s in a||tc(n.style,s,"");if(a)for(s in a)e&&a[s]===e[s]||tc(n.style,s,a[s])}else if(s[0]==="o"&&s[1]==="n")o=s!==(s=s.replace(/Capture$/,"")),s=s.toLowerCase()in n?s.toLowerCase().slice(2):s.slice(2),n.l||(n.l={}),n.l[s+o]=a,a?e||n.addEventListener(s,o?ic:oc,o):n.removeEventListener(s,o?ic:oc,o);else if(s!=="dangerouslySetInnerHTML"){if(t)s=s.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(s!=="href"&&s!=="list"&&s!=="form"&&s!=="download"&&s in n)try{n[s]=a==null?"":a;break n}catch{}typeof a=="function"||(a!=null&&(a!==!1||s[0]==="a"&&s[1]==="r")?n.setAttribute(s,a):n.removeAttribute(s))}}function oc(n){this.l[n.type+!1](kn.event?kn.event(n):n)}function ic(n){this.l[n.type+!0](kn.event?kn.event(n):n)}function Pp(n,s,a,e,t,o,i,p,l){var c,r,k,d,u,m,v,b,h,g,_,y=s.type;if(s.constructor!==void 0)return null;a.__h!=null&&(l=a.__h,p=s.__e=a.__e,s.__h=null,o=[p]),(c=kn.__b)&&c(s);try{n:if(typeof y=="function"){if(b=s.props,h=(c=y.contextType)&&e[c.__c],g=c?h?h.props.value:c.__:e,a.__c?v=(r=s.__c=a.__c).__=r.__E:("prototype"in y&&y.prototype.render?s.__c=r=new y(b,g):(s.__c=r=new Os(b,g),r.constructor=y,r.render=rf),h&&h.sub(r),r.props=b,r.state||(r.state={}),r.context=g,r.__n=e,k=r.__d=!0,r.__h=[]),r.__s==null&&(r.__s=r.state),y.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=Ns({},r.__s)),Ns(r.__s,y.getDerivedStateFromProps(b,r.__s))),d=r.props,u=r.state,k)y.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(y.getDerivedStateFromProps==null&&b!==d&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(b,g),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(b,r.__s,g)===!1||s.__v===a.__v){r.props=b,r.state=r.__s,s.__v!==a.__v&&(r.__d=!1),r.__v=s,s.__e=a.__e,s.__k=a.__k,r.__h.length&&i.push(r);break n}r.componentWillUpdate!=null&&r.componentWillUpdate(b,r.__s,g),r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(d,u,m)})}r.context=g,r.props=b,r.state=r.__s,(c=kn.__r)&&c(s),r.__d=!1,r.__v=s,r.__P=n,c=r.render(r.props,r.state,r.context),r.state=r.__s,r.getChildContext!=null&&(e=Ns(Ns({},e),r.getChildContext())),k||r.getSnapshotBeforeUpdate==null||(m=r.getSnapshotBeforeUpdate(d,u)),_=c!=null&&c.type===ia&&c.key==null?c.props.children:c,Md(n,Array.isArray(_)?_:[_],s,a,e,t,o,i,p,l),r.base=s.__e,s.__h=null,r.__h.length&&i.push(r),v&&(r.__E=r.__=null),r.__e=!1}else o==null&&s.__v===a.__v?(s.__k=a.__k,s.__e=a.__e):s.__e=cf(a.__e,s,a,e,t,o,i,l);(c=kn.diffed)&&c(s)}catch(x){s.__v=null,(l||o!=null)&&(s.__e=p,s.__h=!!l,o[o.indexOf(p)]=null),kn.__e(x,s,a)}}function Fd(n,s){kn.__c&&kn.__c(s,n),n.some(function(a){try{n=a.__h,a.__h=[],n.some(function(e){e.call(a)})}catch(e){kn.__e(e,a.__v)}})}function cf(n,s,a,e,t,o,i,p){var l,c,r,k,d=a.props,u=s.props,m=s.type,v=0;if(m==="svg"&&(t=!0),o!=null){for(;v<o.length;v++)if((l=o[v])&&(l===n||(m?l.localName==m:l.nodeType==3))){n=l,o[v]=null;break}}if(n==null){if(m===null)return document.createTextNode(u);n=t?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,u.is&&u),o=null,p=!1}if(m===null)d===u||p&&n.data===u||(n.data=u);else{if(o=o&&Tp.slice.call(n.childNodes),c=(d=a.props||Qt).dangerouslySetInnerHTML,r=u.dangerouslySetInnerHTML,!p){if(o!=null)for(d={},k=0;k<n.attributes.length;k++)d[n.attributes[k].name]=n.attributes[k].value;(r||c)&&(r&&(c&&r.__html==c.__html||r.__html===n.innerHTML)||(n.innerHTML=r&&r.__html||""))}if(function(b,h,g,_,y){var x;for(x in g)x==="children"||x==="key"||x in h||gt(b,x,null,g[x],_);for(x in h)y&&typeof h[x]!="function"||x==="children"||x==="key"||x==="value"||x==="checked"||g[x]===h[x]||gt(b,x,h[x],g[x],_)}(n,u,d,t,p),r)s.__k=[];else if(v=s.props.children,Md(n,Array.isArray(v)?v:[v],s,a,e,t&&m!=="foreignObject",o,i,n.firstChild,p),o!=null)for(v=o.length;v--;)o[v]!=null&&Ld(o[v]);p||("value"in u&&(v=u.value)!==void 0&&(v!==n.value||m==="progress"&&!v)&&gt(n,"value",v,d.value,!1),"checked"in u&&(v=u.checked)!==void 0&&v!==n.checked&&gt(n,"checked",v,d.checked,!1))}return n}function Bd(n,s,a){try{typeof n=="function"?n(s):n.current=s}catch(e){kn.__e(e,a)}}function Nd(n,s,a){var e,t,o;if(kn.unmount&&kn.unmount(n),(e=n.ref)&&(e.current&&e.current!==n.__e||Bd(e,null,s)),a||typeof n.type=="function"||(a=(t=n.__e)!=null),n.__e=n.__d=void 0,(e=n.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(i){kn.__e(i,s)}e.base=e.__P=null}if(e=n.__k)for(o=0;o<e.length;o++)e[o]&&Nd(e[o],s,a);t!=null&&Ld(t)}function rf(n,s,a){return this.constructor(n,a)}function He(n,s,a){var e,t,o;kn.__&&kn.__(n,s),t=(e=typeof a=="function")?null:a&&a.__k||s.__k,o=[],Pp(s,n=(!e&&a||s).__k=Is(ia,null,[n]),t||Qt,Qt,s.ownerSVGElement!==void 0,!e&&a?[a]:t?null:s.firstChild?Tp.slice.call(s.childNodes):null,o,!e&&a?a:t?t.__e:s.firstChild,e),Fd(o,n)}function zd(n,s){He(n,s,zd)}function uf(n,s,a){var e,t,o,i=arguments,p=Ns({},n.props);for(o in s)o=="key"?e=s[o]:o=="ref"?t=s[o]:p[o]=s[o];if(arguments.length>3)for(a=[a],o=3;o<arguments.length;o++)a.push(i[o]);return a!=null&&(p.children=a),Ee(n.type,p,e||n.key,t||n.ref,null)}kn={__e:function(n,s){for(var a,e,t;s=s.__;)if((a=s.__c)&&!a.__)try{if((e=a.constructor)&&e.getDerivedStateFromError!=null&&(a.setState(e.getDerivedStateFromError(n)),t=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(n),t=a.__d),t)return a.__E=a}catch(o){n=o}throw n},__v:0},Os.prototype.setState=function(n,s){var a;a=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ns({},this.state),typeof n=="function"&&(n=n(Ns({},a),this.props)),n&&Ns(a,n),n!=null&&this.__v&&(s&&this.__h.push(s),Ri(this))},Os.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Ri(this))},Os.prototype.render=ia,Ce=[],Od=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Zt.__r=0,Ad=0;var ee,ls,pc,Wa=0,Fi=[],lc=kn.__b,cc=kn.__r,rc=kn.diffed,uc=kn.__c,dc=kn.unmount;function ot(n,s){kn.__h&&kn.__h(ls,n,Wa||s),Wa=0;var a=ls.__H||(ls.__H={__:[],__h:[]});return n>=a.__.length&&a.__.push({}),a.__[n]}function Hd(n){return Wa=1,Gd(Ud,n)}function Gd(n,s,a){var e=ot(ee++,2);return e.t=n,e.__c||(e.__=[a?a(s):Ud(void 0,s),function(t){var o=e.t(e.__[0],t);e.__[0]!==o&&(e.__=[o,e.__[1]],e.__c.setState({}))}],e.__c=ls),e.__}function Vd(n,s){var a=ot(ee++,3);!kn.__s&&Ip(a.__H,s)&&(a.__=n,a.__H=s,ls.__H.__h.push(a))}function kc(n,s){var a=ot(ee++,4);!kn.__s&&Ip(a.__H,s)&&(a.__=n,a.__H=s,ls.__h.push(a))}function No(n,s){var a=ot(ee++,7);return Ip(a.__H,s)&&(a.__=n(),a.__H=s,a.__h=n),a.__}function df(){Fi.forEach(function(n){if(n.__P)try{n.__H.__h.forEach(Lt),n.__H.__h.forEach(Bi),n.__H.__h=[]}catch(s){n.__H.__h=[],kn.__e(s,n.__v)}}),Fi=[]}kn.__b=function(n){ls=null,lc&&lc(n)},kn.__r=function(n){cc&&cc(n),ee=0;var s=(ls=n.__c).__H;s&&(s.__h.forEach(Lt),s.__h.forEach(Bi),s.__h=[])},kn.diffed=function(n){rc&&rc(n);var s=n.__c;s&&s.__H&&s.__H.__h.length&&(Fi.push(s)!==1&&pc===kn.requestAnimationFrame||((pc=kn.requestAnimationFrame)||function(a){var e,t=function(){clearTimeout(o),mc&&cancelAnimationFrame(e),setTimeout(a)},o=setTimeout(t,100);mc&&(e=requestAnimationFrame(t))})(df)),ls=void 0},kn.__c=function(n,s){s.some(function(a){try{a.__h.forEach(Lt),a.__h=a.__h.filter(function(e){return!e.__||Bi(e)})}catch(e){s.some(function(t){t.__h&&(t.__h=[])}),s=[],kn.__e(e,a.__v)}}),uc&&uc(n,s)},kn.unmount=function(n){dc&&dc(n);var s=n.__c;if(s&&s.__H)try{s.__H.__.forEach(Lt)}catch(a){kn.__e(a,s.__v)}};var mc=typeof requestAnimationFrame=="function";function Lt(n){var s=ls;typeof n.__c=="function"&&n.__c(),ls=s}function Bi(n){var s=ls;n.__c=n.__(),ls=s}function Ip(n,s){return!n||n.length!==s.length||s.some(function(a,e){return a!==n[e]})}function Ud(n,s){return typeof s=="function"?s(n):s}function qd(n,s){for(var a in s)n[a]=s[a];return n}function Ni(n,s){for(var a in n)if(a!=="__source"&&!(a in s))return!0;for(var e in s)if(e!=="__source"&&n[e]!==s[e])return!0;return!1}function zi(n){this.props=n}(zi.prototype=new Os).isPureReactComponent=!0,zi.prototype.shouldComponentUpdate=function(n,s){return Ni(this.props,n)||Ni(this.state,s)};var vc=kn.__b;kn.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),vc&&vc(n)};var kf=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911,hc=function(n,s){return n==null?null:Hs(Hs(n).map(s))},mf={map:hc,forEach:hc,count:function(n){return n?Hs(n).length:0},only:function(n){var s=Hs(n);if(s.length!==1)throw"Children.only";return s[0]},toArray:Hs},vf=kn.__e;function Dt(){this.__u=0,this.t=null,this.__b=null}function Wd(n){var s=n.__.__c;return s&&s.__e&&s.__e(n)}function ge(){this.u=null,this.o=null}kn.__e=function(n,s,a){if(n.then){for(var e,t=s;t=t.__;)if((e=t.__c)&&e.__c)return s.__e==null&&(s.__e=a.__e,s.__k=a.__k),e.__c(n,s)}vf(n,s,a)},(Dt.prototype=new Os).__c=function(n,s){var a=s.__c,e=this;e.t==null&&(e.t=[]),e.t.push(a);var t=Wd(e.__v),o=!1,i=function(){o||(o=!0,a.componentWillUnmount=a.__c,t?t(p):p())};a.__c=a.componentWillUnmount,a.componentWillUnmount=function(){i(),a.__c&&a.__c()};var p=function(){if(!--e.__u){if(e.state.__e){var c=e.state.__e;e.__v.__k[0]=function k(d,u,m){return d&&(d.__v=null,d.__k=d.__k&&d.__k.map(function(v){return k(v,u,m)}),d.__c&&d.__c.__P===u&&(d.__e&&m.insertBefore(d.__e,d.__d),d.__c.__e=!0,d.__c.__P=m)),d}(c,c.__c.__P,c.__c.__O)}var r;for(e.setState({__e:e.__b=null});r=e.t.pop();)r.forceUpdate()}},l=s.__h===!0;e.__u++||l||e.setState({__e:e.__b=e.__v.__k[0]}),n.then(i,i)},Dt.prototype.componentWillUnmount=function(){this.t=[]},Dt.prototype.render=function(n,s){if(this.__b){if(this.__v.__k){var a=document.createElement("div"),e=this.__v.__k[0].__c;this.__v.__k[0]=function o(i,p,l){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(c){typeof c.__c=="function"&&c.__c()}),i.__c.__H=null),(i=qd({},i)).__c!=null&&(i.__c.__P===l&&(i.__c.__P=p),i.__c=null),i.__k=i.__k&&i.__k.map(function(c){return o(c,p,l)})),i}(this.__b,a,e.__O=e.__P)}this.__b=null}var t=s.__e&&Is(ia,null,n.fallback);return t&&(t.__h=null),[Is(ia,null,s.__e?null:n.children),t]};var gc=function(n,s,a){if(++a[1]===a[0]&&n.o.delete(s),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(a=n.u;a;){for(;a.length>3;)a.pop()();if(a[1]<a[0])break;n.u=a=a[2]}};function hf(n){return this.getChildContext=function(){return n.context},n.children}function gf(n){var s=this,a=n.i;s.componentWillUnmount=function(){He(null,s.l),s.l=null,s.i=null},s.i&&s.i!==a&&s.componentWillUnmount(),n.__v?(s.l||(s.i=a,s.l={nodeType:1,parentNode:a,childNodes:[],appendChild:function(e){this.childNodes.push(e),s.i.appendChild(e)},insertBefore:function(e,t){this.childNodes.push(e),s.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),s.i.removeChild(e)}}),He(Is(hf,{context:s.context},n.__v),s.l)):s.l&&s.componentWillUnmount()}function Yd(n,s){return Is(gf,{__v:n,i:s})}(ge.prototype=new Os).__e=function(n){var s=this,a=Wd(s.__v),e=s.o.get(n);return e[0]++,function(t){var o=function(){s.props.revealOrder?(e.push(t),gc(s,n,e)):t()};a?a(o):o()}},ge.prototype.render=function(n){this.u=null,this.o=new Map;var s=Hs(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&s.reverse();for(var a=s.length;a--;)this.o.set(s[a],this.u=[1,0,this.u]);return n.children},ge.prototype.componentDidUpdate=ge.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(s,a){gc(n,a,s)})};var Xd=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,bf=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ff=function(n){return(typeof Symbol!="undefined"&&Ne(Symbol())=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};function Jd(n,s,a){return s.__k==null&&(s.textContent=""),He(n,s),typeof a=="function"&&a(),n?n.__c:null}Os.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Os.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(s){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:s})}})});var bc=kn.event;function yf(){}function _f(){return this.cancelBubble}function wf(){return this.defaultPrevented}kn.event=function(n){return bc&&(n=bc(n)),n.persist=yf,n.isPropagationStopped=_f,n.isDefaultPrevented=wf,n.nativeEvent=n};var Kd,fc={configurable:!0,get:function(){return this.class}},yc=kn.vnode;kn.vnode=function(n){var s=n.type,a=n.props,e=a;if(typeof s=="string"){for(var t in e={},a){var o=a[t];t==="value"&&"defaultValue"in a&&o==null||(t==="defaultValue"&&"value"in a&&a.value==null?t="value":t==="download"&&o===!0?o="":/ondoubleclick/i.test(t)?t="ondblclick":/^onchange(textarea|input)/i.test(t+s)&&!ff(a.type)?t="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(t)?t=t.toLowerCase():bf.test(t)?t=t.replace(/[A-Z0-9]/,"-$&").toLowerCase():o===null&&(o=void 0),e[t]=o)}s=="select"&&e.multiple&&Array.isArray(e.value)&&(e.value=Hs(a.children).forEach(function(i){i.props.selected=e.value.indexOf(i.props.value)!=-1})),s=="select"&&e.defaultValue!=null&&(e.value=Hs(a.children).forEach(function(i){i.props.selected=e.multiple?e.defaultValue.indexOf(i.props.value)!=-1:e.defaultValue==i.props.value})),n.props=e}s&&a.class!=a.className&&(fc.enumerable="className"in a,a.className!=null&&(e.class=a.className),Object.defineProperty(e,"className",fc)),n.$$typeof=Xd,yc&&yc(n)};var _c=kn.__r;kn.__r=function(n){_c&&_c(n),Kd=n.__c};var Sf={ReactCurrentDispatcher:{current:{readContext:function(n){return Kd.__n[n.__c].props.value}}}};(typeof performance=="undefined"?"undefined":Ne(performance))=="object"&&typeof performance.now=="function"&&performance.now.bind(performance);function wc(n){return!!n&&n.$$typeof===Xd}var $={useState:Hd,useReducer:Gd,useEffect:Vd,useLayoutEffect:kc,useRef:function(n){return Wa=5,No(function(){return{current:n}},[])},useImperativeHandle:function(n,s,a){Wa=6,kc(function(){typeof n=="function"?n(s()):n&&(n.current=s())},a==null?a:a.concat(n))},useMemo:No,useCallback:function(n,s){return Wa=8,No(function(){return n},s)},useContext:function(n){var s=ls.context[n.__c],a=ot(ee++,9);return a.__c=n,s?(a.__==null&&(a.__=!0,s.sub(ls)),s.props.value):n.__},useDebugValue:function(n,s){kn.useDebugValue&&kn.useDebugValue(s?s(n):n)},version:"16.8.0",Children:mf,render:Jd,hydrate:function(n,s,a){return zd(n,s),typeof a=="function"&&a(),n?n.__c:null},unmountComponentAtNode:function(n){return!!n.__k&&(He(null,n),!0)},createPortal:Yd,createElement:Is,createContext:function(n,s){var a={__c:s="__cC"+Ad++,__:n,Consumer:function(e,t){return e.children(t)},Provider:function(e){var t,o;return this.getChildContext||(t=[],(o={})[s]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(i){this.props.value!==i.value&&t.some(Ri)},this.sub=function(i){t.push(i);var p=i.componentWillUnmount;i.componentWillUnmount=function(){t.splice(t.indexOf(i),1),p&&p.call(i)}}),e.children}};return a.Provider.__=a.Consumer.contextType=a},createFactory:function(n){return Is.bind(null,n)},cloneElement:function(n){return wc(n)?uf.apply(null,arguments):n},createRef:function(){return{current:null}},Fragment:ia,isValidElement:wc,findDOMNode:function(n){return n&&(n.base||n.nodeType===1&&n)||null},Component:Os,PureComponent:zi,memo:function(n,s){function a(t){var o=this.props.ref,i=o==t.ref;return!i&&o&&(o.call?o(null):o.current=null),s?!s(this.props,t)||!i:Ni(this.props,t)}function e(t){return this.shouldComponentUpdate=a,Is(n,t)}return e.displayName="Memo("+(n.displayName||n.name)+")",e.prototype.isReactComponent=!0,e.__f=!0,e},forwardRef:function(n){function s(a,e){var t=qd({},a);return delete t.ref,n(t,(e=a.ref||e)&&(Ne(e)!="object"||"current"in e)?e:null)}return s.$$typeof=kf,s.render=s,s.prototype.isReactComponent=s.__f=!0,s.displayName="ForwardRef("+(n.displayName||n.name)+")",s},unstable_batchedUpdates:function(n,s){return n(s)},StrictMode:ia,Suspense:Dt,SuspenseList:ge,lazy:function(n){var s,a,e;function t(o){if(s||(s=n()).then(function(i){a=i.default||i},function(i){e=i}),e)throw e;if(!a)throw s;return Is(a,o)}return t.displayName="Lazy",t.__f=!0,t},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Sf};function xf(){return $.createElement("svg",{width:"15",height:"15",className:"DocSearch-Control-Key-Icon"},$.createElement("path",{d:"M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953",strokeWidth:"1.2",stroke:"currentColor",fill:"none",strokeLinecap:"square"}))}function Qd(){return $.createElement("svg",{width:"20",height:"20",className:"DocSearch-Search-Icon",viewBox:"0 0 20 20"},$.createElement("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}var $f=["translations"];function Hi(){return Hi=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},Hi.apply(this,arguments)}function Cf(n,s){return function(a){if(Array.isArray(a))return a}(n)||function(a,e){var t=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var o,i,p=[],l=!0,c=!1;try{for(t=t.call(a);!(l=(o=t.next()).done)&&(p.push(o.value),!e||p.length!==e);l=!0);}catch(r){c=!0,i=r}finally{try{l||t.return==null||t.return()}finally{if(c)throw i}}return p}}(n,s)||function(a,e){if(!!a){if(typeof a=="string")return Sc(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Sc(a,e)}}(n,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sc(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}function Ef(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}var Tf=$.forwardRef(function(n,s){var a=n.translations,e=a===void 0?{}:a,t=Ef(n,$f),o=e.buttonText,i=o===void 0?"Search":o,p=e.buttonAriaLabel,l=p===void 0?"Search":p,c=Cf(Hd(null),2),r=c[0],k=c[1];return Vd(function(){typeof navigator!="undefined"&&(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?k("\u2318"):k("Ctrl"))},[]),$.createElement("button",Hi({type:"button",className:"DocSearch DocSearch-Button","aria-label":l},t,{ref:s}),$.createElement("span",{className:"DocSearch-Button-Container"},$.createElement(Qd,null),$.createElement("span",{className:"DocSearch-Button-Placeholder"},i)),$.createElement("span",{className:"DocSearch-Button-Keys"},r!==null&&$.createElement($.Fragment,null,$.createElement("kbd",{className:"DocSearch-Button-Key"},r==="Ctrl"?$.createElement(xf,null):r),$.createElement("kbd",{className:"DocSearch-Button-Key"},"K"))))});function Ge(n){return n.reduce(function(s,a){return s.concat(a)},[])}var Pf=0;function Gi(n){return n.collections.length===0?0:n.collections.reduce(function(s,a){return s+a.items.length},0)}var Zd=function(){},If=[{segment:"autocomplete-core",version:"1.7.1"}];function Mt(n,s){var a=s;return{then:function(e,t){return Mt(n.then(bt(e,a,n),bt(t,a,n)),a)},catch:function(e){return Mt(n.catch(bt(e,a,n)),a)},finally:function(e){return e&&a.onCancelList.push(e),Mt(n.finally(bt(e&&function(){return a.onCancelList=[],e()},a,n)),a)},cancel:function(){a.isCanceled=!0;var e=a.onCancelList;a.onCancelList=[],e.forEach(function(t){t()})},isCanceled:function(){return a.isCanceled===!0}}}function xc(n){return Mt(n,{isCanceled:!1,onCancelList:[]})}function bt(n,s,a){return n?function(e){return s.isCanceled?e:n(e)}:a}function $c(n,s,a,e){if(!a)return null;if(n<0&&(s===null||e!==null&&s===0))return a+n;var t=(s===null?-1:s)+n;return t<=-1||t>=a?e===null?null:0:t}function Cc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function Of(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Af(n,s){var a=[];return Promise.resolve(n(s)).then(function(e){return Promise.all(e.filter(function(t){return Boolean(t)}).map(function(t){if(t.sourceId,a.includes(t.sourceId))throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(t.sourceId)," is not unique."));a.push(t.sourceId);var o=function(i){for(var p=1;p<arguments.length;p++){var l=arguments[p]!=null?arguments[p]:{};p%2?Cc(Object(l),!0).forEach(function(c){Of(i,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Cc(Object(l)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(l,c))})}return i}({getItemInputValue:function(i){return i.state.query},getItemUrl:function(){},onSelect:function(i){(0,i.setIsOpen)(!1)},onActive:Zd},t);return Promise.resolve(o)}))})}function Na(n){var s=function(t){var o=t.collections.map(function(i){return i.items.length}).reduce(function(i,p,l){var c=(i[l-1]||0)+p;return i.push(c),i},[]).reduce(function(i,p){return p<=t.activeItemId?i+1:i},0);return t.collections[o]}(n);if(!s)return null;var a=s.items[function(t){for(var o=t.state,i=t.collection,p=!1,l=0,c=0;p===!1;){var r=o.collections[l];if(r===i){p=!0;break}c+=r.items.length,l++}return o.activeItemId-c}({state:n,collection:s})],e=s.source;return{item:a,itemInputValue:e.getItemInputValue({item:a,state:n}),itemUrl:e.getItemUrl({item:a,state:n}),source:e}}var Lf=/((gt|sm)-|galaxy nexus)|samsung[- ]/i;function Ec(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function ft(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Ec(Object(a),!0).forEach(function(e){Df(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Ec(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Df(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Tc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function Mf(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function jf(n,s,a){var e,t=s.initialState;return{getState:function(){return t},dispatch:function(o,i){var p=function(l){for(var c=1;c<arguments.length;c++){var r=arguments[c]!=null?arguments[c]:{};c%2?Tc(Object(r),!0).forEach(function(k){Mf(l,k,r[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):Tc(Object(r)).forEach(function(k){Object.defineProperty(l,k,Object.getOwnPropertyDescriptor(r,k))})}return l}({},t);t=n(t,{type:o,props:s,payload:i}),a({state:t,prevState:p})},pendingRequests:(e=[],{add:function(o){return e.push(o),o.finally(function(){e=e.filter(function(i){return i!==o})})},cancelAll:function(){e.forEach(function(o){return o.cancel()})},isEmpty:function(){return e.length===0}})}}function Pc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function yt(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Pc(Object(a),!0).forEach(function(e){Rf(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Pc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Rf(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Ff(n){return function(s){if(Array.isArray(s))return zo(s)}(n)||function(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(n)||function(s,a){if(!!s){if(typeof s=="string")return zo(s,a);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zo(s,a)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zo(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}function Ic(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function Ia(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Ic(Object(a),!0).forEach(function(e){Bf(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Ic(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Bf(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Oc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function _t(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Oc(Object(a),!0).forEach(function(e){nk(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Oc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function nk(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Nf(n){return function(s){if(Array.isArray(s))return Ho(s)}(n)||function(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(n)||function(s,a){if(!!s){if(typeof s=="string")return Ho(s,a);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ho(s,a)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ho(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}function Ac(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function Lc(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Ac(Object(a),!0).forEach(function(e){zf(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Ac(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function zf(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function wt(n){return Boolean(n.execute)}function Hf(n,s){return a=n,Boolean(a==null?void 0:a.execute)?Lc(Lc({},n),{},{requests:n.queries.map(function(e){return{query:e,sourceId:s,transformResponse:n.transformResponse}})}):{items:n,sourceId:s};var a}function Gf(n){var s=n.reduce(function(a,e){if(!wt(e))return a.push(e),a;var t=e.searchClient,o=e.execute,i=e.requesterId,p=e.requests,l=a.find(function(k){return wt(e)&&wt(k)&&k.searchClient===t&&Boolean(i)&&k.requesterId===i});if(l){var c;(c=l.items).push.apply(c,Nf(p))}else{var r={execute:o,requesterId:i,items:p,searchClient:t};a.push(r)}return a},[]).map(function(a){if(!wt(a))return Promise.resolve(a);var e=a,t=e.execute,o=e.items;return t({searchClient:e.searchClient,requests:o})});return Promise.all(s).then(function(a){return Ge(a)})}function Vf(n,s){return s.map(function(a){var e=n.filter(function(p){return p.sourceId===a.sourceId}),t=e.map(function(p){return p.items}),o=e[0].transformResponse,i=o?o(function(p){var l=p.map(function(c){var r;return ft(ft({},c),{},{hits:(r=c.hits)===null||r===void 0?void 0:r.map(function(k){return ft(ft({},k),{},{__autocomplete_indexName:c.index,__autocomplete_queryID:c.queryID})})})});return{results:l,hits:l.map(function(c){return c.hits}).filter(Boolean),facetHits:l.map(function(c){var r;return(r=c.facetHits)===null||r===void 0?void 0:r.map(function(k){return{label:k.value,count:k.count,_highlightResult:{label:{value:k.highlighted}}}})}).filter(Boolean)}}(t)):t;return i.every(Boolean),'The `getItems` function from source "'.concat(a.sourceId,'" must return an array of items but returned ').concat(JSON.stringify(void 0),`.

Did you forget to return items?

See: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems`),{source:a,items:i}})}var Uf=["event","nextState","props","query","refresh","store"];function Dc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function ue(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Dc(Object(a),!0).forEach(function(e){qf(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Dc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function qf(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Wf(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}var Mc,Go,St,de=null,jc=(Mc=-1,Go=-1,St=void 0,function(n){var s=++Mc;return Promise.resolve(n).then(function(a){return St&&s<Go?St:(Go=s,St=a,a)})});function Fa(n){var s=n.event,a=n.nextState,e=a===void 0?{}:a,t=n.props,o=n.query,i=n.refresh,p=n.store,l=Wf(n,Uf);de&&t.environment.clearTimeout(de);var c=l.setCollections,r=l.setIsOpen,k=l.setQuery,d=l.setActiveItemId,u=l.setStatus;if(k(o),d(t.defaultActiveItemId),!o&&t.openOnFocus===!1){var m,v=p.getState().collections.map(function(g){return ue(ue({},g),{},{items:[]})});u("idle"),c(v),r((m=e.isOpen)!==null&&m!==void 0?m:t.shouldPanelOpen({state:p.getState()}));var b=xc(jc(v).then(function(){return Promise.resolve()}));return p.pendingRequests.add(b)}u("loading"),de=t.environment.setTimeout(function(){u("stalled")},t.stallThreshold);var h=xc(jc(t.getSources(ue({query:o,refresh:i,state:p.getState()},l)).then(function(g){return Promise.all(g.map(function(_){return Promise.resolve(_.getItems(ue({query:o,refresh:i,state:p.getState()},l))).then(function(y){return Hf(y,_.sourceId)})})).then(Gf).then(function(_){return Vf(_,g)}).then(function(_){return function(y){var x=y.collections,O=y.props,I=y.state,w=x.reduce(function(G,U){return _t(_t({},G),{},nk({},U.source.sourceId,_t(_t({},U.source),{},{getItems:function(){return Ge(U.items)}})))},{});return Ge(O.reshape({sources:Object.values(w),sourcesBySourceId:w,state:I})).filter(Boolean).map(function(G){return{source:G,items:G.getItems()}})}({collections:_,props:t,state:p.getState()})})}))).then(function(g){var _;u("idle"),c(g);var y=t.shouldPanelOpen({state:p.getState()});r((_=e.isOpen)!==null&&_!==void 0?_:t.openOnFocus&&!o&&y||y);var x=Na(p.getState());if(p.getState().activeItemId!==null&&x){var O=x.item,I=x.itemInputValue,w=x.itemUrl,G=x.source;G.onActive(ue({event:s,item:O,itemInputValue:I,itemUrl:w,refresh:i,source:G,state:p.getState()},l))}}).finally(function(){u("idle"),de&&t.environment.clearTimeout(de)});return p.pendingRequests.add(h)}var Yf=["event","props","refresh","store"];function Rc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function ua(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Rc(Object(a),!0).forEach(function(e){Xf(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Rc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Xf(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Jf(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}var Kf=["props","refresh","store"],Qf=["inputElement","formElement","panelElement"],Zf=["inputElement"],ny=["inputElement","maxLength"],sy=["item","source"];function Fc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function os(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Fc(Object(a),!0).forEach(function(e){ay(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Fc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function ay(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function ke(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function ey(n){var s=n.props,a=n.refresh,e=n.store,t=ke(n,Kf);return{getEnvironmentProps:function(o){var i=o.inputElement,p=o.formElement,l=o.panelElement;function c(r){!e.getState().isOpen&&e.pendingRequests.isEmpty()||r.target===i||[p,l].some(function(k){return d=k,u=r.target,d===u||d.contains(u);var d,u})===!1&&(e.dispatch("blur",null),s.debug||e.pendingRequests.cancelAll())}return os({onTouchStart:c,onMouseDown:c,onTouchMove:function(r){e.getState().isOpen!==!1&&i===s.environment.document.activeElement&&r.target!==i&&i.blur()}},ke(o,Qf))},getRootProps:function(o){return os({role:"combobox","aria-expanded":e.getState().isOpen,"aria-haspopup":"listbox","aria-owns":e.getState().isOpen?"".concat(s.id,"-list"):void 0,"aria-labelledby":"".concat(s.id,"-label")},o)},getFormProps:function(o){return o.inputElement,os({action:"",noValidate:!0,role:"search",onSubmit:function(i){var p;i.preventDefault(),s.onSubmit(os({event:i,refresh:a,state:e.getState()},t)),e.dispatch("submit",null),(p=o.inputElement)===null||p===void 0||p.blur()},onReset:function(i){var p;i.preventDefault(),s.onReset(os({event:i,refresh:a,state:e.getState()},t)),e.dispatch("reset",null),(p=o.inputElement)===null||p===void 0||p.focus()}},ke(o,Zf))},getLabelProps:function(o){return os({htmlFor:"".concat(s.id,"-input"),id:"".concat(s.id,"-label")},o)},getInputProps:function(o){var i;function p(v){(s.openOnFocus||Boolean(e.getState().query))&&Fa(os({event:v,props:s,query:e.getState().completion||e.getState().query,refresh:a,store:e},t)),e.dispatch("focus",null)}var l=o||{},c=(l.inputElement,l.maxLength),r=c===void 0?512:c,k=ke(l,ny),d=Na(e.getState()),u=function(v){return Boolean(v&&v.match(Lf))}(((i=s.environment.navigator)===null||i===void 0?void 0:i.userAgent)||""),m=d!=null&&d.itemUrl&&!u?"go":"search";return os({"aria-autocomplete":"both","aria-activedescendant":e.getState().isOpen&&e.getState().activeItemId!==null?"".concat(s.id,"-item-").concat(e.getState().activeItemId):void 0,"aria-controls":e.getState().isOpen?"".concat(s.id,"-list"):void 0,"aria-labelledby":"".concat(s.id,"-label"),value:e.getState().completion||e.getState().query,id:"".concat(s.id,"-input"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",enterKeyHint:m,spellCheck:"false",autoFocus:s.autoFocus,placeholder:s.placeholder,maxLength:r,type:"search",onChange:function(v){Fa(os({event:v,props:s,query:v.currentTarget.value.slice(0,r),refresh:a,store:e},t))},onKeyDown:function(v){(function(b){var h=b.event,g=b.props,_=b.refresh,y=b.store,x=Jf(b,Yf);if(h.key==="ArrowUp"||h.key==="ArrowDown"){var O=function(){var E=g.environment.document.getElementById("".concat(g.id,"-item-").concat(y.getState().activeItemId));E&&(E.scrollIntoViewIfNeeded?E.scrollIntoViewIfNeeded(!1):E.scrollIntoView(!1))},I=function(){var E=Na(y.getState());if(y.getState().activeItemId!==null&&E){var A=E.item,M=E.itemInputValue,j=E.itemUrl,q=E.source;q.onActive(ua({event:h,item:A,itemInputValue:M,itemUrl:j,refresh:_,source:q,state:y.getState()},x))}};h.preventDefault(),y.getState().isOpen===!1&&(g.openOnFocus||Boolean(y.getState().query))?Fa(ua({event:h,props:g,query:y.getState().query,refresh:_,store:y},x)).then(function(){y.dispatch(h.key,{nextActiveItemId:g.defaultActiveItemId}),I(),setTimeout(O,0)}):(y.dispatch(h.key,{}),I(),O())}else if(h.key==="Escape")h.preventDefault(),y.dispatch(h.key,null),y.pendingRequests.cancelAll();else if(h.key==="Tab")y.dispatch("blur",null),y.pendingRequests.cancelAll();else if(h.key==="Enter"){if(y.getState().activeItemId===null||y.getState().collections.every(function(E){return E.items.length===0}))return void(g.debug||y.pendingRequests.cancelAll());h.preventDefault();var w=Na(y.getState()),G=w.item,U=w.itemInputValue,D=w.itemUrl,C=w.source;if(h.metaKey||h.ctrlKey)D!==void 0&&(C.onSelect(ua({event:h,item:G,itemInputValue:U,itemUrl:D,refresh:_,source:C,state:y.getState()},x)),g.navigator.navigateNewTab({itemUrl:D,item:G,state:y.getState()}));else if(h.shiftKey)D!==void 0&&(C.onSelect(ua({event:h,item:G,itemInputValue:U,itemUrl:D,refresh:_,source:C,state:y.getState()},x)),g.navigator.navigateNewWindow({itemUrl:D,item:G,state:y.getState()}));else if(!h.altKey){if(D!==void 0)return C.onSelect(ua({event:h,item:G,itemInputValue:U,itemUrl:D,refresh:_,source:C,state:y.getState()},x)),void g.navigator.navigate({itemUrl:D,item:G,state:y.getState()});Fa(ua({event:h,nextState:{isOpen:!1},props:g,query:U,refresh:_,store:y},x)).then(function(){C.onSelect(ua({event:h,item:G,itemInputValue:U,itemUrl:D,refresh:_,source:C,state:y.getState()},x))})}}})(os({event:v,props:s,refresh:a,store:e},t))},onFocus:p,onBlur:Zd,onClick:function(v){o.inputElement!==s.environment.document.activeElement||e.getState().isOpen||p(v)}},k)},getPanelProps:function(o){return os({onMouseDown:function(i){i.preventDefault()},onMouseLeave:function(){e.dispatch("mouseleave",null)}},o)},getListProps:function(o){return os({role:"listbox","aria-labelledby":"".concat(s.id,"-label"),id:"".concat(s.id,"-list")},o)},getItemProps:function(o){var i=o.item,p=o.source,l=ke(o,sy);return os({id:"".concat(s.id,"-item-").concat(i.__autocomplete_id),role:"option","aria-selected":e.getState().activeItemId===i.__autocomplete_id,onMouseMove:function(c){if(i.__autocomplete_id!==e.getState().activeItemId){e.dispatch("mousemove",i.__autocomplete_id);var r=Na(e.getState());if(e.getState().activeItemId!==null&&r){var k=r.item,d=r.itemInputValue,u=r.itemUrl,m=r.source;m.onActive(os({event:c,item:k,itemInputValue:d,itemUrl:u,refresh:a,source:m,state:e.getState()},t))}}},onMouseDown:function(c){c.preventDefault()},onClick:function(c){var r=p.getItemInputValue({item:i,state:e.getState()}),k=p.getItemUrl({item:i,state:e.getState()});(k?Promise.resolve():Fa(os({event:c,nextState:{isOpen:!1},props:s,query:r,refresh:a,store:e},t))).then(function(){p.onSelect(os({event:c,item:i,itemInputValue:r,itemUrl:k,refresh:a,source:p,state:e.getState()},t))})}},l)}}}function Bc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function ty(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Bc(Object(a),!0).forEach(function(e){sk(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Bc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function sk(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function oy(n){var s,a,e,t,o=n.plugins,i=n.options,p=(s=(((a=i.__autocomplete_metadata)===null||a===void 0?void 0:a.userAgents)||[])[0])===null||s===void 0?void 0:s.segment,l=p?sk({},p,Object.keys(((e=i.__autocomplete_metadata)===null||e===void 0?void 0:e.options)||{})):{};return{plugins:o.map(function(c){return{name:c.name,options:Object.keys(c.__autocomplete_pluginOptions||[])}}),options:ty({"autocomplete-core":Object.keys(i)},l),ua:If.concat(((t=i.__autocomplete_metadata)===null||t===void 0?void 0:t.userAgents)||[])}}function Nc(n){var s,a=n.state;return a.isOpen===!1||a.activeItemId===null?null:((s=Na(a))===null||s===void 0?void 0:s.itemInputValue)||null}function zc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function Pn(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?zc(Object(a),!0).forEach(function(e){iy(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):zc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function iy(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}var py=function(n,s){switch(s.type){case"setActiveItemId":case"mousemove":return Pn(Pn({},n),{},{activeItemId:s.payload});case"setQuery":return Pn(Pn({},n),{},{query:s.payload,completion:null});case"setCollections":return Pn(Pn({},n),{},{collections:s.payload});case"setIsOpen":return Pn(Pn({},n),{},{isOpen:s.payload});case"setStatus":return Pn(Pn({},n),{},{status:s.payload});case"setContext":return Pn(Pn({},n),{},{context:Pn(Pn({},n.context),s.payload)});case"ArrowDown":var a=Pn(Pn({},n),{},{activeItemId:s.payload.hasOwnProperty("nextActiveItemId")?s.payload.nextActiveItemId:$c(1,n.activeItemId,Gi(n),s.props.defaultActiveItemId)});return Pn(Pn({},a),{},{completion:Nc({state:a})});case"ArrowUp":var e=Pn(Pn({},n),{},{activeItemId:$c(-1,n.activeItemId,Gi(n),s.props.defaultActiveItemId)});return Pn(Pn({},e),{},{completion:Nc({state:e})});case"Escape":return n.isOpen?Pn(Pn({},n),{},{activeItemId:null,isOpen:!1,completion:null}):Pn(Pn({},n),{},{activeItemId:null,query:"",status:"idle",collections:[]});case"submit":return Pn(Pn({},n),{},{activeItemId:null,isOpen:!1,status:"idle"});case"reset":return Pn(Pn({},n),{},{activeItemId:s.props.openOnFocus===!0?s.props.defaultActiveItemId:null,status:"idle",query:""});case"focus":return Pn(Pn({},n),{},{activeItemId:s.props.defaultActiveItemId,isOpen:(s.props.openOnFocus||Boolean(n.query))&&s.props.shouldPanelOpen({state:n})});case"blur":return s.props.debug?n:Pn(Pn({},n),{},{isOpen:!1,activeItemId:null});case"mouseleave":return Pn(Pn({},n),{},{activeItemId:s.props.defaultActiveItemId});default:return"The reducer action ".concat(JSON.stringify(s.type)," is not supported."),n}};function Hc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function da(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Hc(Object(a),!0).forEach(function(e){ly(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Hc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function ly(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function cy(n){var s=[],a=function(p,l){var c,r=typeof window!="undefined"?window:{},k=p.plugins||[];return Ia(Ia({debug:!1,openOnFocus:!1,placeholder:"",autoFocus:!1,defaultActiveItemId:null,stallThreshold:300,environment:r,shouldPanelOpen:function(d){return Gi(d.state)>0},reshape:function(d){return d.sources}},p),{},{id:(c=p.id)!==null&&c!==void 0?c:"autocomplete-".concat(Pf++),plugins:k,initialState:Ia({activeItemId:null,query:"",completion:null,collections:[],isOpen:!1,status:"idle",context:{}},p.initialState),onStateChange:function(d){var u;(u=p.onStateChange)===null||u===void 0||u.call(p,d),k.forEach(function(m){var v;return(v=m.onStateChange)===null||v===void 0?void 0:v.call(m,d)})},onSubmit:function(d){var u;(u=p.onSubmit)===null||u===void 0||u.call(p,d),k.forEach(function(m){var v;return(v=m.onSubmit)===null||v===void 0?void 0:v.call(m,d)})},onReset:function(d){var u;(u=p.onReset)===null||u===void 0||u.call(p,d),k.forEach(function(m){var v;return(v=m.onReset)===null||v===void 0?void 0:v.call(m,d)})},getSources:function(d){return Promise.all([].concat(Ff(k.map(function(u){return u.getSources})),[p.getSources]).filter(Boolean).map(function(u){return Af(u,d)})).then(function(u){return Ge(u)}).then(function(u){return u.map(function(m){return Ia(Ia({},m),{},{onSelect:function(v){m.onSelect(v),l.forEach(function(b){var h;return(h=b.onSelect)===null||h===void 0?void 0:h.call(b,v)})},onActive:function(v){m.onActive(v),l.forEach(function(b){var h;return(h=b.onActive)===null||h===void 0?void 0:h.call(b,v)})}})})})},navigator:Ia({navigate:function(d){var u=d.itemUrl;r.location.assign(u)},navigateNewTab:function(d){var u=d.itemUrl,m=r.open(u,"_blank","noopener");m==null||m.focus()},navigateNewWindow:function(d){var u=d.itemUrl;r.open(u,"_blank","noopener")}},p.navigator)})}(n,s),e=jf(py,a,function(p){var l=p.prevState,c=p.state;a.onStateChange(da({prevState:l,state:c,refresh:i},t))}),t=function(p){var l=p.store;return{setActiveItemId:function(c){l.dispatch("setActiveItemId",c)},setQuery:function(c){l.dispatch("setQuery",c)},setCollections:function(c){var r=0,k=c.map(function(d){return yt(yt({},d),{},{items:Ge(d.items).map(function(u){return yt(yt({},u),{},{__autocomplete_id:r++})})})});l.dispatch("setCollections",k)},setIsOpen:function(c){l.dispatch("setIsOpen",c)},setStatus:function(c){l.dispatch("setStatus",c)},setContext:function(c){l.dispatch("setContext",c)}}}({store:e}),o=ey(da({props:a,refresh:i,store:e},t));function i(){return Fa(da({event:new Event("input"),nextState:{isOpen:e.getState().isOpen},props:a,query:e.getState().query,refresh:i,store:e},t))}return a.plugins.forEach(function(p){var l;return(l=p.subscribe)===null||l===void 0?void 0:l.call(p,da(da({},t),{},{refresh:i,onSelect:function(c){s.push({onSelect:c})},onActive:function(c){s.push({onActive:c})}}))}),function(p){var l,c,r=p.metadata,k=p.environment;if(!((l=k.navigator)===null||l===void 0||(c=l.userAgent)===null||c===void 0)&&c.includes("Algolia Crawler")){var d=k.document.createElement("meta"),u=k.document.querySelector("head");d.name="algolia:metadata",setTimeout(function(){d.content=JSON.stringify(r),u.appendChild(d)},0)}}({metadata:oy({plugins:a.plugins,options:n}),environment:a.environment}),da(da({refresh:i},o),t)}function ry(n){var s=n.translations,a=(s===void 0?{}:s).searchByText,e=a===void 0?"Search by":a;return $.createElement("a",{href:"https://www.algolia.com/ref/docsearch/?utm_source=".concat(window.location.hostname,"&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch"),target:"_blank",rel:"noopener noreferrer"},$.createElement("span",{className:"DocSearch-Label"},e),$.createElement("svg",{width:"77",height:"19","aria-label":"Algolia",role:"img"},$.createElement("path",{d:"M2.5067 0h14.0245c1.384.001 2.5058 1.1205 2.5068 2.5017V16.5c-.0014 1.3808-1.1232 2.4995-2.5068 2.5H2.5067C1.1232 18.9995.0014 17.8808 0 16.5V2.4958A2.495 2.495 0 01.735.7294 2.505 2.505 0 012.5068 0zM37.95 15.0695c-3.7068.0168-3.7068-2.986-3.7068-3.4634L34.2372.3576 36.498 0v11.1794c0 .2715 0 1.9889 1.452 1.994v1.8961zm-9.1666-1.8388c.694 0 1.2086-.0397 1.5678-.1088v-2.2934a5.3639 5.3639 0 00-1.3303-.1679 4.8283 4.8283 0 00-.758.0582 2.2845 2.2845 0 00-.688.2024c-.2029.0979-.371.2362-.4919.4142-.1268.1788-.185.2826-.185.5533 0 .5297.185.8359.5205 1.0375.3355.2016.7928.3053 1.365.3053v-.0008zm-.1969-8.1817c.7463 0 1.3768.092 1.8856.2767.5088.1838.9195.4428 1.2204.7717.3068.334.5147.7777.6423 1.251.1327.4723.196.991.196 1.5603v5.798c-.5235.1036-1.05.192-1.5787.2649-.7048.1037-1.4976.156-2.3774.156-.5832 0-1.1215-.0582-1.6016-.167a3.385 3.385 0 01-1.2432-.5364 2.6034 2.6034 0 01-.8037-.9565c-.191-.3922-.29-.9447-.29-1.5208 0-.5533.11-.905.3246-1.2863a2.7351 2.7351 0 01.8849-.9329c.376-.242.8029-.415 1.2948-.5187a7.4517 7.4517 0 011.5381-.156 7.1162 7.1162 0 011.6667.2024V8.886c0-.259-.0296-.5061-.093-.7372a1.5847 1.5847 0 00-.3245-.6158 1.5079 1.5079 0 00-.6119-.4158 2.6788 2.6788 0 00-.966-.173c-.5206 0-.9948.0634-1.4283.1384a6.5481 6.5481 0 00-1.065.259l-.2712-1.849c.2831-.0986.7048-.1964 1.2491-.2943a9.2979 9.2979 0 011.752-.1501v.0008zm44.6597 8.1193c.6947 0 1.2086-.0405 1.567-.1097v-2.2942a5.3743 5.3743 0 00-1.3303-.1679c-.2485 0-.503.0177-.7573.0582a2.2853 2.2853 0 00-.688.2024 1.2333 1.2333 0 00-.4918.4142c-.1268.1788-.1843.2826-.1843.5533 0 .5297.1843.8359.5198 1.0375.3414.2066.7927.3053 1.365.3053v.0009zm-.191-8.1767c.7463 0 1.3768.0912 1.8856.2759.5087.1847.9195.4436 1.2204.7717.3.329.5147.7786.6414 1.251a5.7248 5.7248 0 01.197 1.562v5.7972c-.3466.0742-.874.1602-1.5788.2648-.7049.1038-1.4976.1552-2.3774.1552-.5832 0-1.1215-.0573-1.6016-.167a3.385 3.385 0 01-1.2432-.5356 2.6034 2.6034 0 01-.8038-.9565c-.191-.3922-.2898-.9447-.2898-1.5216 0-.5533.1098-.905.3245-1.2854a2.7373 2.7373 0 01.8849-.9338c.376-.2412.8029-.4141 1.2947-.5178a7.4545 7.4545 0 012.325-.1097c.2781.0287.5672.081.879.156v-.3686a2.7781 2.7781 0 00-.092-.738 1.5788 1.5788 0 00-.3246-.6166 1.5079 1.5079 0 00-.612-.415 2.6797 2.6797 0 00-.966-.1729c-.5205 0-.9947.0633-1.4282.1384a6.5608 6.5608 0 00-1.065.259l-.2712-1.8498c.283-.0979.7048-.1957 1.2491-.2935a9.8597 9.8597 0 011.752-.1494zm-6.79-1.072c-.7576.001-1.373-.6103-1.3759-1.3664 0-.755.6128-1.3664 1.376-1.3664.764 0 1.3775.6115 1.3775 1.3664s-.6195 1.3664-1.3776 1.3664zm1.1393 11.1507h-2.2726V5.3409l2.2734-.3568v10.0845l-.0008.0017zm-3.984 0c-3.707.0168-3.707-2.986-3.707-3.4642L59.7069.3576 61.9685 0v11.1794c0 .2715 0 1.9889 1.452 1.994V15.0703zm-7.3512-4.979c0-.975-.2138-1.7873-.6305-2.3516-.4167-.571-.9998-.852-1.747-.852-.7454 0-1.3302.281-1.7452.852-.4166.5702-.6195 1.3765-.6195 2.3516 0 .9851.208 1.6473.6254 2.2183.4158.576.9998.8587 1.7461.8587.7454 0 1.3303-.2885 1.747-.8595.4158-.5761.6237-1.2315.6237-2.2184v.0009zm2.3132-.006c0 .7609-.1099 1.3361-.3356 1.9654a4.654 4.654 0 01-.9533 1.6076A4.214 4.214 0 0155.613 14.69c-.579.2412-1.4697.3795-1.9143.3795-.4462-.005-1.3303-.1324-1.9033-.3795a4.307 4.307 0 01-1.474-1.0316c-.4115-.4445-.7293-.9801-.9609-1.6076a5.3423 5.3423 0 01-.3465-1.9653c0-.7608.104-1.493.3356-2.1155a4.683 4.683 0 01.9719-1.5958 4.3383 4.3383 0 011.479-1.0257c.5739-.242 1.2043-.3567 1.8864-.3567.6829 0 1.3125.1197 1.8906.3567a4.1245 4.1245 0 011.4816 1.0257 4.7587 4.7587 0 01.9592 1.5958c.2426.6225.3643 1.3547.3643 2.1155zm-17.0198 0c0 .9448.208 1.9932.6238 2.431.4166.4386.955.6579 1.6142.6579.3584 0 .6998-.0523 1.0176-.1502.3186-.0978.5721-.2134.775-.3517V7.0784a8.8706 8.8706 0 00-1.4926-.1906c-.8206-.0236-1.4452.312-1.8847.8468-.4335.5365-.6533 1.476-.6533 2.3516v-.0008zm6.2863 4.4485c0 1.5385-.3938 2.662-1.1866 3.3773-.791.7136-2.0005 1.0712-3.6308 1.0712-.5958 0-1.834-.1156-2.8228-.334l.3643-1.7865c.8282.173 1.9202.2193 2.4932.2193.9077 0 1.555-.1847 1.943-.5533.388-.3686.578-.916.578-1.643v-.3687a6.8289 6.8289 0 01-.8848.3349c-.3634.1096-.786.167-1.261.167-.6246 0-1.1917-.0979-1.7055-.2944a3.5554 3.5554 0 01-1.3244-.8645c-.3642-.3796-.6541-.8579-.8561-1.4289-.2028-.571-.3068-1.59-.3068-2.339 0-.7034.1099-1.5856.3245-2.1735.2198-.5871.5316-1.0949.9542-1.515.4167-.42.9255-.743 1.5213-.98a5.5923 5.5923 0 012.052-.3855c.7353 0 1.4114.092 2.0707.2024.6592.1088 1.2204.2236 1.6776.35v8.945-.0008zM11.5026 4.2418v-.6511c-.0005-.4553-.3704-.8241-.8266-.8241H8.749c-.4561 0-.826.3688-.8265.824v.669c0 .0742.0693.1264.1445.1096a6.0346 6.0346 0 011.6768-.2362 6.125 6.125 0 011.6202.2185.1116.1116 0 00.1386-.1097zm-5.2806.852l-.3296-.3282a.8266.8266 0 00-1.168 0l-.393.3922a.8199.8199 0 000 1.164l.3237.323c.0524.0515.1268.0397.1733-.0117.191-.259.3989-.507.6305-.7372.2374-.2362.48-.4437.7462-.6335.0575-.0354.0634-.1155.017-.1687zm3.5159 2.069v2.818c0 .081.0879.1392.1622.0987l2.5102-1.2964c.0574-.0287.0752-.0987.0464-.1552a3.1237 3.1237 0 00-2.603-1.574c-.0575 0-.115.0456-.115.1097l-.0008-.0009zm.0008 6.789c-2.0933.0005-3.7915-1.6912-3.7947-3.7804C5.9468 8.0821 7.6452 6.39 9.7387 6.391c2.0932-.0005 3.7911 1.6914 3.794 3.7804a3.7783 3.7783 0 01-1.1124 2.675 3.7936 3.7936 0 01-2.6824 1.1054h.0008zM9.738 4.8002c-1.9218 0-3.6975 1.0232-4.6584 2.6841a5.359 5.359 0 000 5.3683c.9609 1.661 2.7366 2.6841 4.6584 2.6841a5.3891 5.3891 0 003.8073-1.5725 5.3675 5.3675 0 001.578-3.7987 5.3574 5.3574 0 00-1.5771-3.797A5.379 5.379 0 009.7387 4.801l-.0008-.0008z",fill:"currentColor",fillRule:"evenodd"})))}function xt(n){return $.createElement("svg",{width:"15",height:"15","aria-label":n.ariaLabel,role:"img"},$.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"},n.children))}function uy(n){var s=n.translations,a=s===void 0?{}:s,e=a.selectText,t=e===void 0?"to select":e,o=a.selectKeyAriaLabel,i=o===void 0?"Enter key":o,p=a.navigateText,l=p===void 0?"to navigate":p,c=a.navigateUpKeyAriaLabel,r=c===void 0?"Arrow up":c,k=a.navigateDownKeyAriaLabel,d=k===void 0?"Arrow down":k,u=a.closeText,m=u===void 0?"to close":u,v=a.closeKeyAriaLabel,b=v===void 0?"Escape key":v,h=a.searchByText,g=h===void 0?"Search by":h;return $.createElement($.Fragment,null,$.createElement("div",{className:"DocSearch-Logo"},$.createElement(ry,{translations:{searchByText:g}})),$.createElement("ul",{className:"DocSearch-Commands"},$.createElement("li",null,$.createElement("kbd",{className:"DocSearch-Commands-Key"},$.createElement(xt,{ariaLabel:i},$.createElement("path",{d:"M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"}))),$.createElement("span",{className:"DocSearch-Label"},t)),$.createElement("li",null,$.createElement("kbd",{className:"DocSearch-Commands-Key"},$.createElement(xt,{ariaLabel:d},$.createElement("path",{d:"M7.5 3.5v8M10.5 8.5l-3 3-3-3"}))),$.createElement("kbd",{className:"DocSearch-Commands-Key"},$.createElement(xt,{ariaLabel:r},$.createElement("path",{d:"M7.5 11.5v-8M10.5 6.5l-3-3-3 3"}))),$.createElement("span",{className:"DocSearch-Label"},l)),$.createElement("li",null,$.createElement("kbd",{className:"DocSearch-Commands-Key"},$.createElement(xt,{ariaLabel:b},$.createElement("path",{d:"M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"}))),$.createElement("span",{className:"DocSearch-Label"},m))))}function dy(n){var s=n.hit,a=n.children;return $.createElement("a",{href:s.url},a)}function ky(){return $.createElement("svg",{viewBox:"0 0 38 38",stroke:"currentColor",strokeOpacity:".5"},$.createElement("g",{fill:"none",fillRule:"evenodd"},$.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},$.createElement("circle",{strokeOpacity:".3",cx:"18",cy:"18",r:"18"}),$.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},$.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}function my(){return $.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},$.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("path",{d:"M3.18 6.6a8.23 8.23 0 1112.93 9.94h0a8.23 8.23 0 01-11.63 0"}),$.createElement("path",{d:"M6.44 7.25H2.55V3.36M10.45 6v5.6M10.45 11.6L13 13"})))}function Vi(){return $.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},$.createElement("path",{d:"M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function vy(){return $.createElement("svg",{className:"DocSearch-Hit-Select-Icon",width:"20",height:"20",viewBox:"0 0 20 20"},$.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("path",{d:"M18 3v4c0 2-2 4-4 4H2"}),$.createElement("path",{d:"M8 17l-6-6 6-6"})))}var hy=function(){return $.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},$.createElement("path",{d:"M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))};function gy(n){switch(n.type){case"lvl1":return $.createElement(hy,null);case"content":return $.createElement(fy,null);default:return $.createElement(by,null)}}function by(){return $.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},$.createElement("path",{d:"M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function fy(){return $.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},$.createElement("path",{d:"M17 5H3h14zm0 5H3h14zm0 5H3h14z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function Gc(){return $.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},$.createElement("path",{d:"M10 14.2L5 17l1-5.6-4-4 5.5-.7 2.5-5 2.5 5 5.6.8-4 4 .9 5.5z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function yy(){return $.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("path",{d:"M19 4.8a16 16 0 00-2-1.2m-3.3-1.2A16 16 0 001.1 4.7M16.7 8a12 12 0 00-2.8-1.4M10 6a12 12 0 00-6.7 2M12.3 14.7a4 4 0 00-4.5 0M14.5 11.4A8 8 0 0010 10M3 16L18 2M10 18h0"}))}function _y(){return $.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("path",{d:"M15.5 4.8c2 3 1.7 7-1 9.7h0l4.3 4.3-4.3-4.3a7.8 7.8 0 01-9.8 1m-2.2-2.2A7.8 7.8 0 0113.2 2.4M2 18L18 2"}))}function wy(n){var s=n.translations,a=s===void 0?{}:s,e=a.titleText,t=e===void 0?"Unable to fetch results":e,o=a.helpText,i=o===void 0?"You might want to check your network connection.":o;return $.createElement("div",{className:"DocSearch-ErrorScreen"},$.createElement("div",{className:"DocSearch-Screen-Icon"},$.createElement(yy,null)),$.createElement("p",{className:"DocSearch-Title"},t),$.createElement("p",{className:"DocSearch-Help"},i))}var Sy=["translations"];function xy(n){return function(s){if(Array.isArray(s))return Vo(s)}(n)||function(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(n)||function(s,a){if(!!s){if(typeof s=="string")return Vo(s,a);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Vo(s,a)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vo(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}function $y(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function Cy(n){var s=n.translations,a=s===void 0?{}:s,e=$y(n,Sy),t=a.noResultsText,o=t===void 0?"No results for":t,i=a.suggestedQueryText,p=i===void 0?"Try searching for":i,l=a.reportMissingResultsText,c=l===void 0?"Believe this query should return results?":l,r=a.reportMissingResultsLinkText,k=r===void 0?"Let us know.":r,d=e.state.context.searchSuggestions;return $.createElement("div",{className:"DocSearch-NoResults"},$.createElement("div",{className:"DocSearch-Screen-Icon"},$.createElement(_y,null)),$.createElement("p",{className:"DocSearch-Title"},o,' "',$.createElement("strong",null,e.state.query),'"'),d&&d.length>0&&$.createElement("div",{className:"DocSearch-NoResults-Prefill-List"},$.createElement("p",{className:"DocSearch-Help"},p,":"),$.createElement("ul",null,d.slice(0,3).reduce(function(u,m){return[].concat(xy(u),[$.createElement("li",{key:m},$.createElement("button",{className:"DocSearch-Prefill",key:m,type:"button",onClick:function(){e.setQuery(m.toLowerCase()+" "),e.refresh(),e.inputRef.current.focus()}},m))])},[]))),e.getMissingResultsUrl&&$.createElement("p",{className:"DocSearch-Help"},"".concat(c," "),$.createElement("a",{href:e.getMissingResultsUrl({query:e.state.query}),target:"_blank",rel:"noopener noreferrer"},k)))}var Ey=["hit","attribute","tagName"];function Vc(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function Uc(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Vc(Object(a),!0).forEach(function(e){Ty(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Vc(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Ty(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function Py(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function qc(n,s){return s.split(".").reduce(function(a,e){return a!=null&&a[e]?a[e]:null},n)}function Oa(n){var s=n.hit,a=n.attribute,e=n.tagName;return Is(e===void 0?"span":e,Uc(Uc({},Py(n,Ey)),{},{dangerouslySetInnerHTML:{__html:qc(s,"_snippetResult.".concat(a,".value"))||qc(s,a)}}))}function Wc(n,s){return function(a){if(Array.isArray(a))return a}(n)||function(a,e){var t=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var o,i,p=[],l=!0,c=!1;try{for(t=t.call(a);!(l=(o=t.next()).done)&&(p.push(o.value),!e||p.length!==e);l=!0);}catch(r){c=!0,i=r}finally{try{l||t.return==null||t.return()}finally{if(c)throw i}}return p}}(n,s)||function(a,e){if(!!a){if(typeof a=="string")return Yc(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yc(a,e)}}(n,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yc(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}function no(){return no=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},no.apply(this,arguments)}function Ui(n){return n.collection&&n.collection.items.length!==0?$.createElement("section",{className:"DocSearch-Hits"},$.createElement("div",{className:"DocSearch-Hit-source"},n.title),$.createElement("ul",n.getListProps(),n.collection.items.map(function(s,a){return $.createElement(Iy,no({key:[n.title,s.objectID].join(":"),item:s,index:a},n))}))):null}function Iy(n){var s=n.item,a=n.index,e=n.renderIcon,t=n.renderAction,o=n.getItemProps,i=n.onItemClick,p=n.collection,l=n.hitComponent,c=Wc($.useState(!1),2),r=c[0],k=c[1],d=Wc($.useState(!1),2),u=d[0],m=d[1],v=$.useRef(null),b=l;return $.createElement("li",no({className:["DocSearch-Hit",s.__docsearch_parent&&"DocSearch-Hit--Child",r&&"DocSearch-Hit--deleting",u&&"DocSearch-Hit--favoriting"].filter(Boolean).join(" "),onTransitionEnd:function(){v.current&&v.current()}},o({item:s,source:p.source,onClick:function(){i(s)}})),$.createElement(b,{hit:s},$.createElement("div",{className:"DocSearch-Hit-Container"},e({item:s,index:a}),s.hierarchy[s.type]&&s.type==="lvl1"&&$.createElement("div",{className:"DocSearch-Hit-content-wrapper"},$.createElement(Oa,{className:"DocSearch-Hit-title",hit:s,attribute:"hierarchy.lvl1"}),s.content&&$.createElement(Oa,{className:"DocSearch-Hit-path",hit:s,attribute:"content"})),s.hierarchy[s.type]&&(s.type==="lvl2"||s.type==="lvl3"||s.type==="lvl4"||s.type==="lvl5"||s.type==="lvl6")&&$.createElement("div",{className:"DocSearch-Hit-content-wrapper"},$.createElement(Oa,{className:"DocSearch-Hit-title",hit:s,attribute:"hierarchy.".concat(s.type)}),$.createElement(Oa,{className:"DocSearch-Hit-path",hit:s,attribute:"hierarchy.lvl1"})),s.type==="content"&&$.createElement("div",{className:"DocSearch-Hit-content-wrapper"},$.createElement(Oa,{className:"DocSearch-Hit-title",hit:s,attribute:"content"}),$.createElement(Oa,{className:"DocSearch-Hit-path",hit:s,attribute:"hierarchy.lvl1"})),t({item:s,runDeleteTransition:function(h){k(!0),v.current=h},runFavoriteTransition:function(h){m(!0),v.current=h}}))))}function Xc(n,s){return n.reduce(function(a,e){var t=s(e);return a.hasOwnProperty(t)||(a[t]=[]),a[t].length<5&&a[t].push(e),a},{})}function Jc(n){return n}function Oy(){}var ak=/(<mark>|<\/mark>)/g,Ay=RegExp(ak.source);function ek(n){var s,a,e,t,o,i=n;if(!i.__docsearch_parent&&!n._highlightResult)return n.hierarchy.lvl0;var p=((i.__docsearch_parent?(s=i.__docsearch_parent)===null||s===void 0||(a=s._highlightResult)===null||a===void 0||(e=a.hierarchy)===null||e===void 0?void 0:e.lvl0:(t=n._highlightResult)===null||t===void 0||(o=t.hierarchy)===null||o===void 0?void 0:o.lvl0)||{}).value;return p&&Ay.test(p)?p.replace(ak,""):p}function qi(){return qi=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},qi.apply(this,arguments)}function Ly(n){return $.createElement("div",{className:"DocSearch-Dropdown-Container"},n.state.collections.map(function(s){if(s.items.length===0)return null;var a=ek(s.items[0]);return $.createElement(Ui,qi({},n,{key:s.source.sourceId,title:a,collection:s,renderIcon:function(e){var t,o=e.item,i=e.index;return $.createElement($.Fragment,null,o.__docsearch_parent&&$.createElement("svg",{className:"DocSearch-Hit-Tree",viewBox:"0 0 24 54"},$.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.__docsearch_parent!==((t=s.items[i+1])===null||t===void 0?void 0:t.__docsearch_parent)?$.createElement("path",{d:"M8 6v21M20 27H8.3"}):$.createElement("path",{d:"M8 6v42M20 27H8.3"}))),$.createElement("div",{className:"DocSearch-Hit-icon"},$.createElement(gy,{type:o.type})))},renderAction:function(){return $.createElement("div",{className:"DocSearch-Hit-action"},$.createElement(vy,null))}}))}),n.resultsFooterComponent&&$.createElement("section",{className:"DocSearch-HitsFooter"},$.createElement(n.resultsFooterComponent,{state:n.state})))}var Dy=["translations"];function so(){return so=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},so.apply(this,arguments)}function My(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function jy(n){var s=n.translations,a=s===void 0?{}:s,e=My(n,Dy),t=a.recentSearchesTitle,o=t===void 0?"Recent":t,i=a.noRecentSearchesText,p=i===void 0?"No recent searches":i,l=a.saveRecentSearchButtonTitle,c=l===void 0?"Save this search":l,r=a.removeRecentSearchButtonTitle,k=r===void 0?"Remove this search from history":r,d=a.favoriteSearchesTitle,u=d===void 0?"Favorite":d,m=a.removeFavoriteSearchButtonTitle,v=m===void 0?"Remove this search from favorites":m;return e.state.status==="idle"&&e.hasCollections===!1?e.disableUserPersonalization?null:$.createElement("div",{className:"DocSearch-StartScreen"},$.createElement("p",{className:"DocSearch-Help"},p)):e.hasCollections===!1?null:$.createElement("div",{className:"DocSearch-Dropdown-Container"},$.createElement(Ui,so({},e,{title:o,collection:e.state.collections[0],renderIcon:function(){return $.createElement("div",{className:"DocSearch-Hit-icon"},$.createElement(my,null))},renderAction:function(b){var h=b.item,g=b.runFavoriteTransition,_=b.runDeleteTransition;return $.createElement($.Fragment,null,$.createElement("div",{className:"DocSearch-Hit-action"},$.createElement("button",{className:"DocSearch-Hit-action-button",title:c,type:"submit",onClick:function(y){y.preventDefault(),y.stopPropagation(),g(function(){e.favoriteSearches.add(h),e.recentSearches.remove(h),e.refresh()})}},$.createElement(Gc,null))),$.createElement("div",{className:"DocSearch-Hit-action"},$.createElement("button",{className:"DocSearch-Hit-action-button",title:k,type:"submit",onClick:function(y){y.preventDefault(),y.stopPropagation(),_(function(){e.recentSearches.remove(h),e.refresh()})}},$.createElement(Vi,null))))}})),$.createElement(Ui,so({},e,{title:u,collection:e.state.collections[1],renderIcon:function(){return $.createElement("div",{className:"DocSearch-Hit-icon"},$.createElement(Gc,null))},renderAction:function(b){var h=b.item,g=b.runDeleteTransition;return $.createElement("div",{className:"DocSearch-Hit-action"},$.createElement("button",{className:"DocSearch-Hit-action-button",title:v,type:"submit",onClick:function(_){_.preventDefault(),_.stopPropagation(),g(function(){e.favoriteSearches.remove(h),e.refresh()})}},$.createElement(Vi,null)))}})))}var Ry=["translations"];function ao(){return ao=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},ao.apply(this,arguments)}function Fy(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}var By=$.memo(function(n){var s=n.translations,a=s===void 0?{}:s,e=Fy(n,Ry);if(e.state.status==="error")return $.createElement(wy,{translations:a==null?void 0:a.errorScreen});var t=e.state.collections.some(function(o){return o.items.length>0});return e.state.query?t===!1?$.createElement(Cy,ao({},e,{translations:a==null?void 0:a.noResultsScreen})):$.createElement(Ly,e):$.createElement(jy,ao({},e,{hasCollections:t,translations:a==null?void 0:a.startScreen}))},function(n,s){return s.state.status==="loading"||s.state.status==="stalled"}),Ny=["translations"];function eo(){return eo=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},eo.apply(this,arguments)}function zy(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function Hy(n){var s=n.translations,a=s===void 0?{}:s,e=zy(n,Ny),t=a.resetButtonTitle,o=t===void 0?"Clear the query":t,i=a.resetButtonAriaLabel,p=i===void 0?"Clear the query":i,l=a.cancelButtonText,c=l===void 0?"Cancel":l,r=a.cancelButtonAriaLabel,k=r===void 0?"Cancel":r,d=e.getFormProps({inputElement:e.inputRef.current}).onReset;return $.useEffect(function(){e.autoFocus&&e.inputRef.current&&e.inputRef.current.focus()},[e.autoFocus,e.inputRef]),$.useEffect(function(){e.isFromSelection&&e.inputRef.current&&e.inputRef.current.select()},[e.isFromSelection,e.inputRef]),$.createElement($.Fragment,null,$.createElement("form",{className:"DocSearch-Form",onSubmit:function(u){u.preventDefault()},onReset:d},$.createElement("label",eo({className:"DocSearch-MagnifierLabel"},e.getLabelProps()),$.createElement(Qd,null)),$.createElement("div",{className:"DocSearch-LoadingIndicator"},$.createElement(ky,null)),$.createElement("input",eo({className:"DocSearch-Input",ref:e.inputRef},e.getInputProps({inputElement:e.inputRef.current,autoFocus:e.autoFocus,maxLength:64}))),$.createElement("button",{type:"reset",title:o,className:"DocSearch-Reset","aria-label":p,hidden:!e.state.query},$.createElement(Vi,null))),$.createElement("button",{className:"DocSearch-Cancel",type:"reset","aria-label":k,onClick:e.onClose},c))}var Gy=["_highlightResult","_snippetResult"];function Vy(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function Uy(n){return function(){var s="__TEST_KEY__";try{return localStorage.setItem(s,""),localStorage.removeItem(s),!0}catch{return!1}}()===!1?{setItem:function(){},getItem:function(){return[]}}:{setItem:function(s){return window.localStorage.setItem(n,JSON.stringify(s))},getItem:function(){var s=window.localStorage.getItem(n);return s?JSON.parse(s):[]}}}function Kc(n){var s=n.key,a=n.limit,e=a===void 0?5:a,t=Uy(s),o=t.getItem().slice(0,e);return{add:function(i){var p=i,l=(p._highlightResult,p._snippetResult,Vy(p,Gy)),c=o.findIndex(function(r){return r.objectID===l.objectID});c>-1&&o.splice(c,1),o.unshift(l),o=o.slice(0,e),t.setItem(o)},remove:function(i){o=o.filter(function(p){return p.objectID!==i.objectID}),t.setItem(o)},getAll:function(){return o}}}var qy=["facetName","facetQuery"];function Wy(n){var s,a="algoliasearch-client-js-".concat(n.key),e=function(){return s===void 0&&(s=n.localStorage||window.localStorage),s},t=function(){return JSON.parse(e().getItem(a)||"{}")};return{get:function(o,i){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var l=JSON.stringify(o),c=t()[l];return Promise.all([c||i(),c!==void 0])}).then(function(l){var c=Jt(l,2),r=c[0],k=c[1];return Promise.all([r,k||p.miss(r)])}).then(function(l){return Jt(l,1)[0]})},set:function(o,i){return Promise.resolve().then(function(){var p=t();return p[JSON.stringify(o)]=i,e().setItem(a,JSON.stringify(p)),i})},delete:function(o){return Promise.resolve().then(function(){var i=t();delete i[JSON.stringify(o)],e().setItem(a,JSON.stringify(i))})},clear:function(){return Promise.resolve().then(function(){e().removeItem(a)})}}}function be(n){var s=Kt(n.caches),a=s.shift();return a===void 0?{get:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return t().then(function(i){return Promise.all([i,o.miss(i)])}).then(function(i){return Jt(i,1)[0]})},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return a.get(e,t,o).catch(function(){return be({caches:s}).get(e,t,o)})},set:function(e,t){return a.set(e,t).catch(function(){return be({caches:s}).set(e,t)})},delete:function(e){return a.delete(e).catch(function(){return be({caches:s}).delete(e)})},clear:function(){return a.clear().catch(function(){return be({caches:s}).clear()})}}}function Uo(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},s={};return{get:function(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(a);if(o in s)return Promise.resolve(n.serializable?JSON.parse(s[o]):s[o]);var i=e(),p=t&&t.miss||function(){return Promise.resolve()};return i.then(function(l){return p(l)}).then(function(){return i})},set:function(a,e){return s[JSON.stringify(a)]=n.serializable?JSON.stringify(e):e,Promise.resolve(e)},delete:function(a){return delete s[JSON.stringify(a)],Promise.resolve()},clear:function(){return s={},Promise.resolve()}}}function Yy(n){for(var s=n.length-1;s>0;s--){var a=Math.floor(Math.random()*(s+1)),e=n[s];n[s]=n[a],n[a]=e}return n}function tk(n,s){return s&&Object.keys(s).forEach(function(a){n[a]=s[a](n)}),n}function xo(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),e=1;e<s;e++)a[e-1]=arguments[e];var t=0;return n.replace(/%s/g,function(){return encodeURIComponent(a[t++])})}var jt={WithinQueryParameters:0,WithinHeaders:1};function Qc(n,s){var a=n||{},e=a.data||{};return Object.keys(a).forEach(function(t){["timeout","headers","queryParameters","data","cacheable"].indexOf(t)===-1&&(e[t]=a[t])}),{data:Object.entries(e).length>0?e:void 0,timeout:a.timeout||s,headers:a.headers||{},queryParameters:a.queryParameters||{},cacheable:a.cacheable}}var za={Read:1,Write:2,Any:3},ok=1,Xy=2,ik=3;function pk(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ok;return Dn(Dn({},n),{},{status:s,lastUpdate:Date.now()})}function lk(n){return typeof n=="string"?{protocol:"https",url:n,accept:za.Any}:{protocol:n.protocol||"https",url:n.url,accept:n.accept||za.Any}}var Zc="GET",$o="POST";function Jy(n,s){return Promise.all(s.map(function(a){return n.get(a,function(){return Promise.resolve(pk(a))})})).then(function(a){var e=a.filter(function(i){return function(p){return p.status===ok||Date.now()-p.lastUpdate>12e4}(i)}),t=a.filter(function(i){return function(p){return p.status===ik&&Date.now()-p.lastUpdate<=12e4}(i)}),o=[].concat(Kt(e),Kt(t));return{getTimeout:function(i,p){return(t.length===0&&i===0?1:t.length+3+i)*p},statelessHosts:o.length>0?o.map(function(i){return lk(i)}):s}})}function nr(n,s,a,e){var t=[],o=function(d,u){if(!(d.method===Zc||d.data===void 0&&u.data===void 0)){var m=Array.isArray(d.data)?d.data:Dn(Dn({},d.data),u.data);return JSON.stringify(m)}}(a,e),i=function(d,u){var m=Dn(Dn({},d.headers),u.headers),v={};return Object.keys(m).forEach(function(b){var h=m[b];v[b.toLowerCase()]=h}),v}(n,e),p=a.method,l=a.method!==Zc?{}:Dn(Dn({},a.data),e.data),c=Dn(Dn(Dn({"x-algolia-agent":n.userAgent.value},n.queryParameters),l),e.queryParameters),r=0,k=function d(u,m){var v=u.pop();if(v===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:sr(t)};var b={data:o,headers:i,method:p,url:Qy(v,a.path,c),connectTimeout:m(r,n.timeouts.connect),responseTimeout:m(r,e.timeout)},h=function(_){var y={request:b,response:_,host:v,triesLeft:u.length};return t.push(y),y},g={onSucess:function(_){return function(y){try{return JSON.parse(y.content)}catch(x){throw function(O,I){return{name:"DeserializationError",message:O,response:I}}(x.message,y)}}(_)},onRetry:function(_){var y=h(_);return _.isTimedOut&&r++,Promise.all([n.logger.info("Retryable failure",rk(y)),n.hostsCache.set(v,pk(v,_.isTimedOut?ik:Xy))]).then(function(){return d(u,m)})},onFail:function(_){throw h(_),function(y,x){var O=y.content,I=y.status,w=O;try{w=JSON.parse(O).message}catch{}return function(G,U,D){return{name:"ApiError",message:G,status:U,transporterStackTrace:D}}(w,I,x)}(_,sr(t))}};return n.requester.send(b).then(function(_){return function(y,x){return function(O){var I=O.status;return O.isTimedOut||function(w){var G=w.isTimedOut,U=w.status;return!G&&~~U==0}(O)||~~(I/100)!=2&&~~(I/100)!=4}(y)?x.onRetry(y):~~(y.status/100)==2?x.onSucess(y):x.onFail(y)}(_,g)})};return Jy(n.hostsCache,s).then(function(d){return k(Kt(d.statelessHosts).reverse(),d.getTimeout)})}function Ky(n){var s={value:"Algolia for JavaScript (".concat(n,")"),add:function(a){var e="; ".concat(a.segment).concat(a.version!==void 0?" (".concat(a.version,")"):"");return s.value.indexOf(e)===-1&&(s.value="".concat(s.value).concat(e)),s}};return s}function Qy(n,s,a){var e=ck(a),t="".concat(n.protocol,"://").concat(n.url,"/").concat(s.charAt(0)==="/"?s.substr(1):s);return e.length&&(t+="?".concat(e)),t}function ck(n){return Object.keys(n).map(function(s){return xo("%s=%s",s,(a=n[s],Object.prototype.toString.call(a)==="[object Object]"||Object.prototype.toString.call(a)==="[object Array]"?JSON.stringify(n[s]):n[s]));var a}).join("&")}function sr(n){return n.map(function(s){return rk(s)})}function rk(n){var s=n.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return Dn(Dn({},n),{},{request:Dn(Dn({},n.request),{},{headers:Dn(Dn({},n.request.headers),s)})})}var Zy=function(n){var s=n.appId,a=function(o,i,p){var l={"x-algolia-api-key":p,"x-algolia-application-id":i};return{headers:function(){return o===jt.WithinHeaders?l:{}},queryParameters:function(){return o===jt.WithinQueryParameters?l:{}}}}(n.authMode!==void 0?n.authMode:jt.WithinHeaders,s,n.apiKey),e=function(o){var i=o.hostsCache,p=o.logger,l=o.requester,c=o.requestsCache,r=o.responsesCache,k=o.timeouts,d=o.userAgent,u=o.hosts,m=o.queryParameters,v={hostsCache:i,logger:p,requester:l,requestsCache:c,responsesCache:r,timeouts:k,userAgent:d,headers:o.headers,queryParameters:m,hosts:u.map(function(b){return lk(b)}),read:function(b,h){var g=Qc(h,v.timeouts.read),_=function(){return nr(v,v.hosts.filter(function(x){return(x.accept&za.Read)!=0}),b,g)};if((g.cacheable!==void 0?g.cacheable:b.cacheable)!==!0)return _();var y={request:b,mappedRequestOptions:g,transporter:{queryParameters:v.queryParameters,headers:v.headers}};return v.responsesCache.get(y,function(){return v.requestsCache.get(y,function(){return v.requestsCache.set(y,_()).then(function(x){return Promise.all([v.requestsCache.delete(y),x])},function(x){return Promise.all([v.requestsCache.delete(y),Promise.reject(x)])}).then(function(x){var O=Jt(x,2);return O[0],O[1]})})},{miss:function(x){return v.responsesCache.set(y,x)}})},write:function(b,h){return nr(v,v.hosts.filter(function(g){return(g.accept&za.Write)!=0}),b,Qc(h,v.timeouts.write))}};return v}(Dn(Dn({hosts:[{url:"".concat(s,"-dsn.algolia.net"),accept:za.Read},{url:"".concat(s,".algolia.net"),accept:za.Write}].concat(Yy([{url:"".concat(s,"-1.algolianet.com")},{url:"".concat(s,"-2.algolianet.com")},{url:"".concat(s,"-3.algolianet.com")}]))},n),{},{headers:Dn(Dn(Dn({},a.headers()),{"content-type":"application/x-www-form-urlencoded"}),n.headers),queryParameters:Dn(Dn({},a.queryParameters()),n.queryParameters)})),t={transporter:e,appId:s,addAlgoliaAgent:function(o,i){e.userAgent.add({segment:o,version:i})},clearCache:function(){return Promise.all([e.requestsCache.clear(),e.responsesCache.clear()]).then(function(){})}};return tk(t,n.methods)},uk=function(n){return function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={transporter:n.transporter,appId:n.appId,indexName:s};return tk(e,a.methods)}},ar=function(n){return function(s,a){var e=s.map(function(t){return Dn(Dn({},t),{},{params:ck(t.params||{})})});return n.transporter.read({method:$o,path:"1/indexes/*/queries",data:{requests:e},cacheable:!0},a)}},er=function(n){return function(s,a){return Promise.all(s.map(function(e){var t=e.params,o=t.facetName,i=t.facetQuery,p=pf(t,qy);return uk(n)(e.indexName,{methods:{searchForFacetValues:dk}}).searchForFacetValues(o,i,Dn(Dn({},a),p))}))}},n_=function(n){return function(s,a,e){return n.transporter.read({method:$o,path:xo("1/answers/%s/prediction",n.indexName),data:{query:s,queryLanguages:a},cacheable:!0},e)}},s_=function(n){return function(s,a){return n.transporter.read({method:$o,path:xo("1/indexes/%s/query",n.indexName),data:{query:s},cacheable:!0},a)}},dk=function(n){return function(s,a,e){return n.transporter.read({method:$o,path:xo("1/indexes/%s/facets/%s/query",n.indexName,s),data:{facetQuery:a},cacheable:!0},e)}},a_=1,e_=2,t_=3;function kk(n,s,a){var e,t={appId:n,apiKey:s,timeouts:{connect:1,read:2,write:30},requester:{send:function(o){return new Promise(function(i){var p=new XMLHttpRequest;p.open(o.method,o.url,!0),Object.keys(o.headers).forEach(function(k){return p.setRequestHeader(k,o.headers[k])});var l,c=function(k,d){return setTimeout(function(){p.abort(),i({status:0,content:d,isTimedOut:!0})},1e3*k)},r=c(o.connectTimeout,"Connection timeout");p.onreadystatechange=function(){p.readyState>p.OPENED&&l===void 0&&(clearTimeout(r),l=c(o.responseTimeout,"Socket timeout"))},p.onerror=function(){p.status===0&&(clearTimeout(r),clearTimeout(l),i({content:p.responseText||"Network request failed",status:p.status,isTimedOut:!1}))},p.onload=function(){clearTimeout(r),clearTimeout(l),i({content:p.responseText,status:p.status,isTimedOut:!1})},p.send(o.data)})}},logger:(e=t_,{debug:function(o,i){return a_>=e&&console.debug(o,i),Promise.resolve()},info:function(o,i){return e_>=e&&console.info(o,i),Promise.resolve()},error:function(o,i){return console.error(o,i),Promise.resolve()}}),responsesCache:Uo(),requestsCache:Uo({serializable:!1}),hostsCache:be({caches:[Wy({key:"".concat("4.8.5","-").concat(n)}),Uo()]}),userAgent:Ky("4.8.5").add({segment:"Browser",version:"lite"}),authMode:jt.WithinQueryParameters};return Zy(Dn(Dn(Dn({},t),a),{},{methods:{search:ar,searchForFacetValues:er,multipleQueries:ar,multipleSearchForFacetValues:er,initIndex:function(o){return function(i){return uk(o)(i,{methods:{search:s_,searchForFacetValues:dk,findAnswers:n_}})}}}}))}kk.version="4.8.5";var o_=["footer","searchBox"];function Te(){return Te=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},Te.apply(this,arguments)}function tr(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);s&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function qo(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?tr(Object(a),!0).forEach(function(e){i_(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):tr(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function i_(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function p_(n,s){return function(a){if(Array.isArray(a))return a}(n)||function(a,e){var t=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var o,i,p=[],l=!0,c=!1;try{for(t=t.call(a);!(l=(o=t.next()).done)&&(p.push(o.value),!e||p.length!==e);l=!0);}catch(r){c=!0,i=r}finally{try{l||t.return==null||t.return()}finally{if(c)throw i}}return p}}(n,s)||function(a,e){if(!!a){if(typeof a=="string")return or(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return or(a,e)}}(n,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function or(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}function l_(n,s){if(n==null)return{};var a,e,t=function(i,p){if(i==null)return{};var l,c,r={},k=Object.keys(i);for(c=0;c<k.length;c++)l=k[c],p.indexOf(l)>=0||(r[l]=i[l]);return r}(n,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(e=0;e<o.length;e++)a=o[e],s.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function c_(n){var s=n.appId,a=n.apiKey,e=n.indexName,t=n.placeholder,o=t===void 0?"Search docs":t,i=n.searchParameters,p=n.onClose,l=p===void 0?Oy:p,c=n.transformItems,r=c===void 0?Jc:c,k=n.hitComponent,d=k===void 0?dy:k,u=n.resultsFooterComponent,m=u===void 0?function(){return null}:u,v=n.navigator,b=n.initialScrollY,h=b===void 0?0:b,g=n.transformSearchClient,_=g===void 0?Jc:g,y=n.disableUserPersonalization,x=y!==void 0&&y,O=n.initialQuery,I=O===void 0?"":O,w=n.translations,G=w===void 0?{}:w,U=n.getMissingResultsUrl,D=G.footer,C=G.searchBox,E=l_(G,o_),A=p_($.useState({query:"",collections:[],completion:null,context:{},isOpen:!1,activeItemId:null,status:"idle"}),2),M=A[0],j=A[1],q=$.useRef(null),nn=$.useRef(null),yn=$.useRef(null),N=$.useRef(null),X=$.useRef(null),en=$.useRef(10),wn=$.useRef(typeof window!="undefined"?window.getSelection().toString().slice(0,64):"").current,xn=$.useRef(I||wn).current,P=function(f,S,T){return $.useMemo(function(){var L=kk(f,S);return L.addAlgoliaAgent("docsearch","3.2.1"),/docsearch.js \(.*\)/.test(L.transporter.userAgent.value)===!1&&L.addAlgoliaAgent("docsearch-react","3.2.1"),T(L)},[f,S,T])}(s,a,_),W=$.useRef(Kc({key:"__DOCSEARCH_FAVORITE_SEARCHES__".concat(e),limit:10})).current,R=$.useRef(Kc({key:"__DOCSEARCH_RECENT_SEARCHES__".concat(e),limit:W.getAll().length===0?7:4})).current,K=$.useCallback(function(f){if(!x){var S=f.type==="content"?f.__docsearch_parent:f;S&&W.getAll().findIndex(function(T){return T.objectID===S.objectID})===-1&&R.add(S)}},[W,R,x]),_n=$.useMemo(function(){return cy({id:"docsearch",defaultActiveItemId:0,placeholder:o,openOnFocus:!0,initialState:{query:xn,context:{searchSuggestions:[]}},navigator:v,onStateChange:function(f){j(f.state)},getSources:function(f){var S=f.query,T=f.state,L=f.setContext,F=f.setStatus;return S?P.search([{query:S,indexName:e,params:qo({attributesToRetrieve:["hierarchy.lvl0","hierarchy.lvl1","hierarchy.lvl2","hierarchy.lvl3","hierarchy.lvl4","hierarchy.lvl5","hierarchy.lvl6","content","type","url"],attributesToSnippet:["hierarchy.lvl1:".concat(en.current),"hierarchy.lvl2:".concat(en.current),"hierarchy.lvl3:".concat(en.current),"hierarchy.lvl4:".concat(en.current),"hierarchy.lvl5:".concat(en.current),"hierarchy.lvl6:".concat(en.current),"content:".concat(en.current)],snippetEllipsisText:"\u2026",highlightPreTag:"<mark>",highlightPostTag:"</mark>",hitsPerPage:20},i)}]).catch(function(B){throw B.name==="RetryError"&&F("error"),B}).then(function(B){var Y=B.results[0],H=Y.hits,Q=Y.nbHits,z=Xc(H,function(rn){return ek(rn)});return T.context.searchSuggestions.length<Object.keys(z).length&&L({searchSuggestions:Object.keys(z)}),L({nbHits:Q}),Object.values(z).map(function(rn,cn){return{sourceId:"hits".concat(cn),onSelect:function(on){var gn=on.item,Cn=on.event;K(gn),Cn.shiftKey||Cn.ctrlKey||Cn.metaKey||l()},getItemUrl:function(on){return on.item.url},getItems:function(){return Object.values(Xc(rn,function(on){return on.hierarchy.lvl1})).map(r).map(function(on){return on.map(function(gn){return qo(qo({},gn),{},{__docsearch_parent:gn.type!=="lvl1"&&on.find(function(Cn){return Cn.type==="lvl1"&&Cn.hierarchy.lvl1===gn.hierarchy.lvl1})})})}).flat()}}})}):x?[]:[{sourceId:"recentSearches",onSelect:function(B){var Y=B.item,H=B.event;K(Y),H.shiftKey||H.ctrlKey||H.metaKey||l()},getItemUrl:function(B){return B.item.url},getItems:function(){return R.getAll()}},{sourceId:"favoriteSearches",onSelect:function(B){var Y=B.item,H=B.event;K(Y),H.shiftKey||H.ctrlKey||H.metaKey||l()},getItemUrl:function(B){return B.item.url},getItems:function(){return W.getAll()}}]}})},[e,i,P,l,R,W,K,xn,o,v,r,x]),$n=_n.getEnvironmentProps,dn=_n.getRootProps,mn=_n.refresh;return function(f){var S=f.getEnvironmentProps,T=f.panelElement,L=f.formElement,F=f.inputElement;$.useEffect(function(){if(T&&L&&F){var B=S({panelElement:T,formElement:L,inputElement:F}),Y=B.onTouchStart,H=B.onTouchMove;return window.addEventListener("touchstart",Y),window.addEventListener("touchmove",H),function(){window.removeEventListener("touchstart",Y),window.removeEventListener("touchmove",H)}}},[S,T,L,F])}({getEnvironmentProps:$n,panelElement:N.current,formElement:yn.current,inputElement:X.current}),function(f){var S=f.container;$.useEffect(function(){if(S){var T=S.querySelectorAll("a[href]:not([disabled]), button:not([disabled]), input:not([disabled])"),L=T[0],F=T[T.length-1];return S.addEventListener("keydown",B),function(){S.removeEventListener("keydown",B)}}function B(Y){Y.key==="Tab"&&(Y.shiftKey?document.activeElement===L&&(Y.preventDefault(),F.focus()):document.activeElement===F&&(Y.preventDefault(),L.focus()))}},[S])}({container:q.current}),$.useEffect(function(){return document.body.classList.add("DocSearch--active"),function(){var f,S;document.body.classList.remove("DocSearch--active"),(f=(S=window).scrollTo)===null||f===void 0||f.call(S,0,h)}},[]),$.useEffect(function(){window.matchMedia("(max-width: 768px)").matches&&(en.current=5)},[]),$.useEffect(function(){N.current&&(N.current.scrollTop=0)},[M.query]),$.useEffect(function(){xn.length>0&&(mn(),X.current&&X.current.focus())},[xn,mn]),$.useEffect(function(){function f(){if(nn.current){var S=.01*window.innerHeight;nn.current.style.setProperty("--docsearch-vh","".concat(S,"px"))}}return f(),window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}},[]),$.createElement("div",Te({ref:q},dn({"aria-expanded":!0}),{className:["DocSearch","DocSearch-Container",M.status==="stalled"&&"DocSearch-Container--Stalled",M.status==="error"&&"DocSearch-Container--Errored"].filter(Boolean).join(" "),role:"button",tabIndex:0,onMouseDown:function(f){f.target===f.currentTarget&&l()}}),$.createElement("div",{className:"DocSearch-Modal",ref:nn},$.createElement("header",{className:"DocSearch-SearchBar",ref:yn},$.createElement(Hy,Te({},_n,{state:M,autoFocus:xn.length===0,inputRef:X,isFromSelection:Boolean(xn)&&xn===wn,translations:C,onClose:l}))),$.createElement("div",{className:"DocSearch-Dropdown",ref:N},$.createElement(By,Te({},_n,{indexName:e,state:M,hitComponent:d,resultsFooterComponent:m,disableUserPersonalization:x,recentSearches:R,favoriteSearches:W,inputRef:X,translations:E,getMissingResultsUrl:U,onItemClick:function(f){K(f),l()}}))),$.createElement("footer",{className:"DocSearch-Footer"},$.createElement(uy,{translations:D}))))}function Wi(){return Wi=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},Wi.apply(this,arguments)}function ir(n,s){return function(a){if(Array.isArray(a))return a}(n)||function(a,e){var t=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var o,i,p=[],l=!0,c=!1;try{for(t=t.call(a);!(l=(o=t.next()).done)&&(p.push(o.value),!e||p.length!==e);l=!0);}catch(r){c=!0,i=r}finally{try{l||t.return==null||t.return()}finally{if(c)throw i}}return p}}(n,s)||function(a,e){if(!!a){if(typeof a=="string")return pr(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pr(a,e)}}(n,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pr(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=n[a];return e}function r_(n){var s,a,e=$.useRef(null),t=ir($.useState(!1),2),o=t[0],i=t[1],p=ir($.useState((n==null?void 0:n.initialQuery)||void 0),2),l=p[0],c=p[1],r=$.useCallback(function(){i(!0)},[i]),k=$.useCallback(function(){i(!1)},[i]);return function(d){var u=d.isOpen,m=d.onOpen,v=d.onClose,b=d.onInput,h=d.searchButtonRef;$.useEffect(function(){function g(_){(_.keyCode===27&&u||_.key==="k"&&(_.metaKey||_.ctrlKey)||!function(y){var x=y.target,O=x.tagName;return x.isContentEditable||O==="INPUT"||O==="SELECT"||O==="TEXTAREA"}(_)&&_.key==="/"&&!u)&&(_.preventDefault(),u?v():document.body.classList.contains("DocSearch--active")||document.body.classList.contains("DocSearch--active")||m()),h&&h.current===document.activeElement&&b&&/[a-zA-Z0-9]/.test(String.fromCharCode(_.keyCode))&&b(_)}return window.addEventListener("keydown",g),function(){window.removeEventListener("keydown",g)}},[u,m,v,b,h])}({isOpen:o,onOpen:r,onClose:k,onInput:$.useCallback(function(d){i(!0),c(d.key)},[i,c]),searchButtonRef:e}),$.createElement($.Fragment,null,$.createElement(Tf,{ref:e,translations:n==null||(s=n.translations)===null||s===void 0?void 0:s.button,onClick:r}),o&&Yd($.createElement(c_,Wi({},n,{initialScrollY:window.scrollY,initialQuery:l,translations:n==null||(a=n.translations)===null||a===void 0?void 0:a.modal,onClose:k})),document.body))}function u_(n){Jd($.createElement(r_,Mi({},n,{transformSearchClient:function(s){return s.addAlgoliaAgent("docsearch.js","3.2.1"),n.transformSearchClient?n.transformSearchClient(s):s}})),function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return typeof s=="string"?a.document.querySelector(s):s}(n.container,n.environment))}const d_=n=>n.button===1||n.altKey||n.ctrlKey||n.metaKey||n.shiftKey,k_=()=>{const n=So(),s=wp();return{hitComponent:({hit:a,children:e})=>{const t=Eh(a.url,s.value.base);return{type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:a.url,onClick:o=>{d_(o)||(o.preventDefault(),n.push(t))},children:e},__v:null}},navigator:{navigate:({itemUrl:a})=>{n.push(a)}},transformSearchClient:a=>{const e=Sp(a.search,500);return{...a,search:async(...t)=>e(...t)}}}};const m_=jn({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!0}},setup(n){const s=yo(),a=yp(),e=k_(),t=vn(()=>{var p;return{...n.options,...(p=n.options.locales)==null?void 0:p[s.value]}}),o=[],i=()=>{var l,c;const p=(c=(l=t.value.searchParameters)==null?void 0:l.facetFilters)!=null?c:[];o.splice(0,o.length,`lang:${a.value}`,...un(p)?p:[p]),u_({...e,...t.value,container:`#${n.containerId}`,searchParameters:{...t.value.searchParameters,facetFilters:o}})};return Qn(()=>{i(),Vn([s,t],([p,l],[c,r])=>{p!==c&&JSON.stringify(l)!==JSON.stringify(r)&&i()}),Vn(a,(p,l)=>{if(p!==l){const c=o.findIndex(r=>r===`lang:${l}`);c>-1&&o.splice(c,1,`lang:${p}`)}})}),()=>Z("div",{id:n.containerId})}}),v_={apiKey:"e3224f6a8f05632af9c14c9767650b54",indexName:"anyfork",appId:"09V7PWK61N",placeholder:"\u641C\u7D22\u6587\u6863",locales:{"/":{placeholder:"\u641C\u7D22\u6587\u6863",translations:{button:{buttonText:"\u641C\u7D22\u6587\u6863"}}}}};var h_=Yn({enhance({app:n}){n.component("Docsearch",()=>Z(m_,{options:v_}))}});function g_(n){return{all:n=n||new Map,on:function(s,a){var e=n.get(s);e?e.push(a):n.set(s,[a])},off:function(s,a){var e=n.get(s);e&&(a?e.splice(e.indexOf(a)>>>0,1):n.set(s,[]))},emit:function(s,a){var e=n.get(s);e&&e.slice().map(function(t){t(a)}),(e=n.get("*"))&&e.slice().map(function(t){t(s,a)})}}}const mk=Symbol("pwaEvent"),b_=()=>{const n=Xn(mk);if(!n)throw new Error("usePwaEvent() is called without provider.");return n},f_=n=>{const s=n.waiting;if(!s)return;const a=new MessageChannel;s.postMessage({type:"SKIP_WAITING"},[a.port2])},y_="service-worker.js";var __=Yn({setup(){const n=(...a)=>console.log("[@vuepress/plugin-pwa]",...a),s=g_();zs(mk,s),Qn(async()=>{const{register:a}=await ln(()=>import("./index.js"),[]);a(qt(y_),{ready(e){n("Service worker is active."),s.emit("ready",e)},registered(e){n("Service worker has been registered."),s.emit("registered",e)},cached(e){n("Content has been cached for offline use."),s.emit("cached",e)},updatefound(e){n("New content is downloading."),s.emit("updatefound",e)},updated(e){n("New content is available, please refresh."),s.emit("updated",e)},offline(){n("No internet connection found. App is running in offline mode."),s.emit("offline")},error(e){n("Error during service worker registration:",e),s.emit("error",e)}})})}});const w_=jn({name:"PwaPopup",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(n){const s=b_(),a=yo(),e=vn(()=>{var p;return(p=n.locales[a.value])!=null?p:{message:"New content is available.",buttonText:"Refresh"}}),t=an(!1),o=an(null),i=()=>{t.value=!1,o.value&&(f_(o.value),location.reload(!0))};return s.on("updated",p=>{p&&(o.value=p,t.value=!0)}),()=>Z(st,{name:"pwa-popup"},()=>t.value?Z("div",{class:"pwa-popup"},[e.value.message,Z("br"),Z("button",{onClick:i},e.value.buttonText)]):null)}}),S_={"/":{message:"\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528",buttonText:"\u70B9\u6211\u5237\u65B0"}};var x_=Yn({rootComponents:[jn(()=>()=>Z(w_,{locales:S_}))]});var $_={};const vk=n=>{const s=yo();return vn(()=>n[s.value])};class C_{constructor(){const s="message-container",a=document.getElementById(s);a?this.containerElement=a:(this.containerElement=document.createElement("div"),this.containerElement.id=s,document.body.appendChild(this.containerElement))}pop(s,a=2e3){const e=document.createElement("div");e.className="message move-in",e.innerHTML=s,this.containerElement.appendChild(e),a>0&&setTimeout(()=>{this.close(e)},a)}close(s){s.className=s.className.replace("move-in",""),s.className+="move-out",s.addEventListener("animationend",()=>{s.remove()})}}const E_=(n,...s)=>{const a=n.resolve(...s),e=a.matched[a.matched.length-1];if(!(e!=null&&e.redirect))return a;const{redirect:t}=e,o=typeof t=="function"?t(a):t,i=(p=>typeof p=="string")(o)?{path:o}:o;return E_(n,{hash:a.hash,query:a.query,params:a.params,...i})},Yi=(n,...s)=>{if(s.length===0)return n;const a=s.shift()||{};return Object.keys(a).forEach(e=>{typeof n[e]!="object"||Array.isArray(n[e])||typeof a[e]!="object"||Array.isArray(a[e])?typeof a[e]=="object"?Array.isArray(a[e])?n[e]=[...a[e]]:n[e]={...a[e]}:n[e]=a[e]:Yi(n[e],a[e])}),Yi(n,...s)};var Wo,Bs=function(){var n=1e3,s=6e4,a=36e5,e="millisecond",t="second",o="minute",i="hour",p="day",l="week",c="month",r="quarter",k="year",d="date",u="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(D,C,E){var A=String(D);return!A||A.length>=C?D:""+Array(C+1-A.length).join(E)+D},g={s:h,z:function(D){var C=-D.utcOffset(),E=Math.abs(C),A=Math.floor(E/60),M=E%60;return(C<=0?"+":"-")+h(A,2,"0")+":"+h(M,2,"0")},m:function D(C,E){if(C.date()<E.date())return-D(E,C);var A=12*(E.year()-C.year())+(E.month()-C.month()),M=C.clone().add(A,c),j=E-M<0,q=C.clone().add(A+(j?-1:1),c);return+(-(A+(E-M)/(j?M-q:q-M))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:c,y:k,w:l,d:p,D:d,h:i,m:o,s:t,ms:e,Q:r}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},_="en",y={};y[_]=b;var x=function(D){return D instanceof G},O=function D(C,E,A){var M;if(!C)return _;if(typeof C=="string"){var j=C.toLowerCase();y[j]&&(M=j),E&&(y[j]=E,M=j);var q=C.split("-");if(!M&&q.length>1)return D(q[0])}else{var nn=C.name;y[nn]=C,M=nn}return!A&&M&&(_=M),M||!A&&_},I=function(D,C){if(x(D))return D.clone();var E=typeof C=="object"?C:{};return E.date=D,E.args=arguments,new G(E)},w=g;w.l=O,w.i=x,w.w=function(D,C){return I(D,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var G=function(){function D(E){this.$L=O(E.locale,null,!0),this.parse(E)}var C=D.prototype;return C.parse=function(E){this.$d=function(A){var M=A.date,j=A.utc;if(M===null)return new Date(NaN);if(w.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var q=M.match(m);if(q){var nn=q[2]-1||0,yn=(q[7]||"0").substring(0,3);return j?new Date(Date.UTC(q[1],nn,q[3]||1,q[4]||0,q[5]||0,q[6]||0,yn)):new Date(q[1],nn,q[3]||1,q[4]||0,q[5]||0,q[6]||0,yn)}}return new Date(M)}(E),this.$x=E.x||{},this.init()},C.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},C.$utils=function(){return w},C.isValid=function(){return this.$d.toString()!==u},C.isSame=function(E,A){var M=I(E);return this.startOf(A)<=M&&M<=this.endOf(A)},C.isAfter=function(E,A){return I(E)<this.startOf(A)},C.isBefore=function(E,A){return this.endOf(A)<I(E)},C.$g=function(E,A,M){return w.u(E)?this[A]:this.set(M,E)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(E,A){var M=this,j=!!w.u(A)||A,q=w.p(E),nn=function(W,R){var K=w.w(M.$u?Date.UTC(M.$y,R,W):new Date(M.$y,R,W),M);return j?K:K.endOf(p)},yn=function(W,R){return w.w(M.toDate()[W].apply(M.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(R)),M)},N=this.$W,X=this.$M,en=this.$D,wn="set"+(this.$u?"UTC":"");switch(q){case k:return j?nn(1,0):nn(31,11);case c:return j?nn(1,X):nn(0,X+1);case l:var xn=this.$locale().weekStart||0,P=(N<xn?N+7:N)-xn;return nn(j?en-P:en+(6-P),X);case p:case d:return yn(wn+"Hours",0);case i:return yn(wn+"Minutes",1);case o:return yn(wn+"Seconds",2);case t:return yn(wn+"Milliseconds",3);default:return this.clone()}},C.endOf=function(E){return this.startOf(E,!1)},C.$set=function(E,A){var M,j=w.p(E),q="set"+(this.$u?"UTC":""),nn=(M={},M[p]=q+"Date",M[d]=q+"Date",M[c]=q+"Month",M[k]=q+"FullYear",M[i]=q+"Hours",M[o]=q+"Minutes",M[t]=q+"Seconds",M[e]=q+"Milliseconds",M)[j],yn=j===p?this.$D+(A-this.$W):A;if(j===c||j===k){var N=this.clone().set(d,1);N.$d[nn](yn),N.init(),this.$d=N.set(d,Math.min(this.$D,N.daysInMonth())).$d}else nn&&this.$d[nn](yn);return this.init(),this},C.set=function(E,A){return this.clone().$set(E,A)},C.get=function(E){return this[w.p(E)]()},C.add=function(E,A){var M,j=this;E=Number(E);var q=w.p(A),nn=function(X){var en=I(j);return w.w(en.date(en.date()+Math.round(X*E)),j)};if(q===c)return this.set(c,this.$M+E);if(q===k)return this.set(k,this.$y+E);if(q===p)return nn(1);if(q===l)return nn(7);var yn=(M={},M[o]=s,M[i]=a,M[t]=n,M)[q]||1,N=this.$d.getTime()+E*yn;return w.w(N,this)},C.subtract=function(E,A){return this.add(-1*E,A)},C.format=function(E){var A=this,M=this.$locale();if(!this.isValid())return M.invalidDate||u;var j=E||"YYYY-MM-DDTHH:mm:ssZ",q=w.z(this),nn=this.$H,yn=this.$m,N=this.$M,X=M.weekdays,en=M.months,wn=function(R,K,_n,$n){return R&&(R[K]||R(A,j))||_n[K].slice(0,$n)},xn=function(R){return w.s(nn%12||12,R,"0")},P=M.meridiem||function(R,K,_n){var $n=R<12?"AM":"PM";return _n?$n.toLowerCase():$n},W={YY:String(this.$y).slice(-2),YYYY:this.$y,M:N+1,MM:w.s(N+1,2,"0"),MMM:wn(M.monthsShort,N,en,3),MMMM:wn(en,N),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:wn(M.weekdaysMin,this.$W,X,2),ddd:wn(M.weekdaysShort,this.$W,X,3),dddd:X[this.$W],H:String(nn),HH:w.s(nn,2,"0"),h:xn(1),hh:xn(2),a:P(nn,yn,!0),A:P(nn,yn,!1),m:String(yn),mm:w.s(yn,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:q};return j.replace(v,function(R,K){return K||W[R]||q.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(E,A,M){var j,q=w.p(A),nn=I(E),yn=(nn.utcOffset()-this.utcOffset())*s,N=this-nn,X=w.m(this,nn);return X=(j={},j[k]=X/12,j[c]=X,j[r]=X/3,j[l]=(N-yn)/6048e5,j[p]=(N-yn)/864e5,j[i]=N/a,j[o]=N/s,j[t]=N/n,j)[q]||N,M?X:w.a(X)},C.daysInMonth=function(){return this.endOf(c).$D},C.$locale=function(){return y[this.$L]},C.locale=function(E,A){if(!E)return this.$L;var M=this.clone(),j=O(E,A,!0);return j&&(M.$L=j),M},C.clone=function(){return w.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},D}(),U=G.prototype;return I.prototype=U,[["$ms",e],["$s",t],["$m",o],["$H",i],["$W",p],["$M",c],["$y",k],["$D",d]].forEach(function(D){U[D[1]]=function(C){return this.$g(C,D[0],D[1])}}),I.extend=function(D,C){return D.$i||(D(C,G,I),D.$i=!0),I},I.locale=O,I.isDayjs=x,I.unix=function(D){return I(1e3*D)},I.en=y[_],I.Ls=y,I.p={},I}(),T_=(Wo={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},function(n,s,a){var e=s.prototype,t=e.format;a.en.formats=Wo,e.format=function(o){o===void 0&&(o="YYYY-MM-DDTHH:mm:ssZ");var i=this.$locale().formats,p=function(l,c){return l.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(r,k,d){var u=d&&d.toUpperCase();return k||c[d]||Wo[d]||c[u].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,v,b){return v||b.slice(1)})})}(o,i===void 0?{}:i);return t.call(this,p)}}),hk=function(n,s,a){var e=s.prototype,t=function(c){var r,k=c.date,d=c.utc,u={};if(!((r=k)instanceof Date)&&!(r instanceof Array)&&r instanceof Object){if(!Object.keys(k).length)return new Date;var m=d?a.utc():a();Object.keys(k).forEach(function(O){var I,w;u[I=O,w=e.$utils().p(I),w==="date"?"day":w]=k[O]});var v=u.day||(u.year||u.month>=0?1:m.date()),b=u.year||m.year(),h=u.month>=0?u.month:u.year||u.day?0:m.month(),g=u.hour||0,_=u.minute||0,y=u.second||0,x=u.millisecond||0;return d?new Date(Date.UTC(b,h,v,g,_,y,x)):new Date(b,h,v,g,_,y,x)}return k},o=e.parse;e.parse=function(c){c.date=t.bind(this)(c),o.bind(this)(c)};var i=e.set,p=e.add,l=function(c,r,k,d){if(d===void 0&&(d=1),r instanceof Object){var u=Object.keys(r),m=this;return u.forEach(function(v){m=c.bind(m)(r[v]*d,v)}),m}return c.bind(this)(r*d,k)};e.set=function(c,r){return r=r===void 0?c:r,l.bind(this)(function(k,d){return i.bind(this)(d,k)},r,c)},e.add=function(c,r){return l.bind(this)(p,c,r)},e.subtract=function(c,r){return l.bind(this)(p,c,r,-1)}},gk=function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(a,e,t){var o,i=function(r,k,d){d===void 0&&(d={});var u=new Date(r),m=function(v,b){b===void 0&&(b={});var h=b.timeZoneName||"short",g=v+"|"+h,_=s[g];return _||(_=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:h}),s[g]=_),_}(k,d);return m.formatToParts(u)},p=function(r,k){for(var d=i(r,k),u=[],m=0;m<d.length;m+=1){var v=d[m],b=v.type,h=v.value,g=n[b];g>=0&&(u[g]=parseInt(h,10))}var _=u[3],y=_===24?0:_,x=u[0]+"-"+u[1]+"-"+u[2]+" "+y+":"+u[4]+":"+u[5]+":000",O=+r;return(t.utc(x).valueOf()-(O-=O%1e3))/6e4},l=e.prototype;l.tz=function(r,k){r===void 0&&(r=o);var d=this.utcOffset(),u=this.toDate(),m=u.toLocaleString("en-US",{timeZone:r}),v=Math.round((u-new Date(m))/1e3/60),b=t(m).$set("millisecond",this.$ms).utcOffset(15*-Math.round(u.getTimezoneOffset()/15)-v,!0);if(k){var h=b.utcOffset();b=b.add(d-h,"minute")}return b.$x.$timezone=r,b},l.offsetName=function(r){var k=this.$x.$timezone||t.tz.guess(),d=i(this.valueOf(),k,{timeZoneName:r}).find(function(u){return u.type.toLowerCase()==="timezonename"});return d&&d.value};var c=l.startOf;l.startOf=function(r,k){if(!this.$x||!this.$x.$timezone)return c.call(this,r,k);var d=t(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return c.call(d,r,k).tz(this.$x.$timezone,!0)},t.tz=function(r,k,d){var u=d&&k,m=d||k||o,v=p(+t(),m);if(typeof r!="string")return t(r).tz(m);var b=function(y,x,O){var I=y-60*x*1e3,w=p(I,O);if(x===w)return[I,x];var G=p(I-=60*(w-x)*1e3,O);return w===G?[I,w]:[y-60*Math.min(w,G)*1e3,Math.max(w,G)]}(t.utc(r,u).valueOf(),v,m),h=b[0],g=b[1],_=t(h).utcOffset(g);return _.$x.$timezone=m,_},t.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},t.tz.setDefault=function(r){o=r}}}(),bk=function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(e,t,o){var i=t.prototype;o.utc=function(u){return new t({date:u,utc:!0,args:arguments})},i.utc=function(u){var m=o(this.toDate(),{locale:this.$L,utc:!0});return u?m.add(this.utcOffset(),n):m},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var p=i.parse;i.parse=function(u){u.utc&&(this.$u=!0),this.$utils().u(u.$offset)||(this.$offset=u.$offset),p.call(this,u)};var l=i.init;i.init=function(){if(this.$u){var u=this.$d;this.$y=u.getUTCFullYear(),this.$M=u.getUTCMonth(),this.$D=u.getUTCDate(),this.$W=u.getUTCDay(),this.$H=u.getUTCHours(),this.$m=u.getUTCMinutes(),this.$s=u.getUTCSeconds(),this.$ms=u.getUTCMilliseconds()}else l.call(this)};var c=i.utcOffset;i.utcOffset=function(u,m){var v=this.$utils().u;if(v(u))return this.$u?0:v(this.$offset)?c.call(this):this.$offset;if(typeof u=="string"&&(u=function(_){_===void 0&&(_="");var y=_.match(s);if(!y)return null;var x=(""+y[0]).match(a)||["-",0,0],O=x[0],I=60*+x[1]+ +x[2];return I===0?0:O==="+"?I:-I}(u),u===null))return this;var b=Math.abs(u)<=16?60*u:u,h=this;if(m)return h.$offset=b,h.$u=u===0,h;if(u!==0){var g=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(h=this.local().add(b+g,n)).$offset=b,h.$x.$localOffset=g}else h=this.utc();return h};var r=i.format;i.format=function(u){var m=u||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return r.call(this,m)},i.valueOf=function(){var u=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*u},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var k=i.toDate;i.toDate=function(u){return u==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():k.call(this)};var d=i.diff;i.diff=function(u,m,v){if(u&&this.$u===u.$u)return d.call(this,u,m,v);var b=this.local(),h=o(u).local();return d.call(b,h,m,v)}}}();Bs.extend(T_),Bs.extend(hk),Bs.extend(bk),Bs.extend(gk);const P_={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:(n,s)=>s==="W"?`${n}\u5468`:`${n}\u65E5`,weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:(n,s)=>{const a=100*n+s;return a<600?"\u51CC\u6668":a<900?"\u65E9\u4E0A":a<1100?"\u4E0A\u5348":a<1300?"\u4E2D\u5348":a<1800?"\u4E0B\u5348":"\u665A\u4E0A"}},I_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")};Bs.locale("zh",P_),Bs.locale("en",I_),Bs.extend(hk),Bs.extend(bk),Bs.extend(gk);const ka={selector:'.theme-default-content div[class*="language-"] pre'},lr=()=>!!navigator&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/iu.test(navigator.userAgent),O_=()=>{const n=et(),s=vk({"/":{copy:"\u590D\u5236\u6210\u529F!",hint:"copy!"}});let a;const e=o=>{if(!o.hasAttribute("copy-code-registered")){const i=document.createElement("button");ka.pure?(i.className="copy-code-pure-button",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon-copy-code"><path d="M704 896v80c0 26.51-21.49 48-48 48H112c-26.51 0-48-21.49-48-48V240c0-26.51 21.49-48 48-48h144v592c0 61.758 50.242 112 112 112h336zm0-688V0H368c-26.51 0-48 21.49-48 48v736c0 26.51 21.49 48 48 48h544c26.51 0 48-21.49 48-48V256H752c-26.4 0-48-21.6-48-48zm241.942-62.058L814.058 14.058A48 48 0 0 0 780.118 0H768v192h192v-12.118a48 48 0 0 0-14.058-33.94z"/></svg>'):(i.className="copy-code-button",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="icon-copy-code"><path fill="currentColor" d="M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 00-6-6H102a6 6 0 00-6 6v20a6 6 0 006 6h180a6 6 0 006-6z" /></svg>'),i.addEventListener("click",()=>{(p=>{const l=document.getSelection(),c=!!(l&&l.rangeCount>0)&&l.getRangeAt(0),r=document.createElement("textarea");r.value=p,r.setAttribute("readonly",""),r.style.position="absolute",r.style.top="-9999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),ka.pure||a.pop(`<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#06a35a"><path d="M822.812 824.618c-83.076 81.992-188.546 124.614-316.05 127.865-122.085-3.251-223.943-45.873-305.935-127.865S76.213 640.406 72.962 518.682c3.251-127.503 45.873-232.973 127.865-316.05 81.992-83.075 184.211-126.058 305.936-129.309 127.503 3.251 232.973 46.234 316.049 129.31 83.076 83.076 126.059 188.546 129.31 316.05-2.89 121.723-46.234 223.943-129.31 305.935zM432.717 684.111c3.973 3.974 8.307 5.78 13.364 6.14 5.057.362 9.753-1.444 13.365-5.417l292.57-287.515c3.974-3.973 5.78-8.307 5.78-13.364s-1.806-9.753-5.78-13.365l1.807 1.806c-3.973-3.973-8.669-5.779-14.087-6.14-5.418-.361-10.475 1.445-14.809 5.418L460.529 592.006c-3.973 3.25-8.669 4.695-14.448 4.695-5.78 0-10.836-1.445-15.531-3.973l-94.273-72.962c-4.335-3.251-9.392-4.335-14.448-3.973s-9.392 3.25-12.642 7.585l-2.89 3.973c-3.25 4.334-4.334 9.391-3.973 14.81.722 5.417 2.528 10.113 5.779 14.086L432.717 684.11z"/></svg><span>${s.value.copy} \u{1F389}</span>`,ka.duration),document.body.removeChild(r),c&&l&&(l.removeAllRanges(),l.addRange(c))})(o.innerText)}),i.setAttribute("aria-label",s.value.hint),i.setAttribute("data-balloon-pos","left"),o.parentElement&&o.parentElement.insertBefore(i,o),o.setAttribute("copy-code-registered","")}},t=()=>{const o=ka.selector;setTimeout(()=>{document.querySelectorAll(o).forEach(e)},ka.delay||500)};Qn(()=>{a=new C_,lr()&&!ka.showInMobile||t()}),Vn(()=>n.path,()=>{lr()&&!ka.showInMobile||t()})};var A_=Yn({setup:()=>{O_()}}),cr;const it=typeof window!="undefined",L_=n=>typeof n=="string",Yo=()=>{};it&&((cr=window==null?void 0:window.navigator)==null?void 0:cr.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function D_(n){return typeof n=="function"?n():fn(n)}function M_(n){return n}function j_(n){return tp()?(op(n),!0):!1}function R_(n){var s;const a=D_(n);return(s=a==null?void 0:a.$el)!=null?s:a}const F_=it?window:void 0;it&&window.document;it&&window.navigator;it&&window.location;function B_(...n){let s,a,e,t;if(L_(n[0])?([a,e,t]=n,s=F_):[s,a,e,t]=n,!s)return Yo;let o=Yo;const i=Vn(()=>R_(s),l=>{o(),l&&(l.addEventListener(a,e,t),o=()=>{l.removeEventListener(a,e,t),o=Yo})},{immediate:!0,flush:"post"}),p=()=>{i(),o()};return j_(p),p}const Xi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ji="__vueuse_ssr_handlers__";Xi[Ji]=Xi[Ji]||{};Xi[Ji];var rr;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(rr||(rr={}));var N_=Object.defineProperty,ur=Object.getOwnPropertySymbols,z_=Object.prototype.hasOwnProperty,H_=Object.prototype.propertyIsEnumerable,dr=(n,s,a)=>s in n?N_(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a,G_=(n,s)=>{for(var a in s||(s={}))z_.call(s,a)&&dr(n,a,s[a]);if(ur)for(var a of ur(s))H_.call(s,a)&&dr(n,a,s[a]);return n};const V_={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};G_({linear:M_},V_);var U_=Yn({setup:()=>{(()=>{const n=ae(),s=at(),a=vn(()=>Boolean(s.value.copy)||s.value.copy!==!1&&!0),e=vn(()=>{const i=s.value.copy;return!!a.value&&(typeof i=="object"&&"disableCopy"in i?i.disableCopy:!1)}),t=vn(()=>{const i=s.value.copy;return!!a.value&&(typeof i=="object"&&"disableSelection"in i?i.disableSelection:!1)}),o=i=>{const p=getSelection();if(p){const l=p.getRangeAt(0);if(a.value){if(e.value)return void i.preventDefault();if(l.toString().length>=100){i.preventDefault();const c=document.createElement("div");c.appendChild(p.getRangeAt(0).cloneContents()),i.clipboardData&&(i.clipboardData.setData("text/html",`${c.innerHTML}<hr><div class="copyright">${n.value.copyright.replace(/\\n/g,"<br>")}</div>`),i.clipboardData.setData("text/plain",`${p.getRangeAt(0).cloneContents().textContent||""}
------
${n.value.copyright}`))}}}};Qn(()=>{const i=document.querySelector("#app");B_(i,"copy",o),qm(()=>{i.style.userSelect=t.value?"none":"auto"})})})()}});const q_={name:"ModuleTransition",props:{delay:{type:String,default:"0"},duration:{type:String,default:".25"},position:{type:String,default:"left"}},methods:{setStyle(n){n.style.transition=`all ${this.duration}s ease-in-out ${this.delay}s`,n.style.transform=this.position==="right"?"translateX(20px)":"translateX(-20px)",n.style.opacity=0},unsetStyle(n){n.style.transform="translateX(0)",n.style.opacity=1}}};function W_(n,s,a,e,t,o){return J(),Ls(st,{name:"module",onEnter:o.setStyle,onAfterEnter:o.unsetStyle,onBeforeLeave:o.setStyle},{default:Ba(()=>[gp(n.$slots,"default",{},void 0,!0)]),_:3},8,["onEnter","onAfterEnter","onBeforeLeave"])}var $t=as(q_,[["render",W_],["__scopeId","data-v-069eeca3"],["__file","ModuleTransition.vue"]]);const fk=an(),Ct=an(0),Xo=an("reco-bgm-volume"),Y_=()=>{fk.value=window.setInterval(()=>{const n=document.querySelector(".reco-bgm-cover"),s=document.querySelector(".mini-operation"),a=document.querySelector(".falut-message");Ct.value+=1,n.style.transform="rotate("+Ct.value+"deg)",n.style.transition="0.1s linear",s.style.transform="rotate(-"+Ct.value+"deg)",s.style.transition="0.1s linear",a.style.transform="rotate(-"+Ct.value+"deg)",a.style.transition="0.1s linear"},100)},Aa={setVolume(n){sessionStorage.setItem(Xo.value,n)},getVolume(){return sessionStorage.getItem(Xo.value)||"0"},removeVolume(){sessionStorage.removeItem(Xo.value)}},pn=pa({panelPosition:{left:"10px",bottom:"10px","z-index":"999999"},curIndex:0,curPlayStatus:"paused",audio:[{name:"\u5361\u519C",artist:"\u5361\u519C\u94A2\u7434\u7248",url:"/blog-docs/music/canon/canon.mp3",cover:"/blog-docs/music/canon/canon.jpg"},{name:"\u98CE\u5C45\u4F4F\u7684\u8857\u9053",artist:"\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2",url:"/blog-docs/music/wind/wind.mp3",cover:"/blog-docs/music/wind/wind.jpg"},{name:"\u591C\u7684\u94A2\u7434\u66F2",artist:"\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB",url:"/blog-docs/music/night/night.mp3",cover:"/blog-docs/music/night/night.jpg"}],autoplay:!0,isFloat:!1,isMini:!1,firstLoad:!0,isMute:!1,isFault:!1,floatPosition:"left",floatStyle:{bottom:"100px","z-index":"999999"},autoShrink:!0,shrinkMode:"float",color:"#3eaf7c"}),X_=Vn(()=>pn.curPlayStatus,(n,s)=>{n==="playing"?Y_():window.clearInterval(fk.value)});const Op=n=>(Ke("data-v-28ba6eee"),n=n(),Qe(),n),J_={class:"reco-bgm-panel"},K_=["src"],Q_=["src"],Z_={class:"mini-operation"},nw=["onClick"],sw=["onClick"],aw={class:"falut-message"},ew={class:"reco-bgm-info"},tw={class:"info-box"},ow=Op(()=>V("i",{class:"reco-bgm reco-bgm-music music"},null,-1)),iw={class:"info-box"},pw=Op(()=>V("i",{class:"reco-bgm reco-bgm-artist"},null,-1)),lw={class:"reco-bgm-progress"},cw={class:"reco-bgm-operation"},rw=Op(()=>V("i",{class:"reco-bgm reco-bgm-left"},null,-1)),uw=[rw],dw=jn({__name:"BgMusicPlayer",setup(n){Ca(h=>({e11df940:fn(pn).color}));const s=an(null),a=an(null),e=an(null);Qn(()=>{X_(),pn.floatPosition==="left"?pn.floatStyle={...pn.floatStyle,left:"0","border-top-right-radius":"20px","border-bottom-right-radius":"20px"}:pn.floatStyle={...pn.floatStyle,right:"0","border-top-left-radius":"20px","border-bottom-left-radius":"20px"},pn.autoShrink&&t(!0)});const t=h=>{const g=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);g||pn.shrinkMode==="float"?pn.isFloat=h:!g&&pn.shrinkMode==="mini"&&(pn.isMini=h)},o=()=>{if(pn.firstLoad){if(Aa.getVolume()){const h=Aa.getVolume();a.value.style.width=Number(h)*100+"%",s.value.volume=h}else{const h=s.value.volume*100+"%";a.value.style.width=h}if(pn.firstLoad=!1,pn.autoplay){const h=s.value.play();h!==void 0&&h.then(g=>{pn.curPlayStatus="playing"}).catch(g=>{window.addEventListener("click",i)})}}pn.curPlayStatus==="playing"&&l()},i=()=>{pn.autoplay&&l(),window.removeEventListener("click",i)},p=()=>{s.value.pause(),pn.curPlayStatus="paused"},l=()=>{const h=s.value.play();h!==void 0&&h.then(g=>{pn.isFault&&(pn.isFault=!1)}).catch(g=>{console.log(g),pn.isFault=!0,p()}),pn.curPlayStatus="playing"},c=()=>{e.value.style.width=0,pn.isFault=!1,pn.curIndex>=pn.audio.length-1?pn.curIndex=0:pn.curIndex++},r=()=>{e.value.style.width=0,pn.isFault=!1,pn.curIndex<=0?pn.curIndex=pn.audio.length-1:pn.curIndex--},k=()=>{e.value.style.width=0,c()},d=()=>{const h=s.value.duration,_=s.value.currentTime/h*100+"%";e.value.style.width=_},u=h=>{const g=s.value.duration,_=h.offsetX/150;isNaN(g)||(s.value.currentTime=_*g)},m=h=>{const g=h.offsetX/57;g>=0&&g<=1&&(pn.isMute=!(g>0),a.value.style.width=g*100+"%",s.value.volume=g,Aa.setVolume(s.value.volume))},v=()=>{pn.isMute=!0,Aa.setVolume(s.value.volume),a.value.style.width=0,s.value.volume=0},b=()=>{if(pn.isMute=!1,Aa.getVolume()){const h=Aa.getVolume();a.value.style.width=Number(h)*100+"%",s.value.volume=h}else a.value.style.width="100%",s.value.volume=1};return(h,g)=>(J(),sn("div",J_,[V("audio",{id:"bgm",src:fn(pn).audio[fn(pn).curIndex].url,ref_key:"bgm",ref:s,onEnded:k,onCanplay:o,onTimeupdate:d},null,40,K_),En($t,{position:fn(pn).floatPosition},{default:Ba(()=>[qn(V("div",{onClick:g[0]||(g[0]=_=>t(!1)),class:"reco-float-box",style:ks(fn(pn).floatStyle)},[V("img",{src:fn(pn).audio[fn(pn).curIndex].cover},null,8,Q_)],4),[[Jn,fn(pn).isFloat]])]),_:1},8,["position"]),En($t,null,{default:Ba(()=>[qn(V("div",{class:"reco-bgm-box",style:ks(fn(pn).panelPosition)},[V("div",{class:"reco-bgm-cover",onClick:g[1]||(g[1]=_=>t(!1)),style:ks(`background-image:url(${fn(pn).audio[fn(pn).curIndex].cover})`)},[qn(V("div",Z_,[qn(V("i",{onClick:Cl(p,["stop"]),class:"reco-bgm reco-bgm-pause"},null,8,nw),[[Jn,fn(pn).curPlayStatus==="playing"&&fn(pn).isMini]]),qn(V("i",{onClick:Cl(l,["stop"]),class:"reco-bgm reco-bgm-play"},null,8,sw),[[Jn,fn(pn).curPlayStatus==="paused"&&fn(pn).isMini]])],512),[[Jn,fn(pn).isMini]]),qn(V("div",aw,"\u64AD\u653E\u5931\u8D25",512),[[Jn,fn(pn).isFault]])],4),En($t,{duration:".15"},{default:Ba(()=>[qn(V("div",ew,[V("div",tw,[ow,fs(Ln(fn(pn).audio[fn(pn).curIndex].name),1)]),V("div",iw,[pw,fs(Ln(fn(pn).audio[fn(pn).curIndex].artist),1)]),V("div",lw,[V("div",{class:"progress-bar",onClick:u},[V("div",{class:"bar",ref_key:"pbar",ref:e},null,512)])]),V("div",cw,[V("i",{class:"reco-bgm reco-bgm-last last",onClick:r}),qn(V("i",{onClick:p,class:"reco-bgm reco-bgm-pause pause"},null,512),[[Jn,fn(pn).curPlayStatus==="playing"]]),qn(V("i",{ref:"play",onClick:l,class:"reco-bgm reco-bgm-play play"},null,512),[[Jn,fn(pn).curPlayStatus==="paused"]]),V("i",{class:"reco-bgm reco-bgm-next next",onClick:c}),qn(V("i",{onClick:v,class:"reco-bgm reco-bgm-volume1 volume"},null,512),[[Jn,!fn(pn).isMute]]),qn(V("i",{onClick:b,class:"reco-bgm reco-bgm-mute mute"},null,512),[[Jn,fn(pn).isMute]]),V("div",{class:"volume-bar",onClick:m},[V("div",{class:"bar",ref_key:"vbar",ref:a},null,512)])])],512),[[Jn,!fn(pn).isMini]])]),_:1}),En($t,{duration:".15"},{default:Ba(()=>[qn(V("div",{onClick:g[2]||(g[2]=_=>t(!0)),class:"reco-bgm-left-box"},uw,512),[[Jn,!fn(pn).isMini]])]),_:1})],4),[[Jn,!fn(pn).isFloat]])]),_:1})]))}});var kr=as(dw,[["__scopeId","data-v-28ba6eee"],["__file","BgMusicPlayer.vue"]]),kw=Yn({enhance({app:n}){n.component("BgMusicPlayer",kr)},rootComponents:[kr]});class yk{constructor({origin:s,size:a,speed:e,color:t,angle:o,context:i}){this.origin=s,this.position={...this.origin},this.size=a,this.color=t,this.speed=e,this.angle=o,this.context=i,this.renderCount=0}draw(){}move(){this.position.x=Math.sin(this.angle)*this.speed+this.position.x,this.position.y=Math.cos(this.angle)*this.speed+this.position.y+this.renderCount*.3,this.renderCount++}}class mw extends yk{draw(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.position.x,this.position.y,this.size,0,Math.PI*2),this.context.fill()}}class vw extends yk{constructor({origin:s,size:a,speed:e,color:t,angle:o,context:i}){super({origin:s,size:a,speed:e,color:t,angle:o,context:i}),this.rotate=0}draw(){this.context.fillStyle=this.color,this.context.beginPath();const s=this.size*2,a=this.size;for(let e=0;e<5;e++)this.context.lineTo(Math.cos((18+72*e-this.rotate)/180*Math.PI)*s+this.position.x,-Math.sin((18+72*e-this.rotate)/180*Math.PI)*s+this.position.y),this.context.lineTo(Math.cos((54+72*e-this.rotate)/180*Math.PI)*a+this.position.x,-Math.sin((54+72*e-this.rotate)/180*Math.PI)*a+this.position.y);this.context.fill(),this.rotate+=5}}class hw{constructor({origin:s,context:a,shape:e="star",size:t=2,particleCount:o=10,clientSize:i}){this.origin=s,this.context=a,this.shape=e,this.size=t,this.particleCount=o,this.clientSize=i,this.stop=!1,this.particles=[]}randomArray(s){const a=s.length,e=Math.floor(a*Math.random());return s[e]}randomColor(){const s=["8","9","A","B","C","D","E","F"];return"#"+this.randomArray(s)+this.randomArray(s)+this.randomArray(s)+this.randomArray(s)+this.randomArray(s)+this.randomArray(s)}randomRange(s,a){return(a-s)*Math.random()+s}getShape(s){return{star:vw,circle:mw}[s]}init(){for(let s=0;s<this.particleCount;s++){const a=this.getShape(this.shape),e=new a({context:this.context,origin:this.origin,size:this.size,color:this.randomColor(),angle:this.randomRange(Math.PI-1,Math.PI+1),speed:this.randomRange(1,6)});this.particles.push(e)}}move(){this.particles.forEach((s,a)=>{if(s.position.x<0||s.position.x>this.clientSize.width||s.position.y>this.clientSize.height){this.particles.splice(a,1);return}s.move()}),this.particles.length==0&&(this.stop=!0)}draw(){this.particles.forEach(s=>s.draw())}}const gw={name:"CursorEffects",data(){return{shape:"star",size:4,zIndex:999999999,computerCanvas:null,renderCanvas:null,computerContext:null,renderContext:null,clientSize:{width:0,height:0},resizeTimeout:null}},mounted(){this.computerCanvas=document.createElement("canvas"),this.renderCanvas=document.getElementById("vuepress-canvas-cursor"),this.computerContext=this.computerCanvas.getContext("2d"),this.renderContext=this.renderCanvas.getContext("2d"),this.clientSize.width=window.innerWidth,this.clientSize.height=window.innerHeight,this.booms=[],this.running=!1,this.init()},methods:{init(){this.setStyle(this.renderCanvas.style),this.renderCanvas.width=this.computerCanvas.width=this.clientSize.width,this.renderCanvas.height=this.computerCanvas.height=this.clientSize.height,this.makeHighRes(this.renderCanvas,this.renderContext),this.makeHighRes(this.computerCanvas,this.computerContext),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("pagehide",this.handlePageHide),window.addEventListener("resize",this.handleResize)},setStyle(n){n.position="fixed",n.top=0,n.left=0,n.zIndex=this.zIndex,n.pointerEvents="none",n.width=this.clientSize.width,n.height=this.clientSize.height},makeHighRes(n,s){const a=window.devicePixelRatio||1,e=n.width,t=n.height;n.width=Math.round(e*a),n.height=Math.round(t*a),n.style.width=e+"px",n.style.height=t+"px",s.scale(a,a)},handleMouseDown(n){const s=new hw({origin:{x:n.clientX,y:n.clientY},context:this.computerContext,size:this.size,shape:this.shape,clientSize:this.clientSize});s.init(),this.booms.push(s),this.running||this.run()},handlePageHide(){this.booms=[],this.running=!1},handleResize(){this.resizeTimeout!=null&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.clientSize.width=window.innerWidth,this.clientSize.height=window.innerHeight,this.renderCanvas.width=this.computerCanvas.width=this.clientSize.width,this.renderCanvas.height=this.computerCanvas.height=this.clientSize.height,this.makeHighRes(this.renderCanvas,this.renderContext),this.makeHighRes(this.computerCanvas,this.computerContext)},500)},run(){if(this.running=!0,this.booms.length==0)return this.running=!1;requestAnimationFrame(this.run),this.computerContext.clearRect(0,0,this.clientSize.width,this.clientSize.height),this.renderContext.clearRect(0,0,this.clientSize.width,this.clientSize.height),this.booms.forEach((n,s)=>{if(n.stop){this.booms.splice(s,1);return}n.move(),n.draw()}),this.renderContext.drawImage(this.computerCanvas,0,0,this.clientSize.width,this.clientSize.height)}}},bw={id:"vuepress-canvas-cursor"};function fw(n,s,a,e,t,o){return J(),sn("canvas",bw)}var mr=as(gw,[["render",fw],["__file","CursorEffects.vue"]]),yw=Yn({enhance({app:n}){n.component("CursorEffects",mr)},rootComponents:[mr]});const _w={name:"FunnyTitle",data(){return{originTitle:"",recoverTimeout:null,config:{showIcon:"/favicon.ico",showText:"(/\u2267\u25BD\u2266/)\u54A6\uFF01\u53C8\u597D\u4E86\uFF01",hideIcon:"/favicon.ico",hideText:"(\u25CF\u2014\u25CF)\u5594\u54DF\uFF0C\u5D29\u6E83\u5566\uFF01",recoverTime:2e3}}},mounted(){this.originTitle=document.title,this.config.showIcon!==""&&this.getIconElm().setAttribute("href",this.config.showIcon),document.addEventListener("visibilitychange",()=>{document.hidden?this.hidden():this.visible()})},methods:{hidden(){this.config.hideIcon!==""&&this.getIconElm().setAttribute("href",this.config.hideIcon),document.title=this.config.hideText,clearTimeout(this.recoverTimeout)},visible(){this.config.showIcon!==""&&this.getIconElm().setAttribute("href",this.config.showIcon),document.title=this.config.showText+this.originTitle,this.recoverTimeout=setTimeout(()=>{document.title=this.originTitle},this.config.recoverTime)},getIconElm(){let n=document.querySelector("link[rel=icon]");return n===null&&(n=document.createElement("link"),n.setAttribute("rel","icon"),document.head.appendChild(n)),n}},watch:{$route(n,s){n.path!==s.path&&(this.originTitle=document.title,clearTimeout(this.recoverTimeout))}}},ww={class:"FunnyTitle"};function Sw(n,s,a,e,t,o){return J(),sn("div",ww)}var vr=as(_w,[["render",Sw],["__file","FunnyTitle.vue"]]),xw=Yn({enhance({app:n}){n.component("FunnyTitle",vr)},rootComponents:[vr]}),$w=`!function(t){function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var e={};i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=4)}([function(t,i,e){"use strict";function r(){this.live2DModel=null,this.modelMatrix=null,this.eyeBlink=null,this.physics=null,this.pose=null,this.debugMode=!1,this.initialized=!1,this.updating=!1,this.alpha=1,this.accAlpha=0,this.lipSync=!1,this.lipSyncValue=0,this.accelX=0,this.accelY=0,this.accelZ=0,this.dragX=0,this.dragY=0,this.startTimeMSec=null,this.mainMotionManager=new h,this.expressionManager=new h,this.motions={},this.expressions={},this.isTexLoaded=!1}function o(){AMotion.prototype.constructor.call(this),this.paramList=new Array}function n(){this.id="",this.type=-1,this.value=null}function s(){this.nextBlinkTime=null,this.stateStartTime=null,this.blinkIntervalMsec=null,this.eyeState=g.STATE_FIRST,this.blinkIntervalMsec=4e3,this.closingMotionMsec=100,this.closedMotionMsec=50,this.openingMotionMsec=150,this.closeIfZero=!0,this.eyeID_L="PARAM_EYE_L_OPEN",this.eyeID_R="PARAM_EYE_R_OPEN"}function _(){this.tr=new Float32Array(16),this.identity()}function a(t,i){_.prototype.constructor.call(this),this.width=t,this.height=i}function h(){MotionQueueManager.prototype.constructor.call(this),this.currentPriority=null,this.reservePriority=null,this.super=MotionQueueManager.prototype}function l(){this.physicsList=new Array,this.startTimeMSec=UtSystem.getUserTimeMSec()}function $(){this.lastTime=0,this.lastModel=null,this.partsGroups=new Array}function u(t){this.paramIndex=-1,this.partsIndex=-1,this.link=null,this.id=t}function p(){this.EPSILON=.01,this.faceTargetX=0,this.faceTargetY=0,this.faceX=0,this.faceY=0,this.faceVX=0,this.faceVY=0,this.lastTimeSec=0}function f(){_.prototype.constructor.call(this),this.screenLeft=null,this.screenRight=null,this.screenTop=null,this.screenBottom=null,this.maxLeft=null,this.maxRight=null,this.maxTop=null,this.maxBottom=null,this.max=Number.MAX_VALUE,this.min=0}function c(){}var d=0;r.prototype.getModelMatrix=function(){return this.modelMatrix},r.prototype.setAlpha=function(t){t>.999&&(t=1),t<.001&&(t=0),this.alpha=t},r.prototype.getAlpha=function(){return this.alpha},r.prototype.isInitialized=function(){return this.initialized},r.prototype.setInitialized=function(t){this.initialized=t},r.prototype.isUpdating=function(){return this.updating},r.prototype.setUpdating=function(t){this.updating=t},r.prototype.getLive2DModel=function(){return this.live2DModel},r.prototype.setLipSync=function(t){this.lipSync=t},r.prototype.setLipSyncValue=function(t){this.lipSyncValue=t},r.prototype.setAccel=function(t,i,e){this.accelX=t,this.accelY=i,this.accelZ=e},r.prototype.setDrag=function(t,i){this.dragX=t,this.dragY=i},r.prototype.getMainMotionManager=function(){return this.mainMotionManager},r.prototype.getExpressionManager=function(){return this.expressionManager},r.prototype.loadModelData=function(t,i){var e=c.getPlatformManager();this.debugMode&&e.log("Load model : "+t);var r=this;e.loadLive2DModel(t,function(t){if(r.live2DModel=t,r.live2DModel.saveParam(),0!=Live2D.getError())return void console.error("Error : Failed to loadModelData().");r.modelMatrix=new a(r.live2DModel.getCanvasWidth(),r.live2DModel.getCanvasHeight()),r.modelMatrix.setWidth(2),r.modelMatrix.setCenterPosition(0,0),i(r.live2DModel)})},r.prototype.loadTexture=function(t,i,e){d++;var r=c.getPlatformManager();this.debugMode&&r.log("Load Texture : "+i);var o=this;r.loadTexture(this.live2DModel,t,i,function(){d--,0==d&&(o.isTexLoaded=!0),"function"==typeof e&&e()})},r.prototype.loadMotion=function(t,i,e){var r=c.getPlatformManager();this.debugMode&&r.log("Load Motion : "+i);var o=null,n=this;r.loadBytes(i,function(i){o=Live2DMotion.loadMotion(i),null!=t&&(n.motions[t]=o),e(o)})},r.prototype.loadExpression=function(t,i,e){var r=c.getPlatformManager();this.debugMode&&r.log("Load Expression : "+i);var n=this;r.loadBytes(i,function(i){null!=t&&(n.expressions[t]=o.loadJson(i)),"function"==typeof e&&e()})},r.prototype.loadPose=function(t,i){var e=c.getPlatformManager();this.debugMode&&e.log("Load Pose : "+t);var r=this;try{e.loadBytes(t,function(t){r.pose=$.load(t),"function"==typeof i&&i()})}catch(t){console.warn(t)}},r.prototype.loadPhysics=function(t){var i=c.getPlatformManager();this.debugMode&&i.log("Load Physics : "+t);var e=this;try{i.loadBytes(t,function(t){e.physics=l.load(t)})}catch(t){console.warn(t)}},r.prototype.hitTestSimple=function(t,i,e){if(null===this.live2DModel)return!1;var r=this.live2DModel.getDrawDataIndex(t);if(r<0)return!1;for(var o=this.live2DModel.getTransformedPoints(r),n=this.live2DModel.getCanvasWidth(),s=0,_=this.live2DModel.getCanvasHeight(),a=0,h=0;h<o.length;h+=2){var l=o[h],$=o[h+1];l<n&&(n=l),l>s&&(s=l),$<_&&(_=$),$>a&&(a=$)}var u=this.modelMatrix.invertTransformX(i),p=this.modelMatrix.invertTransformY(e);return n<=u&&u<=s&&_<=p&&p<=a},r.prototype.hitTestSimpleCustom=function(t,i,e,r){return null!==this.live2DModel&&t&&(e>=t[0]&&e<=i[0]&&r<=t[1]&&r>=i[1])},o.prototype=new AMotion,o.EXPRESSION_DEFAULT="DEFAULT",o.TYPE_SET=0,o.TYPE_ADD=1,o.TYPE_MULT=2,o.loadJson=function(t){var i=new o,e=c.getPlatformManager(),r=e.jsonParseFromBytes(t);if(i.setFadeIn(parseInt(r.fade_in)>0?parseInt(r.fade_in):1e3),i.setFadeOut(parseInt(r.fade_out)>0?parseInt(r.fade_out):1e3),null==r.params)return i;var s=r.params,_=s.length;i.paramList=[];for(var a=0;a<_;a++){var h=s[a],l=h.id.toString(),$=parseFloat(h.val),u=o.TYPE_ADD,p=null!=h.calc?h.calc.toString():"add";if((u="add"===p?o.TYPE_ADD:"mult"===p?o.TYPE_MULT:"set"===p?o.TYPE_SET:o.TYPE_ADD)==o.TYPE_ADD){var f=null==h.def?0:parseFloat(h.def);$-=f}else if(u==o.TYPE_MULT){var f=null==h.def?1:parseFloat(h.def);0==f&&(f=1),$/=f}var d=new n;d.id=l,d.type=u,d.value=$,i.paramList.push(d)}return i},o.prototype.updateParamExe=function(t,i,e,r){for(var n=this.paramList.length-1;n>=0;--n){var s=this.paramList[n];s.type==o.TYPE_ADD?t.addToParamFloat(s.id,s.value,e):s.type==o.TYPE_MULT?t.multParamFloat(s.id,s.value,e):s.type==o.TYPE_SET&&t.setParamFloat(s.id,s.value,e)}},s.prototype.calcNextBlink=function(){return UtSystem.getUserTimeMSec()+Math.random()*(2*this.blinkIntervalMsec-1)},s.prototype.setInterval=function(t){this.blinkIntervalMsec=t},s.prototype.setEyeMotion=function(t,i,e){this.closingMotionMsec=t,this.closedMotionMsec=i,this.openingMotionMsec=e},s.prototype.updateParam=function(t){var i,e=UtSystem.getUserTimeMSec(),r=0;switch(this.eyeState){case g.STATE_CLOSING:r=(e-this.stateStartTime)/this.closingMotionMsec,r>=1&&(r=1,this.eyeState=g.STATE_CLOSED,this.stateStartTime=e),i=1-r;break;case g.STATE_CLOSED:r=(e-this.stateStartTime)/this.closedMotionMsec,r>=1&&(this.eyeState=g.STATE_OPENING,this.stateStartTime=e),i=0;break;case g.STATE_OPENING:r=(e-this.stateStartTime)/this.openingMotionMsec,r>=1&&(r=1,this.eyeState=g.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink()),i=r;break;case g.STATE_INTERVAL:this.nextBlinkTime<e&&(this.eyeState=g.STATE_CLOSING,this.stateStartTime=e),i=1;break;case g.STATE_FIRST:default:this.eyeState=g.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink(),i=1}this.closeIfZero||(i=-i),t.setParamFloat(this.eyeID_L,i),t.setParamFloat(this.eyeID_R,i)};var g=function(){};g.STATE_FIRST="STATE_FIRST",g.STATE_INTERVAL="STATE_INTERVAL",g.STATE_CLOSING="STATE_CLOSING",g.STATE_CLOSED="STATE_CLOSED",g.STATE_OPENING="STATE_OPENING",_.mul=function(t,i,e){var r,o,n,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<4;r++)for(o=0;o<4;o++)for(n=0;n<4;n++)s[r+4*o]+=t[r+4*n]*i[n+4*o];for(r=0;r<16;r++)e[r]=s[r]},_.prototype.identity=function(){for(var t=0;t<16;t++)this.tr[t]=t%5==0?1:0},_.prototype.getArray=function(){return this.tr},_.prototype.getCopyMatrix=function(){return new Float32Array(this.tr)},_.prototype.setMatrix=function(t){if(null!=this.tr&&this.tr.length==this.tr.length)for(var i=0;i<16;i++)this.tr[i]=t[i]},_.prototype.getScaleX=function(){return this.tr[0]},_.prototype.getScaleY=function(){return this.tr[5]},_.prototype.transformX=function(t){return this.tr[0]*t+this.tr[12]},_.prototype.transformY=function(t){return this.tr[5]*t+this.tr[13]},_.prototype.invertTransformX=function(t){return(t-this.tr[12])/this.tr[0]},_.prototype.invertTransformY=function(t){return(t-this.tr[13])/this.tr[5]},_.prototype.multTranslate=function(t,i){var e=[1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1];_.mul(e,this.tr,this.tr)},_.prototype.translate=function(t,i){this.tr[12]=t,this.tr[13]=i},_.prototype.translateX=function(t){this.tr[12]=t},_.prototype.translateY=function(t){this.tr[13]=t},_.prototype.multScale=function(t,i){var e=[t,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1];_.mul(e,this.tr,this.tr)},_.prototype.scale=function(t,i){this.tr[0]=t,this.tr[5]=i},a.prototype=new _,a.prototype.setPosition=function(t,i){this.translate(t,i)},a.prototype.setCenterPosition=function(t,i){var e=this.width*this.getScaleX(),r=this.height*this.getScaleY();this.translate(t-e/2,i-r/2)},a.prototype.top=function(t){this.setY(t)},a.prototype.bottom=function(t){var i=this.height*this.getScaleY();this.translateY(t-i)},a.prototype.left=function(t){this.setX(t)},a.prototype.right=function(t){var i=this.width*this.getScaleX();this.translateX(t-i)},a.prototype.centerX=function(t){var i=this.width*this.getScaleX();this.translateX(t-i/2)},a.prototype.centerY=function(t){var i=this.height*this.getScaleY();this.translateY(t-i/2)},a.prototype.setX=function(t){this.translateX(t)},a.prototype.setY=function(t){this.translateY(t)},a.prototype.setHeight=function(t){var i=t/this.height,e=-i;this.scale(i,e)},a.prototype.setWidth=function(t){var i=t/this.width,e=-i;this.scale(i,e)},h.prototype=new MotionQueueManager,h.prototype.getCurrentPriority=function(){return this.currentPriority},h.prototype.getReservePriority=function(){return this.reservePriority},h.prototype.reserveMotion=function(t){return!(this.reservePriority>=t)&&(!(this.currentPriority>=t)&&(this.reservePriority=t,!0))},h.prototype.setReservePriority=function(t){this.reservePriority=t},h.prototype.updateParam=function(t){var i=MotionQueueManager.prototype.updateParam.call(this,t);return this.isFinished()&&(this.currentPriority=0),i},h.prototype.startMotionPrio=function(t,i){return i==this.reservePriority&&(this.reservePriority=0),this.currentPriority=i,this.startMotion(t,!1)},l.load=function(t){for(var i=new l,e=c.getPlatformManager(),r=e.jsonParseFromBytes(t),o=r.physics_hair,n=o.length,s=0;s<n;s++){var _=o[s],a=new PhysicsHair,h=_.setup,$=parseFloat(h.length),u=parseFloat(h.regist),p=parseFloat(h.mass);a.setup($,u,p);for(var f=_.src,d=f.length,g=0;g<d;g++){var y=f[g],m=y.id,T=PhysicsHair.Src.SRC_TO_X,P=y.ptype;"x"===P?T=PhysicsHair.Src.SRC_TO_X:"y"===P?T=PhysicsHair.Src.SRC_TO_Y:"angle"===P?T=PhysicsHair.Src.SRC_TO_G_ANGLE:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Src");var S=parseFloat(y.scale),v=parseFloat(y.weight);a.addSrcParam(T,m,S,v)}for(var L=_.targets,M=L.length,g=0;g<M;g++){var E=L[g],m=E.id,T=PhysicsHair.Target.TARGET_FROM_ANGLE,P=E.ptype;"angle"===P?T=PhysicsHair.Target.TARGET_FROM_ANGLE:"angle_v"===P?T=PhysicsHair.Target.TARGET_FROM_ANGLE_V:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Target");var S=parseFloat(E.scale),v=parseFloat(E.weight);a.addTargetParam(T,m,S,v)}i.physicsList.push(a)}return i},l.prototype.updateParam=function(t){for(var i=UtSystem.getUserTimeMSec()-this.startTimeMSec,e=0;e<this.physicsList.length;e++)this.physicsList[e].update(t,i)},$.load=function(t){for(var i=new $,e=c.getPlatformManager(),r=e.jsonParseFromBytes(t),o=r.parts_visible,n=o.length,s=0;s<n;s++){for(var _=o[s],a=_.group,h=a.length,l=new Array,p=0;p<h;p++){var f=a[p],d=new u(f.id);if(l[p]=d,null!=f.link){var g=f.link,y=g.length;d.link=new Array;for(var m=0;m<y;m++){var T=new u(g[m]);d.link.push(T)}}}i.partsGroups.push(l)}return i},$.prototype.updateParam=function(t){if(null!=t){t!=this.lastModel&&this.initParam(t),this.lastModel=t;var i=UtSystem.getUserTimeMSec(),e=0==this.lastTime?0:(i-this.lastTime)/1e3;this.lastTime=i,e<0&&(e=0);for(var r=0;r<this.partsGroups.length;r++)this.normalizePartsOpacityGroup(t,this.partsGroups[r],e),this.copyOpacityOtherParts(t,this.partsGroups[r])}},$.prototype.initParam=function(t){if(null!=t)for(var i=0;i<this.partsGroups.length;i++)for(var e=this.partsGroups[i],r=0;r<e.length;r++){e[r].initIndex(t);var o=e[r].partsIndex,n=e[r].paramIndex;if(!(o<0)){var s=0!=t.getParamFloat(n);if(t.setPartsOpacity(o,s?1:0),t.setParamFloat(n,s?1:0),null!=e[r].link)for(var _=0;_<e[r].link.length;_++)e[r].link[_].initIndex(t)}}},$.prototype.normalizePartsOpacityGroup=function(t,i,e){for(var r=-1,o=1,n=0;n<i.length;n++){var s=i[n].partsIndex,_=i[n].paramIndex;if(!(s<0)&&0!=t.getParamFloat(_)){if(r>=0)break;r=n,o=t.getPartsOpacity(s),o+=e/.5,o>1&&(o=1)}}r<0&&(r=0,o=1);for(var n=0;n<i.length;n++){var s=i[n].partsIndex;if(!(s<0))if(r==n)t.setPartsOpacity(s,o);else{var a,h=t.getPartsOpacity(s);a=o<.5?-.5*o/.5+1:.5*(1-o)/.5;var l=(1-a)*(1-o);l>.15&&(a=1-.15/(1-o)),h>a&&(h=a),t.setPartsOpacity(s,h)}}},$.prototype.copyOpacityOtherParts=function(t,i){for(var e=0;e<i.length;e++){var r=i[e];if(null!=r.link&&!(r.partsIndex<0))for(var o=t.getPartsOpacity(r.partsIndex),n=0;n<r.link.length;n++){var s=r.link[n];s.partsIndex<0||t.setPartsOpacity(s.partsIndex,o)}}},u.prototype.initIndex=function(t){this.paramIndex=t.getParamIndex("VISIBLE:"+this.id),this.partsIndex=t.getPartsDataIndex(PartsDataID.getID(this.id)),t.setParamFloat(this.paramIndex,1)},p.FRAME_RATE=30,p.prototype.setPoint=function(t,i){this.faceTargetX=t,this.faceTargetY=i},p.prototype.getX=function(){return this.faceX},p.prototype.getY=function(){return this.faceY},p.prototype.update=function(){var t=40/7.5/p.FRAME_RATE;if(0==this.lastTimeSec)return void(this.lastTimeSec=UtSystem.getUserTimeMSec());var i=UtSystem.getUserTimeMSec(),e=(i-this.lastTimeSec)*p.FRAME_RATE/1e3;this.lastTimeSec=i;var r=.15*p.FRAME_RATE,o=e*t/r,n=this.faceTargetX-this.faceX,s=this.faceTargetY-this.faceY;if(!(Math.abs(n)<=this.EPSILON&&Math.abs(s)<=this.EPSILON)){var _=Math.sqrt(n*n+s*s),a=t*n/_,h=t*s/_,l=a-this.faceVX,$=h-this.faceVY,u=Math.sqrt(l*l+$*$);(u<-o||u>o)&&(l*=o/u,$*=o/u,u=o),this.faceVX+=l,this.faceVY+=$;var f=.5*(Math.sqrt(o*o+16*o*_-8*o*_)-o),c=Math.sqrt(this.faceVX*this.faceVX+this.faceVY*this.faceVY);c>f&&(this.faceVX*=f/c,this.faceVY*=f/c),this.faceX+=this.faceVX,this.faceY+=this.faceVY}},f.prototype=new _,f.prototype.getMaxScale=function(){return this.max},f.prototype.getMinScale=function(){return this.min},f.prototype.setMaxScale=function(t){this.max=t},f.prototype.setMinScale=function(t){this.min=t},f.prototype.isMaxScale=function(){return this.getScaleX()==this.max},f.prototype.isMinScale=function(){return this.getScaleX()==this.min},f.prototype.adjustTranslate=function(t,i){this.tr[0]*this.maxLeft+(this.tr[12]+t)>this.screenLeft&&(t=this.screenLeft-this.tr[0]*this.maxLeft-this.tr[12]),this.tr[0]*this.maxRight+(this.tr[12]+t)<this.screenRight&&(t=this.screenRight-this.tr[0]*this.maxRight-this.tr[12]),this.tr[5]*this.maxTop+(this.tr[13]+i)<this.screenTop&&(i=this.screenTop-this.tr[5]*this.maxTop-this.tr[13]),this.tr[5]*this.maxBottom+(this.tr[13]+i)>this.screenBottom&&(i=this.screenBottom-this.tr[5]*this.maxBottom-this.tr[13]);var e=[1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1];_.mul(e,this.tr,this.tr)},f.prototype.adjustScale=function(t,i,e){var r=e*this.tr[0];r<this.min?this.tr[0]>0&&(e=this.min/this.tr[0]):r>this.max&&this.tr[0]>0&&(e=this.max/this.tr[0]);var o=[1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1],n=[e,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1],s=[1,0,0,0,0,1,0,0,0,0,1,0,-t,-i,0,1];_.mul(s,this.tr,this.tr),_.mul(n,this.tr,this.tr),_.mul(o,this.tr,this.tr)},f.prototype.setScreenRect=function(t,i,e,r){this.screenLeft=t,this.screenRight=i,this.screenTop=r,this.screenBottom=e},f.prototype.setMaxScreenRect=function(t,i,e,r){this.maxLeft=t,this.maxRight=i,this.maxTop=r,this.maxBottom=e},f.prototype.getScreenLeft=function(){return this.screenLeft},f.prototype.getScreenRight=function(){return this.screenRight},f.prototype.getScreenBottom=function(){return this.screenBottom},f.prototype.getScreenTop=function(){return this.screenTop},f.prototype.getMaxLeft=function(){return this.maxLeft},f.prototype.getMaxRight=function(){return this.maxRight},f.prototype.getMaxBottom=function(){return this.maxBottom},f.prototype.getMaxTop=function(){return this.maxTop},c.platformManager=null,c.getPlatformManager=function(){return c.platformManager},c.setPlatformManager=function(t){c.platformManager=t},t.exports={L2DTargetPoint:p,Live2DFramework:c,L2DViewMatrix:f,L2DPose:$,L2DPartsParam:u,L2DPhysics:l,L2DMotionManager:h,L2DModelMatrix:a,L2DMatrix44:_,EYE_STATE:g,L2DEyeBlink:s,L2DExpressionParam:n,L2DExpressionMotion:o,L2DBaseModel:r}},function(t,i,e){"use strict";var r={DEBUG_LOG:!1,DEBUG_MOUSE_LOG:!1,DEBUG_DRAW_HIT_AREA:!1,DEBUG_DRAW_ALPHA_MODEL:!1,VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2,PRIORITY_NONE:0,PRIORITY_IDLE:1,PRIORITY_SLEEPY:2,PRIORITY_NORMAL:3,PRIORITY_FORCE:4,MOTION_GROUP_IDLE:"idle",MOTION_GROUP_SLEEPY:"sleepy",MOTION_GROUP_TAP_BODY:"tap_body",MOTION_GROUP_FLICK_HEAD:"flick_head",MOTION_GROUP_PINCH_IN:"pinch_in",MOTION_GROUP_PINCH_OUT:"pinch_out",MOTION_GROUP_SHAKE:"shake",HIT_AREA_HEAD:"head",HIT_AREA_BODY:"body"};t.exports=r},function(t,i,e){"use strict";function r(t){n=t}function o(){return n}Object.defineProperty(i,"__esModule",{value:!0}),i.setContext=r,i.getContext=o;var n=void 0},function(t,i,e){"use strict";function r(){}r.matrixStack=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.depth=0,r.currentMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.tmp=new Array(16),r.reset=function(){this.depth=0},r.loadIdentity=function(){for(var t=0;t<16;t++)this.currentMatrix[t]=t%5==0?1:0},r.push=function(){var t=(this.depth,16*(this.depth+1));this.matrixStack.length<t+16&&(this.matrixStack.length=t+16);for(var i=0;i<16;i++)this.matrixStack[t+i]=this.currentMatrix[i];this.depth++},r.pop=function(){--this.depth<0&&(myError("Invalid matrix stack."),this.depth=0);for(var t=16*this.depth,i=0;i<16;i++)this.currentMatrix[i]=this.matrixStack[t+i]},r.getMatrix=function(){return this.currentMatrix},r.multMatrix=function(t){var i,e,r;for(i=0;i<16;i++)this.tmp[i]=0;for(i=0;i<4;i++)for(e=0;e<4;e++)for(r=0;r<4;r++)this.tmp[i+4*e]+=this.currentMatrix[i+4*r]*t[r+4*e];for(i=0;i<16;i++)this.currentMatrix[i]=this.tmp[i]},t.exports=r},function(t,i,e){t.exports=e(5)},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){C=document.getElementById(t),C.addEventListener&&(window.addEventListener("click",g),window.addEventListener("mousedown",g),window.addEventListener("mousemove",g),window.addEventListener("mouseup",g),document.addEventListener("mouseout",g),window.addEventListener("touchstart",y),window.addEventListener("touchend",y),window.addEventListener("touchmove",y))}function n(t){var i=C.width,e=C.height;N=new M.L2DTargetPoint;var r=e/i,o=w.default.VIEW_LOGICAL_LEFT,n=w.default.VIEW_LOGICAL_RIGHT,_=-r,h=r;if(window.Live2D.captureFrame=!1,B=new M.L2DViewMatrix,B.setScreenRect(o,n,_,h),B.setMaxScreenRect(w.default.VIEW_LOGICAL_MAX_LEFT,w.default.VIEW_LOGICAL_MAX_RIGHT,w.default.VIEW_LOGICAL_MAX_BOTTOM,w.default.VIEW_LOGICAL_MAX_TOP),B.setMaxScale(w.default.VIEW_MAX_SCALE),B.setMinScale(w.default.VIEW_MIN_SCALE),U=new M.L2DMatrix44,U.multScale(1,i/e),G=new M.L2DMatrix44,G.multTranslate(-i/2,-e/2),G.multScale(2/i,-2/i),F=v(),(0,D.setContext)(F),!F)return console.error("Failed to create WebGL context."),void(window.WebGLRenderingContext&&console.error("Your browser don't support WebGL, check https://get.webgl.org/ for futher information."));window.Live2D.setGL(F),F.clearColor(0,0,0,0),a(t),s()}function s(){b||(b=!0,function t(){_();var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(window.Live2D.captureFrame){window.Live2D.captureFrame=!1;var e=document.createElement("a");document.body.appendChild(e),e.setAttribute("type","hidden"),e.href=C.toDataURL(),e.download=window.Live2D.captureName||"live2d.png",e.click()}i(t,C)}())}function _(){O.default.reset(),O.default.loadIdentity(),N.update(),R.setDrag(N.getX(),N.getY()),F.clear(F.COLOR_BUFFER_BIT),O.default.multMatrix(U.getArray()),O.default.multMatrix(B.getArray()),O.default.push();for(var t=0;t<R.numModels();t++){var i=R.getModel(t);if(null==i)return;i.initialized&&!i.updating&&(i.update(),i.draw(F))}O.default.pop()}function a(t){R.reloadFlg=!0,R.count++,R.changeModel(F,t)}function h(t,i){return t.x*i.x+t.y*i.y}function l(t,i){var e=Math.sqrt(t*t+i*i);return{x:t/e,y:i/e}}function $(t,i,e){function r(t,i){return 180*Math.acos(h({x:0,y:1},l(t,i)))/Math.PI}if(i.x<e.left+e.width&&i.y<e.top+e.height&&i.x>e.left&&i.y>e.top)return i;var o=t.x-i.x,n=t.y-i.y,s=r(o,n);i.x<t.x&&(s=360-s);var _=360-r(e.left-t.x,-1*(e.top-t.y)),a=360-r(e.left-t.x,-1*(e.top+e.height-t.y)),$=r(e.left+e.width-t.x,-1*(e.top-t.y)),u=r(e.left+e.width-t.x,-1*(e.top+e.height-t.y)),p=n/o,f={};if(s<$){var c=e.top-t.y,d=c/p;f={y:t.y+c,x:t.x+d}}else if(s<u){var g=e.left+e.width-t.x,y=g*p;f={y:t.y+y,x:t.x+g}}else if(s<a){var m=e.top+e.height-t.y,T=m/p;f={y:t.y+m,x:t.x+T}}else if(s<_){var P=t.x-e.left,S=P*p;f={y:t.y-S,x:t.x-P}}else{var v=e.top-t.y,L=v/p;f={y:t.y+v,x:t.x+L}}return f}function u(t){Y=!0;var i=C.getBoundingClientRect(),e=P(t.clientX-i.left),r=S(t.clientY-i.top),o=$({x:i.left+i.width/2,y:i.top+i.height*X},{x:t.clientX,y:t.clientY},i),n=m(o.x-i.left),s=T(o.y-i.top);w.default.DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+t.clientX+" y:"+t.clientY+" ) view( x:"+n+" y:"+s+")"),k=e,V=r,N.setPoint(n,s)}function p(t){Y=!0;var i=C.getBoundingClientRect(),e=P(t.clientX-i.left),r=S(t.clientY-i.top),o=$({x:i.left+i.width/2,y:i.top+i.height*X},{x:t.clientX,y:t.clientY},i),n=m(o.x-i.left),s=T(o.y-i.top);w.default.DEBUG_MOUSE_LOG&&console.log("onMouseDown device( x:"+t.clientX+" y:"+t.clientY+" ) view( x:"+n+" y:"+s+")"),k=e,V=r,R.tapEvent(n,s)}function f(t){var i=C.getBoundingClientRect(),e=P(t.clientX-i.left),r=S(t.clientY-i.top),o=$({x:i.left+i.width/2,y:i.top+i.height*X},{x:t.clientX,y:t.clientY},i),n=m(o.x-i.left),s=T(o.y-i.top);w.default.DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+t.clientX+" y:"+t.clientY+" ) view( x:"+n+" y:"+s+")"),Y&&(k=e,V=r,N.setPoint(n,s))}function c(){Y&&(Y=!1),N.setPoint(0,0)}function d(){w.default.DEBUG_LOG&&console.log("Set Session Storage."),sessionStorage.setItem("Sleepy","1")}function g(t){if("mousewheel"==t.type);else if("mousedown"==t.type)p(t);else if("mousemove"==t.type){var i=sessionStorage.getItem("Sleepy");"1"===i&&sessionStorage.setItem("Sleepy","0"),u(t)}else if("mouseup"==t.type){if("button"in t&&0!=t.button)return}else if("mouseout"==t.type){w.default.DEBUG_LOG&&console.log("Mouse out Window."),c();var e=sessionStorage.getItem("SleepyTimer");window.clearTimeout(e),e=window.setTimeout(d,5e4),sessionStorage.setItem("SleepyTimer",e)}}function y(t){var i=t.touches[0];"touchstart"==t.type?1==t.touches.length&&u(i):"touchmove"==t.type?f(i):"touchend"==t.type&&c()}function m(t){var i=G.transformX(t);return B.invertTransformX(i)}function T(t){var i=G.transformY(t);return B.invertTransformY(i)}function P(t){return G.transformX(t)}function S(t){return G.transformY(t)}function v(){for(var t=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0;i<t.length;i++)try{var e=C.getContext(t[i],{premultipliedAlpha:!0});if(e)return e}catch(t){}return null}function L(t,i,e){X=void 0===e?.5:e,o(t),n(i)}e(6);var M=e(0),E=e(8),A=r(E),I=e(1),w=r(I),x=e(3),O=r(x),D=e(2),R=(window.navigator.platform.toLowerCase(),new A.default),b=!1,F=null,C=null,N=null,B=null,U=null,G=null,Y=!1,k=0,V=0,X=.5;window.loadlive2d=L},function(t,i,e){"use strict";(function(t){!function(){function i(){At||(this._$MT=null,this._$5S=null,this._$NP=0,i._$42++,this._$5S=new Y(this))}function e(t){if(!At){this.clipContextList=new Array,this.glcontext=t.gl,this.dp_webgl=t,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new S,at.glContext.length>at.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new R,this.tmpMatrix2=new R,this.tmpMatrixForMask=new R,this.tmpMatrixForDraw=new R,this.CHANNEL_COLORS=new Array;var i=new A;i=new A,i.r=0,i.g=0,i.b=0,i.a=1,this.CHANNEL_COLORS.push(i),i=new A,i.r=1,i.g=0,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),i=new A,i.r=0,i.g=1,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),i=new A,i.r=0,i.g=0,i.b=1,i.a=0,this.CHANNEL_COLORS.push(i);for(var e=0;e<this.CHANNEL_COLORS.length;e++)this.dp_webgl.setChannelFlagAsColor(e,this.CHANNEL_COLORS[e])}}function r(t,i,e){this.clipIDList=new Array,this.clipIDList=e,this.clippingMaskDrawIndexList=new Array;for(var r=0;r<e.length;r++)this.clippingMaskDrawIndexList.push(i.getDrawDataIndex(e[r]));this.clippedDrawContextList=new Array,this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new S,this.allClippedDrawRect=new S,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=t}function o(t,i){this._$gP=t,this.drawDataIndex=i}function n(){At||(this.color=null)}function s(){At||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}function _(){}function a(){this._$r=null,this._$0S=null}function h(){At||(this.x=null,this.y=null,this.width=null,this.height=null)}function l(t){At||et.prototype.constructor.call(this,t)}function $(){}function u(t){At||et.prototype.constructor.call(this,t)}function p(){At||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,p._$42++)}function f(){At||(this.p1=new c,this.p2=new c,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=new Array,this._$qP=new Array,this.setup(.3,.5,.1))}function c(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}function d(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}function g(t,i,e,r){d.prototype.constructor.call(this,i,e,r),this._$tL=null,this._$tL=t}function y(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}function T(t,i,e,r){y.prototype.constructor.call(this,i,e,r),this._$YP=null,this._$YP=t}function P(){At||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}function S(){At||(this.x=null,this.y=null,this.width=null,this.height=null)}function v(){}function L(){At||(this.x=null,this.y=null)}function M(){At||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=new Array)}function E(){At||(this._$Eb=E._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=E.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=new Array)}function A(){At||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=at.L2D_COLOR_BLEND_MODE_MULT)}function I(){At||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}function w(){}function x(){At||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=x._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}function O(){}function D(){At||(this._$Ob=null)}function R(){this.m=new Float32Array(16),this.identity()}function b(t){At||et.prototype.constructor.call(this,t)}function F(){At||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}function C(){At||(s.prototype.constructor.call(this),this.motions=new Array,this._$7r=null,this._$7r=C._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}function N(){this._$P=new Float32Array(100),this.size=0}function B(){this._$4P=null,this._$I0=null,this._$RP=null}function U(){}function G(){}function Y(t){At||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=new Array(Y._$is),this._$_2=new Float32Array(Y._$is),this._$vr=new Float32Array(Y._$is),this._$Rr=new Float32Array(Y._$is),this._$Or=new Float32Array(Y._$is),this._$fs=new Float32Array(Y._$is),this._$Js=new Array(Y._$is),this._$3S=new Array,this._$aS=new Array,this._$Bo=null,this._$F2=new Array,this._$db=new Array,this._$8b=new Array,this._$Hr=new Array,this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(U._$Qb),this._$ZP=new Float32Array(2*U._$1r),this._$Ri=t,this._$b0=Y._$HP++,this.clipManager=null,this.dp_webgl=null)}function k(){}function V(){At||(this._$12=null,this._$bb=null,this._$_L=null,this._$jo=null,this._$iL=null,this._$0L=null,this._$Br=null,this._$Dr=null,this._$Cb=null,this._$mr=null,this._$_L=wt.STATE_FIRST,this._$Br=4e3,this._$Dr=100,this._$Cb=50,this._$mr=150,this._$jo=!0,this._$iL="PARAM_EYE_L_OPEN",this._$0L="PARAM_EYE_R_OPEN")}function X(){At||(E.prototype.constructor.call(this),this._$sb=new Int32Array(X._$As),this._$U2=new Array,this.transform=null,this.gl=null,null==X._$NT&&(X._$NT=X._$9r(256),X._$vS=X._$9r(256),X._$no=X._$vb(256)))}function z(){At||(I.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}function H(t){_t.prototype.constructor.call(this,t),this._$8r=I._$ur,this._$Yr=null,this._$Wr=null}function W(){At||(M.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}function j(){At||(this._$NL=null,this._$3S=null,this._$aS=null,j._$42++)}function q(){At||(i.prototype.constructor.call(this),this._$zo=new X)}function J(){At||(s.prototype.constructor.call(this),this.motions=new Array,this._$o2=null,this._$7r=J._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}function Q(t,i){return String.fromCharCode(t.getUint8(i))}function N(){this._$P=new Float32Array(100),this.size=0}function B(){this._$4P=null,this._$I0=null,this._$RP=null}function Z(){At||(I.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}function K(t){_t.prototype.constructor.call(this,t),this._$8r=I._$ur,this._$Cr=null,this._$hr=null}function tt(){At||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,tt._$42++)}function it(t){this._$VS=null,this._$e0=null,this._$e0=t}function et(t){At||(this.id=t)}function rt(){}function ot(){At||(this._$4S=null)}function nt(t,i){this.canvas=t,this.context=i,this.viewport=new Array(0,0,t.width,t.height),this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}function st(){At||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}function _t(t){At||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=t,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}function at(){}function ht(){}function lt(t){At||(this._$ib=t)}function $t(){At||(W.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=$t._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=$t._$42++)}function ut(t){Mt.prototype.constructor.call(this,t),this._$8r=W._$ur,this._$Cr=null,this._$hr=null}function pt(){At||(this.x=null,this.y=null)}function ft(t){At||(i.prototype.constructor.call(this),this.drawParamWebGL=new mt(t),this.drawParamWebGL.setGL(at.getGL(t)))}function ct(){At||(this.motions=null,this._$eb=!1,this.motions=new Array)}function dt(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=dt._$Gs++}function gt(){this.m=new Array(1,0,0,0,1,0,0,0,1)}function yt(t){At||et.prototype.constructor.call(this,t)}function mt(t){At||(E.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.glno=t,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}function Tt(t,i,e){return null==i&&(i=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}function Pt(t,i,e){return null==i&&(i=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}function St(t){At||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=new Array,this._$T=t,this._$F=0)}function vt(){}function Lt(){}function Mt(t){At||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=t)}function Et(){}var At=!0;i._$0s=1,i._$4s=2,i._$42=0,i._$62=function(t,e){try{if(e instanceof ArrayBuffer&&(e=new DataView(e)),!(e instanceof DataView))throw new lt("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var r,o=new St(e),n=o._$ST(),s=o._$ST(),a=o._$ST();if(109!=n||111!=s||99!=a)throw new lt("_$gi _$C _$li , _$Q0 _$P0.");if(r=o._$ST(),o._$gr(r),r>G._$T7){t._$NP|=i._$4s;throw new lt("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+G._$T7+" < _$f0 : "+r+" )@_$SS#loadModel()\\n")}var h=o._$nP();if(r>=G._$s7){var l=o._$9T(),$=o._$9T();if(-30584!=l||-30584!=$)throw t._$NP|=i._$0s,new lt("_$gi _$C _$li , _$0 _$6 _$Ui.")}t._$KS(h);var u=t.getModelContext();u.setDrawParam(t.getDrawParam()),u.init()}catch(t){_._$Rb(t)}},i.prototype._$KS=function(t){this._$MT=t},i.prototype.getModelImpl=function(){return null==this._$MT&&(this._$MT=new p,this._$MT._$zP()),this._$MT},i.prototype.getCanvasWidth=function(){return null==this._$MT?0:this._$MT.getCanvasWidth()},i.prototype.getCanvasHeight=function(){return null==this._$MT?0:this._$MT.getCanvasHeight()},i.prototype.getParamFloat=function(t){return"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),this._$5S.getParamFloat(t)},i.prototype.setParamFloat=function(t,i,e){"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1-e)+i*e)},i.prototype.addToParamFloat=function(t,i,e){"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)+i*e)},i.prototype.multParamFloat=function(t,i,e){"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1+(i-1)*e))},i.prototype.getParamIndex=function(t){return this._$5S.getParamIndex(u.getID(t))},i.prototype.loadParam=function(){this._$5S.loadParam()},i.prototype.saveParam=function(){this._$5S.saveParam()},i.prototype.init=function(){this._$5S.init()},i.prototype.update=function(){this._$5S.update()},i.prototype._$Rs=function(){return _._$li("_$60 _$PT _$Rs()"),-1},i.prototype._$Ds=function(t){_._$li("_$60 _$PT _$SS#_$Ds() \\n")},i.prototype._$K2=function(){},i.prototype.draw=function(){},i.prototype.getModelContext=function(){return this._$5S},i.prototype._$s2=function(){return this._$NP},i.prototype._$P7=function(t,i,e,r){var o=-1,n=0,s=this;if(0!=e)if(1==t.length){var _=t[0],a=0!=s.getParamFloat(_),h=i[0],l=s.getPartsOpacity(h),$=e/r;a?(l+=$)>1&&(l=1):(l-=$)<0&&(l=0),s.setPartsOpacity(h,l)}else{for(var u=0;u<t.length;u++){var _=t[u],p=0!=s.getParamFloat(_);if(p){if(o>=0)break;o=u;var h=i[u];n=s.getPartsOpacity(h),n+=e/r,n>1&&(n=1)}}o<0&&(console.log("No _$wi _$q0/ _$U default[%s]",t[0]),o=0,n=1,s.loadParam(),s.setParamFloat(t[o],n),s.saveParam());for(var u=0;u<t.length;u++){var h=i[u];if(o==u)s.setPartsOpacity(h,n);else{var f,c=s.getPartsOpacity(h);f=n<.5?-.5*n/.5+1:.5*(1-n)/.5;var d=(1-f)*(1-n);d>.15&&(f=1-.15/(1-n)),c>f&&(c=f),s.setPartsOpacity(h,c)}}}else for(var u=0;u<t.length;u++){var _=t[u],h=i[u],p=0!=s.getParamFloat(_);s.setPartsOpacity(h,p?1:0)}},i.prototype.setPartsOpacity=function(t,i){"number"!=typeof t&&(t=this._$5S.getPartsDataIndex(l.getID(t))),this._$5S.setPartsOpacity(t,i)},i.prototype.getPartsDataIndex=function(t){return t instanceof l||(t=l.getID(t)),this._$5S.getPartsDataIndex(t)},i.prototype.getPartsOpacity=function(t){return"number"!=typeof t&&(t=this._$5S.getPartsDataIndex(l.getID(t))),t<0?0:this._$5S.getPartsOpacity(t)},i.prototype.getDrawParam=function(){},i.prototype.getDrawDataIndex=function(t){return this._$5S.getDrawDataIndex(b.getID(t))},i.prototype.getDrawData=function(t){return this._$5S.getDrawData(t)},i.prototype.getTransformedPoints=function(t){var i=this._$5S._$C2(t);return i instanceof ut?i.getTransformedPoints():null},i.prototype.getIndexArray=function(t){if(t<0||t>=this._$5S._$aS.length)return null;var i=this._$5S._$aS[t];return null!=i&&i.getType()==W._$wb&&i instanceof $t?i.getIndexArray():null},e.CHANNEL_COUNT=4,e.RENDER_TEXTURE_USE_MIPMAP=!1,e.NOT_USED_FRAME=-100,e.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var t=this.CHANNEL_COLORS.length-1;t>=0;--t)this.CHANNEL_COLORS.splice(t,1);this.CHANNEL_COLORS=[]}this.releaseShader()},e.prototype.releaseShader=function(){for(var t=at.frameBuffers.length,i=0;i<t;i++)this.gl.deleteFramebuffer(at.frameBuffers[i].framebuffer);at.frameBuffers=[],at.glContext=[]},e.prototype.init=function(t,i,e){for(var o=0;o<i.length;o++){var n=i[o].getClipIDList();if(null!=n){var s=this.findSameClip(n);null==s&&(s=new r(this,t,n),this.clipContextList.push(s));var _=i[o].getDrawDataID(),a=t.getDrawDataIndex(_);s.addClippedDrawData(_,a);e[o].clipBufPre_clipContext=s}}},e.prototype.getMaskRenderTexture=function(){var t=null;return t=this.dp_webgl.createFramebuffer(),at.frameBuffers[this.dp_webgl.glno]=t,this.dp_webgl.glno},e.prototype.setupClip=function(t,i){for(var e=0,r=0;r<this.clipContextList.length;r++){var o=this.clipContextList[r];this.calcClippedDrawTotalBounds(t,o),o.isUsing&&e++}if(e>0){var n=i.gl.getParameter(i.gl.FRAMEBUFFER_BINDING),s=new Array(4);s[0]=0,s[1]=0,s[2]=i.gl.canvas.width,s[3]=i.gl.canvas.height,i.gl.viewport(0,0,at.clippingMaskBufferSize,at.clippingMaskBufferSize),this.setupLayoutBounds(e),i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,at.frameBuffers[this.curFrameNo].framebuffer),i.gl.clearColor(0,0,0,0),i.gl.clear(i.gl.COLOR_BUFFER_BIT);for(var r=0;r<this.clipContextList.length;r++){var o=this.clipContextList[r],_=o.allClippedDrawRect,a=(o.layoutChannelNo,o.layoutBounds);this.tmpBoundsOnModel._$jL(_),this.tmpBoundsOnModel.expand(.05*_.width,.05*_.height);var h=a.width/this.tmpBoundsOnModel.width,l=a.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(h,l,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(h,l,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var $=this.tmpMatrixForMask.getArray(),u=0;u<16;u++)o.matrixForMask[u]=$[u];for(var p=this.tmpMatrixForDraw.getArray(),u=0;u<16;u++)o.matrixForDraw[u]=p[u];for(var f=o.clippingMaskDrawIndexList.length,c=0;c<f;c++){var d=o.clippingMaskDrawIndexList[c],g=t.getDrawData(d),y=t._$C2(d);i.setClipBufPre_clipContextForMask(o),g.draw(i,t,y)}}i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,n),i.setClipBufPre_clipContextForMask(null),i.gl.viewport(s[0],s[1],s[2],s[3])}},e.prototype.getColorBuffer=function(){return this.colorBuffer},e.prototype.findSameClip=function(t){for(var i=0;i<this.clipContextList.length;i++){var e=this.clipContextList[i],r=e.clipIDList.length;if(r==t.length){for(var o=0,n=0;n<r;n++)for(var s=e.clipIDList[n],_=0;_<r;_++)if(t[_]==s){o++;break}if(o==r)return e}}return null},e.prototype.calcClippedDrawTotalBounds=function(t,i){for(var e=t._$Ri.getModelImpl().getCanvasWidth(),r=t._$Ri.getModelImpl().getCanvasHeight(),o=e>r?e:r,n=o,s=o,_=0,a=0,h=i.clippedDrawContextList.length,l=0;l<h;l++){var $=i.clippedDrawContextList[l],u=$.drawDataIndex,p=t._$C2(u);if(p._$yo()){for(var f=p.getTransformedPoints(),c=f.length,d=[],g=[],y=0,m=U._$i2;m<c;m+=U._$No)d[y]=f[m],g[y]=f[m+1],y++;var T=Math.min.apply(null,d),P=Math.min.apply(null,g),S=Math.max.apply(null,d),v=Math.max.apply(null,g);T<n&&(n=T),P<s&&(s=P),S>_&&(_=S),v>a&&(a=v)}}if(n==o)i.allClippedDrawRect.x=0,i.allClippedDrawRect.y=0,i.allClippedDrawRect.width=0,i.allClippedDrawRect.height=0,i.isUsing=!1;else{var L=_-n,M=a-s;i.allClippedDrawRect.x=n,i.allClippedDrawRect.y=s,i.allClippedDrawRect.width=L,i.allClippedDrawRect.height=M,i.isUsing=!0}},e.prototype.setupLayoutBounds=function(t){var i=t/e.CHANNEL_COUNT,r=t%e.CHANNEL_COUNT;i=~~i,r=~~r;for(var o=0,n=0;n<e.CHANNEL_COUNT;n++){var s=i+(n<r?1:0);if(0==s);else if(1==s){var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=0,a.layoutBounds.y=0,a.layoutBounds.width=1,a.layoutBounds.height=1}else if(2==s)for(var h=0;h<s;h++){var l=h%2,$=0;l=~~l;var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=.5*l,a.layoutBounds.y=0,a.layoutBounds.width=.5,a.layoutBounds.height=1}else if(s<=4)for(var h=0;h<s;h++){var l=h%2,$=h/2;l=~~l,$=~~$;var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=.5*l,a.layoutBounds.y=.5*$,a.layoutBounds.width=.5,a.layoutBounds.height=.5}else if(s<=9)for(var h=0;h<s;h++){var l=h%3,$=h/3;l=~~l,$=~~$;var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=l/3,a.layoutBounds.y=$/3,a.layoutBounds.width=1/3,a.layoutBounds.height=1/3}else _._$li("_$6 _$0P mask count : %d",s)}},r.prototype.addClippedDrawData=function(t,i){var e=new o(t,i);this.clippedDrawContextList.push(e)},s._$JT=function(t,i,e){var r=t/i,o=e/i,n=o,s=1-(1-o)*(1-o),_=1-(1-n)*(1-n),a=1/3*(1-o)*s+(n*(2/3)+1/3*(1-n))*(1-s),h=(n+2/3*(1-n))*_+(o*(1/3)+2/3*(1-o))*(1-_),l=1-3*h+3*a-0,$=3*h-6*a+0,u=3*a-0;if(r<=0)return 0;if(r>=1)return 1;var p=r,f=p*p;return l*(p*f)+$*f+u*p+0},s.prototype._$a0=function(){},s.prototype.setFadeIn=function(t){this._$dP=t},s.prototype.setFadeOut=function(t){this._$eo=t},s.prototype._$pT=function(t){this._$V0=t},s.prototype.getFadeOut=function(){return this._$eo},s.prototype._$4T=function(){return this._$eo},s.prototype._$mT=function(){return this._$V0},s.prototype.getDurationMSec=function(){return-1},s.prototype.getLoopDurationMSec=function(){return-1},s.prototype.updateParam=function(t,i){if(i._$AT&&!i._$9L){var e=w.getUserTimeMSec();if(i._$z2<0){i._$z2=e,i._$bs=e;var r=this.getDurationMSec();i._$Do<0&&(i._$Do=r<=0?-1:i._$z2+r)}var o=this._$V0;o=o*(0==this._$dP?1:ht._$r2((e-i._$bs)/this._$dP))*(0==this._$eo||i._$Do<0?1:ht._$r2((i._$Do-e)/this._$eo)),0<=o&&o<=1||console.log("### assert!! ### "),this.updateParamExe(t,e,o,i),i._$Do>0&&i._$Do<e&&(i._$9L=!0)}},s.prototype.updateParamExe=function(t,i,e,r){},_._$8s=0,_._$fT=new Object,_.start=function(t){var i=_._$fT[t];null==i&&(i=new a,i._$r=t,_._$fT[t]=i),i._$0S=w.getSystemTimeMSec()},_.dump=function(t){var i=_._$fT[t];if(null!=i){var e=w.getSystemTimeMSec(),r=e-i._$0S;return console.log(t+" : "+r+"ms"),r}return-1},_.end=function(t){var i=_._$fT[t];if(null!=i){return w.getSystemTimeMSec()-i._$0S}return-1},_._$li=function(t,i){console.log("_$li : "+t+"\\n",i)},_._$Ji=function(t,i){console.log(t,i)},_._$dL=function(t,i){console.log(t,i),console.log("\\n")},_._$KL=function(t,i){for(var e=0;e<i;e++)e%16==0&&e>0?console.log("\\n"):e%8==0&&e>0&&console.log("  "),console.log("%02X ",255&t[e]);console.log("\\n")},_._$nr=function(t,i,e){console.log("%s\\n",t);for(var r=i.length,o=0;o<r;++o)console.log("%5d",i[o]),console.log("%s\\n",e),console.log(",");console.log("\\n")},_._$Rb=function(t){console.log("dump exception : "+t),console.log("stack :: "+t.stack)},h.prototype._$8P=function(){return.5*(this.x+this.x+this.width)},h.prototype._$6P=function(){return.5*(this.y+this.y+this.height)},h.prototype._$EL=function(){return this.x+this.width},h.prototype._$5T=function(){return this.y+this.height},h.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},h.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},l.prototype=new et,l._$tP=new Object,l._$27=function(){l._$tP.clear()},l.getID=function(t){var i=l._$tP[t];return null==i&&(i=new l(t),l._$tP[t]=i),i},l.prototype._$3s=function(){return new l},u.prototype=new et,u._$tP=new Object,u._$27=function(){u._$tP.clear()},u.getID=function(t){var i=u._$tP[t];return null==i&&(i=new u(t),u._$tP[t]=i),i},u.prototype._$3s=function(){return new u},p._$42=0,p.prototype._$zP=function(){null==this._$vo&&(this._$vo=new ot),null==this._$F2&&(this._$F2=new Array)},p.prototype.getCanvasWidth=function(){return this._$ao},p.prototype.getCanvasHeight=function(){return this._$1S},p.prototype._$F0=function(t){this._$vo=t._$nP(),this._$F2=t._$nP(),this._$ao=t._$6L(),this._$1S=t._$6L()},p.prototype._$6S=function(t){this._$F2.push(t)},p.prototype._$Xr=function(){return this._$F2},p.prototype._$E2=function(){return this._$vo},f.prototype.setup=function(t,i,e){this._$ks=this._$Yb(),this.p2._$xT(),3==arguments.length&&(this._$Fo=t,this._$L2=i,this.p1._$p=e,this.p2._$p=e,this.p2.y=t,this.setup())},f.prototype.getPhysicsPoint1=function(){return this.p1},f.prototype.getPhysicsPoint2=function(){return this.p2},f.prototype._$qr=function(){return this._$Db},f.prototype._$pr=function(t){this._$Db=t},f.prototype._$5r=function(){return this._$M2},f.prototype._$Cs=function(){return this._$9b},f.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},f.prototype.addSrcParam=function(t,i,e,r){var o=new g(t,i,e,r);this._$lL.push(o)},f.prototype.addTargetParam=function(t,i,e,r){var o=new T(t,i,e,r);this._$qP.push(o)},f.prototype.update=function(t,i){if(0==this._$iP)return this._$iP=this._$iT=i,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var e=(i-this._$iT)/1e3;if(0!=e){for(var r=this._$lL.length-1;r>=0;--r){this._$lL[r]._$oP(t,this)}this._$oo(t,e),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/e,this._$ks=this._$M2}for(var r=this._$qP.length-1;r>=0;--r){this._$qP[r]._$YS(t,this)}this._$iT=i},f.prototype._$oo=function(t,i){i<.033&&(i=.033);var e=1/i;this.p1.vx=(this.p1.x-this.p1._$s0)*e,this.p1.vy=(this.p1.y-this.p1._$70)*e,this.p1.ax=(this.p1.vx-this.p1._$7L)*e,this.p1.ay=(this.p1.vy-this.p1._$HL)*e,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var r,o,n=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),s=Math.cos(n),_=Math.sin(n),a=9.8*this.p2._$p,h=this._$Db*Lt._$bS,l=a*Math.cos(n-h);r=l*_,o=l*s;var $=-this.p1.fx*_*_,u=-this.p1.fy*_*s,p=-this.p2.vx*this._$L2,f=-this.p2.vy*this._$L2;this.p2.fx=r+$+p,this.p2.fy=o+u+f,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*i,this.p2.vy+=this.p2.ay*i,this.p2.x+=this.p2.vx*i,this.p2.y+=this.p2.vy*i;var c=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/c,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/c,this.p2.vx=(this.p2.x-this.p2._$s0)*e,this.p2.vy=(this.p2.y-this.p2._$70)*e,this.p2._$xT()},c.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy},d.prototype._$oP=function(t,i){},g.prototype=new d,g.prototype._$oP=function(t,i){var e=this.scale*t.getParamFloat(this._$wL),r=i.getPhysicsPoint1();switch(this._$tL){default:case f.Src.SRC_TO_X:r.x=r.x+(e-r.x)*this._$V0;break;case f.Src.SRC_TO_Y:r.y=r.y+(e-r.y)*this._$V0;break;case f.Src.SRC_TO_G_ANGLE:var o=i._$qr();o+=(e-o)*this._$V0,i._$pr(o)}},y.prototype._$YS=function(t,i){},T.prototype=new y,T.prototype._$YS=function(t,i){switch(this._$YP){default:case f.Target.TARGET_FROM_ANGLE:t.setParamFloat(this._$wL,this.scale*i._$5r(),this._$V0);break;case f.Target.TARGET_FROM_ANGLE_V:t.setParamFloat(this._$wL,this.scale*i._$Cs(),this._$V0)}},f.Src=function(){},f.Src.SRC_TO_X="SRC_TO_X",f.Src.SRC_TO_Y="SRC_TO_Y",f.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",f.Target=function(){},f.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",f.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V",P.prototype.init=function(t){this._$fL=t._$fL,this._$gL=t._$gL,this._$B0=t._$B0,this._$z0=t._$z0,this._$qT=t._$qT,this.reflectX=t.reflectX,this.reflectY=t.reflectY},P.prototype._$F0=function(t){this._$fL=t._$_T(),this._$gL=t._$_T(),this._$B0=t._$_T(),this._$z0=t._$_T(),this._$qT=t._$_T(),t.getFormatVersion()>=G.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=t._$po(),this.reflectY=t._$po())},P.prototype._$e=function(){};var It=function(){};It._$ni=function(t,i,e,r,o,n,s,_,a){var h=s*n-_*o;if(0==h)return null;var l,$=((t-e)*n-(i-r)*o)/h;return l=0!=o?(t-e-$*s)/o:(i-r-$*_)/n,isNaN(l)&&(l=(t-e-$*s)/o,isNaN(l)&&(l=(i-r-$*_)/n),isNaN(l)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+o),console.log("v1x != 0 ? "+(0!=o)))),null==a?new Array(l,$):(a[0]=l,a[1]=$,a)},S.prototype._$8P=function(){return this.x+.5*this.width},S.prototype._$6P=function(){return this.y+.5*this.height},S.prototype._$EL=function(){return this.x+this.width},S.prototype._$5T=function(){return this.y+this.height},S.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},S.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},S.prototype.contains=function(t,i){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},S.prototype.expand=function(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},v._$Z2=function(t,i,e,r){var o=i._$Q2(t,e),n=t._$vs(),s=t._$Tr();if(i._$zr(n,s,o),o<=0)return r[n[0]];if(1==o){var _=r[n[0]],a=r[n[1]],h=s[0];return _+(a-_)*h|0}if(2==o){var _=r[n[0]],a=r[n[1]],l=r[n[2]],$=r[n[3]],h=s[0],u=s[1],p=_+(a-_)*h|0,f=l+($-l)*h|0;return p+(f-p)*u|0}if(3==o){var c=r[n[0]],d=r[n[1]],g=r[n[2]],y=r[n[3]],m=r[n[4]],T=r[n[5]],P=r[n[6]],S=r[n[7]],h=s[0],u=s[1],v=s[2],_=c+(d-c)*h|0,a=g+(y-g)*h|0,l=m+(T-m)*h|0,$=P+(S-P)*h|0,p=_+(a-_)*u|0,f=l+($-l)*u|0;return p+(f-p)*v|0}if(4==o){var L=r[n[0]],M=r[n[1]],E=r[n[2]],A=r[n[3]],I=r[n[4]],w=r[n[5]],x=r[n[6]],O=r[n[7]],D=r[n[8]],R=r[n[9]],b=r[n[10]],F=r[n[11]],C=r[n[12]],N=r[n[13]],B=r[n[14]],U=r[n[15]],h=s[0],u=s[1],v=s[2],G=s[3],c=L+(M-L)*h|0,d=E+(A-E)*h|0,g=I+(w-I)*h|0,y=x+(O-x)*h|0,m=D+(R-D)*h|0,T=b+(F-b)*h|0,P=C+(N-C)*h|0,S=B+(U-B)*h|0,_=c+(d-c)*u|0,a=g+(y-g)*u|0,l=m+(T-m)*u|0,$=P+(S-P)*u|0,p=_+(a-_)*v|0,f=l+($-l)*v|0;return p+(f-p)*G|0}for(var Y=1<<o,k=new Float32Array(Y),V=0;V<Y;V++){for(var X=V,z=1,H=0;H<o;H++)z*=X%2==0?1-s[H]:s[H],X/=2;k[V]=z}for(var W=new Float32Array(Y),j=0;j<Y;j++)W[j]=r[n[j]];for(var q=0,j=0;j<Y;j++)q+=k[j]*W[j];return q+.5|0},v._$br=function(t,i,e,r){var o=i._$Q2(t,e),n=t._$vs(),s=t._$Tr();if(i._$zr(n,s,o),o<=0)return r[n[0]];if(1==o){var _=r[n[0]],a=r[n[1]],h=s[0];return _+(a-_)*h}if(2==o){var _=r[n[0]],a=r[n[1]],l=r[n[2]],$=r[n[3]],h=s[0],u=s[1];return(1-u)*(_+(a-_)*h)+u*(l+($-l)*h)}if(3==o){var p=r[n[0]],f=r[n[1]],c=r[n[2]],d=r[n[3]],g=r[n[4]],y=r[n[5]],m=r[n[6]],T=r[n[7]],h=s[0],u=s[1],P=s[2];return(1-P)*((1-u)*(p+(f-p)*h)+u*(c+(d-c)*h))+P*((1-u)*(g+(y-g)*h)+u*(m+(T-m)*h))}if(4==o){var S=r[n[0]],v=r[n[1]],L=r[n[2]],M=r[n[3]],E=r[n[4]],A=r[n[5]],I=r[n[6]],w=r[n[7]],x=r[n[8]],O=r[n[9]],D=r[n[10]],R=r[n[11]],b=r[n[12]],F=r[n[13]],C=r[n[14]],N=r[n[15]],h=s[0],u=s[1],P=s[2],B=s[3];return(1-B)*((1-P)*((1-u)*(S+(v-S)*h)+u*(L+(M-L)*h))+P*((1-u)*(E+(A-E)*h)+u*(I+(w-I)*h)))+B*((1-P)*((1-u)*(x+(O-x)*h)+u*(D+(R-D)*h))+P*((1-u)*(b+(F-b)*h)+u*(C+(N-C)*h)))}for(var U=1<<o,G=new Float32Array(U),Y=0;Y<U;Y++){for(var k=Y,V=1,X=0;X<o;X++)V*=k%2==0?1-s[X]:s[X],k/=2;G[Y]=V}for(var z=new Float32Array(U),H=0;H<U;H++)z[H]=r[n[H]];for(var W=0,H=0;H<U;H++)W+=G[H]*z[H];return W},v._$Vr=function(t,i,e,r,o,n,s,_){var a=i._$Q2(t,e),h=t._$vs(),l=t._$Tr();i._$zr(h,l,a);var $=2*r,u=s;if(a<=0){var p=h[0],f=o[p];if(2==_&&0==s)w._$jT(f,0,n,0,$);else for(var c=0;c<$;)n[u]=f[c++],n[u+1]=f[c++],u+=_}else if(1==a)for(var f=o[h[0]],d=o[h[1]],g=l[0],y=1-g,c=0;c<$;)n[u]=f[c]*y+d[c]*g,++c,n[u+1]=f[c]*y+d[c]*g,++c,u+=_;else if(2==a)for(var f=o[h[0]],d=o[h[1]],m=o[h[2]],T=o[h[3]],g=l[0],P=l[1],y=1-g,S=1-P,v=S*y,L=S*g,M=P*y,E=P*g,c=0;c<$;)n[u]=v*f[c]+L*d[c]+M*m[c]+E*T[c],++c,n[u+1]=v*f[c]+L*d[c]+M*m[c]+E*T[c],++c,u+=_;else if(3==a)for(var A=o[h[0]],I=o[h[1]],x=o[h[2]],O=o[h[3]],D=o[h[4]],R=o[h[5]],b=o[h[6]],F=o[h[7]],g=l[0],P=l[1],C=l[2],y=1-g,S=1-P,N=1-C,B=N*S*y,U=N*S*g,G=N*P*y,Y=N*P*g,k=C*S*y,V=C*S*g,X=C*P*y,z=C*P*g,c=0;c<$;)n[u]=B*A[c]+U*I[c]+G*x[c]+Y*O[c]+k*D[c]+V*R[c]+X*b[c]+z*F[c],++c,n[u+1]=B*A[c]+U*I[c]+G*x[c]+Y*O[c]+k*D[c]+V*R[c]+X*b[c]+z*F[c],++c,u+=_;else if(4==a)for(var H=o[h[0]],W=o[h[1]],j=o[h[2]],q=o[h[3]],J=o[h[4]],Q=o[h[5]],Z=o[h[6]],K=o[h[7]],tt=o[h[8]],it=o[h[9]],et=o[h[10]],rt=o[h[11]],ot=o[h[12]],nt=o[h[13]],st=o[h[14]],_t=o[h[15]],g=l[0],P=l[1],C=l[2],at=l[3],y=1-g,S=1-P,N=1-C,ht=1-at,lt=ht*N*S*y,$t=ht*N*S*g,ut=ht*N*P*y,pt=ht*N*P*g,ft=ht*C*S*y,ct=ht*C*S*g,dt=ht*C*P*y,gt=ht*C*P*g,yt=at*N*S*y,mt=at*N*S*g,Tt=at*N*P*y,Pt=at*N*P*g,St=at*C*S*y,vt=at*C*S*g,Lt=at*C*P*y,Mt=at*C*P*g,c=0;c<$;)n[u]=lt*H[c]+$t*W[c]+ut*j[c]+pt*q[c]+ft*J[c]+ct*Q[c]+dt*Z[c]+gt*K[c]+yt*tt[c]+mt*it[c]+Tt*et[c]+Pt*rt[c]+St*ot[c]+vt*nt[c]+Lt*st[c]+Mt*_t[c],++c,n[u+1]=lt*H[c]+$t*W[c]+ut*j[c]+pt*q[c]+ft*J[c]+ct*Q[c]+dt*Z[c]+gt*K[c]+yt*tt[c]+mt*it[c]+Tt*et[c]+Pt*rt[c]+St*ot[c]+vt*nt[c]+Lt*st[c]+Mt*_t[c],++c,u+=_;else{for(var Et=1<<a,At=new Float32Array(Et),It=0;It<Et;It++){for(var wt=It,xt=1,Ot=0;Ot<a;Ot++)xt*=wt%2==0?1-l[Ot]:l[Ot],wt/=2;At[It]=xt}for(var Dt=new Float32Array(Et),Rt=0;Rt<Et;Rt++)Dt[Rt]=o[h[Rt]];for(var c=0;c<$;){for(var bt=0,Ft=0,Ct=c+1,Rt=0;Rt<Et;Rt++)bt+=At[Rt]*Dt[Rt][c],Ft+=At[Rt]*Dt[Rt][Ct];c+=2,n[u]=bt,n[u+1]=Ft,u+=_}}},L.prototype._$HT=function(t,i){this.x=t,this.y=i},L.prototype._$HT=function(t){this.x=t.x,this.y=t.y},M._$ur=-2,M._$ES=500,M._$wb=2,M._$8S=3,M._$52=M._$ES,M._$R2=M._$ES,M._$or=function(){return M._$52},M._$Pr=function(){return M._$R2},M.prototype.convertClipIDForV2_11=function(t){var i=[];return null==t?null:0==t.length?null:/,/.test(t)?i=t.id.split(","):(i.push(t.id),i)},M.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=G._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},M.prototype.getClipIDList=function(){return this.clipIDList},M.prototype.init=function(t){},M.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=v._$Z2(t,this._$GS,i._$IS,this._$Lb),at._$Zs);else if(i._$IS[0])return;i._$7s=v._$br(t,this._$GS,i._$IS,this._$mS)},M.prototype._$2b=function(t,i){},M.prototype.getDrawDataID=function(){return this._$gP},M.prototype._$j2=function(t){this._$gP=t},M.prototype.getOpacity=function(t,i){return i._$7s},M.prototype._$zS=function(t,i){return i._$Us},M.prototype._$MS=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<M._$52?M._$52=e:e>M._$R2&&(M._$R2=e)}},M.prototype.getTargetBaseDataID=function(){return this._$dr},M.prototype._$gs=function(t){this._$dr=t},M.prototype._$32=function(){return null!=this._$dr&&this._$dr!=yt._$2o()},M.prototype.preDraw=function(t,i,e){},M.prototype.draw=function(t,i,e){},M.prototype.getType=function(){},M.prototype._$B2=function(t,i,e){},E._$ps=32,E.CLIPPING_PROCESS_NONE=0,E.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,E.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,E.CLIPPING_PROCESS_DRAW=3,E.CLIPPING_PROCESS_CLEAR_ALPHA=4,E.prototype.setChannelFlagAsColor=function(t,i){this.CHANNEL_COLORS[t]=i},E.prototype.getChannelFlagAsColor=function(t){return this.CHANNEL_COLORS[t]},E.prototype._$ZT=function(){},E.prototype._$Uo=function(t,i,e,r,o,n,s){},E.prototype._$Rs=function(){return-1},E.prototype._$Ds=function(t){},E.prototype.setBaseColor=function(t,i,e,r){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),this._$lT=t,this._$C0=i,this._$tT=e,this._$WL=r},E.prototype._$WP=function(t){this.culling=t},E.prototype.setMatrix=function(t){for(var i=0;i<16;i++)this.matrix4x4[i]=t[i]},E.prototype._$IT=function(){return this.matrix4x4},E.prototype.setPremultipliedAlpha=function(t){this.premultipliedAlpha=t},E.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},E.prototype.setAnisotropy=function(t){this.anisotropy=t},E.prototype.getAnisotropy=function(){return this.anisotropy},E.prototype.getClippingProcess=function(){return this.clippingProcess},E.prototype.setClippingProcess=function(t){this.clippingProcess=t},E.prototype.setClipBufPre_clipContextForMask=function(t){this.clipBufPre_clipContextMask=t},E.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},E.prototype.setClipBufPre_clipContextForDraw=function(t){this.clipBufPre_clipContextDraw=t},E.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw},I._$ur=-2,I._$c2=1,I._$_b=2,I.prototype._$F0=function(t){this._$kP=t._$nP(),this._$dr=t._$nP()},I.prototype.readV2_opacity=function(t){t.getFormatVersion()>=G.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=t._$Tb())},I.prototype.init=function(t){},I.prototype._$Nr=function(t,i){},I.prototype.interpolateOpacity=function(t,i,e,r){null==this._$mS?e.setInterpolatedOpacity(1):e.setInterpolatedOpacity(v._$br(t,i,r,this._$mS))},I.prototype._$2b=function(t,i){},I.prototype._$nb=function(t,i,e,r,o,n,s){},I.prototype.getType=function(){},I.prototype._$gs=function(t){this._$dr=t},I.prototype._$a2=function(t){this._$kP=t},I.prototype.getTargetBaseDataID=function(){return this._$dr},I.prototype.getBaseDataID=function(){return this._$kP},I.prototype._$32=function(){return null!=this._$dr&&this._$dr!=yt._$2o()},w._$W2=0,w._$CS=w._$W2,w._$Mo=function(){return!0},w._$XP=function(t){try{for(var i=getTimeMSec();getTimeMSec()-i<t;);}catch(t){t._$Rb()}},w.getUserTimeMSec=function(){return w._$CS==w._$W2?w.getSystemTimeMSec():w._$CS},w.setUserTimeMSec=function(t){w._$CS=t},w.updateUserTimeMSec=function(){return w._$CS=w.getSystemTimeMSec()},w.getTimeMSec=function(){return(new Date).getTime()},w.getSystemTimeMSec=function(){return(new Date).getTime()},w._$Q=function(t){},w._$jT=function(t,i,e,r,o){for(var n=0;n<o;n++)e[r+n]=t[i+n]},x._$ds=-2,x.prototype._$F0=function(t){this._$wL=t._$nP(),this._$VP=t._$6L(),this._$GP=t._$nP()},x.prototype.getParamIndex=function(t){return this._$2r!=t&&(this._$8o=x._$ds),this._$8o},x.prototype._$Pb=function(t,i){this._$8o=t,this._$2r=i},x.prototype.getParamID=function(){return this._$wL},x.prototype._$yP=function(t){this._$wL=t},x.prototype._$N2=function(){return this._$VP},x.prototype._$d2=function(){return this._$GP},x.prototype._$t2=function(t,i){this._$VP=t,this._$GP=i},x.prototype._$Lr=function(){return this._$O2},x.prototype._$wr=function(t){this._$O2=t},x.prototype._$SL=function(){return this._$ri},x.prototype._$AL=function(t){this._$ri=t},O.startsWith=function(t,i,e){var r=i+e.length;if(r>=t.length)return!1;for(var o=i;o<r;o++)if(O.getChar(t,o)!=e.charAt(o-i))return!1;return!0},O.getChar=function(t,i){return String.fromCharCode(t.getUint8(i))},O.createString=function(t,i,e){for(var r=new ArrayBuffer(2*e),o=new Uint16Array(r),n=0;n<e;n++)o[n]=t.getUint8(i+n);return String.fromCharCode.apply(null,o)},O._$LS=function(t,i,e,r){t instanceof ArrayBuffer&&(t=new DataView(t));var o=e,n=!1,s=!1,_=0,a=O.getChar(t,o);"-"==a&&(n=!0,o++);for(var h=!1;o<i;o++){switch(a=O.getChar(t,o)){case"0":_*=10;break;case"1":_=10*_+1;break;case"2":_=10*_+2;break;case"3":_=10*_+3;break;case"4":_=10*_+4;break;case"5":_=10*_+5;break;case"6":_=10*_+6;break;case"7":_=10*_+7;break;case"8":_=10*_+8;break;case"9":_=10*_+9;break;case".":s=!0,o++,h=!0;break;default:h=!0}if(h)break}if(s)for(var l=.1,$=!1;o<i;o++){switch(a=O.getChar(t,o)){case"0":break;case"1":_+=1*l;break;case"2":_+=2*l;break;case"3":_+=3*l;break;case"4":_+=4*l;break;case"5":_+=5*l;break;case"6":_+=6*l;break;case"7":_+=7*l;break;case"8":_+=8*l;break;case"9":_+=9*l;break;default:$=!0}if(l*=.1,$)break}return n&&(_=-_),r[0]=o,_},D.prototype._$zP=function(){this._$Ob=new Array},D.prototype._$F0=function(t){this._$Ob=t._$nP()},D.prototype._$Ur=function(t){if(t._$WS())return!0;for(var i=t._$v2(),e=this._$Ob.length-1;e>=0;--e){var r=this._$Ob[e].getParamIndex(i);if(r==x._$ds&&(r=t.getParamIndex(this._$Ob[e].getParamID())),t._$Xb(r))return!0}return!1},D.prototype._$Q2=function(t,i){for(var e,r,o=this._$Ob.length,n=t._$v2(),s=0,_=0;_<o;_++){var a=this._$Ob[_];if(e=a.getParamIndex(n),e==x._$ds&&(e=t.getParamIndex(a.getParamID()),a._$Pb(e,n)),e<0)throw new Exception("err 23242 : "+a.getParamID());var h=e<0?0:t.getParamFloat(e);r=a._$N2();var l,$,u=a._$d2(),p=-1,f=0;if(r<1);else if(1==r)l=u[0],l-U._$J<h&&h<l+U._$J?(p=0,f=0):(p=0,i[0]=!0);else if(l=u[0],h<l-U._$J)p=0,i[0]=!0;else if(h<l+U._$J)p=0;else{for(var c=!1,d=1;d<r;++d){if($=u[d],h<$+U._$J){$-U._$J<h?p=d:(p=d-1,f=(h-l)/($-l),s++),c=!0;break}l=$}c||(p=r-1,f=0,i[0]=!0)}a._$wr(p),a._$AL(f)}return s},D.prototype._$zr=function(t,i,e){var r=1<<e;r+1>U._$Qb&&console.log("err 23245\\n");for(var o=this._$Ob.length,n=1,s=1,_=0,a=0;a<r;++a)t[a]=0;for(var h=0;h<o;++h){var l=this._$Ob[h];if(0==l._$SL()){var $=l._$Lr()*n;if($<0&&at._$3T)throw new Exception("err 23246");for(var a=0;a<r;++a)t[a]+=$}else{for(var $=n*l._$Lr(),u=n*(l._$Lr()+1),a=0;a<r;++a)t[a]+=(a/s|0)%2==0?$:u;i[_++]=l._$SL(),s*=2}n*=l._$N2()}t[r]=65535,i[_]=-1},D.prototype._$h2=function(t,i,e){for(var r=new Float32Array(i),o=0;o<i;++o)r[o]=e[o];var n=new x;n._$yP(t),n._$t2(i,r),this._$Ob.push(n)},D.prototype._$J2=function(t){for(var i=t,e=this._$Ob.length,r=0;r<e;++r){var o=this._$Ob[r],n=o._$N2(),s=i%o._$N2(),_=o._$d2()[s];console.log("%s[%d]=%7.2f / ",o.getParamID(),s,_),i/=n}console.log("\\n")},D.prototype.getParamCount=function(){return this._$Ob.length},D.prototype._$zs=function(){return this._$Ob},R.prototype.identity=function(){for(var t=0;t<16;t++)this.m[t]=t%5==0?1:0},R.prototype.getArray=function(){return this.m},R.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},R.prototype.setMatrix=function(t){if(null!=t&&16==t.length)for(var i=0;i<16;i++)this.m[i]=t[i]},R.prototype.mult=function(t,i,e){return null==i?null:(this==i?this.mult_safe(this.m,t.m,i.m,e):this.mult_fast(this.m,t.m,i.m,e),i)},R.prototype.mult_safe=function(t,i,e,r){if(t==e){var o=new Array(16);this.mult_fast(t,i,o,r);for(var n=15;n>=0;--n)e[n]=o[n]}else this.mult_fast(t,i,e,r)},R.prototype.mult_fast=function(t,i,e,r){r?(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],e[3]=e[7]=e[11]=0,e[15]=1):(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],e[3]=t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],e[7]=t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],e[11]=t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],e[15]=t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15])},R.prototype.translate=function(t,i,e){this.m[12]=this.m[0]*t+this.m[4]*i+this.m[8]*e+this.m[12],this.m[13]=this.m[1]*t+this.m[5]*i+this.m[9]*e+this.m[13],this.m[14]=this.m[2]*t+this.m[6]*i+this.m[10]*e+this.m[14],this.m[15]=this.m[3]*t+this.m[7]*i+this.m[11]*e+this.m[15]},R.prototype.scale=function(t,i,e){this.m[0]*=t,this.m[4]*=i,this.m[8]*=e,this.m[1]*=t,this.m[5]*=i,this.m[9]*=e,this.m[2]*=t,this.m[6]*=i,this.m[10]*=e,this.m[3]*=t,this.m[7]*=i,this.m[11]*=e},R.prototype.rotateX=function(t){var i=Lt.fcos(t),e=Lt._$9(t),r=this.m[4];this.m[4]=r*i+this.m[8]*e,this.m[8]=r*-e+this.m[8]*i,r=this.m[5],this.m[5]=r*i+this.m[9]*e,this.m[9]=r*-e+this.m[9]*i,r=this.m[6],this.m[6]=r*i+this.m[10]*e,this.m[10]=r*-e+this.m[10]*i,r=this.m[7],this.m[7]=r*i+this.m[11]*e,this.m[11]=r*-e+this.m[11]*i},R.prototype.rotateY=function(t){var i=Lt.fcos(t),e=Lt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[8]*-e,this.m[8]=r*e+this.m[8]*i,r=this.m[1],this.m[1]=r*i+this.m[9]*-e,this.m[9]=r*e+this.m[9]*i,r=m[2],this.m[2]=r*i+this.m[10]*-e,this.m[10]=r*e+this.m[10]*i,r=m[3],this.m[3]=r*i+this.m[11]*-e,this.m[11]=r*e+this.m[11]*i},R.prototype.rotateZ=function(t){var i=Lt.fcos(t),e=Lt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[4]*e,this.m[4]=r*-e+this.m[4]*i,r=this.m[1],this.m[1]=r*i+this.m[5]*e,this.m[5]=r*-e+this.m[5]*i,r=this.m[2],this.m[2]=r*i+this.m[6]*e,this.m[6]=r*-e+this.m[6]*i,r=this.m[3],this.m[3]=r*i+this.m[7]*e,this.m[7]=r*-e+this.m[7]*i},b.prototype=new et,b._$tP=new Object,b._$27=function(){b._$tP.clear()},b.getID=function(t){var i=b._$tP[t];return null==i&&(i=new b(t),b._$tP[t]=i),i},b.prototype._$3s=function(){return new b},F._$kS=-1,F._$pS=0,F._$hb=1,F.STATE_IDENTITY=0,F._$gb=1,F._$fo=2,F._$go=4,F.prototype.transform=function(t,i,e){var r,o,n,s,_,a,h=0,l=0;switch(this._$hi){default:return;case F._$go|F._$fo|F._$gb:for(r=this._$7,o=this._$H,n=this._$k,s=this._$f,_=this._$g,a=this._$w;--e>=0;){var $=t[h++],u=t[h++];i[l++]=r*$+o*u+n,i[l++]=s*$+_*u+a}return;case F._$go|F._$fo:for(r=this._$7,o=this._$H,s=this._$f,_=this._$g;--e>=0;){var $=t[h++],u=t[h++];i[l++]=r*$+o*u,i[l++]=s*$+_*u}return;case F._$go|F._$gb:for(o=this._$H,n=this._$k,s=this._$f,a=this._$w;--e>=0;){var $=t[h++];i[l++]=o*t[h++]+n,i[l++]=s*$+a}return;case F._$go:for(o=this._$H,s=this._$f;--e>=0;){var $=t[h++];i[l++]=o*t[h++],i[l++]=s*$}return;case F._$fo|F._$gb:for(r=this._$7,n=this._$k,_=this._$g,a=this._$w;--e>=0;)i[l++]=r*t[h++]+n,i[l++]=_*t[h++]+a;return;case F._$fo:for(r=this._$7,_=this._$g;--e>=0;)i[l++]=r*t[h++],i[l++]=_*t[h++];return;case F._$gb:for(n=this._$k,a=this._$w;--e>=0;)i[l++]=t[h++]+n,i[l++]=t[h++]+a;return;case F.STATE_IDENTITY:return void(t==i&&h==l||w._$jT(t,h,i,l,2*e))}},F.prototype.update=function(){0==this._$H&&0==this._$f?1==this._$7&&1==this._$g?0==this._$k&&0==this._$w?(this._$hi=F.STATE_IDENTITY,this._$Z=F._$pS):(this._$hi=F._$gb,this._$Z=F._$hb):0==this._$k&&0==this._$w?(this._$hi=F._$fo,this._$Z=F._$kS):(this._$hi=F._$fo|F._$gb,this._$Z=F._$kS):0==this._$7&&0==this._$g?0==this._$k&&0==this._$w?(this._$hi=F._$go,this._$Z=F._$kS):(this._$hi=F._$go|F._$gb,this._$Z=F._$kS):0==this._$k&&0==this._$w?(this._$hi=F._$go|F._$fo,this._$Z=F._$kS):(this._$hi=F._$go|F._$fo|F._$gb,this._$Z=F._$kS)},F.prototype._$RT=function(t){this._$IT(t);var i=t[0],e=t[2],r=t[1],o=t[3],n=Math.sqrt(i*i+r*r),s=i*o-e*r;0==n?at._$so&&console.log("affine._$RT() / rt==0"):(t[0]=n,t[1]=s/n,t[2]=(r*o+i*e)/s,t[3]=Math.atan2(r,i))},F.prototype._$ho=function(t,i,e,r){var o=new Float32Array(6),n=new Float32Array(6);t._$RT(o),i._$RT(n);var s=new Float32Array(6);s[0]=o[0]+(n[0]-o[0])*e,s[1]=o[1]+(n[1]-o[1])*e,s[2]=o[2]+(n[2]-o[2])*e,s[3]=o[3]+(n[3]-o[3])*e,s[4]=o[4]+(n[4]-o[4])*e,s[5]=o[5]+(n[5]-o[5])*e,r._$CT(s)},F.prototype._$CT=function(t){var i=Math.cos(t[3]),e=Math.sin(t[3]);this._$7=t[0]*i,this._$f=t[0]*e,this._$H=t[1]*(t[2]*i-e),this._$g=t[1]*(t[2]*e+i),this._$k=t[4],this._$w=t[5],this.update()},F.prototype._$IT=function(t){t[0]=this._$7,t[1]=this._$f,t[2]=this._$H,t[3]=this._$g,t[4]=this._$k,t[5]=this._$w},C.prototype=new s,C._$cs="VISIBLE:",C._$ar="LAYOUT:",C._$Co=0,C._$D2=[],C._$1T=1,C.loadMotion=function(t){var i=new C,e=[0],r=t.length;i._$yT=0;for(var o=0;o<r;++o){var n=255&t[o];if("\\n"!=n&&"\\r"!=n)if("#"!=n)if("$"!=n){if("a"<=n&&n<="z"||"A"<=n&&n<="Z"||"_"==n){for(var s=o,_=-1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if("="==n){_=o;break}if(_>=0){var a=new B;O.startsWith(t,s,C._$cs)?(a._$RP=B._$hs,a._$4P=new String(t,s,_-s)):O.startsWith(t,s,C._$ar)?(a._$4P=new String(t,s+7,_-s-7),O.startsWith(t,s+7,"ANCHOR_X")?a._$RP=B._$xs:O.startsWith(t,s+7,"ANCHOR_Y")?a._$RP=B._$us:O.startsWith(t,s+7,"SCALE_X")?a._$RP=B._$qs:O.startsWith(t,s+7,"SCALE_Y")?a._$RP=B._$Ys:O.startsWith(t,s+7,"X")?a._$RP=B._$ws:O.startsWith(t,s+7,"Y")&&(a._$RP=B._$Ns)):(a._$RP=B._$Fr,a._$4P=new String(t,s,_-s)),i.motions.push(a);var h=0;for(C._$D2.clear(),o=_+1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var l=O._$LS(t,r,o,e);if(e[0]>0){C._$D2.push(l),h++;var $=e[0];if($<o){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\\n");break}o=$}}a._$I0=C._$D2._$BL(),h>i._$yT&&(i._$yT=h)}}}else{for(var s=o,_=-1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if("="==n){_=o;break}var u=!1;if(_>=0)for(_==s+4&&"f"==t[s+1]&&"p"==t[s+2]&&"s"==t[s+3]&&(u=!0),o=_+1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var l=O._$LS(t,r,o,e);e[0]>0&&u&&5<l&&l<121&&(i._$D0=l),o=e[0]}for(;o<r&&("\\n"!=t[o]&&"\\r"!=t[o]);++o);}else for(;o<r&&("\\n"!=t[o]&&"\\r"!=t[o]);++o);}return i._$AS=1e3*i._$yT/i._$D0|0,i},C.prototype.getDurationMSec=function(){return this._$AS},C.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log("\\n")}},C.prototype.updateParamExe=function(t,i,e,r){for(var o=i-r._$z2,n=o*this._$D0/1e3,s=0|n,_=n-s,a=0;a<this.motions.length;a++){var h=this.motions[a],l=h._$I0.length,$=h._$4P;if(h._$RP==B._$hs){var u=h._$I0[s>=l?l-1:s];t.setParamFloat($,u)}else if(B._$ws<=h._$RP&&h._$RP<=B._$Ys);else{var p=t.getParamFloat($),f=h._$I0[s>=l?l-1:s],c=h._$I0[s+1>=l?l-1:s+1],d=f+(c-f)*_,g=p+(d-p)*e;t.setParamFloat($,g)}}s>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0)},C.prototype._$r0=function(){return this._$E},C.prototype._$aL=function(t){this._$E=t},C.prototype.isLoopFadeIn=function(){return this.loopFadeIn},C.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t},N.prototype.clear=function(){this.size=0},N.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);w._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},N.prototype._$BL=function(){var t=new Float32Array(this.size);return w._$jT(this._$P,0,t,0,this.size),t},B._$Fr=0,B._$hs=1,B._$ws=100,B._$Ns=101,B._$xs=102,B._$us=103,B._$qs=104,B._$Ys=105,U._$Ms=1,U._$Qs=2,U._$i2=0,U._$No=2,U._$do=U._$Ms,U._$Ls=!0,U._$1r=5,U._$Qb=65,U._$J=1e-4,U._$FT=.001,U._$Ss=3,G._$o7=6,G._$S7=7,G._$s7=8,G._$77=9,G.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,G.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,G._$T7=G.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,G._$Is=-2004318072,G._$h0=0,G._$4L=23,G._$7P=33,G._$uT=function(t){console.log("_$bo :: _$6 _$mo _$E0 : %d\\n",t)},G._$9o=function(t){if(t<40)return G._$uT(t),null;if(t<50)return G._$uT(t),null;if(t<60)return G._$uT(t),null;if(t<100)switch(t){case 65:return new Z;case 66:return new D;case 67:return new x;case 68:return new z;case 69:return new P;case 70:return new $t;default:return G._$uT(t),null}else if(t<150)switch(t){case 131:return new st;case 133:return new tt;case 136:return new p;case 137:return new ot;case 142:return new j}return G._$uT(t),null},Y._$HP=0,Y._$_0=!0;Y._$V2=-1,Y._$W0=-1,Y._$jr=!1,Y._$ZS=!0,Y._$tr=-1e6,Y._$lr=1e6,Y._$is=32,Y._$e=!1,Y.prototype.getDrawDataIndex=function(t){for(var i=this._$aS.length-1;i>=0;--i)if(null!=this._$aS[i]&&this._$aS[i].getDrawDataID()==t)return i;return-1},Y.prototype.getDrawData=function(t){if(t instanceof b){if(null==this._$Bo){this._$Bo=new Object;for(var i=this._$aS.length,e=0;e<i;e++){var r=this._$aS[e],o=r.getDrawDataID();null!=o&&(this._$Bo[o]=r)}}return this._$Bo[id]}return t<this._$aS.length?this._$aS[t]:null},Y.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),null!=this._$Bo&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},Y.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var t=this._$Ri.getModelImpl(),i=t._$Xr(),r=i.length,o=new Array,n=new Array,s=0;s<r;++s){var _=i[s];this._$F2.push(_),this._$Hr.push(_.init(this));for(var a=_.getBaseData(),h=a.length,l=0;l<h;++l)o.push(a[l]);for(var l=0;l<h;++l){var $=a[l].init(this);$._$l2(s),n.push($)}for(var u=_.getDrawData(),p=u.length,l=0;l<p;++l){var f=u[l],c=f.init(this);c._$IP=s,this._$aS.push(f),this._$8b.push(c)}}for(var d=o.length,g=yt._$2o();;){for(var y=!1,s=0;s<d;++s){var m=o[s];if(null!=m){var T=m.getTargetBaseDataID();(null==T||T==g||this.getBaseDataIndex(T)>=0)&&(this._$3S.push(m),this._$db.push(n[s]),o[s]=null,y=!0)}}if(!y)break}var P=t._$E2();if(null!=P){var S=P._$1s();if(null!=S)for(var v=S.length,s=0;s<v;++s){var L=S[s];null!=L&&this._$02(L.getParamID(),L.getDefaultValue(),L.getMinValue(),L.getMaxValue())}}this.clipManager=new e(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},Y.prototype.update=function(){Y._$e&&_.start("_$zL");for(var t=this._$_2.length,i=0;i<t;i++)this._$_2[i]!=this._$vr[i]&&(this._$Js[i]=Y._$ZS,this._$vr[i]=this._$_2[i]);var e=this._$3S.length,r=this._$aS.length,o=W._$or(),n=W._$Pr(),s=n-o+1;(null==this._$Ws||this._$Ws.length<s)&&(this._$Ws=new Int16Array(s),this._$Vs=new Int16Array(s));for(var i=0;i<s;i++)this._$Ws[i]=Y._$V2,this._$Vs[i]=Y._$V2;(null==this._$Er||this._$Er.length<r)&&(this._$Er=new Int16Array(r));for(var i=0;i<r;i++)this._$Er[i]=Y._$W0;Y._$e&&_.dump("_$zL"),Y._$e&&_.start("_$UL");for(var a=null,h=0;h<e;++h){var l=this._$3S[h],$=this._$db[h];try{l._$Nr(this,$),l._$2b(this,$)}catch(t){null==a&&(a=t)}}null!=a&&Y._$_0&&_._$Rb(a),Y._$e&&_.dump("_$UL"),Y._$e&&_.start("_$DL");for(var u=null,p=0;p<r;++p){var f=this._$aS[p],c=this._$8b[p];try{if(f._$Nr(this,c),c._$u2())continue;f._$2b(this,c);var d,g=Math.floor(f._$zS(this,c)-o);try{d=this._$Vs[g]}catch(t){console.log("_$li :: %s / %s \\t\\t\\t\\t@@_$fS\\n",t.toString(),f.getDrawDataID().toString()),g=Math.floor(f._$zS(this,c)-o);continue}d==Y._$V2?this._$Ws[g]=p:this._$Er[d]=p,this._$Vs[g]=p}catch(t){null==u&&(u=t,at._$sT(at._$H7))}}null!=u&&Y._$_0&&_._$Rb(u),Y._$e&&_.dump("_$DL"),Y._$e&&_.start("_$eL");for(var i=this._$Js.length-1;i>=0;i--)this._$Js[i]=Y._$jr;return this._$QT=!1,Y._$e&&_.dump("_$eL"),!1},Y.prototype.preDraw=function(t){null!=this.clipManager&&(t._$ZT(),this.clipManager.setupClip(this,t))},Y.prototype.draw=function(t){if(null==this._$Ws)return void _._$li("call _$Ri.update() before _$Ri.draw() ");var i=this._$Ws.length;t._$ZT();for(var e=0;e<i;++e){var r=this._$Ws[e];if(r!=Y._$V2)for(;;){var o=this._$aS[r],n=this._$8b[r];if(n._$yo()){var s=n._$IP,a=this._$Hr[s];n._$VS=a.getPartsOpacity(),o.draw(t,this,n)}var h=this._$Er[r];if(h<=r||h==Y._$W0)break;r=h}}},Y.prototype.getParamIndex=function(t){for(var i=this._$pb.length-1;i>=0;--i)if(this._$pb[i]==t)return i;return this._$02(t,0,Y._$tr,Y._$lr)},Y.prototype._$BS=function(t){return this.getBaseDataIndex(t)},Y.prototype.getBaseDataIndex=function(t){for(var i=this._$3S.length-1;i>=0;--i)if(null!=this._$3S[i]&&this._$3S[i].getBaseDataID()==t)return i;return-1},Y.prototype._$UT=function(t,i){var e=new Float32Array(i);return w._$jT(t,0,e,0,t.length),e},Y.prototype._$02=function(t,i,e,r){if(this._$qo>=this._$pb.length){var o=this._$pb.length,n=new Array(2*o);w._$jT(this._$pb,0,n,0,o),this._$pb=n,this._$_2=this._$UT(this._$_2,2*o),this._$vr=this._$UT(this._$vr,2*o),this._$Rr=this._$UT(this._$Rr,2*o),this._$Or=this._$UT(this._$Or,2*o);var s=new Array;w._$jT(this._$Js,0,s,0,o),this._$Js=s}return this._$pb[this._$qo]=t,this._$_2[this._$qo]=i,this._$vr[this._$qo]=i,this._$Rr[this._$qo]=e,this._$Or[this._$qo]=r,this._$Js[this._$qo]=Y._$ZS,this._$qo++},Y.prototype._$Zo=function(t,i){this._$3S[t]=i},Y.prototype.setParamFloat=function(t,i){i<this._$Rr[t]&&(i=this._$Rr[t]),i>this._$Or[t]&&(i=this._$Or[t]),this._$_2[t]=i},Y.prototype.loadParam=function(){var t=this._$_2.length;t>this._$fs.length&&(t=this._$fs.length),w._$jT(this._$fs,0,this._$_2,0,t)},Y.prototype.saveParam=function(){var t=this._$_2.length;t>this._$fs.length&&(this._$fs=new Float32Array(t)),w._$jT(this._$_2,0,this._$fs,0,t)},Y.prototype._$v2=function(){return this._$co},Y.prototype._$WS=function(){return this._$QT},Y.prototype._$Xb=function(t){return this._$Js[t]==Y._$ZS},Y.prototype._$vs=function(){return this._$Es},Y.prototype._$Tr=function(){return this._$ZP},Y.prototype.getBaseData=function(t){return this._$3S[t]},Y.prototype.getParamFloat=function(t){return this._$_2[t]},Y.prototype.getParamMax=function(t){return this._$Or[t]},Y.prototype.getParamMin=function(t){return this._$Rr[t]},Y.prototype.setPartsOpacity=function(t,i){this._$Hr[t].setPartsOpacity(i)},Y.prototype.getPartsOpacity=function(t){return this._$Hr[t].getPartsOpacity()},Y.prototype.getPartsDataIndex=function(t){for(var i=this._$F2.length-1;i>=0;--i)if(null!=this._$F2[i]&&this._$F2[i]._$p2()==t)return i;return-1},Y.prototype._$q2=function(t){return this._$db[t]},Y.prototype._$C2=function(t){return this._$8b[t]},Y.prototype._$Bb=function(t){return this._$Hr[t]},Y.prototype._$5s=function(t,i){for(var e=this._$Ws.length,r=t,o=0;o<e;++o){var n=this._$Ws[o];if(n!=Y._$V2)for(;;){var s=this._$8b[n];s._$yo()&&(s._$GT()._$B2(this,s,r),r+=i);var _=this._$Er[n];if(_<=n||_==Y._$W0)break;n=_}}},Y.prototype.setDrawParam=function(t){this.dp_webgl=t},Y.prototype.getDrawParam=function(){return this.dp_webgl},k._$0T=function(t){return k._$0T(new _$5(t))},k._$0T=function(t){if(!t.exists())throw new _$ls(t._$3b());for(var i,e=t.length(),r=new Int8Array(e),o=new _$Xs(new _$kb(t),8192),n=0;(i=o.read(r,n,e-n))>0;)n+=i;return r},k._$C=function(t){var i=null,e=null;try{i=t instanceof Array?t:new _$Xs(t,8192),e=new _$js;for(var r,o=new Int8Array(1e3);(r=i.read(o))>0;)e.write(o,0,r);return e._$TS()}finally{null!=t&&t.close(),null!=e&&(e.flush(),e.close())}},V.prototype._$T2=function(){return w.getUserTimeMSec()+Math._$10()*(2*this._$Br-1)},V.prototype._$uo=function(t){this._$Br=t},V.prototype._$QS=function(t,i,e){this._$Dr=t,this._$Cb=i,this._$mr=e},V.prototype._$7T=function(t){var i,e=w.getUserTimeMSec(),r=0;switch(this._$_L){case STATE_CLOSING:r=(e-this._$bb)/this._$Dr,r>=1&&(r=1,this._$_L=wt.STATE_CLOSED,this._$bb=e),i=1-r;break;case STATE_CLOSED:r=(e-this._$bb)/this._$Cb,r>=1&&(this._$_L=wt.STATE_OPENING,this._$bb=e),i=0;break;case STATE_OPENING:r=(e-this._$bb)/this._$mr,r>=1&&(r=1,this._$_L=wt.STATE_INTERVAL,this._$12=this._$T2()),i=r;break;case STATE_INTERVAL:this._$12<e&&(this._$_L=wt.STATE_CLOSING,this._$bb=e),i=1;break;case STATE_FIRST:default:this._$_L=wt.STATE_INTERVAL,this._$12=this._$T2(),i=1}this._$jo||(i=-i),t.setParamFloat(this._$iL,i),t.setParamFloat(this._$0L,i)};var wt=function(){};wt.STATE_FIRST="STATE_FIRST",wt.STATE_INTERVAL="STATE_INTERVAL",wt.STATE_CLOSING="STATE_CLOSING",wt.STATE_CLOSED="STATE_CLOSED",wt.STATE_OPENING="STATE_OPENING",X.prototype=new E,X._$As=32,X._$Gr=!1,X._$NT=null,X._$vS=null,X._$no=null,X._$9r=function(t){return new Float32Array(t)},X._$vb=function(t){return new Int16Array(t)},X._$cr=function(t,i){return null==t||t._$yL()<i.length?(t=X._$9r(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},X._$mb=function(t,i){return null==t||t._$yL()<i.length?(t=X._$vb(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},X._$Hs=function(){return X._$Gr},X._$as=function(t){X._$Gr=t},X.prototype.setGL=function(t){this.gl=t},X.prototype.setTransform=function(t){this.transform=t},X.prototype._$ZT=function(){},X.prototype._$Uo=function(t,i,e,r,o,n,s,_){if(!(n<.01)){var a=this._$U2[t],h=n>.9?at.EXPAND_W:0;this.gl.drawElements(a,e,r,o,n,h,this.transform,_)}},X.prototype._$Rs=function(){throw new Error("_$Rs")},X.prototype._$Ds=function(t){throw new Error("_$Ds")},X.prototype._$K2=function(){for(var t=0;t<this._$sb.length;t++){0!=this._$sb[t]&&(this.gl._$Sr(1,this._$sb,t),this._$sb[t]=0)}},X.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$sb[t]=i},X.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$U2[t]=i},X.prototype._$nS=function(t){var i=Math.max(2*this._$sb.length,t+1+10),e=new Int32Array(i);w._$jT(this._$sb,0,e,0,this._$sb.length),this._$sb=e;var r=new Array;w._$jT(this._$U2,0,r,0,this._$U2.length),this._$U2=r},z.prototype=new I,z._$Xo=new Float32Array(2),z._$io=new Float32Array(2),z._$0o=new Float32Array(2),z._$Lo=new Float32Array(2),z._$To=new Float32Array(2),z._$Po=new Float32Array(2),z._$gT=new Array,z.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP(),this._$Y0=new Array},z.prototype.getType=function(){return I._$c2},z.prototype._$F0=function(t){I.prototype._$F0.call(this,t),this._$GS=t._$nP(),this._$Y0=t._$nP(),I.prototype.readV2_opacity.call(this,t)},z.prototype.init=function(t){var i=new H(this);return i._$Yr=new P,this._$32()&&(i._$Wr=new P),i},z.prototype._$Nr=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(this._$GS._$Ur(t)){var r=z._$gT;r[0]=!1;var o=this._$GS._$Q2(t,r);i._$Ib(r[0]),this.interpolateOpacity(t,this._$GS,i,r);var n=t._$vs(),s=t._$Tr();if(this._$GS._$zr(n,s,o),o<=0){var _=this._$Y0[n[0]];e._$Yr.init(_)}else if(1==o){var _=this._$Y0[n[0]],a=this._$Y0[n[1]],h=s[0];e._$Yr._$fL=_._$fL+(a._$fL-_._$fL)*h,e._$Yr._$gL=_._$gL+(a._$gL-_._$gL)*h,e._$Yr._$B0=_._$B0+(a._$B0-_._$B0)*h,e._$Yr._$z0=_._$z0+(a._$z0-_._$z0)*h,e._$Yr._$qT=_._$qT+(a._$qT-_._$qT)*h}else if(2==o){var _=this._$Y0[n[0]],a=this._$Y0[n[1]],l=this._$Y0[n[2]],$=this._$Y0[n[3]],h=s[0],u=s[1],p=_._$fL+(a._$fL-_._$fL)*h,f=l._$fL+($._$fL-l._$fL)*h;e._$Yr._$fL=p+(f-p)*u,p=_._$gL+(a._$gL-_._$gL)*h,f=l._$gL+($._$gL-l._$gL)*h,e._$Yr._$gL=p+(f-p)*u,p=_._$B0+(a._$B0-_._$B0)*h,f=l._$B0+($._$B0-l._$B0)*h,e._$Yr._$B0=p+(f-p)*u,p=_._$z0+(a._$z0-_._$z0)*h,f=l._$z0+($._$z0-l._$z0)*h,e._$Yr._$z0=p+(f-p)*u,p=_._$qT+(a._$qT-_._$qT)*h,f=l._$qT+($._$qT-l._$qT)*h,e._$Yr._$qT=p+(f-p)*u}else if(3==o){var c=this._$Y0[n[0]],d=this._$Y0[n[1]],g=this._$Y0[n[2]],y=this._$Y0[n[3]],m=this._$Y0[n[4]],T=this._$Y0[n[5]],P=this._$Y0[n[6]],S=this._$Y0[n[7]],h=s[0],u=s[1],v=s[2],p=c._$fL+(d._$fL-c._$fL)*h,f=g._$fL+(y._$fL-g._$fL)*h,L=m._$fL+(T._$fL-m._$fL)*h,M=P._$fL+(S._$fL-P._$fL)*h;e._$Yr._$fL=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$gL+(d._$gL-c._$gL)*h,f=g._$gL+(y._$gL-g._$gL)*h,L=m._$gL+(T._$gL-m._$gL)*h,M=P._$gL+(S._$gL-P._$gL)*h,e._$Yr._$gL=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$B0+(d._$B0-c._$B0)*h,f=g._$B0+(y._$B0-g._$B0)*h,L=m._$B0+(T._$B0-m._$B0)*h,M=P._$B0+(S._$B0-P._$B0)*h,e._$Yr._$B0=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$z0+(d._$z0-c._$z0)*h,f=g._$z0+(y._$z0-g._$z0)*h,L=m._$z0+(T._$z0-m._$z0)*h,M=P._$z0+(S._$z0-P._$z0)*h,e._$Yr._$z0=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$qT+(d._$qT-c._$qT)*h,f=g._$qT+(y._$qT-g._$qT)*h,L=m._$qT+(T._$qT-m._$qT)*h,M=P._$qT+(S._$qT-P._$qT)*h,e._$Yr._$qT=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u)}else if(4==o){var E=this._$Y0[n[0]],A=this._$Y0[n[1]],I=this._$Y0[n[2]],w=this._$Y0[n[3]],x=this._$Y0[n[4]],O=this._$Y0[n[5]],D=this._$Y0[n[6]],R=this._$Y0[n[7]],b=this._$Y0[n[8]],F=this._$Y0[n[9]],C=this._$Y0[n[10]],N=this._$Y0[n[11]],B=this._$Y0[n[12]],U=this._$Y0[n[13]],G=this._$Y0[n[14]],Y=this._$Y0[n[15]],h=s[0],u=s[1],v=s[2],k=s[3],p=E._$fL+(A._$fL-E._$fL)*h,f=I._$fL+(w._$fL-I._$fL)*h,L=x._$fL+(O._$fL-x._$fL)*h,M=D._$fL+(R._$fL-D._$fL)*h,V=b._$fL+(F._$fL-b._$fL)*h,X=C._$fL+(N._$fL-C._$fL)*h,H=B._$fL+(U._$fL-B._$fL)*h,W=G._$fL+(Y._$fL-G._$fL)*h;e._$Yr._$fL=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$gL+(A._$gL-E._$gL)*h,f=I._$gL+(w._$gL-I._$gL)*h,L=x._$gL+(O._$gL-x._$gL)*h,M=D._$gL+(R._$gL-D._$gL)*h,V=b._$gL+(F._$gL-b._$gL)*h,X=C._$gL+(N._$gL-C._$gL)*h,H=B._$gL+(U._$gL-B._$gL)*h,W=G._$gL+(Y._$gL-G._$gL)*h,e._$Yr._$gL=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$B0+(A._$B0-E._$B0)*h,f=I._$B0+(w._$B0-I._$B0)*h,L=x._$B0+(O._$B0-x._$B0)*h,M=D._$B0+(R._$B0-D._$B0)*h,V=b._$B0+(F._$B0-b._$B0)*h,X=C._$B0+(N._$B0-C._$B0)*h,H=B._$B0+(U._$B0-B._$B0)*h,W=G._$B0+(Y._$B0-G._$B0)*h,e._$Yr._$B0=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$z0+(A._$z0-E._$z0)*h,f=I._$z0+(w._$z0-I._$z0)*h,L=x._$z0+(O._$z0-x._$z0)*h,M=D._$z0+(R._$z0-D._$z0)*h,V=b._$z0+(F._$z0-b._$z0)*h,X=C._$z0+(N._$z0-C._$z0)*h,H=B._$z0+(U._$z0-B._$z0)*h,W=G._$z0+(Y._$z0-G._$z0)*h,e._$Yr._$z0=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$qT+(A._$qT-E._$qT)*h,f=I._$qT+(w._$qT-I._$qT)*h,L=x._$qT+(O._$qT-x._$qT)*h,M=D._$qT+(R._$qT-D._$qT)*h,V=b._$qT+(F._$qT-b._$qT)*h,X=C._$qT+(N._$qT-C._$qT)*h,H=B._$qT+(U._$qT-B._$qT)*h,W=G._$qT+(Y._$qT-G._$qT)*h,e._$Yr._$qT=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u))}else{for(var j=0|Math.pow(2,o),q=new Float32Array(j),J=0;J<j;J++){for(var Q=J,Z=1,K=0;K<o;K++)Z*=Q%2==0?1-s[K]:s[K],Q/=2;q[J]=Z}for(var tt=new Array,it=0;it<j;it++)tt[it]=this._$Y0[n[it]];for(var et=0,rt=0,ot=0,nt=0,st=0,it=0;it<j;it++)et+=q[it]*tt[it]._$fL,rt+=q[it]*tt[it]._$gL,ot+=q[it]*tt[it]._$B0,nt+=q[it]*tt[it]._$z0,st+=q[it]*tt[it]._$qT;e._$Yr._$fL=et,e._$Yr._$gL=rt,e._$Yr._$B0=ot,e._$Yr._$z0=nt,e._$Yr._$qT=st}var _=this._$Y0[n[0]];e._$Yr.reflectX=_.reflectX,e._$Yr.reflectY=_.reflectY}},z.prototype._$2b=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==I._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)at._$so&&_._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var o=t.getBaseData(e._$8r);if(null!=o){var n=t._$q2(e._$8r),s=z._$Xo;s[0]=e._$Yr._$fL,s[1]=e._$Yr._$gL;var a=z._$io;a[0]=0,a[1]=-.1;n._$GT().getType()==I._$c2?a[1]=-10:a[1]=-.1;var h=z._$0o;this._$Jr(t,o,n,s,a,h);var l=Lt._$92(a,h);o._$nb(t,n,s,s,1,0,2),e._$Wr._$fL=s[0],e._$Wr._$gL=s[1],e._$Wr._$B0=e._$Yr._$B0,e._$Wr._$z0=e._$Yr._$z0,e._$Wr._$qT=e._$Yr._$qT-l*Lt._$NS;var $=n.getTotalScale();e.setTotalScale_notForClient($*e._$Wr._$B0);var u=n.getTotalOpacity();e.setTotalOpacity(u*e.getInterpolatedOpacity()),e._$Wr.reflectX=e._$Yr.reflectX,e._$Wr.reflectY=e._$Yr.reflectY,e._$hS(n._$yo())}else e._$hS(!1)}}else e.setTotalScale_notForClient(e._$Yr._$B0),e.setTotalOpacity(e.getInterpolatedOpacity())},z.prototype._$nb=function(t,i,e,r,o,n,s){this!=i._$GT()&&console.log("### assert!! ### ");for(var _,a,h=i,l=null!=h._$Wr?h._$Wr:h._$Yr,$=Math.sin(Lt._$bS*l._$qT),u=Math.cos(Lt._$bS*l._$qT),p=h.getTotalScale(),f=l.reflectX?-1:1,c=l.reflectY?-1:1,d=u*p*f,g=-$*p*c,y=$*p*f,m=u*p*c,T=l._$fL,P=l._$gL,S=o*s,v=n;v<S;v+=s)_=e[v],a=e[v+1],r[v]=d*_+g*a+T,r[v+1]=y*_+m*a+P},z.prototype._$Jr=function(t,i,e,r,o,n){i!=e._$GT()&&console.log("### assert!! ### ");var s=z._$Lo;z._$Lo[0]=r[0],z._$Lo[1]=r[1],i._$nb(t,e,s,s,1,0,2);for(var _=z._$To,a=z._$Po,h=1,l=0;l<10;l++){if(a[0]=r[0]+h*o[0],a[1]=r[1]+h*o[1],i._$nb(t,e,a,_,1,0,2),_[0]-=s[0],_[1]-=s[1],0!=_[0]||0!=_[1])return n[0]=_[0],void(n[1]=_[1]);if(a[0]=r[0]-h*o[0],a[1]=r[1]-h*o[1],i._$nb(t,e,a,_,1,0,2),_[0]-=s[0],_[1]-=s[1],0!=_[0]||0!=_[1])return _[0]=-_[0],_[0]=-_[0],n[0]=_[0],void(n[1]=_[1]);h*=.1}at._$so&&console.log("_$L0 to transform _$SP\\n")},H.prototype=new _t,W.prototype=new M,W._$ur=-2,W._$ES=500,W._$wb=2,W._$8S=3,W._$os=4,W._$52=W._$ES,W._$R2=W._$ES,W._$Sb=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<W._$52?W._$52=e:e>W._$R2&&(W._$R2=e)}},W._$or=function(){return W._$52},W._$Pr=function(){return W._$R2},W.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=G._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,W._$Sb(this._$Lb)},W.prototype.getClipIDList=function(){return this.clipIDList},W.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=v._$Z2(t,this._$GS,i._$IS,this._$Lb),at._$Zs);else if(i._$IS[0])return;i._$7s=v._$br(t,this._$GS,i._$IS,this._$mS)},W.prototype._$2b=function(t){},W.prototype.getDrawDataID=function(){return this._$gP},W.prototype._$j2=function(t){this._$gP=t},W.prototype.getOpacity=function(t,i){return i._$7s},W.prototype._$zS=function(t,i){return i._$Us},W.prototype.getTargetBaseDataID=function(){return this._$dr},W.prototype._$gs=function(t){this._$dr=t},W.prototype._$32=function(){return null!=this._$dr&&this._$dr!=yt._$2o()},W.prototype.getType=function(){},j._$42=0,j.prototype._$1b=function(){return this._$3S},j.prototype.getDrawDataList=function(){return this._$aS},j.prototype._$F0=function(t){this._$NL=t._$nP(),this._$aS=t._$nP(),this._$3S=t._$nP()},j.prototype._$kr=function(t){t._$Zo(this._$3S),t._$xo(this._$aS),this._$3S=null,this._$aS=null},q.prototype=new i,q.loadModel=function(t){var e=new q;return i._$62(e,t),e},q.loadModel=function(t){var e=new q;return i._$62(e,t),e},q._$to=function(){return new q},q._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==i.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=q.loadModel(i._$3b()),o=0;o<e.length;o++){var n=new _$5(e[o]);if(0==n.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+n._$PL());r.setTexture(o,_$nL._$_o(t,n._$3b()))}return r},q.prototype.setGL=function(t){this._$zo.setGL(t)},q.prototype.setTransform=function(t){this._$zo.setTransform(t)},q.prototype.draw=function(){this._$5S.draw(this._$zo)},q.prototype._$K2=function(){this._$zo._$K2()},q.prototype.setTexture=function(t,i){null==this._$zo&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},q.prototype.setTexture=function(t,i){null==this._$zo&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},q.prototype._$Rs=function(){return this._$zo._$Rs()},q.prototype._$Ds=function(t){this._$zo._$Ds(t)},q.prototype.getDrawParam=function(){return this._$zo},J.prototype=new s,J._$cs="VISIBLE:",J._$ar="LAYOUT:",J.MTN_PREFIX_FADEIN="FADEIN:",J.MTN_PREFIX_FADEOUT="FADEOUT:",J._$Co=0,J._$1T=1,J.loadMotion=function(t){var i=k._$C(t);return J.loadMotion(i)},J.loadMotion=function(t){t instanceof ArrayBuffer&&(t=new DataView(t));var i=new J,e=[0],r=t.byteLength;i._$yT=0;for(var o=0;o<r;++o){var n=Q(t,o),s=n.charCodeAt(0);if("\\n"!=n&&"\\r"!=n)if("#"!=n)if("$"!=n){if(97<=s&&s<=122||65<=s&&s<=90||"_"==n){for(var _=o,a=-1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if("="==n){a=o;break}if(a>=0){var h=new B;O.startsWith(t,_,J._$cs)?(h._$RP=B._$hs,h._$4P=O.createString(t,_,a-_)):O.startsWith(t,_,J._$ar)?(h._$4P=O.createString(t,_+7,a-_-7),O.startsWith(t,_+7,"ANCHOR_X")?h._$RP=B._$xs:O.startsWith(t,_+7,"ANCHOR_Y")?h._$RP=B._$us:O.startsWith(t,_+7,"SCALE_X")?h._$RP=B._$qs:O.startsWith(t,_+7,"SCALE_Y")?h._$RP=B._$Ys:O.startsWith(t,_+7,"X")?h._$RP=B._$ws:O.startsWith(t,_+7,"Y")&&(h._$RP=B._$Ns)):(h._$RP=B._$Fr,h._$4P=O.createString(t,_,a-_)),i.motions.push(h);var l=0,$=[];for(o=a+1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var u=O._$LS(t,r,o,e);if(e[0]>0){$.push(u),l++;var p=e[0];if(p<o){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\\n");break}o=p-1}}h._$I0=new Float32Array($),l>i._$yT&&(i._$yT=l)}}}else{for(var _=o,a=-1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if("="==n){a=o;break}var f=!1;if(a>=0)for(a==_+4&&"f"==Q(t,_+1)&&"p"==Q(t,_+2)&&"s"==Q(t,_+3)&&(f=!0),o=a+1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var u=O._$LS(t,r,o,e);e[0]>0&&f&&5<u&&u<121&&(i._$D0=u),o=e[0]}for(;o<r&&("\\n"!=Q(t,o)&&"\\r"!=Q(t,o));++o);}else for(;o<r&&("\\n"!=Q(t,o)&&"\\r"!=Q(t,o));++o);}return i._$rr=1e3*i._$yT/i._$D0|0,i},J.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},J.prototype.getLoopDurationMSec=function(){return this._$rr},J.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log("\\n")}},J.prototype.updateParamExe=function(t,i,e,r){for(var o=i-r._$z2,n=o*this._$D0/1e3,s=0|n,_=n-s,a=0;a<this.motions.length;a++){var h=this.motions[a],l=h._$I0.length,$=h._$4P;if(h._$RP==B._$hs){var u=h._$I0[s>=l?l-1:s];t.setParamFloat($,u)}else if(B._$ws<=h._$RP&&h._$RP<=B._$Ys);else{var p,f=t.getParamIndex($),c=t.getModelContext(),d=c.getParamMax(f),g=c.getParamMin(f),y=.4*(d-g),m=c.getParamFloat(f),T=h._$I0[s>=l?l-1:s],P=h._$I0[s+1>=l?l-1:s+1];p=T<P&&P-T>y||T>P&&T-P>y?T:T+(P-T)*_;var S=m+(p-m)*e;t.setParamFloat($,S)}}s>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0),this._$eP=e},J.prototype._$r0=function(){return this._$E},J.prototype._$aL=function(t){this._$E=t},J.prototype._$S0=function(){return this._$D0},J.prototype._$U0=function(t){this._$D0=t},J.prototype.isLoopFadeIn=function(){return this.loopFadeIn},J.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t},N.prototype.clear=function(){this.size=0},N.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);w._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},N.prototype._$BL=function(){var t=new Float32Array(this.size);return w._$jT(this._$P,0,t,0,this.size),t},B._$Fr=0,B._$hs=1,B._$ws=100,B._$Ns=101,B._$xs=102,B._$us=103,B._$qs=104,B._$Ys=105,Z.prototype=new I,Z._$gT=new Array,Z.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},Z.prototype._$F0=function(t){I.prototype._$F0.call(this,t),this._$A=t._$6L(),this._$o=t._$6L(),this._$GS=t._$nP(),this._$Eo=t._$nP(),I.prototype.readV2_opacity.call(this,t)},Z.prototype.init=function(t){var i=new K(this),e=(this._$o+1)*(this._$A+1);return null!=i._$Cr&&(i._$Cr=null),i._$Cr=new Float32Array(2*e),null!=i._$hr&&(i._$hr=null),this._$32()?i._$hr=new Float32Array(2*e):i._$hr=null,i},Z.prototype._$Nr=function(t,i){var e=i;if(this._$GS._$Ur(t)){var r=this._$VT(),o=Z._$gT;o[0]=!1,v._$Vr(t,this._$GS,o,r,this._$Eo,e._$Cr,0,2),i._$Ib(o[0]),this.interpolateOpacity(t,this._$GS,i,o)}},Z.prototype._$2b=function(t,i){var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==I._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)at._$so&&_._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var o=t.getBaseData(e._$8r),n=t._$q2(e._$8r);if(null!=o&&n._$yo()){var s=n.getTotalScale();e.setTotalScale_notForClient(s);var a=n.getTotalOpacity();e.setTotalOpacity(a*e.getInterpolatedOpacity()),o._$nb(t,n,e._$Cr,e._$hr,this._$VT(),0,2),e._$hS(!0)}else e._$hS(!1)}}else e.setTotalOpacity(e.getInterpolatedOpacity())},Z.prototype._$nb=function(t,i,e,r,o,n,s){var _=i,a=null!=_._$hr?_._$hr:_._$Cr;Z.transformPoints_sdk2(e,r,o,n,s,a,this._$o,this._$A)},Z.transformPoints_sdk2=function(i,e,r,o,n,s,_,a){for(var h,l,$,u=r*n,p=0,f=0,c=0,d=0,g=0,y=0,m=!1,T=o;T<u;T+=n){var P,S,v,L;if(v=i[T],L=i[T+1],P=v*_,S=L*a,P<0||S<0||_<=P||a<=S){var M=_+1;if(!m){m=!0,p=.25*(s[2*(0+0*M)]+s[2*(_+0*M)]+s[2*(0+a*M)]+s[2*(_+a*M)]),f=.25*(s[2*(0+0*M)+1]+s[2*(_+0*M)+1]+s[2*(0+a*M)+1]+s[2*(_+a*M)+1]);var E=s[2*(_+a*M)]-s[2*(0+0*M)],A=s[2*(_+a*M)+1]-s[2*(0+0*M)+1],I=s[2*(_+0*M)]-s[2*(0+a*M)],w=s[2*(_+0*M)+1]-s[2*(0+a*M)+1];c=.5*(E+I),d=.5*(A+w),g=.5*(E-I),y=.5*(A-w),p-=.5*(c+g),f-=.5*(d+y)}if(-2<v&&v<3&&-2<L&&L<3)if(v<=0)if(L<=0){var x=s[2*(0+0*M)],O=s[2*(0+0*M)+1],D=p-2*c,R=f-2*d,b=p-2*g,F=f-2*y,C=p-2*c-2*g,N=f-2*d-2*y,B=.5*(v- -2),U=.5*(L- -2);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L>=1){var b=s[2*(0+a*M)],F=s[2*(0+a*M)+1],C=p-2*c+1*g,N=f-2*d+1*y,x=p+3*g,O=f+3*y,D=p-2*c+3*g,R=f-2*d+3*y,B=.5*(v- -2),U=.5*(L-1);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else{var G=0|S;G==a&&(G=a-1);var B=.5*(v- -2),U=S-G,Y=G/a,k=(G+1)/a,b=s[2*(0+G*M)],F=s[2*(0+G*M)+1],x=s[2*(0+(G+1)*M)],O=s[2*(0+(G+1)*M)+1],C=p-2*c+Y*g,N=f-2*d+Y*y,D=p-2*c+k*g,R=f-2*d+k*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(1<=v)if(L<=0){var D=s[2*(_+0*M)],R=s[2*(_+0*M)+1],x=p+3*c,O=f+3*d,C=p+1*c-2*g,N=f+1*d-2*y,b=p+3*c-2*g,F=f+3*d-2*y,B=.5*(v-1),U=.5*(L- -2);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L>=1){var C=s[2*(_+a*M)],N=s[2*(_+a*M)+1],b=p+3*c+1*g,F=f+3*d+1*y,D=p+1*c+3*g,R=f+1*d+3*y,x=p+3*c+3*g,O=f+3*d+3*y,B=.5*(v-1),U=.5*(L-1);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else{var G=0|S;G==a&&(G=a-1);var B=.5*(v-1),U=S-G,Y=G/a,k=(G+1)/a,C=s[2*(_+G*M)],N=s[2*(_+G*M)+1],D=s[2*(_+(G+1)*M)],R=s[2*(_+(G+1)*M)+1],b=p+3*c+Y*g,F=f+3*d+Y*y,x=p+3*c+k*g,O=f+3*d+k*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L<=0){var V=0|P;V==_&&(V=_-1);var B=P-V,U=.5*(L- -2),X=V/_,z=(V+1)/_,D=s[2*(V+0*M)],R=s[2*(V+0*M)+1],x=s[2*(V+1+0*M)],O=s[2*(V+1+0*M)+1],C=p+X*c-2*g,N=f+X*d-2*y,b=p+z*c-2*g,F=f+z*d-2*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L>=1){var V=0|P;V==_&&(V=_-1);var B=P-V,U=.5*(L-1),X=V/_,z=(V+1)/_,C=s[2*(V+a*M)],N=s[2*(V+a*M)+1],b=s[2*(V+1+a*M)],F=s[2*(V+1+a*M)+1],D=p+X*c+3*g,R=f+X*d+3*y,x=p+z*c+3*g,O=f+z*d+3*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else t.err.printf("_$li calc : %.4f , %.4f\\t\\t\\t\\t\\t@@BDBoxGrid\\n",v,L);else e[T]=p+v*c+L*g,e[T+1]=f+v*d+L*y}else l=P-(0|P),$=S-(0|S),h=2*((0|P)+(0|S)*(_+1)),l+$<1?(e[T]=s[h]*(1-l-$)+s[h+2]*l+s[h+2*(_+1)]*$,e[T+1]=s[h+1]*(1-l-$)+s[h+3]*l+s[h+2*(_+1)+1]*$):(e[T]=s[h+2*(_+1)+2]*(l-1+$)+s[h+2*(_+1)]*(1-l)+s[h+2]*(1-$),e[T+1]=s[h+2*(_+1)+3]*(l-1+$)+s[h+2*(_+1)+1]*(1-l)+s[h+3]*(1-$))}},Z.prototype.transformPoints_sdk1=function(t,i,e,r,o,n,s){for(var _,a,h,l,$,u,p,f=i,c=this._$o,d=this._$A,g=o*s,y=null!=f._$hr?f._$hr:f._$Cr,m=n;m<g;m+=s)at._$ts?(_=e[m],a=e[m+1],_<0?_=0:_>1&&(_=1),a<0?a=0:a>1&&(a=1),_*=c,a*=d,h=0|_,l=0|a,h>c-1&&(h=c-1),l>d-1&&(l=d-1),u=_-h,p=a-l,$=2*(h+l*(c+1))):(_=e[m]*c,a=e[m+1]*d,u=_-(0|_),p=a-(0|a),$=2*((0|_)+(0|a)*(c+1))),u+p<1?(r[m]=y[$]*(1-u-p)+y[$+2]*u+y[$+2*(c+1)]*p,r[m+1]=y[$+1]*(1-u-p)+y[$+3]*u+y[$+2*(c+1)+1]*p):(r[m]=y[$+2*(c+1)+2]*(u-1+p)+y[$+2*(c+1)]*(1-u)+y[$+2]*(1-p),r[m+1]=y[$+2*(c+1)+3]*(u-1+p)+y[$+2*(c+1)+1]*(1-u)+y[$+3]*(1-p))},Z.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},Z.prototype.getType=function(){return I._$_b},K.prototype=new _t,tt._$42=0,tt.prototype._$zP=function(){this._$3S=new Array,this._$aS=new Array},tt.prototype._$F0=function(t){this._$g0=t._$8L(),this.visible=t._$8L(),this._$NL=t._$nP(),this._$3S=t._$nP(),this._$aS=t._$nP()},tt.prototype.init=function(t){var i=new it(this);return i.setPartsOpacity(this.isVisible()?1:0),i},tt.prototype._$6o=function(t){if(null==this._$3S)throw new Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(t)},tt.prototype._$3o=function(t){if(null==this._$aS)throw new Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(t)},tt.prototype._$Zo=function(t){this._$3S=t},tt.prototype._$xo=function(t){this._$aS=t},tt.prototype.isVisible=function(){return this.visible},tt.prototype._$uL=function(){return this._$g0},tt.prototype._$KP=function(t){this.visible=t},tt.prototype._$ET=function(t){this._$g0=t},tt.prototype.getBaseData=function(){return this._$3S},tt.prototype.getDrawData=function(){return this._$aS},tt.prototype._$p2=function(){return this._$NL},tt.prototype._$ob=function(t){this._$NL=t},tt.prototype.getPartsID=function(){return this._$NL},tt.prototype._$MP=function(t){this._$NL=t},it.prototype=new $,it.prototype.getPartsOpacity=function(){return this._$VS},it.prototype.setPartsOpacity=function(t){this._$VS=t},et._$L7=function(){u._$27(),yt._$27(),b._$27(),l._$27()},et.prototype.toString=function(){return this.id},rt.prototype._$F0=function(t){},ot.prototype._$1s=function(){return this._$4S},ot.prototype._$zP=function(){this._$4S=new Array},ot.prototype._$F0=function(t){this._$4S=t._$nP()},ot.prototype._$Ks=function(t){this._$4S.push(t)},nt.tr=new gt,nt._$50=new gt,nt._$Ti=new Array(0,0),nt._$Pi=new Array(0,0),nt._$B=new Array(0,0),nt.prototype._$lP=function(t,i,e,r){this.viewport=new Array(t,i,e,r)},nt.prototype._$bL=function(){this.context.save();var t=this.viewport;null!=t&&(this.context.beginPath(),this.context._$Li(t[0],t[1],t[2],t[3]),this.context.clip())},nt.prototype._$ei=function(){this.context.restore()},nt.prototype.drawElements=function(t,i,e,r,o,n,s,a){try{o!=this._$Qo&&(this._$Qo=o,this.context.globalAlpha=o);for(var h=i.length,l=t.width,$=t.height,u=this.context,p=this._$xP,f=this._$uP,c=this._$6r,d=this._$3r,g=nt.tr,y=nt._$Ti,m=nt._$Pi,T=nt._$B,P=0;P<h;P+=3){u.save();var S=i[P],v=i[P+1],L=i[P+2],M=p+c*e[2*S],E=f+d*e[2*S+1],A=p+c*e[2*v],I=f+d*e[2*v+1],w=p+c*e[2*L],x=f+d*e[2*L+1];s&&(s._$PS(M,E,T),M=T[0],E=T[1],s._$PS(A,I,T),A=T[0],I=T[1],s._$PS(w,x,T),w=T[0],x=T[1]);var O=l*r[2*S],D=$-$*r[2*S+1],R=l*r[2*v],b=$-$*r[2*v+1],F=l*r[2*L],C=$-$*r[2*L+1],N=Math.atan2(b-D,R-O),B=Math.atan2(I-E,A-M),U=A-M,G=I-E,Y=Math.sqrt(U*U+G*G),k=R-O,V=b-D,X=Math.sqrt(k*k+V*V),z=Y/X;It._$ni(F,C,O,D,R-O,b-D,-(b-D),R-O,y),It._$ni(w,x,M,E,A-M,I-E,-(I-E),A-M,m);var H=(m[0]-y[0])/y[1],W=Math.min(O,R,F),j=Math.max(O,R,F),q=Math.min(D,b,C),J=Math.max(D,b,C),Q=Math.floor(W),Z=Math.floor(q),K=Math.ceil(j),tt=Math.ceil(J);g.identity(),g.translate(M,E),g.rotate(B),g.scale(1,m[1]/y[1]),g.shear(H,0),g.scale(z,z),g.rotate(-N),g.translate(-O,-D),g.setContext(u);if(n||(n=1.2),at.IGNORE_EXPAND&&(n=0),at.USE_CACHED_POLYGON_IMAGE){var it=a._$e0;if(it.gl_cacheImage=it.gl_cacheImage||{},!it.gl_cacheImage[P]){var et=nt.createCanvas(K-Q,tt-Z);at.DEBUG_DATA.LDGL_CANVAS_MB=at.DEBUG_DATA.LDGL_CANVAS_MB||0,at.DEBUG_DATA.LDGL_CANVAS_MB+=(K-Q)*(tt-Z)*4;var rt=et.getContext("2d");rt.translate(-Q,-Z),nt.clip(rt,g,n,Y,O,D,R,b,F,C,M,E,A,I,w,x),rt.drawImage(t,0,0),it.gl_cacheImage[P]={cacheCanvas:et,cacheContext:rt}}u.drawImage(it.gl_cacheImage[P].cacheCanvas,Q,Z)}else at.IGNORE_CLIP||nt.clip(u,g,n,Y,O,D,R,b,F,C,M,E,A,I,w,x),at.USE_ADJUST_TRANSLATION&&(W=0,j=l,q=0,J=$),u.drawImage(t,W,q,j-W,J-q,W,q,j-W,J-q);u.restore()}}catch(t){_._$Rb(t)}},nt.clip=function(t,i,e,r,o,n,s,_,a,h,l,$,u,p,f,c){e>.02?nt.expandClip(t,i,e,r,l,$,u,p,f,c):nt.clipWithTransform(t,null,o,n,s,_,a,h)},nt.expandClip=function(t,i,e,r,o,n,s,_,a,h){var l=s-o,$=_-n,u=a-o,p=h-n,f=l*p-$*u>0?e:-e,c=-$,d=l,g=a-s,y=h-_,m=-y,T=g,P=Math.sqrt(g*g+y*y),S=-p,v=u,L=Math.sqrt(u*u+p*p),M=o-f*c/r,E=n-f*d/r,A=s-f*c/r,I=_-f*d/r,w=s-f*m/P,x=_-f*T/P,O=a-f*m/P,D=h-f*T/P,R=o+f*S/L,b=n+f*v/L,F=a+f*S/L,C=h+f*v/L,N=nt._$50;return null!=i._$P2(N)&&(nt.clipWithTransform(t,N,M,E,A,I,w,x,O,D,F,C,R,b),!0)},nt.clipWithTransform=function(t,i,e,r,o,n,s,a){if(arguments.length<7)return void _._$li("err : @LDGL.clip()");if(!(arguments[1]instanceof gt))return void _._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");var h=nt._$B,l=i,$=arguments;if(t.beginPath(),l){l._$PS($[2],$[3],h),t.moveTo(h[0],h[1]);for(var u=4;u<$.length;u+=2)l._$PS($[u],$[u+1],h),t.lineTo(h[0],h[1])}else{t.moveTo($[2],$[3]);for(var u=4;u<$.length;u+=2)t.lineTo($[u],$[u+1])}t.clip()},nt.createCanvas=function(t,i){var e=document.createElement("canvas");return e.setAttribute("width",t),e.setAttribute("height",i),e||_._$li("err : "+e),e},nt.dumpValues=function(){for(var t="",i=0;i<arguments.length;i++)t+="["+i+"]= "+arguments[i].toFixed(3)+" , ";console.log(t)},st.prototype._$F0=function(t){this._$TT=t._$_T(),this._$LT=t._$_T(),this._$FS=t._$_T(),this._$wL=t._$nP()},st.prototype.getMinValue=function(){return this._$TT},st.prototype.getMaxValue=function(){return this._$LT},st.prototype.getDefaultValue=function(){return this._$FS},st.prototype.getParamID=function(){return this._$wL},_t.prototype._$yo=function(){return this._$AT&&!this._$JS},_t.prototype._$hS=function(t){this._$AT=t},_t.prototype._$GT=function(){return this._$e0},_t.prototype._$l2=function(t){this._$IP=t},_t.prototype.getPartsIndex=function(){return this._$IP},_t.prototype._$x2=function(){return this._$JS},_t.prototype._$Ib=function(t){this._$JS=t},_t.prototype.getTotalScale=function(){return this.totalScale},_t.prototype.setTotalScale_notForClient=function(t){this.totalScale=t},_t.prototype.getInterpolatedOpacity=function(){return this._$7s},_t.prototype.setInterpolatedOpacity=function(t){this._$7s=t},_t.prototype.getTotalOpacity=function(t){return this.totalOpacity},_t.prototype.setTotalOpacity=function(t){this.totalOpacity=t},at._$2s="2.1.00_1",at._$Kr=201001e3,at._$sP=!0,at._$so=!0,at._$cb=!1,at._$3T=!0,at._$Ts=!0,at._$fb=!0,at._$ts=!0,at.L2D_DEFORMER_EXTEND=!0,at._$Wb=!1;at._$yr=!1,at._$Zs=!1,at.L2D_NO_ERROR=0,at._$i7=1e3,at._$9s=1001,at._$es=1100,at._$r7=2e3,at._$07=2001,at._$b7=2002,at._$H7=4e3,at.L2D_COLOR_BLEND_MODE_MULT=0,at.L2D_COLOR_BLEND_MODE_ADD=1,at.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,at._$6b=!0,at._$cT=0,at.clippingMaskBufferSize=256,at.glContext=new Array,at.frameBuffers=new Array,at.fTexture=new Array,at.IGNORE_CLIP=!1,at.IGNORE_EXPAND=!1,at.EXPAND_W=2,at.USE_ADJUST_TRANSLATION=!0,at.USE_CANVAS_TRANSFORM=!0,at.USE_CACHED_POLYGON_IMAGE=!1,at.DEBUG_DATA={},at.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},at.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},at.PROFILE_IOS_DEFAULT=at.PROFILE_IOS_QUALITY,at.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},at.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},at.initProfile=function(){Et.isIOS()?at.setupProfile(at.PROFILE_IOS_DEFAULT):Et.isAndroid()?at.setupProfile(at.PROFILE_ANDROID):at.setupProfile(at.PROFILE_DESKTOP)},at.setupProfile=function(t,i){if("number"==typeof t)switch(t){case 9901:t=at.PROFILE_IOS_SPEED;break;case 9902:t=at.PROFILE_IOS_QUALITY;break;case 9903:t=at.PROFILE_IOS_DEFAULT;break;case 9904:t=at.PROFILE_ANDROID;break;case 9905:t=at.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+t)}arguments.length<2&&(i=!0),i&&console.log("profile : "+t.PROFILE_NAME);for(var e in t)at[e]=t[e],i&&console.log("  ["+e+"] = "+t[e])},at.init=function(){if(at._$6b){console.log("Live2D %s",at._$2s),at._$6b=!1;!0,at.initProfile()}},at.getVersionStr=function(){return at._$2s},at.getVersionNo=function(){return at._$Kr},at._$sT=function(t){at._$cT=t},at.getError=function(){var t=at._$cT;return at._$cT=0,t},at.dispose=function(){at.glContext=[],at.frameBuffers=[],at.fTexture=[]},at.setGL=function(t,i){var e=i||0;at.glContext[e]=t},at.getGL=function(t){return at.glContext[t]},at.setClippingMaskBufferSize=function(t){at.clippingMaskBufferSize=t},at.getClippingMaskBufferSize=function(){return at.clippingMaskBufferSize},at.deleteBuffer=function(t){at.getGL(t).deleteFramebuffer(at.frameBuffers[t].framebuffer),delete at.frameBuffers[t],delete at.glContext[t]},ht._$r2=function(t){return t<0?0:t>1?1:.5-.5*Math.cos(t*Lt.PI_F)},lt._$fr=-1,lt.prototype.toString=function(){return this._$ib},$t.prototype=new W,$t._$42=0,$t._$Os=30,$t._$ms=0,$t._$ns=1,$t._$_s=2,$t._$gT=new Array,$t.prototype._$_S=function(t){this._$LP=t},$t.prototype.getTextureNo=function(){return this._$LP},$t.prototype._$ZL=function(){return this._$Qi},$t.prototype._$H2=function(){return this._$JP},$t.prototype.getNumPoints=function(){return this._$d0},$t.prototype.getType=function(){return W._$wb},$t.prototype._$B2=function(t,i,e){var r=i,o=null!=r._$hr?r._$hr:r._$Cr;switch(U._$do){default:case U._$Ms:throw new Error("_$L _$ro ");case U._$Qs:for(var n=this._$d0-1;n>=0;--n)o[n*U._$No+4]=e}},$t.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},$t.prototype._$F0=function(t){W.prototype._$F0.call(this,t),this._$LP=t._$6L(),this._$d0=t._$6L(),this._$Yo=t._$6L();var i=t._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var e=3*this._$Yo-1;e>=0;--e)this._$BP[e]=i[e];if(this._$Eo=t._$nP(),this._$Qi=t._$nP(),t.getFormatVersion()>=G._$s7){if(this._$JP=t._$6L(),0!=this._$JP){if(0!=(1&this._$JP)){var r=t._$6L();null==this._$5P&&(this._$5P=new Object),this._$5P._$Hb=parseInt(r)}0!=(this._$JP&$t._$Os)?this._$6s=(this._$JP&$t._$Os)>>1:this._$6s=$t._$ms,0!=(32&this._$JP)&&(this.culling=!1)}}else this._$JP=0},$t.prototype.init=function(t){var i=new ut(this),e=this._$d0*U._$No,r=this._$32();switch(null!=i._$Cr&&(i._$Cr=null),i._$Cr=new Float32Array(e),null!=i._$hr&&(i._$hr=null),i._$hr=r?new Float32Array(e):null,U._$do){default:case U._$Ms:if(U._$Ls)for(var o=this._$d0-1;o>=0;--o){var n=o<<1;this._$Qi[n+1]=1-this._$Qi[n+1]}break;case U._$Qs:for(var o=this._$d0-1;o>=0;--o){var n=o<<1,s=o*U._$No,_=this._$Qi[n],a=this._$Qi[n+1];i._$Cr[s]=_,i._$Cr[s+1]=a,i._$Cr[s+4]=0,r&&(i._$hr[s]=_,i._$hr[s+1]=a,i._$hr[s+4]=0)}}return i},$t.prototype._$Nr=function(t,i){var e=i;if(this!=e._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(t)&&(W.prototype._$Nr.call(this,t,e),!e._$IS[0])){var r=$t._$gT;r[0]=!1,v._$Vr(t,this._$GS,r,this._$d0,this._$Eo,e._$Cr,U._$i2,U._$No)}},$t.prototype._$2b=function(t,i){try{this!=i._$GT()&&console.log("### assert!! ### ");var e=!1;i._$IS[0]&&(e=!0);var r=i;if(!e&&(W.prototype._$2b.call(this,t),this._$32())){var o=this.getTargetBaseDataID();if(r._$8r==W._$ur&&(r._$8r=t.getBaseDataIndex(o)),r._$8r<0)at._$so&&_._$li("_$L _$0P _$G :: %s",o);else{var n=t.getBaseData(r._$8r),s=t._$q2(r._$8r);null==n||s._$x2()?r._$AT=!1:(n._$nb(t,s,r._$Cr,r._$hr,this._$d0,U._$i2,U._$No),r._$AT=!0),r.baseOpacity=s.getTotalOpacity()}}}catch(t){throw t}},$t.prototype.draw=function(t,i,e){if(this!=e._$GT()&&console.log("### assert!! ### "),!e._$IS[0]){var r=e,o=this._$LP;o<0&&(o=1);var n=this.getOpacity(i,r)*e._$VS*e.baseOpacity,s=null!=r._$hr?r._$hr:r._$Cr;t.setClipBufPre_clipContextForDraw(e.clipBufPre_clipContext),t._$WP(this.culling),t._$Uo(o,3*this._$Yo,this._$BP,s,this._$Qi,n,this._$6s,r)}},$t.prototype.dump=function(){console.log("  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) \\n",this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var t=0;t<this._$BP.length;t++)console.log("%5d ,",this._$BP[t]);console.log("\\n  _$5i _$30");for(var t=0;t<this._$Eo.length;t++){console.log("\\n    _$30[%d] = ",t);for(var i=this._$Eo[t],e=0;e<i.length;e++)console.log("%6.2f, ",i[e])}console.log("\\n")},$t.prototype._$72=function(t){return null==this._$5P?null:this._$5P[t]},$t.prototype.getIndexArray=function(){return this._$BP},ut.prototype=new Mt,ut.prototype.getTransformedPoints=function(){return null!=this._$hr?this._$hr:this._$Cr},pt.prototype._$HT=function(t){this.x=t.x,this.y=t.y},pt.prototype._$HT=function(t,i){this.x=t,this.y=i},ft.prototype=new i,ft.loadModel=function(t){var e=new ft;return i._$62(e,t),e},ft.loadModel=function(t,e){var r=e||0,o=new ft(r);return i._$62(o,t),o},ft._$to=function(){return new ft},ft._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==i.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=ft.loadModel(i._$3b()),o=0;o<e.length;o++){var n=new _$5(e[o]);if(0==n.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+n._$PL());r.setTexture(o,_$nL._$_o(t,n._$3b()))}return r},ft.prototype.setGL=function(t){at.setGL(t)},ft.prototype.setTransform=function(t){this.drawParamWebGL.setTransform(t)},ft.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},ft.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},ft.prototype._$K2=function(){this.drawParamWebGL._$K2()},ft.prototype.setTexture=function(t,i){null==this.drawParamWebGL&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},ft.prototype.setTexture=function(t,i){null==this.drawParamWebGL&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},ft.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},ft.prototype._$Ds=function(t){this.drawParamWebGL._$Ds(t)},ft.prototype.getDrawParam=function(){return this.drawParamWebGL},ft.prototype.setMatrix=function(t){this.drawParamWebGL.setMatrix(t)},ft.prototype.setPremultipliedAlpha=function(t){this.drawParamWebGL.setPremultipliedAlpha(t)},ft.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},ft.prototype.setAnisotropy=function(t){this.drawParamWebGL.setAnisotropy(t)},ft.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()},ct.prototype._$tb=function(){return this.motions},ct.prototype.startMotion=function(t,i){for(var e=null,r=this.motions.length,o=0;o<r;++o)null!=(e=this.motions[o])&&(e._$qS(e._$w0.getFadeOut()),this._$eb&&_._$Ji("MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)\\n",r,e._$sr));if(null==t)return-1;e=new dt,e._$w0=t,this.motions.push(e);var n=e._$sr;return this._$eb&&_._$Ji("MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)\\n",r,n),n},ct.prototype.updateParam=function(t){try{for(var i=!1,e=0;e<this.motions.length;e++){var r=this.motions[e];if(null!=r){var o=r._$w0;null!=o?(o.updateParam(t,r),i=!0,r.isFinished()&&(this._$eb&&_._$Ji("MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)\\n",this.motions.length-1,r._$sr),this.motions.splice(e,1),e--)):(this.motions=this.motions.splice(e,1),e--)}else this.motions.splice(e,1),e--}return i}catch(t){return _._$li(t),!0}},ct.prototype.isFinished=function(t){if(arguments.length>=1){for(var i=0;i<this.motions.length;i++){var e=this.motions[i];if(null!=e&&(e._$sr==t&&!e.isFinished()))return!1}return!0}for(var i=0;i<this.motions.length;i++){var e=this.motions[i];if(null!=e){if(null!=e._$w0){if(!e.isFinished())return!1}else this.motions.splice(i,1),i--}else this.motions.splice(i,1),i--}return!0},ct.prototype.stopAllMotions=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];if(null!=i){i._$w0;this.motions.splice(t,1),t--}else this.motions.splice(t,1),t--}},ct.prototype._$Zr=function(t){this._$eb=t},ct.prototype._$e=function(){console.log("-- _$R --\\n");for(var t=0;t<this.motions.length;t++){var i=this.motions[t],e=i._$w0;console.log("MotionQueueEnt[%d] :: %s\\n",this.motions.length,e.toString())}},dt._$Gs=0,dt.prototype.isFinished=function(){return this._$9L},dt.prototype._$qS=function(t){var i=w.getUserTimeMSec(),e=i+t;(this._$Do<0||e<this._$Do)&&(this._$Do=e)},dt.prototype._$Bs=function(){return this._$sr},gt.prototype.setContext=function(t){var i=this.m;t.transform(i[0],i[1],i[3],i[4],i[6],i[7])},gt.prototype.toString=function(){for(var t="LDTransform { ",i=0;i<9;i++)t+=this.m[i].toFixed(2)+" ,";return t+=" }"},gt.prototype.identity=function(){var t=this.m;t[0]=t[4]=t[8]=1,t[1]=t[2]=t[3]=t[5]=t[6]=t[7]=0},gt.prototype._$PS=function(t,i,e){null==e&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},gt.prototype._$P2=function(t){t||(t=new gt);var i=this.m,e=i[0],r=i[1],o=i[2],n=i[3],s=i[4],_=i[5],a=i[6],h=i[7],l=i[8],$=e*s*l+r*_*a+o*n*h-e*_*h-o*s*a-r*n*l;if(0==$)return null;var u=1/$;return t.m[0]=u*(s*l-h*_),t.m[1]=u*(h*o-r*l),t.m[2]=u*(r*_-s*o),t.m[3]=u*(a*_-n*l),t.m[4]=u*(e*l-a*o),t.m[5]=u*(n*o-e*_),t.m[6]=u*(n*h-a*s),t.m[7]=u*(a*r-e*h),t.m[8]=u*(e*s-n*r),t},gt.prototype.transform=function(t,i,e){null==e&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},gt.prototype.translate=function(t,i){var e=this.m;e[6]=e[0]*t+e[3]*i+e[6],e[7]=e[1]*t+e[4]*i+e[7],e[8]=e[2]*t+e[5]*i+e[8]},gt.prototype.scale=function(t,i){var e=this.m;e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=i,e[4]*=i,e[5]*=i},gt.prototype.shear=function(t,i){var e=this.m,r=e[0]+e[3]*i,o=e[1]+e[4]*i,n=e[2]+e[5]*i;e[3]=e[0]*t+e[3],e[4]=e[1]*t+e[4],e[5]=e[2]*t+e[5],e[0]=r,e[1]=o,e[2]=n},gt.prototype.rotate=function(t){var i=this.m,e=Math.cos(t),r=Math.sin(t),o=i[0]*e+i[3]*r,n=i[1]*e+i[4]*r,s=i[2]*e+i[5]*r;i[3]=-i[0]*r+i[3]*e,i[4]=-i[1]*r+i[4]*e,i[5]=-i[2]*r+i[5]*e,i[0]=o,i[1]=n,i[2]=s},gt.prototype.concatenate=function(t){var i=this.m,e=t.m,r=i[0]*e[0]+i[3]*e[1]+i[6]*e[2],o=i[1]*e[0]+i[4]*e[1]+i[7]*e[2],n=i[2]*e[0]+i[5]*e[1]+i[8]*e[2],s=i[0]*e[3]+i[3]*e[4]+i[6]*e[5],_=i[1]*e[3]+i[4]*e[4]+i[7]*e[5],a=i[2]*e[3]+i[5]*e[4]+i[8]*e[5],h=i[0]*e[6]+i[3]*e[7]+i[6]*e[8],l=i[1]*e[6]+i[4]*e[7]+i[7]*e[8],$=i[2]*e[6]+i[5]*e[7]+i[8]*e[8];m[0]=r,m[1]=o,m[2]=n,m[3]=s,m[4]=_,m[5]=a,m[6]=h,m[7]=l,m[8]=$},yt.prototype=new et,yt._$eT=null,yt._$tP=new Object,yt._$2o=function(){return null==yt._$eT&&(yt._$eT=yt.getID("DST_BASE")),yt._$eT},yt._$27=function(){yt._$tP.clear(),yt._$eT=null},yt.getID=function(t){var i=yt._$tP[t];return null==i&&(i=new yt(t),yt._$tP[t]=i),i},yt.prototype._$3s=function(){return new yt},mt.prototype=new E,mt._$9r=function(t){return new Float32Array(t)},mt._$vb=function(t){return new Int16Array(t)},mt._$cr=function(t,i){return null==t||t._$yL()<i.length?(t=mt._$9r(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},mt._$mb=function(t,i){return null==t||t._$yL()<i.length?(t=mt._$vb(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},mt._$Hs=function(){return this._$Gr},mt._$as=function(t){this._$Gr=t},mt.prototype.getGL=function(){return this.gl},mt.prototype.setGL=function(t){this.gl=t},mt.prototype.setTransform=function(t){this.transform=t},mt.prototype._$ZT=function(){var t=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=t.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.DEPTH_TEST),t.frontFace(t.CW),t.enable(t.BLEND),t.colorMask(1,1,1,1),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)},mt.prototype._$Uo=function(t,i,e,r,o,n,s,_){if(!(n<.01&&null==this.clipBufPre_clipContextMask)){var a=(n>.9&&at.EXPAND_W,this.gl);if(null==this.gl)throw new Error("gl is null");var h=1*this._$C0*n,l=1*this._$tT*n,$=1*this._$WL*n,u=this._$lT*n;if(null!=this.clipBufPre_clipContextMask){a.frontFace(a.CCW),a.useProgram(this.shaderProgram),this._$vS=Tt(a,this._$vS,r),this._$no=Pt(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Tt(a,this._$NT,o),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var p=this.getClipBufPre_clipContextMask().layoutChannelNo,f=this.getChannelFlagAsColor(p);a.uniform4f(this.u_channelFlag,f.r,f.g,f.b,f.a);var c=this.getClipBufPre_clipContextMask().layoutBounds;a.uniform4f(this.u_baseColor_Loc,2*c.x-1,2*c.y-1,2*c._$EL()-1,2*c._$5T()-1),a.uniform1i(this.u_maskFlag_Loc,!0)}else if(null!=this.getClipBufPre_clipContextDraw()){a.useProgram(this.shaderProgramOff),this._$vS=Tt(a,this._$vS,r),this._$no=Pt(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc_Off),a.vertexAttribPointer(this.a_position_Loc_Off,2,a.FLOAT,!1,0,0),this._$NT=Tt(a,this._$NT,o),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc_Off,1),a.enableVertexAttribArray(this.a_texCoord_Loc_Off),a.vertexAttribPointer(this.a_texCoord_Loc_Off,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),a.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,at.fTexture[this.glno]),a.uniform1i(this.s_texture1_Loc_Off,2);var p=this.getClipBufPre_clipContextDraw().layoutChannelNo,f=this.getChannelFlagAsColor(p);a.uniform4f(this.u_channelFlag_Loc_Off,f.r,f.g,f.b,f.a),a.uniform4f(this.u_baseColor_Loc_Off,h,l,$,u)}else a.useProgram(this.shaderProgram),this._$vS=Tt(a,this._$vS,r),this._$no=Pt(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Tt(a,this._$NT,o),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),a.uniform4f(this.u_baseColor_Loc,h,l,$,u),a.uniform1i(this.u_maskFlag_Loc,!1);this.culling?this.gl.enable(a.CULL_FACE):this.gl.disable(a.CULL_FACE),this.gl.enable(a.BLEND);var d,g,y,m;if(null!=this.clipBufPre_clipContextMask)d=a.ONE,g=a.ONE_MINUS_SRC_ALPHA,y=a.ONE,m=a.ONE_MINUS_SRC_ALPHA;else switch(s){case $t._$ms:d=a.ONE,g=a.ONE_MINUS_SRC_ALPHA,y=a.ONE,m=a.ONE_MINUS_SRC_ALPHA;break;case $t._$ns:d=a.ONE,g=a.ONE,y=a.ZERO,m=a.ONE;break;case $t._$_s:d=a.DST_COLOR,g=a.ONE_MINUS_SRC_ALPHA,y=a.ZERO,m=a.ONE}a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(d,g,y,m),this.anisotropyExt&&a.texParameteri(a.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var T=e.length;a.drawElements(a.TRIANGLES,T,a.UNSIGNED_SHORT,0),a.bindTexture(a.TEXTURE_2D,null)}},mt.prototype._$Rs=function(){throw new Error("_$Rs")},mt.prototype._$Ds=function(t){throw new Error("_$Ds")},mt.prototype._$K2=function(){for(var t=0;t<this.textures.length;t++){0!=this.textures[t]&&(this.gl._$K2(1,this.textures,t),this.textures[t]=null)}},mt.prototype.setTexture=function(t,i){this.textures[t]=i},mt.prototype.initShader=function(){var t=this.gl;this.loadShaders2(),this.a_position_Loc=t.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=t.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=t.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=t.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=t.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=t.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=t.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_baseColor")},mt.prototype.disposeShader=function(){var t=this.gl;this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},mt.prototype.compileShader=function(t,i){var e=this.gl,r=i,o=e.createShader(t);if(null==o)return _._$Ji("_$L0 to create shader"),null;if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(o);return _._$Ji("_$L0 to compile shader : "+n),e.deleteShader(o),null}return o},mt.prototype.loadShaders2=function(){var t=this.gl;if(this.shaderProgram=t.createProgram(),!this.shaderProgram)return!1;if(this.shaderProgramOff=t.createProgram(),!this.shaderProgramOff)return!1;if(this.vertShader=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}"),!this.vertShader)return _._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}"),!this.vertShaderOff)return _._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}"),!this.fragShader)return _._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}"),!this.fragShaderOff)return _._$Ji("OffFragment shader compile _$li!"),!1;if(t.attachShader(this.shaderProgram,this.vertShader),t.attachShader(this.shaderProgram,this.fragShader),t.attachShader(this.shaderProgramOff,this.vertShaderOff),t.attachShader(this.shaderProgramOff,this.fragShaderOff),t.linkProgram(this.shaderProgram),t.linkProgram(this.shaderProgramOff),!t.getProgramParameter(this.shaderProgram,t.LINK_STATUS)){var i=t.getProgramInfoLog(this.shaderProgram);return _._$Ji("_$L0 to link program: "+i),this.vertShader&&(t.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(t.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(t.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(t.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},mt.prototype.createFramebuffer=function(){var t=this.gl,i=at.clippingMaskBufferSize,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,r);var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),at.fTexture[this.glno]=o,{framebuffer:e,renderbuffer:r,texture:at.fTexture[this.glno]}},St.prototype._$fP=function(){var t,i,e,r=this._$ST();if(0==(128&r))return 255&r;if(0==(128&(t=this._$ST())))return(127&r)<<7|127&t;if(0==(128&(i=this._$ST())))return(127&r)<<14|(127&t)<<7|255&i;if(0==(128&(e=this._$ST())))return(127&r)<<21|(127&t)<<14|(127&i)<<7|255&e;throw new lt("_$L _$0P  _")},St.prototype.getFormatVersion=function(){return this._$S2},St.prototype._$gr=function(t){this._$S2=t},St.prototype._$3L=function(){return this._$fP()},St.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},St.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},St.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},St.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},St.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},St.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new lt("_$L _$q read long")},St.prototype._$po=function(){return this._$zT(),0!=this._$T.getInt8(this._$F++)};var xt=!0;St.prototype._$bT=function(){this._$zT();var t=this._$3L(),i=null;if(xt)try{var e=new ArrayBuffer(2*t);i=new Uint16Array(e);for(var r=0;r<t;++r)i[r]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,i)}catch(t){xt=!1}try{var o=new Array;if(null==i)for(var r=0;r<t;++r)o[r]=this._$T.getUint8(this._$F++);else for(var r=0;r<t;++r)o[r]=i[r];return String.fromCharCode.apply(null,o)}catch(t){console.log("read utf8 / _$rT _$L0 !! : "+t)}},St.prototype._$cS=function(){this._$zT();for(var t=this._$3L(),i=new Int32Array(t),e=0;e<t;e++)i[e]=this._$T.getInt32(this._$F),this._$F+=4;return i},St.prototype._$Tb=function(){this._$zT();for(var t=this._$3L(),i=new Float32Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat32(this._$F),this._$F+=4;return i},St.prototype._$5b=function(){this._$zT();for(var t=this._$3L(),i=new Float64Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat64(this._$F),this._$F+=8;return i},St.prototype._$nP=function(){return this._$Jb(-1)},St.prototype._$Jb=function(t){if(this._$zT(),t<0&&(t=this._$3L()),t==G._$7P){var i=this._$6L();if(0<=i&&i<this._$Ko.length)return this._$Ko[i];throw new lt("_$sL _$4i @_$m0")}var e=this._$4b(t);return this._$Ko.push(e),e},St.prototype._$4b=function(t){if(0==t)return null;if(50==t){var i=this._$bT(),e=b.getID(i);return e}if(51==t){var i=this._$bT(),e=yt.getID(i);return e}if(134==t){var i=this._$bT(),e=l.getID(i);return e}if(60==t){var i=this._$bT(),e=u.getID(i);return e}if(t>=48){var r=G._$9o(t);return null!=r?(r._$F0(this),r):null}switch(t){case 1:return this._$bT();case 10:return new n(this._$6L(),!0);case 11:return new S(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new S(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new L(this._$mP(),this._$mP());case 14:return new L(this._$_T(),this._$_T());case 15:for(var o=this._$3L(),e=new Array(o),s=0;s<o;s++)e[s]=this._$nP();return e;case 17:var e=new F(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());return e;case 21:return new h(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new pt(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new lt("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+t);default:throw new lt("_$6 _$q : _$nP() NO _$i : "+t)}},St.prototype._$8L=function(){return 0==this._$hL?this._$v0=this._$ST():8==this._$hL&&(this._$v0=this._$ST(),this._$hL=0),1==(this._$v0>>7-this._$hL++&1)},St.prototype._$zT=function(){0!=this._$hL&&(this._$hL=0)},vt.prototype._$wP=function(t,i,e){for(var r=0;r<e;r++){for(var o=0;o<i;o++){var n=2*(o+r*i);console.log("(% 7.3f , % 7.3f) , ",t[n],t[n+1])}console.log("\\n")}console.log("\\n")},Lt._$2S=Math.PI/180,Lt._$bS=Math.PI/180,Lt._$wS=180/Math.PI,Lt._$NS=180/Math.PI,Lt.PI_F=Math.PI,Lt._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],Lt._$92=function(t,i){var e=Math.atan2(t[1],t[0]),r=Math.atan2(i[1],i[0]);return Lt._$tS(e,r)},Lt._$tS=function(t,i){for(var e=t-i;e<-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;return e},Lt._$9=function(t){return Math.sin(t)},Lt.fcos=function(t){return Math.cos(t)},Mt.prototype._$u2=function(){return this._$IS[0]},Mt.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},Mt.prototype._$GT=function(){return this._$e0},Et._$W2=0,Et.SYSTEM_INFO=null,Et.USER_AGENT=navigator.userAgent,Et.isIPhone=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isIPhone},Et.isIOS=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isIPhone||Et.SYSTEM_INFO._isIPad},Et.isAndroid=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isAndroid},Et.getOSVersion=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO.version},Et.getOS=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isIPhone||Et.SYSTEM_INFO._isIPad?"iOS":Et.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},Et.setup=function(){function t(t,i){for(var e=t.substring(i).split(/[ _,;\\.]/),r=0,o=0;o<=2&&!isNaN(e[o]);o++){var n=parseInt(e[o]);if(n<0||n>999){_._$li("err : "+n+" @UtHtml5.setup()"),r=0;break}r+=n*Math.pow(1e3,2-o)}return r}var i,e=Et.USER_AGENT,r=Et.SYSTEM_INFO={userAgent:e};if((i=e.indexOf("iPhone OS "))>=0)r.os="iPhone",r._isIPhone=!0,r.version=t(e,i+"iPhone OS ".length);else if((i=e.indexOf("iPad"))>=0){if((i=e.indexOf("CPU OS"))<0)return void _._$li(" err : "+e+" @UtHtml5.setup()");r.os="iPad",r._isIPad=!0,r.version=t(e,i+"CPU OS ".length)}else(i=e.indexOf("Android"))>=0?(r.os="Android",r._isAndroid=!0,r.version=t(e,i+"Android ".length)):(r.os="-",r.version=-1)},window.UtSystem=w,window.UtDebug=_,window.LDTransform=gt,window.LDGL=nt,window.Live2D=at,window.Live2DModelWebGL=ft,window.Live2DModelJS=q,window.Live2DMotion=J,window.MotionQueueManager=ct,window.PhysicsHair=f,window.AMotion=s,window.PartsDataID=l,window.DrawDataID=b,window.BaseDataID=yt,window.ParamID=u,at.init();var At=!1}()}).call(i,e(7))},function(t,i){t.exports={import:function(){throw new Error("System.import cannot be used indirectly")}}},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){this.models=[],this.count=-1,this.reloadFlg=!1,Live2D.init(),n.Live2DFramework.setPlatformManager(new _.default)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var n=e(0),s=e(9),_=r(s),a=e(10),h=r(a),l=e(1),$=r(l);o.prototype.createModel=function(){var t=new h.default;return this.models.push(t),t},o.prototype.changeModel=function(t,i){if(this.reloadFlg){this.reloadFlg=!1;this.releaseModel(0,t),this.createModel(),this.models[0].load(t,i)}},o.prototype.getModel=function(t){return t>=this.models.length?null:this.models[t]},o.prototype.releaseModel=function(t,i){this.models.length<=t||(this.models[t].release(i),delete this.models[t],this.models.splice(t,1))},o.prototype.numModels=function(){return this.models.length},o.prototype.setDrag=function(t,i){for(var e=0;e<this.models.length;e++)this.models[e].setDrag(t,i)},o.prototype.maxScaleEvent=function(){$.default.DEBUG_LOG&&console.log("Max scale event.");for(var t=0;t<this.models.length;t++)this.models[t].startRandomMotion($.default.MOTION_GROUP_PINCH_IN,$.default.PRIORITY_NORMAL)},o.prototype.minScaleEvent=function(){$.default.DEBUG_LOG&&console.log("Min scale event.");for(var t=0;t<this.models.length;t++)this.models[t].startRandomMotion($.default.MOTION_GROUP_PINCH_OUT,$.default.PRIORITY_NORMAL)},o.prototype.tapEvent=function(t,i){$.default.DEBUG_LOG&&console.log("tapEvent view x:"+t+" y:"+i);for(var e=0;e<this.models.length;e++)this.models[e].hitTest($.default.HIT_AREA_HEAD,t,i)?($.default.DEBUG_LOG&&console.log("Tap face."),this.models[e].setRandomExpression()):this.models[e].hitTest($.default.HIT_AREA_BODY,t,i)?($.default.DEBUG_LOG&&console.log("Tap body. models["+e+"]"),this.models[e].startRandomMotion($.default.MOTION_GROUP_TAP_BODY,$.default.PRIORITY_NORMAL)):this.models[e].hitTestCustom("head",t,i)?($.default.DEBUG_LOG&&console.log("Tap face."),this.models[e].startRandomMotion($.default.MOTION_GROUP_FLICK_HEAD,$.default.PRIORITY_NORMAL)):this.models[e].hitTestCustom("body",t,i)&&($.default.DEBUG_LOG&&console.log("Tap body. models["+e+"]"),this.models[e].startRandomMotion($.default.MOTION_GROUP_TAP_BODY,$.default.PRIORITY_NORMAL));return!0}},function(t,i,e){"use strict";function r(){}Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;var o=e(2);r.prototype.loadBytes=function(t,i){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){switch(e.status){case 200:i(e.response);break;default:console.error("Failed to load ("+e.status+") : "+t)}},e.send(null)},r.prototype.loadString=function(t){this.loadBytes(t,function(t){return t})},r.prototype.loadLive2DModel=function(t,i){var e=null;this.loadBytes(t,function(t){e=Live2DModelWebGL.loadModel(t),i(e)})},r.prototype.loadTexture=function(t,i,e,r){var n=new Image;n.crossOrigin="Anonymous",n.src=e;n.onload=function(){var e=(0,o.getContext)(),s=e.createTexture();if(!s)return console.error("Failed to generate gl texture name."),-1;0==t.isPremultipliedAlpha()&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),t.setTexture(i,s),s=null,"function"==typeof r&&r()},n.onerror=function(){console.error("Failed to load image : "+e)}},r.prototype.jsonParseFromBytes=function(t){var i,e=new Uint8Array(t,0,3);return i=239==e[0]&&187==e[1]&&191==e[2]?String.fromCharCode.apply(null,new Uint8Array(t,3)):String.fromCharCode.apply(null,new Uint8Array(t)),JSON.parse(i)},r.prototype.log=function(t){}},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){n.L2DBaseModel.prototype.constructor.call(this),this.modelHomeDir="",this.modelSetting=null,this.tmpMatrix=[]}Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var n=e(0),s=e(11),_=r(s),a=e(1),h=r(a),l=e(3),$=r(l);o.prototype=new n.L2DBaseModel,o.prototype.load=function(t,i,e){this.setUpdating(!0),this.setInitialized(!1),this.modelHomeDir=i.substring(0,i.lastIndexOf("/")+1),this.modelSetting=new _.default;var r=this;this.modelSetting.loadModelSetting(i,function(){var t=r.modelHomeDir+r.modelSetting.getModelFile();r.loadModelData(t,function(t){for(var i=0;i<r.modelSetting.getTextureNum();i++){if(/^https?:\\/\\/|^\\/\\//i.test(r.modelSetting.getTextureFile(i)))var o=r.modelSetting.getTextureFile(i);else var o=r.modelHomeDir+r.modelSetting.getTextureFile(i);r.loadTexture(i,o,function(){if(r.isTexLoaded){if(r.modelSetting.getExpressionNum()>0){r.expressions={};for(var t=0;t<r.modelSetting.getExpressionNum();t++){var i=r.modelSetting.getExpressionName(t),o=r.modelHomeDir+r.modelSetting.getExpressionFile(t);r.loadExpression(i,o)}}else r.expressionManager=null,r.expressions={};if(r.eyeBlink,null!=r.modelSetting.getPhysicsFile()?r.loadPhysics(r.modelHomeDir+r.modelSetting.getPhysicsFile()):r.physics=null,null!=r.modelSetting.getPoseFile()?r.loadPose(r.modelHomeDir+r.modelSetting.getPoseFile(),function(){r.pose.updateParam(r.live2DModel)}):r.pose=null,null!=r.modelSetting.getLayout()){var n=r.modelSetting.getLayout();null!=n.width&&r.modelMatrix.setWidth(n.width),null!=n.height&&r.modelMatrix.setHeight(n.height),null!=n.x&&r.modelMatrix.setX(n.x),null!=n.y&&r.modelMatrix.setY(n.y),null!=n.center_x&&r.modelMatrix.centerX(n.center_x),null!=n.center_y&&r.modelMatrix.centerY(n.center_y),null!=n.top&&r.modelMatrix.top(n.top),null!=n.bottom&&r.modelMatrix.bottom(n.bottom),null!=n.left&&r.modelMatrix.left(n.left),null!=n.right&&r.modelMatrix.right(n.right)}if(null!=r.modelSetting.getHitAreasCustom()){var s=r.modelSetting.getHitAreasCustom();null!=s.head_x&&(h.default.hit_areas_custom_head_x=s.head_x),null!=s.head_y&&(h.default.hit_areas_custom_head_y=s.head_y),null!=s.body_x&&(h.default.hit_areas_custom_body_x=s.body_x),null!=s.body_y&&(h.default.hit_areas_custom_body_y=s.body_y)}for(var t=0;t<r.modelSetting.getInitParamNum();t++)r.live2DModel.setParamFloat(r.modelSetting.getInitParamID(t),r.modelSetting.getInitParamValue(t));for(var t=0;t<r.modelSetting.getInitPartsVisibleNum();t++)r.live2DModel.setPartsOpacity(r.modelSetting.getInitPartsVisibleID(t),r.modelSetting.getInitPartsVisibleValue(t));r.live2DModel.saveParam(),r.preloadMotionGroup(h.default.MOTION_GROUP_IDLE),r.preloadMotionGroup(h.default.MOTION_GROUP_SLEEPY),r.mainMotionManager.stopAllMotions(),r.setUpdating(!1),r.setInitialized(!0),"function"==typeof e&&e()}})}})})},o.prototype.release=function(t){var i=n.Live2DFramework.getPlatformManager();t.deleteTexture(i.texture)},o.prototype.preloadMotionGroup=function(t){for(var i=this,e=0;e<this.modelSetting.getMotionNum(t);e++){var r=this.modelSetting.getMotionFile(t,e);this.loadMotion(r,this.modelHomeDir+r,function(r){r.setFadeIn(i.modelSetting.getMotionFadeIn(t,e)),r.setFadeOut(i.modelSetting.getMotionFadeOut(t,e))})}},o.prototype.update=function(){if(null==this.live2DModel)return void(h.default.DEBUG_LOG&&console.error("Failed to update."));var t=UtSystem.getUserTimeMSec()-this.startTimeMSec,i=t/1e3,e=2*i*Math.PI;if(this.mainMotionManager.isFinished()){"1"===sessionStorage.getItem("Sleepy")?this.startRandomMotion(h.default.MOTION_GROUP_SLEEPY,h.default.PRIORITY_SLEEPY):this.startRandomMotion(h.default.MOTION_GROUP_IDLE,h.default.PRIORITY_IDLE)}this.live2DModel.loadParam(),this.mainMotionManager.updateParam(this.live2DModel)||null!=this.eyeBlink&&this.eyeBlink.updateParam(this.live2DModel),this.live2DModel.saveParam(),null==this.expressionManager||null==this.expressions||this.expressionManager.isFinished()||this.expressionManager.updateParam(this.live2DModel),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",30*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",30*this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",this.dragX*this.dragY*-30,1),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",10*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_X",this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_Y",this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",Number(15*Math.sin(e/6.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",Number(8*Math.sin(e/3.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",Number(10*Math.sin(e/5.5345)),.5),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",Number(4*Math.sin(e/15.5345)),.5),this.live2DModel.setParamFloat("PARAM_BREATH",Number(.5+.5*Math.sin(e/3.2345)),1),null!=this.physics&&this.physics.updateParam(this.live2DModel),null==this.lipSync&&this.live2DModel.setParamFloat("PARAM_MOUTH_OPEN_Y",this.lipSyncValue),null!=this.pose&&this.pose.updateParam(this.live2DModel),this.live2DModel.update()},o.prototype.setRandomExpression=function(){var t=[];for(var i in this.expressions)t.push(i);var e=parseInt(Math.random()*t.length);this.setExpression(t[e])},o.prototype.startRandomMotion=function(t,i){var e=this.modelSetting.getMotionNum(t),r=parseInt(Math.random()*e);this.startMotion(t,r,i)},o.prototype.startMotion=function(t,i,e){var r=this.modelSetting.getMotionFile(t,i);if(null==r||""==r)return void(h.default.DEBUG_LOG&&console.error("Failed to motion."));if(e==h.default.PRIORITY_FORCE)this.mainMotionManager.setReservePriority(e);else if(!this.mainMotionManager.reserveMotion(e))return void(h.default.DEBUG_LOG&&console.log("Motion is running."));var o,n=this;null==this.motions[t]?this.loadMotion(null,this.modelHomeDir+r,function(r){o=r,n.setFadeInFadeOut(t,i,e,o)}):(o=this.motions[t],n.setFadeInFadeOut(t,i,e,o))},o.prototype.setFadeInFadeOut=function(t,i,e,r){var o=this.modelSetting.getMotionFile(t,i);if(r.setFadeIn(this.modelSetting.getMotionFadeIn(t,i)),r.setFadeOut(this.modelSetting.getMotionFadeOut(t,i)),h.default.DEBUG_LOG&&console.log("Start motion : "+o),null==this.modelSetting.getMotionSound(t,i))this.mainMotionManager.startMotionPrio(r,e);else{var n=this.modelSetting.getMotionSound(t,i),s=document.createElement("audio");s.src=this.modelHomeDir+n,h.default.DEBUG_LOG&&console.log("Start sound : "+n),s.play(),this.mainMotionManager.startMotionPrio(r,e)}},o.prototype.setExpression=function(t){var i=this.expressions[t];h.default.DEBUG_LOG&&console.log("Expression : "+t),this.expressionManager.startMotion(i,!1)},o.prototype.draw=function(t){$.default.push(),$.default.multMatrix(this.modelMatrix.getArray()),this.tmpMatrix=$.default.getMatrix(),this.live2DModel.setMatrix(this.tmpMatrix),this.live2DModel.draw(),$.default.pop()},o.prototype.hitTest=function(t,i,e){for(var r=this.modelSetting.getHitAreaNum(),o=0;o<r;o++)if(t==this.modelSetting.getHitAreaName(o)){var n=this.modelSetting.getHitAreaID(o);return this.hitTestSimple(n,i,e)}return!1},o.prototype.hitTestCustom=function(t,i,e){return"head"==t?this.hitTestSimpleCustom(h.default.hit_areas_custom_head_x,h.default.hit_areas_custom_head_y,i,e):"body"==t&&this.hitTestSimpleCustom(h.default.hit_areas_custom_body_x,h.default.hit_areas_custom_body_y,i,e)}},function(t,i,e){"use strict";function r(){this.NAME="name",this.ID="id",this.MODEL="model",this.TEXTURES="textures",this.HIT_AREAS="hit_areas",this.PHYSICS="physics",this.POSE="pose",this.EXPRESSIONS="expressions",this.MOTION_GROUPS="motions",this.SOUND="sound",this.FADE_IN="fade_in",this.FADE_OUT="fade_out",this.LAYOUT="layout",this.HIT_AREAS_CUSTOM="hit_areas_custom",this.INIT_PARAM="init_param",this.INIT_PARTS_VISIBLE="init_parts_visible",this.VALUE="val",this.FILE="file",this.json={}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;var o=e(0);r.prototype.loadModelSetting=function(t,i){var e=this;o.Live2DFramework.getPlatformManager().loadBytes(t,function(t){var r=String.fromCharCode.apply(null,new Uint8Array(t));e.json=JSON.parse(r),i()})},r.prototype.getTextureFile=function(t){return null==this.json[this.TEXTURES]||null==this.json[this.TEXTURES][t]?null:this.json[this.TEXTURES][t]},r.prototype.getModelFile=function(){return this.json[this.MODEL]},r.prototype.getTextureNum=function(){return null==this.json[this.TEXTURES]?0:this.json[this.TEXTURES].length},r.prototype.getHitAreaNum=function(){return null==this.json[this.HIT_AREAS]?0:this.json[this.HIT_AREAS].length},r.prototype.getHitAreaID=function(t){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][t]?null:this.json[this.HIT_AREAS][t][this.ID]},r.prototype.getHitAreaName=function(t){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][t]?null:this.json[this.HIT_AREAS][t][this.NAME]},r.prototype.getPhysicsFile=function(){return this.json[this.PHYSICS]},r.prototype.getPoseFile=function(){return this.json[this.POSE]},r.prototype.getExpressionNum=function(){return null==this.json[this.EXPRESSIONS]?0:this.json[this.EXPRESSIONS].length},r.prototype.getExpressionFile=function(t){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][t][this.FILE]},r.prototype.getExpressionName=function(t){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][t][this.NAME]},r.prototype.getLayout=function(){return this.json[this.LAYOUT]},r.prototype.getHitAreasCustom=function(){return this.json[this.HIT_AREAS_CUSTOM]},r.prototype.getInitParamNum=function(){return null==this.json[this.INIT_PARAM]?0:this.json[this.INIT_PARAM].length},r.prototype.getMotionNum=function(t){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]?0:this.json[this.MOTION_GROUPS][t].length},r.prototype.getMotionFile=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]?null:this.json[this.MOTION_GROUPS][t][i][this.FILE]},r.prototype.getMotionSound=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]||null==this.json[this.MOTION_GROUPS][t][i][this.SOUND]?null:this.json[this.MOTION_GROUPS][t][i][this.SOUND]},r.prototype.getMotionFadeIn=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]||null==this.json[this.MOTION_GROUPS][t][i][this.FADE_IN]?1e3:this.json[this.MOTION_GROUPS][t][i][this.FADE_IN]},r.prototype.getMotionFadeOut=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]||null==this.json[this.MOTION_GROUPS][t][i][this.FADE_OUT]?1e3:this.json[this.MOTION_GROUPS][t][i][this.FADE_OUT]},r.prototype.getInitParamID=function(t){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][t]?null:this.json[this.INIT_PARAM][t][this.ID]},r.prototype.getInitParamValue=function(t){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][t]?NaN:this.json[this.INIT_PARAM][t][this.VALUE]},r.prototype.getInitPartsVisibleNum=function(){return null==this.json[this.INIT_PARTS_VISIBLE]?0:this.json[this.INIT_PARTS_VISIBLE].length},r.prototype.getInitPartsVisibleID=function(t){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][t]?null:this.json[this.INIT_PARTS_VISIBLE][t][this.ID]},r.prototype.getInitPartsVisibleValue=function(t){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][t]?NaN:this.json[this.INIT_PARTS_VISIBLE][t][this.VALUE]}}]);
`;const Cw={name:"KanBanNiang",data(){return{isLoaded:!0,displayBanNiang:!1,isShowMessageBox:!1,isShowBtns:!1,messages:{message:"\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2",welcome:"\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2",home:"\u5FC3\u91CC\u7684\u82B1\uFF0C\u6211\u60F3\u8981\u5E26\u4F60\u56DE\u5BB6\u3002",theme:"\u597D\u5427\uFF0C\u5E0C\u671B\u4F60\u80FD\u559C\u6B22\u6211\u7684\u5176\u4ED6\u5C0F\u4F19\u4F34\u3002",close:"\u4F60\u77E5\u9053\u6211\u559C\u6B22\u5403\u4EC0\u4E48\u5417\uFF1F\u75F4\u75F4\u5730\u671B\u7740\u4F60\u3002",info:"\u60F3\u77E5\u9053\u5173\u4E8E\u6211\u7684\u66F4\u591A\u4FE1\u606F\u5417\uFF1F"},currentTheme:["blackCat","whiteCat","haru1","haru2","haruto","koharu","izumi","shizuku","wanko","miku","z16"][0],myTheme:["blackCat","whiteCat","haru1","haru2","haruto","koharu","izumi","shizuku","wanko","miku","z16"],themeName:["blackCat","whiteCat","haru1","haru2","haruto","koharu","izumi","shizuku","wanko","miku","z16"],model:{blackCat:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-hijiki/assets/hijiki.model.json",whiteCat:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-tororo/assets/tororo.model.json",haru1:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-haru/01/assets/haru01.model.json",haru2:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-haru/02/assets/haru02.model.json",haruto:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-haruto/assets/haruto.model.json",koharu:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-koharu/assets/koharu.model.json",izumi:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-izumi/assets/izumi.model.json",shizuku:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-shizuku/assets/shizuku.model.json",wanko:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-wanko/assets/wanko.model.json",miku:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-miku/assets/miku.model.json",z16:"https://cdn.staticaly.com/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-z16/assets/z16.model.json"},style:{width:250,height:320},modelStyle:{right:"90px",bottom:"-20px",opacity:"0.9"},messageStyle:{right:"68px",bottom:"290px"},btnStyle:{right:"90px",bottom:"40px"}}},mounted(){this.btnStyle={...this.btnStyle,height:this.myTheme.length>1?"120px":"100px"},this.initBanNiang()},methods:{hoverGoHome(){this.messages.message=this.messages.home},hoverChangeTheme(){this.messages.message=this.messages.theme},hoverMoreInfo(){this.messages.message=this.messages.info},hoverCloseBanNiang(){this.messages.message=this.messages.close},resetMessage(){this.messages.message=this.messages.welcome},goHome(){this.$route.path!=="/"&&this.$router.push("/")},changeTheme(){const n=[];for(var s=0;s<this.myTheme.length;s++)this.myTheme[s]!=this.currentTheme&&n.push(this.myTheme[s]);const a=Math.floor(Math.random()*(this.myTheme.length-1));this.currentTheme=n[a],this.initBanNiang()},closeBanNiang(){this.isLoaded=!1,this.displayBanNiang=!0},showBanNiang(){this.isLoaded=!0,this.displayBanNiang=!1,this.initBanNiang()},initBanNiang(){if(this.themeName.indexOf(this.currentTheme)===-1){console.log("@vuepress-reco/vuepress-plugin-kan-ban-niang\u4E0D\u652F\u6301\u4E3B\u9898"+this.currentTheme+", \u8BF7\u68C0\u67E5\u4E3B\u9898\u540D, \u6216\u524D\u5F80https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html \u67E5\u770B\u652F\u6301\u7684\u4E3B\u9898"),document.querySelector(".kanbanniang").style.display="none";return}if(!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return this.isLoaded=!1,console.log("mobile do not load model");if(!window.loadlive2d){const a=document.createElement("script");a.innerHTML=$w,document.body.appendChild(a)}var s=new XMLHttpRequest;s.open("get",this.model[this.currentTheme]),s.send(),s.onreadystatechange=function(){s.status!==200&&(console.log("\u770B\u677F\u5A18\u7684CDN\u8D44\u6E90\u52A0\u8F7D\u5931\u8D25\u4E86\uFF0C\u8BF7\u7A0D\u540E\u5237\u65B0\u9875\u9762\u91CD\u8BD5\uFF01"),document.querySelector(".kanbanniang").style.display="none")},window.loadlive2d("banniang",this.model[this.currentTheme])}}},Ew=n=>(Ke("data-v-482d4629"),n=n(),Qe(),n),Tw={class:"kanbanniang"},Pw={class:"banniang-container"},Iw=Ew(()=>V("i",{class:"kbnfont kbn-ban-message message"},null,-1)),Ow={target:"_blank",href:"https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork"},Aw=["width","height"];function Lw(n,s,a,e,t,o){return J(),sn("div",Tw,[qn(V("div",Pw,[qn(V("div",{class:"messageBox",style:ks(t.messageStyle)},Ln(t.messages.message||"\u6B22\u8FCE\u6765\u5230 "+n.$site.title),5),[[Jn,t.isShowMessageBox]]),qn(V("div",{style:ks(t.btnStyle),class:"operation",onMouseenter:s[11]||(s[11]=i=>t.isShowMessageBox=!0),onMouseleave:s[12]||(s[12]=i=>t.isShowMessageBox=!1)},[V("i",{class:"kbnfont kbn-ban-home ban-home",onClick:s[0]||(s[0]=(...i)=>o.goHome&&o.goHome(...i)),onMouseenter:s[1]||(s[1]=(...i)=>o.hoverGoHome&&o.hoverGoHome(...i)),onMouseleave:s[2]||(s[2]=(...i)=>o.resetMessage&&o.resetMessage(...i))},null,32),Iw,V("i",{class:"kbnfont kbn-ban-close close",onClick:s[3]||(s[3]=(...i)=>o.closeBanNiang&&o.closeBanNiang(...i)),onMouseenter:s[4]||(s[4]=(...i)=>o.hoverCloseBanNiang&&o.hoverCloseBanNiang(...i)),onMouseleave:s[5]||(s[5]=(...i)=>o.resetMessage&&o.resetMessage(...i))},null,32),V("a",Ow,[V("i",{class:"kbnfont kbn-ban-info info",onMouseenter:s[6]||(s[6]=(...i)=>o.hoverMoreInfo&&o.hoverMoreInfo(...i)),onMouseleave:s[7]||(s[7]=(...i)=>o.resetMessage&&o.resetMessage(...i))},null,32)]),qn(V("i",{class:"kbnfont kbn-ban-theme skin",onClick:s[8]||(s[8]=(...i)=>o.changeTheme&&o.changeTheme(...i)),onMouseenter:s[9]||(s[9]=(...i)=>o.hoverChangeTheme&&o.hoverChangeTheme(...i)),onMouseleave:s[10]||(s[10]=(...i)=>o.resetMessage&&o.resetMessage(...i))},null,544),[[Jn,t.myTheme.length>1]])],36),[[Jn,!t.isShowBtns]]),V("canvas",{id:"banniang",style:ks(t.modelStyle),width:t.style.width,height:t.style.height,class:"live2d"},null,12,Aw)],512),[[Jn,t.isLoaded]]),qn(V("div",{class:"showBanNiang",onClick:s[13]||(s[13]=(...i)=>o.showBanNiang&&o.showBanNiang(...i))},"\u770B\u677F\u5A18",512),[[Jn,t.displayBanNiang]])])}var Jo=as(Cw,[["render",Lw],["__scopeId","data-v-482d4629"],["__file","KanBanNiang.vue"]]),Dw=Yn({enhance({app:n}){n.component(Jo.name,Jo)},rootComponents:[Jo]});const Mw={name:"Ribbon",data(){return{canvas:null,ctx:null,angle:0,resizeTimeout:null,visible:!1,config:{size:120,opacity:.3,zIndex:-1}}},mounted(){},methods:{draw(n){const s=this.ctx,a=this.config.size,e=n[0],t=n[1],o={x:t.x+this.rand(-.25,1.75)*a,y:this.nextY(t.y)};s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.lineTo(o.x,o.y),s.closePath(),s.fillStyle=this.nextColor(),s.fill(),n[0]=t,n[1]=o},getCanvas(){const n=document.getElementById("Ribbon");return n.width=window.innerWidth,n.height=window.innerHeight,this.setStyle(n),n},redraw(){const n=this.canvas.width,s=this.canvas.height,a=this.config.size,e=[{x:0,y:s*.7+a},{x:0,y:s*.7-a}];for(this.ctx.clearRect(0,0,n,s);e[1].x<n+a;)this.draw(e)},nextY(n){this.canvas.width;const s=this.canvas.height,a=this.config.size,e=n+this.rand(-1.1,.9)*a;return e>s||e<0?this.nextY(n):e},setStyle(n){const s=n.style;s.opacity=this.config.opacity,s.position="fixed",s.top=0,s.left=0,s.zIndex=this.config.zIndex,s.width=n.width,s.height=n.height,s.pointerEvents="none"},rand(n,s){return Math.random()*(s-n)+n},nextColor(){const n=Math.PI*2;return this.angle+=n*.02,this.angle%=n,"#"+(Math.cos(this.angle)*127+128<<16|Math.cos(this.angle+n/3)*127+128<<8|Math.cos(this.angle+n/3*2)*127+128).toString(16).padStart(6,"0")},isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},handleResize(){this.resizeTimeout!=null&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.redraw()},500)}}},jw={key:0,id:"Ribbon"};function Rw(n,s,a,e,t,o){return t.visible?(J(),sn("canvas",jw)):Tn("",!0)}var Ko=as(Mw,[["render",Rw],["__file","Ribbon.vue"]]);function Fw(n){var s=window,a=document.body,e=document.documentElement,t=function(){if(arguments.length===1){if(Array.isArray(arguments[0])){var l=Math.round(t(0,arguments[0].length-1));return arguments[0][l]}return t(0,arguments[0])}else if(arguments.length===2)return Math.random()*(arguments[1]-arguments[0])+arguments[0];return 0},o=function(l){var c=Math.max(0,s.innerWidth||e.clientWidth||a.clientWidth||0),r=Math.max(0,s.innerHeight||e.clientHeight||a.clientHeight||0),k=Math.max(0,s.pageXOffset||e.scrollLeft||a.scrollLeft||0)-(e.clientLeft||0),d=Math.max(0,s.pageYOffset||e.scrollTop||a.scrollTop||0)-(e.clientTop||0);return{width:c,height:r,ratio:c/r,centerx:c/2,centery:r/2,scrollx:k,scrolly:d}},i=function(l,c){this.x=0,this.y=0,this.set(l,c)};i.prototype={constructor:i,set:function(l,c){this.x=l||0,this.y=c||0},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},multiply:function(l,c){return this.x*=l||1,this.y*=c||1,this},divide:function(l,c){return this.x/=l||1,this.y/=c||1,this},add:function(l,c){return this.x+=l||0,this.y+=c||0,this},subtract:function(l,c){return this.x-=l||0,this.y-=c||0,this},clampX:function(l,c){return this.x=Math.max(l,Math.min(this.x,c)),this},clampY:function(l,c){return this.y=Math.max(l,Math.min(this.y,c)),this},flipX:function(){return this.x*=-1,this},flipY:function(){return this.y*=-1,this}};var p=function(l){this._canvas=null,this._context=null,this._sto=null,this._width=0,this._height=0,this._scroll=0,this._ribbons=[],this._options={colorSaturation:"80%",colorBrightness:"60%",colorAlpha:.65,colorCycleSpeed:6,verticalPosition:"random",horizontalSpeed:200,ribbonCount:5,strokeSize:0,parallaxAmount:-.5,animateSections:!0},this._onDraw=this._onDraw.bind(this),this._onResize=this._onResize.bind(this),this._onScroll=this._onScroll.bind(this),this.setOptions(l),this.init()};return p.prototype={constructor:p,setOptions:function(l){if(typeof l=="object")for(var c in l)Object.prototype.hasOwnProperty.call(l,"key")&&(this._options[c]=l[c])},init:function(){try{this._canvas=document.createElement("canvas"),this._canvas.style.display="block",this._canvas.style.position="fixed",this._canvas.style.margin="0",this._canvas.style.padding="0",this._canvas.style.border="0",this._canvas.style.outline="0",this._canvas.style.left="0",this._canvas.style.top="0",this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.style["z-index"]="-1",this._canvas.style["background-color"]="rgba(223, 223, 223, 0.3)",this._canvas.id="bgCanvas",this._onResize(),this._context=this._canvas.getContext("2d"),this._context.clearRect(0,0,this._width,this._height),this._context.globalAlpha=this._options.colorAlpha,window.addEventListener("resize",this._onResize),window.addEventListener("scroll",this._onScroll),document.body.appendChild(this._canvas)}catch(l){console.warn("Canvas Context Error: "+l.toString());return}this._onDraw()},addRibbon:function(){var l=Math.round(t(1,9))>5?"right":"left",c=1e3,r=200,k=0-r,d=this._width+r,u=0,m=0,v=l==="right"?k:d,b=Math.round(t(0,this._height));/^(top|min)$/i.test(this._options.verticalPosition)?b=0+r:/^(middle|center)$/i.test(this._options.verticalPosition)?b=this._height/2:/^(bottom|max)$/i.test(this._options.verticalPosition)&&(b=this._height-r);for(var h=[],g=new i(v,b),_=new i(v,b),y=null,x=Math.round(t(0,360)),O=0;!(c<=0);){if(c--,u=Math.round((Math.random()*1-.2)*this._options.horizontalSpeed),m=Math.round((Math.random()*1-.5)*(this._height*.25)),y=new i,y.copy(_),l==="right"){if(y.add(u,m),_.x>=d)break}else if(l==="left"&&(y.subtract(u,m),_.x<=k))break;h.push({point1:new i(g.x,g.y),point2:new i(_.x,_.y),point3:y,color:x,delay:O,dir:l,alpha:0,phase:0}),g.copy(_),_.copy(y),O+=4,x+=this._options.colorCycleSpeed}this._ribbons.push(h)},_drawRibbonSection:function(l){if(l){if(l.phase>=1&&l.alpha<=0)return!0;if(l.delay<=0){if(l.phase+=.02,l.alpha=Math.sin(l.phase)*1,l.alpha=l.alpha<=0?0:l.alpha,l.alpha=l.alpha>=1?1:l.alpha,this._options.animateSections){var c=Math.sin(1+l.phase*Math.PI/2)*.1;l.dir==="right"?(l.point1.add(c,0),l.point2.add(c,0),l.point3.add(c,0)):(l.point1.subtract(c,0),l.point2.subtract(c,0),l.point3.subtract(c,0)),l.point1.add(0,c),l.point2.add(0,c),l.point3.add(0,c)}}else l.delay-=.5;var r=this._options.colorSaturation,k=this._options.colorBrightness,d="hsla("+l.color+", "+r+", "+k+", "+l.alpha+" )";this._context.save(),this._options.parallaxAmount!==0&&this._context.translate(0,this._scroll*this._options.parallaxAmount),this._context.beginPath(),this._context.moveTo(l.point1.x,l.point1.y),this._context.lineTo(l.point2.x,l.point2.y),this._context.lineTo(l.point3.x,l.point3.y),this._context.fillStyle=d,this._context.fill(),this._options.strokeSize>0&&(this._context.lineWidth=this._options.strokeSize,this._context.strokeStyle=d,this._context.lineCap="round",this._context.stroke()),this._context.restore()}return!1},_onDraw:function(){for(var l=0,c=this._ribbons.length;l<c;++l)this._ribbons[l]||this._ribbons.splice(l,1);this._context.clearRect(0,0,this._width,this._height);for(var r=0;r<this._ribbons.length;++r){for(var k=this._ribbons[r],d=k.length,u=0,m=0;m<d;++m)this._drawRibbonSection(k[m])&&u++;u>=d&&(this._ribbons[r]=null)}this._ribbons.length<this._options.ribbonCount&&this.addRibbon(),requestAnimationFrame(this._onDraw)},_onResize:function(l){var c=o();this._width=c.width,this._height=c.height,this._canvas&&(this._canvas.width=this._width,this._canvas.height=this._height,this._context&&(this._context.globalAlpha=this._options.colorAlpha))},_onScroll:function(l){var c=o();this._scroll=c.scrolly}},new p(n)}const Bw={name:"RibbonAnimation",data(){return{RIBBON_OPTION:{colorSaturation:"80%",colorBrightness:"60%",colorAlpha:.65,colorCycleSpeed:6,verticalPosition:"max",horizontalSpeed:200,ribbonCount:3,strokeSize:0,parallaxAmount:-.5,animateSections:!0},visible:!0}},mounted(){Fw(this.RIBBON_OPTION)}},Nw={key:0,class:"RibbonAnimation"};function zw(n,s,a,e,t,o){return t.visible?(J(),sn("div",Nw)):Tn("",!0)}var Qo=as(Bw,[["render",zw],["__file","RibbonAnimation.vue"]]),Hw=Yn({enhance({app:n}){n.component(Ko.name,Ko),n.component(Qo.name,Qo)},rootComponents:[Ko,Qo]});class Gw{constructor(s,a,e,t,o,i,p){this.x=s,this.y=a,this.s=e,this.r=t,this.fn=o,this.that=i,this.img=p}draw(s){s.save(),40*this.s/4,s.translate(this.x,this.y),s.rotate(this.r),s.drawImage(this.img,0,0,40*this.s,40*this.s),s.restore()}update(){this.x=this.fn.x(this.x,this.y),this.y=this.fn.y(this.y,this.y),this.r=this.fn.r(this.r),(this.x>window.innerWidth||this.x<0||this.y>window.innerHeight||this.y<0)&&(this.r=this.that.getRandom("fnr"),Math.random()>.4?(this.x=this.that.getRandom("x"),this.y=0,this.s=this.that.getRandom("s"),this.r=this.that.getRandom("r")):(this.x=window.innerWidth,this.y=this.that.getRandom("y"),this.s=this.that.getRandom("s"),this.r=this.that.getRandom("r")))}}class Vw{constructor(){this.list=[]}push(s){this.list.push(s)}update(){for(var s=0,a=this.list.length;s<a;s++)this.list[s].update()}draw(s){for(var a=0,e=this.list.length;a<e;a++)this.list[a].draw(s)}get(s){return this.list[s]}size(){return this.list.length}}const Uw={name:"Sakura",data(){return{staticx:!1,stop:null,num:20,show:!0,zIndex:1}},mounted(){this.$nextTick(()=>{this.show&&this.startSakura()})},methods:{getRandom(n){var s,a;switch(n){case"x":s=Math.random()*window.innerWidth;break;case"y":s=Math.random()*window.innerHeight;break;case"s":s=Math.random();break;case"r":s=Math.random()*6;break;case"fnx":a=-.5+Math.random()*1,s=function(e,t){return e+.5*a-1.7};break;case"fny":a=1.5+Math.random()*.7,s=function(e,t){return t+a};break;case"fnr":a=Math.random()*.03,s=function(e){return e+a};break}return s},startSakura(){let n=this;requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;var s=document.getElementById("canvas_sakura");this.staticx=!0,this.$refs.canvas_sakura.width=window.innerWidth,this.$refs.canvas_sakura.height=window.innerHeight;var a=this.$refs.canvas_sakura.getContext("2d"),e=new Vw;const t=new Image;t.src="/blog-docs/images/blue.png";for(var o=0;o<n.num;o++){let i,p,l,c,r,k,d,u;p=this.getRandom("x"),l=this.getRandom("y"),r=this.getRandom("r"),c=this.getRandom("s"),k=this.getRandom("fnx"),d=this.getRandom("fny"),u=this.getRandom("fnr"),i=new Gw(p,l,c,r,{x:k,y:d,r:u},this,t),i.draw(a),e.push(i)}this.stop=requestAnimationFrame(function i(){a.clearRect(0,0,s.width,s.height),e.update(),e.draw(a),n.stop=requestAnimationFrame(i)})},stopp(){if(this.staticx){var n=document.getElementById("canvas_sakura");n.parentNode.removeChild(n),window.cancelAnimationFrame(this.stop),this.staticx=!1}else this.startSakura()}}},qw={class:"Sakura"};function Ww(n,s,a,e,t,o){return J(),sn("div",qw,[V("canvas",{id:"canvas_sakura",ref:"canvas_sakura",style:ks({zIndex:t.zIndex})},null,4)])}var hr=as(Uw,[["render",Ww],["__scopeId","data-v-4bd5e2a2"],["__file","Sakura.vue"]]),Yw=Yn({enhance({app:n}){n.component("sakura",hr)},rootComponents:[hr]});const Zo={useBabel:!1,jsLib:[],cssLib:[],codepenLayout:"left",codepenEditors:"101",babel:"https://unpkg.com/@babel/standalone/babel.min.js",vue:"https://unpkg.com/vue/dist/vue.global.prod.js",react:"https://unpkg.com/react/umd/react.production.min.js",reactDOM:"https://unpkg.com/react-dom/umd/react-dom.production.min.js"},gr={html:{types:["html","slim","haml","md","markdown","vue"],map:{html:"none",vue:"none",md:"markdown"}},js:{types:["js","javascript","coffee","coffeescript","ts","typescript","ls","livescript"],map:{js:"none",javascript:"none",coffee:"coffeescript",ls:"livescript",ts:"typescript"}},css:{types:["css","less","sass","scss","stylus","styl"],map:{css:"none",styl:"stylus"}}},ni=n=>({...Zo,...n,jsLib:Array.from(new Set([...Zo.jsLib||[],...n.jsLib||[]])),cssLib:Array.from(new Set([...Zo.cssLib||[],...n.cssLib||[]]))}),La=(n,s)=>{if(n[s]!==void 0)return n[s];const a=new Promise(e=>{var o;const t=document.createElement("script");t.src=s,(o=document.querySelector("body"))==null||o.appendChild(t),t.onload=()=>{e()}});return n[s]=a,a},Xw=(n,s)=>{if(s.css&&Array.from(n.childNodes).every(a=>a.nodeName!=="STYLE")){const a=((e,t,o)=>{const i=document.createElement(e);return t&&Object.keys(t).forEach(p=>{if(p.indexOf("data"))i[p]=t[p];else{const l=p.replace("data","");i.dataset[l]=t[p]}}),o&&o.forEach(p=>{i.appendChild(p)}),i})("style",{innerHTML:s.css});n.appendChild(a)}},_k=n=>n.replace(/<br \/>/g,"<br>").replace(/<((\S+)[^<]*?)\s+\/>/g,"<$1></$2>"),br=n=>`<div id="app">
${_k(n)}
</div>`,Jw=n=>`${n.replace("export default ","const $reactApp = ").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,"")};
ReactDOM.createRoot(document.getElementById("app")).render(React.createElement($reactApp))`,Kw=n=>n.replace(/export\s+default\s*\{(\n*[\s\S]*)\n*\}\s*;?$/u,"Vue.createApp({$1}).mount('#app')").replace(/export\s+default\s*define(Async)?Component\s*\(\s*\{(\n*[\s\S]*)\n*\}\s*\)\s*;?$/u,"Vue.createApp({$1}).mount('#app')").trim(),fr=n=>`(function(exports){var module={};module.exports=exports;${n};return module.exports.__esModule?module.exports.default:module.exports;})({})`;Yi({},{mode:"external",external:{base:"https://sfc.vuejs.org/",defaultImportsMap:"import-map.json"},internal:{defaultImportsMap:"import-map.json",autoResize:!0,showCode:!1,showCompileOutput:!1,showImportMap:!0,clearConsole:!1}},{});const Da={};var Qw=jn({name:"CodeDemo",props:{id:{type:String,required:!0},type:{type:String,default:"normal"},title:{type:String,default:""},config:{type:String,default:""},code:{type:String,required:!0}},setup(n,{slots:s}){const a=an(!1),e=an(null),t=an(null),o=an("0"),i=an(!1),p=vn(()=>JSON.parse(decodeURIComponent(n.config||"{}"))),l=vn(()=>(u=>{const m=Object.keys(u),v={html:[],js:[],css:[],isLegal:!1};return["html","js","css"].forEach(b=>{const h=m.filter(g=>gr[b].types.includes(g));if(h.length){const g=h[0];v[b]=[u[g].replace(/^\n|\n$/g,""),gr[b].map[g]||g]}}),v.isLegal=!(v.html.length&&v.html[1]!=="none"||v.js.length&&v.js[1]!=="none"||v.css.length&&v.css[1]!=="none"),v})(JSON.parse(decodeURIComponent(n.code||"{}")))),c=vn(()=>n.type==="react"?((u,m)=>{const v=ni(m);return{...v,html:br(""),js:Jw(u.js[0]||""),css:u.css[0]||(u.js[0]?u.js[0].replace(/App\.__style__(?:\s*)=(?:\s*)`([\s\S]*)?`/,"$1").trim():""),isLegal:u.isLegal,jsLib:[v.react,v.reactDOM,...v.jsLib],jsx:!0,getScript:()=>{var h,g;const b=((g=(h=window.Babel)==null?void 0:h.transform(u.js[0]||"",{presets:["es2015","react"]}))==null?void 0:g.code)||"";return`window.ReactDOM.createRoot(document.firstElementChild).render(window.React.createElement(${fr(b)}))`}}})(l.value,p.value):n.type==="vue"?((u,m)=>{const v=ni(m),b=u.html[0]||"",h=/<template>([\s\S]+)<\/template>/u.exec(b),g=/<script(\s*lang=(['"])(.*?)\2)?>([\s\S]+)<\/script>/u.exec(b),_=/<style(\s*lang=(['"])(.*?)\2)?\s*(?:scoped)?>([\s\S]+)<\/style>/u.exec(b),y=h?h[1].replace(/^\n|\n$/g,""):"",[x="",O=""]=g?[g[4].replace(/^\n|\n$/g,""),g[3]]:[],[I="",w=""]=_?[_[4].replace(/^\n|\n$/g,""),_[3]]:[],G=O===""&&(w===""||w==="css");return{...v,html:br(y),js:Kw(x),css:I,isLegal:G,jsLib:[v.vue,...v.jsLib],getScript:()=>{var D,C;const U=m.useBabel?((C=(D=window.Babel)==null?void 0:D.transform(x,{presets:["es2015"]}))==null?void 0:C.code)||"":x.replace(/export\s+default/u,"return");return`const app=window.document.createElement('div');document.firstElementChild.appendChild(app);const appOptions=${fr(U)};appOptions.template=\`${y.replace("`",'\\`"')}\`;window.Vue.createApp(appOptions).mount(app);`}}})(l.value,p.value):((u,m)=>{const v=ni(m),b=u.js[0]||"";return{...v,html:_k(u.html[0]||""),js:b,css:u.css[0]||"",isLegal:u.isLegal,getScript:()=>{var h;return v.useBabel?((h=window.Babel.transform(b,{presets:["es2015"]}))==null?void 0:h.code)||"":b}}})(l.value,p.value)),r=vn(()=>c.value.isLegal),k=(u=!1)=>{const m=e.value.attachShadow({mode:"open"}),v=document.createElement("div");v.classList.add("code-demo-app"),m.appendChild(v),r.value?(u&&(v.innerHTML=c.value.html),Xw(m,c.value),((b,h,g)=>{const _=g.getScript();if(_&&Array.from(h.childNodes).every(y=>y.nodeName!=="SCRIPT")){const y=document.createElement("script");y.appendChild(document.createTextNode(`{const document=window.document.querySelector('#${b} .code-demo-container').shadowRoot;
${_}}`)),h.appendChild(y)}})(n.id,m,c.value),o.value="0"):o.value="auto",i.value=!0},d=()=>{switch(n.type){case"react":return(u=>Promise.all([La(Da,u.babel),La(Da,u.react),La(Da,u.reactDOM)]))(c.value).then(()=>k());case"vue":return(u=>{const m=[La(Da,u.vue)];return u.useBabel&&m.push(La(Da,u.babel)),Promise.all(m)})(c.value).then(()=>k());default:return(u=>u.useBabel?La(Da,u.babel):Promise.resolve())(c.value).then(()=>k(!0))}};return Qn(()=>{setTimeout(()=>{d()},500)}),()=>{var u;return Z("div",{class:"code-demo-wrapper",id:n.id},[i.value?null:Z("div",{class:["loading"],innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" class="loading-icon" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/></circle></svg>'}),Z("div",{class:"code-demo-header"},[c.value.isLegal?Z("button",{class:["toggle-button",a.value?"down":"right"],onClick:()=>{o.value=a.value?"0":`${t.value.clientHeight+13.8}px`,a.value=!a.value}}):null,n.title?Z("span",{class:"title"},decodeURIComponent(n.title)):null,c.value.isLegal&&c.value.jsfiddle!==!1?Z("form",{class:"code-demo-jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[Z("input",{type:"hidden",name:"html",value:c.value.html}),Z("input",{type:"hidden",name:"js",value:c.value.js}),Z("input",{type:"hidden",name:"css",value:c.value.css}),Z("input",{type:"hidden",name:"wrap",value:"1"}),Z("input",{type:"hidden",name:"panel_js",value:"3"}),Z("input",{type:"hidden",name:"resources",value:[...c.value.cssLib,...c.value.jsLib].join(",")}),Z("button",{type:"submit",class:"jsfiddle-button",innerHTML:'<svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg" width="228.516" height="200"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg>',"aria-label":"JSFiddle","data-balloon-pos":"up"})]):null,c.value.isLegal&&c.value.codepen===!1?null:Z("form",{class:"code-demo-codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[Z("input",{type:"hidden",name:"data",value:JSON.stringify({html:c.value.html,js:c.value.js,css:c.value.css,js_external:c.value.jsLib.join(";"),css_external:c.value.cssLib.join(";"),layout:c.value.codepenLayout,html_pre_processor:l.value?l.value.html[1]:"none",js_pre_processor:l.value?l.value.js[1]:c.value.jsx?"babel":"none",css_pre_processor:l.value?l.value.css[1]:"none",editors:c.value.codepenEditors})}),Z("button",{type:"submit",innerHTML:'<svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg>',class:"codepen-button","aria-label":"Codepen","data-balloon-pos":"up"})])]),Z("div",{ref:e,class:"code-demo-container",style:{display:r.value&&i.value?"block":"none"}}),Z("div",{class:"code-demo-code-wrapper",style:{height:o.value}},Z("div",{ref:t,class:"code-demo-codes"},(u=s.default)==null?void 0:u.call(s)))])}}});var Zw=Yn({enhance:({app:n})=>{n.component("CodeDemo",Qw)}}),ma,Et,Pe=typeof Map=="function"?new Map:(ma=[],Et=[],{has:function(n){return ma.indexOf(n)>-1},get:function(n){return Et[ma.indexOf(n)]},set:function(n,s){ma.indexOf(n)===-1&&(ma.push(n),Et.push(s))},delete:function(n){var s=ma.indexOf(n);s>-1&&(ma.splice(s,1),Et.splice(s,1))}}),wk=function(n){return new Event(n,{bubbles:!0})};try{new Event("test")}catch{wk=function(s){var a=document.createEvent("Event");return a.initEvent(s,!0,!1),a}}function n0(n){var s=Pe.get(n);s&&s.destroy()}function s0(n){var s=Pe.get(n);s&&s.update()}var fe=null;typeof window=="undefined"||typeof window.getComputedStyle!="function"?((fe=function(n){return n}).destroy=function(n){return n},fe.update=function(n){return n}):((fe=function(n,s){return n&&Array.prototype.forEach.call(n.length?n:[n],function(a){return function(e){if(e&&e.nodeName&&e.nodeName==="TEXTAREA"&&!Pe.has(e)){var t,o=null,i=null,p=null,l=function(){e.clientWidth!==i&&d()},c=function(u){window.removeEventListener("resize",l,!1),e.removeEventListener("input",d,!1),e.removeEventListener("keyup",d,!1),e.removeEventListener("autosize:destroy",c,!1),e.removeEventListener("autosize:update",d,!1),Object.keys(u).forEach(function(m){e.style[m]=u[m]}),Pe.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",d,!1),window.addEventListener("resize",l,!1),e.addEventListener("input",d,!1),e.addEventListener("autosize:update",d,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",Pe.set(e,{destroy:c,update:d}),(t=window.getComputedStyle(e,null)).resize==="vertical"?e.style.resize="none":t.resize==="both"&&(e.style.resize="horizontal"),o=t.boxSizing==="content-box"?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(o)&&(o=0),d()}function r(u){var m=e.style.width;e.style.width="0px",e.style.width=m,e.style.overflowY=u}function k(){if(e.scrollHeight!==0){var u=function(v){for(var b=[];v&&v.parentNode&&v.parentNode instanceof Element;)v.parentNode.scrollTop&&b.push({node:v.parentNode,scrollTop:v.parentNode.scrollTop}),v=v.parentNode;return b}(e),m=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+o+"px",i=e.clientWidth,u.forEach(function(v){v.node.scrollTop=v.scrollTop}),m&&(document.documentElement.scrollTop=m)}}function d(){k();var u=Math.round(parseFloat(e.style.height)),m=window.getComputedStyle(e,null),v=m.boxSizing==="content-box"?Math.round(parseFloat(m.height)):e.offsetHeight;if(v<u?m.overflowY==="hidden"&&(r("scroll"),k(),v=m.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):m.overflowY!=="hidden"&&(r("hidden"),k(),v=m.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),p!==v){p=v;var b=wk("autosize:resized");try{e.dispatchEvent(b)}catch{}}}}(a)}),n}).destroy=function(n){return n&&Array.prototype.forEach.call(n.length?n:[n],n0),n},fe.update=function(n){return n&&Array.prototype.forEach.call(n.length?n:[n],s0),n});var yr=fe;function Sk(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let te=Sk();function a0(n){te=n}const e0=/[&<>"']/,t0=/[&<>"']/g,o0=/[<>"']|&(?!#?\w+;)/,i0=/[<>"']|&(?!#?\w+;)/g,p0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_r=n=>p0[n];function ss(n,s){if(s){if(e0.test(n))return n.replace(t0,_r)}else if(o0.test(n))return n.replace(i0,_r);return n}const l0=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function xk(n){return n.replace(l0,(s,a)=>(a=a.toLowerCase(),a==="colon"?":":a.charAt(0)==="#"?a.charAt(1)==="x"?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):""))}const c0=/(^|[^\[])\^/g;function Gn(n,s){n=typeof n=="string"?n:n.source,s=s||"";const a={replace:(e,t)=>(t=t.source||t,t=t.replace(c0,"$1"),n=n.replace(e,t),a),getRegex:()=>new RegExp(n,s)};return a}const r0=/[^\w:]/g,u0=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function wr(n,s,a){if(n){let e;try{e=decodeURIComponent(xk(a)).replace(r0,"").toLowerCase()}catch{return null}if(e.indexOf("javascript:")===0||e.indexOf("vbscript:")===0||e.indexOf("data:")===0)return null}s&&!u0.test(a)&&(a=v0(s,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}const Tt={},d0=/^[^:]+:\/*[^/]*$/,k0=/^([^:]+:)[\s\S]*$/,m0=/^([^:]+:\/*[^/]*)[\s\S]*$/;function v0(n,s){Tt[" "+n]||(d0.test(n)?Tt[" "+n]=n+"/":Tt[" "+n]=Rt(n,"/",!0)),n=Tt[" "+n];const a=n.indexOf(":")===-1;return s.substring(0,2)==="//"?a?s:n.replace(k0,"$1")+s:s.charAt(0)==="/"?a?s:n.replace(m0,"$1")+s:n+s}const to={exec:function(){}};function Cs(n){let s=1,a,e;for(;s<arguments.length;s++){a=arguments[s];for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n}function Sr(n,s){const a=n.replace(/\|/g,(o,i,p)=>{let l=!1,c=i;for(;--c>=0&&p[c]==="\\";)l=!l;return l?"|":" |"}),e=a.split(/ \|/);let t=0;if(e[0].trim()||e.shift(),e.length>0&&!e[e.length-1].trim()&&e.pop(),e.length>s)e.splice(s);else for(;e.length<s;)e.push("");for(;t<e.length;t++)e[t]=e[t].trim().replace(/\\\|/g,"|");return e}function Rt(n,s,a){const e=n.length;if(e===0)return"";let t=0;for(;t<e;){const o=n.charAt(e-t-1);if(o===s&&!a)t++;else if(o!==s&&a)t++;else break}return n.slice(0,e-t)}function h0(n,s){if(n.indexOf(s[1])===-1)return-1;const a=n.length;let e=0,t=0;for(;t<a;t++)if(n[t]==="\\")t++;else if(n[t]===s[0])e++;else if(n[t]===s[1]&&(e--,e<0))return t;return-1}function $k(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function xr(n,s){if(s<1)return"";let a="";for(;s>1;)s&1&&(a+=n),s>>=1,n+=n;return a+n}function $r(n,s,a,e){const t=s.href,o=s.title?ss(s.title):null,i=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){e.state.inLink=!0;const p={type:"link",raw:a,href:t,title:o,text:i,tokens:e.inlineTokens(i,[])};return e.state.inLink=!1,p}return{type:"image",raw:a,href:t,title:o,text:ss(i)}}function g0(n,s){const a=n.match(/^(\s+)(?:```)/);if(a===null)return s;const e=a[1];return s.split(`
`).map(t=>{const o=t.match(/^\s+/);if(o===null)return t;const[i]=o;return i.length>=e.length?t.slice(e.length):t}).join(`
`)}class Ap{constructor(s){this.options=s||te}space(s){const a=this.rules.block.newline.exec(s);if(a&&a[0].length>0)return{type:"space",raw:a[0]}}code(s){const a=this.rules.block.code.exec(s);if(a){const e=a[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Rt(e,`
`)}}}fences(s){const a=this.rules.block.fences.exec(s);if(a){const e=a[0],t=g0(e,a[3]||"");return{type:"code",raw:e,lang:a[2]?a[2].trim():a[2],text:t}}}heading(s){const a=this.rules.block.heading.exec(s);if(a){let e=a[2].trim();if(/#$/.test(e)){const o=Rt(e,"#");(this.options.pedantic||!o||/ $/.test(o))&&(e=o.trim())}const t={type:"heading",raw:a[0],depth:a[1].length,text:e,tokens:[]};return this.lexer.inline(t.text,t.tokens),t}}hr(s){const a=this.rules.block.hr.exec(s);if(a)return{type:"hr",raw:a[0]}}blockquote(s){const a=this.rules.block.blockquote.exec(s);if(a){const e=a[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:a[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(s){let a=this.rules.block.list.exec(s);if(a){let e,t,o,i,p,l,c,r,k,d,u,m,v=a[1].trim();const b=v.length>1,h={type:"list",raw:"",ordered:b,start:b?+v.slice(0,-1):"",loose:!1,items:[]};v=b?`\\d{1,9}\\${v.slice(-1)}`:`\\${v}`,this.options.pedantic&&(v=b?v:"[*+-]");const g=new RegExp(`^( {0,3}${v})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;s&&(m=!1,!(!(a=g.exec(s))||this.rules.block.hr.test(s)));){if(e=a[0],s=s.substring(e.length),r=a[2].split(`
`,1)[0],k=s.split(`
`,1)[0],this.options.pedantic?(i=2,u=r.trimLeft()):(i=a[2].search(/[^ ]/),i=i>4?1:i,u=r.slice(i),i+=a[1].length),l=!1,!r&&/^ *$/.test(k)&&(e+=k+`
`,s=s.substring(k.length+1),m=!0),!m){const y=new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),O=new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),I=new RegExp(`^ {0,${Math.min(3,i-1)}}#`);for(;s&&(d=s.split(`
`,1)[0],r=d,this.options.pedantic&&(r=r.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(O.test(r)||I.test(r)||y.test(r)||x.test(s)));){if(r.search(/[^ ]/)>=i||!r.trim())u+=`
`+r.slice(i);else if(!l)u+=`
`+r;else break;!l&&!r.trim()&&(l=!0),e+=d+`
`,s=s.substring(d.length+1)}}h.loose||(c?h.loose=!0:/\n *\n *$/.test(e)&&(c=!0)),this.options.gfm&&(t=/^\[[ xX]\] /.exec(u),t&&(o=t[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),h.items.push({type:"list_item",raw:e,task:!!t,checked:o,loose:!1,text:u}),h.raw+=e}h.items[h.items.length-1].raw=e.trimRight(),h.items[h.items.length-1].text=u.trimRight(),h.raw=h.raw.trimRight();const _=h.items.length;for(p=0;p<_;p++){this.lexer.state.top=!1,h.items[p].tokens=this.lexer.blockTokens(h.items[p].text,[]);const y=h.items[p].tokens.filter(O=>O.type==="space"),x=y.every(O=>{const I=O.raw.split("");let w=0;for(const G of I)if(G===`
`&&(w+=1),w>1)return!0;return!1});!h.loose&&y.length&&x&&(h.loose=!0,h.items[p].loose=!0)}return h}}html(s){const a=this.rules.block.html.exec(s);if(a){const e={type:"html",raw:a[0],pre:!this.options.sanitizer&&(a[1]==="pre"||a[1]==="script"||a[1]==="style"),text:a[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(a[0]):ss(a[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(s){const a=this.rules.block.def.exec(s);if(a){a[3]&&(a[3]=a[3].substring(1,a[3].length-1));const e=a[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:e,raw:a[0],href:a[2],title:a[3]}}}table(s){const a=this.rules.block.table.exec(s);if(a){const e={type:"table",header:Sr(a[1]).map(t=>({text:t})),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:a[3]&&a[3].trim()?a[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(e.header.length===e.align.length){e.raw=a[0];let t=e.align.length,o,i,p,l;for(o=0;o<t;o++)/^ *-+: *$/.test(e.align[o])?e.align[o]="right":/^ *:-+: *$/.test(e.align[o])?e.align[o]="center":/^ *:-+ *$/.test(e.align[o])?e.align[o]="left":e.align[o]=null;for(t=e.rows.length,o=0;o<t;o++)e.rows[o]=Sr(e.rows[o],e.header.length).map(c=>({text:c}));for(t=e.header.length,i=0;i<t;i++)e.header[i].tokens=[],this.lexer.inline(e.header[i].text,e.header[i].tokens);for(t=e.rows.length,i=0;i<t;i++)for(l=e.rows[i],p=0;p<l.length;p++)l[p].tokens=[],this.lexer.inline(l[p].text,l[p].tokens);return e}}}lheading(s){const a=this.rules.block.lheading.exec(s);if(a){const e={type:"heading",raw:a[0],depth:a[2].charAt(0)==="="?1:2,text:a[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(s){const a=this.rules.block.paragraph.exec(s);if(a){const e={type:"paragraph",raw:a[0],text:a[1].charAt(a[1].length-1)===`
`?a[1].slice(0,-1):a[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(s){const a=this.rules.block.text.exec(s);if(a){const e={type:"text",raw:a[0],text:a[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(s){const a=this.rules.inline.escape.exec(s);if(a)return{type:"escape",raw:a[0],text:ss(a[1])}}tag(s){const a=this.rules.inline.tag.exec(s);if(a)return!this.lexer.state.inLink&&/^<a /i.test(a[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(a[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:a[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):ss(a[0]):a[0]}}link(s){const a=this.rules.inline.link.exec(s);if(a){const e=a[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const i=Rt(e.slice(0,-1),"\\");if((e.length-i.length)%2===0)return}else{const i=h0(a[2],"()");if(i>-1){const l=(a[0].indexOf("!")===0?5:4)+a[1].length+i;a[2]=a[2].substring(0,i),a[0]=a[0].substring(0,l).trim(),a[3]=""}}let t=a[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(t);i&&(t=i[1],o=i[3])}else o=a[3]?a[3].slice(1,-1):"";return t=t.trim(),/^</.test(t)&&(this.options.pedantic&&!/>$/.test(e)?t=t.slice(1):t=t.slice(1,-1)),$r(a,{href:t&&t.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},a[0],this.lexer)}}reflink(s,a){let e;if((e=this.rules.inline.reflink.exec(s))||(e=this.rules.inline.nolink.exec(s))){let t=(e[2]||e[1]).replace(/\s+/g," ");if(t=a[t.toLowerCase()],!t||!t.href){const o=e[0].charAt(0);return{type:"text",raw:o,text:o}}return $r(e,t,e[0],this.lexer)}}emStrong(s,a,e=""){let t=this.rules.inline.emStrong.lDelim.exec(s);if(!t||t[3]&&e.match(/[\p{L}\p{N}]/u))return;const o=t[1]||t[2]||"";if(!o||o&&(e===""||this.rules.inline.punctuation.exec(e))){const i=t[0].length-1;let p,l,c=i,r=0;const k=t[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(k.lastIndex=0,a=a.slice(-1*s.length+i);(t=k.exec(a))!=null;){if(p=t[1]||t[2]||t[3]||t[4]||t[5]||t[6],!p)continue;if(l=p.length,t[3]||t[4]){c+=l;continue}else if((t[5]||t[6])&&i%3&&!((i+l)%3)){r+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+r),Math.min(i,l)%2){const u=s.slice(1,i+t.index+l);return{type:"em",raw:s.slice(0,i+t.index+l+1),text:u,tokens:this.lexer.inlineTokens(u,[])}}const d=s.slice(2,i+t.index+l-1);return{type:"strong",raw:s.slice(0,i+t.index+l+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}}}codespan(s){const a=this.rules.inline.code.exec(s);if(a){let e=a[2].replace(/\n/g," ");const t=/[^ ]/.test(e),o=/^ /.test(e)&&/ $/.test(e);return t&&o&&(e=e.substring(1,e.length-1)),e=ss(e,!0),{type:"codespan",raw:a[0],text:e}}}br(s){const a=this.rules.inline.br.exec(s);if(a)return{type:"br",raw:a[0]}}del(s){const a=this.rules.inline.del.exec(s);if(a)return{type:"del",raw:a[0],text:a[2],tokens:this.lexer.inlineTokens(a[2],[])}}autolink(s,a){const e=this.rules.inline.autolink.exec(s);if(e){let t,o;return e[2]==="@"?(t=ss(this.options.mangle?a(e[1]):e[1]),o="mailto:"+t):(t=ss(e[1]),o=t),{type:"link",raw:e[0],text:t,href:o,tokens:[{type:"text",raw:t,text:t}]}}}url(s,a){let e;if(e=this.rules.inline.url.exec(s)){let t,o;if(e[2]==="@")t=ss(this.options.mangle?a(e[0]):e[0]),o="mailto:"+t;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])[0];while(i!==e[0]);t=ss(e[0]),e[1]==="www."?o="http://"+t:o=t}return{type:"link",raw:e[0],text:t,href:o,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(s,a){const e=this.rules.inline.text.exec(s);if(e){let t;return this.lexer.state.inRawBlock?t=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):ss(e[0]):e[0]:t=ss(this.options.smartypants?a(e[0]):e[0]),{type:"text",raw:e[0],text:t}}}}const hn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:to,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};hn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;hn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;hn.def=Gn(hn.def).replace("label",hn._label).replace("title",hn._title).getRegex();hn.bullet=/(?:[*+-]|\d{1,9}[.)])/;hn.listItemStart=Gn(/^( *)(bull) */).replace("bull",hn.bullet).getRegex();hn.list=Gn(hn.list).replace(/bull/g,hn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+hn.def.source+")").getRegex();hn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";hn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;hn.html=Gn(hn.html,"i").replace("comment",hn._comment).replace("tag",hn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();hn.paragraph=Gn(hn._paragraph).replace("hr",hn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hn._tag).getRegex();hn.blockquote=Gn(hn.blockquote).replace("paragraph",hn.paragraph).getRegex();hn.normal=Cs({},hn);hn.gfm=Cs({},hn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});hn.gfm.table=Gn(hn.gfm.table).replace("hr",hn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hn._tag).getRegex();hn.gfm.paragraph=Gn(hn._paragraph).replace("hr",hn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",hn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hn._tag).getRegex();hn.pedantic=Cs({},hn.normal,{html:Gn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",hn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:to,paragraph:Gn(hn.normal._paragraph).replace("hr",hn.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",hn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const tn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:to,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:to,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};tn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";tn.punctuation=Gn(tn.punctuation).replace(/punctuation/g,tn._punctuation).getRegex();tn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;tn.escapedEmSt=/\\\*|\\_/g;tn._comment=Gn(hn._comment).replace("(?:-->|$)","-->").getRegex();tn.emStrong.lDelim=Gn(tn.emStrong.lDelim).replace(/punct/g,tn._punctuation).getRegex();tn.emStrong.rDelimAst=Gn(tn.emStrong.rDelimAst,"g").replace(/punct/g,tn._punctuation).getRegex();tn.emStrong.rDelimUnd=Gn(tn.emStrong.rDelimUnd,"g").replace(/punct/g,tn._punctuation).getRegex();tn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;tn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;tn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;tn.autolink=Gn(tn.autolink).replace("scheme",tn._scheme).replace("email",tn._email).getRegex();tn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;tn.tag=Gn(tn.tag).replace("comment",tn._comment).replace("attribute",tn._attribute).getRegex();tn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;tn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;tn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;tn.link=Gn(tn.link).replace("label",tn._label).replace("href",tn._href).replace("title",tn._title).getRegex();tn.reflink=Gn(tn.reflink).replace("label",tn._label).replace("ref",hn._label).getRegex();tn.nolink=Gn(tn.nolink).replace("ref",hn._label).getRegex();tn.reflinkSearch=Gn(tn.reflinkSearch,"g").replace("reflink",tn.reflink).replace("nolink",tn.nolink).getRegex();tn.normal=Cs({},tn);tn.pedantic=Cs({},tn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Gn(/^!?\[(label)\]\((.*?)\)/).replace("label",tn._label).getRegex(),reflink:Gn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tn._label).getRegex()});tn.gfm=Cs({},tn.normal,{escape:Gn(tn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});tn.gfm.url=Gn(tn.gfm.url,"i").replace("email",tn.gfm._extended_email).getRegex();tn.breaks=Cs({},tn.gfm,{br:Gn(tn.br).replace("{2,}","*").getRegex(),text:Gn(tn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function b0(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Cr(n){let s="",a,e;const t=n.length;for(a=0;a<t;a++)e=n.charCodeAt(a),Math.random()>.5&&(e="x"+e.toString(16)),s+="&#"+e+";";return s}class Vs{constructor(s){this.tokens=[],this.tokens.links=Object.create(null),this.options=s||te,this.options.tokenizer=this.options.tokenizer||new Ap,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const a={block:hn.normal,inline:tn.normal};this.options.pedantic?(a.block=hn.pedantic,a.inline=tn.pedantic):this.options.gfm&&(a.block=hn.gfm,this.options.breaks?a.inline=tn.breaks:a.inline=tn.gfm),this.tokenizer.rules=a}static get rules(){return{block:hn,inline:tn}}static lex(s,a){return new Vs(a).lex(s)}static lexInline(s,a){return new Vs(a).inlineTokens(s)}lex(s){s=s.replace(/\r\n|\r/g,`
`),this.blockTokens(s,this.tokens);let a;for(;a=this.inlineQueue.shift();)this.inlineTokens(a.src,a.tokens);return this.tokens}blockTokens(s,a=[]){this.options.pedantic?s=s.replace(/\t/g,"    ").replace(/^ +$/gm,""):s=s.replace(/^( *)(\t+)/gm,(p,l,c)=>l+"    ".repeat(c.length));let e,t,o,i;for(;s;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(p=>(e=p.call({lexer:this},s,a))?(s=s.substring(e.raw.length),a.push(e),!0):!1))){if(e=this.tokenizer.space(s)){s=s.substring(e.raw.length),e.raw.length===1&&a.length>0?a[a.length-1].raw+=`
`:a.push(e);continue}if(e=this.tokenizer.code(s)){s=s.substring(e.raw.length),t=a[a.length-1],t&&(t.type==="paragraph"||t.type==="text")?(t.raw+=`
`+e.raw,t.text+=`
`+e.text,this.inlineQueue[this.inlineQueue.length-1].src=t.text):a.push(e);continue}if(e=this.tokenizer.fences(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.heading(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.hr(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.blockquote(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.list(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.html(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.def(s)){s=s.substring(e.raw.length),t=a[a.length-1],t&&(t.type==="paragraph"||t.type==="text")?(t.raw+=`
`+e.raw,t.text+=`
`+e.raw,this.inlineQueue[this.inlineQueue.length-1].src=t.text):this.tokens.links[e.tag]||(this.tokens.links[e.tag]={href:e.href,title:e.title});continue}if(e=this.tokenizer.table(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.lheading(s)){s=s.substring(e.raw.length),a.push(e);continue}if(o=s,this.options.extensions&&this.options.extensions.startBlock){let p=1/0;const l=s.slice(1);let c;this.options.extensions.startBlock.forEach(function(r){c=r.call({lexer:this},l),typeof c=="number"&&c>=0&&(p=Math.min(p,c))}),p<1/0&&p>=0&&(o=s.substring(0,p+1))}if(this.state.top&&(e=this.tokenizer.paragraph(o))){t=a[a.length-1],i&&t.type==="paragraph"?(t.raw+=`
`+e.raw,t.text+=`
`+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=t.text):a.push(e),i=o.length!==s.length,s=s.substring(e.raw.length);continue}if(e=this.tokenizer.text(s)){s=s.substring(e.raw.length),t=a[a.length-1],t&&t.type==="text"?(t.raw+=`
`+e.raw,t.text+=`
`+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=t.text):a.push(e);continue}if(s){const p="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,a}inline(s,a=[]){return this.inlineQueue.push({src:s,tokens:a}),a}inlineTokens(s,a=[]){let e,t,o,i=s,p,l,c;if(this.tokens.links){const r=Object.keys(this.tokens.links);if(r.length>0)for(;(p=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)r.includes(p[0].slice(p[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,p.index)+"["+xr("a",p[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(p=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,p.index)+"["+xr("a",p[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(p=this.tokenizer.rules.inline.escapedEmSt.exec(i))!=null;)i=i.slice(0,p.index)+"++"+i.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;s;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(r=>(e=r.call({lexer:this},s,a))?(s=s.substring(e.raw.length),a.push(e),!0):!1))){if(e=this.tokenizer.escape(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.tag(s)){s=s.substring(e.raw.length),t=a[a.length-1],t&&e.type==="text"&&t.type==="text"?(t.raw+=e.raw,t.text+=e.text):a.push(e);continue}if(e=this.tokenizer.link(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.reflink(s,this.tokens.links)){s=s.substring(e.raw.length),t=a[a.length-1],t&&e.type==="text"&&t.type==="text"?(t.raw+=e.raw,t.text+=e.text):a.push(e);continue}if(e=this.tokenizer.emStrong(s,i,c)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.codespan(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.br(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.del(s)){s=s.substring(e.raw.length),a.push(e);continue}if(e=this.tokenizer.autolink(s,Cr)){s=s.substring(e.raw.length),a.push(e);continue}if(!this.state.inLink&&(e=this.tokenizer.url(s,Cr))){s=s.substring(e.raw.length),a.push(e);continue}if(o=s,this.options.extensions&&this.options.extensions.startInline){let r=1/0;const k=s.slice(1);let d;this.options.extensions.startInline.forEach(function(u){d=u.call({lexer:this},k),typeof d=="number"&&d>=0&&(r=Math.min(r,d))}),r<1/0&&r>=0&&(o=s.substring(0,r+1))}if(e=this.tokenizer.inlineText(o,b0)){s=s.substring(e.raw.length),e.raw.slice(-1)!=="_"&&(c=e.raw.slice(-1)),l=!0,t=a[a.length-1],t&&t.type==="text"?(t.raw+=e.raw,t.text+=e.text):a.push(e);continue}if(s){const r="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return a}}class Lp{constructor(s){this.options=s||te}code(s,a,e){const t=(a||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(s,t);o!=null&&o!==s&&(e=!0,s=o)}return s=s.replace(/\n$/,"")+`
`,t?'<pre><code class="'+this.options.langPrefix+ss(t,!0)+'">'+(e?s:ss(s,!0))+`</code></pre>
`:"<pre><code>"+(e?s:ss(s,!0))+`</code></pre>
`}blockquote(s){return`<blockquote>
${s}</blockquote>
`}html(s){return s}heading(s,a,e,t){if(this.options.headerIds){const o=this.options.headerPrefix+t.slug(e);return`<h${a} id="${o}">${s}</h${a}>
`}return`<h${a}>${s}</h${a}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(s,a,e){const t=a?"ol":"ul",o=a&&e!==1?' start="'+e+'"':"";return"<"+t+o+`>
`+s+"</"+t+`>
`}listitem(s){return`<li>${s}</li>
`}checkbox(s){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(s){return`<p>${s}</p>
`}table(s,a){return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+s+`</thead>
`+a+`</table>
`}tablerow(s){return`<tr>
${s}</tr>
`}tablecell(s,a){const e=a.header?"th":"td";return(a.align?`<${e} align="${a.align}">`:`<${e}>`)+s+`</${e}>
`}strong(s){return`<strong>${s}</strong>`}em(s){return`<em>${s}</em>`}codespan(s){return`<code>${s}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(s){return`<del>${s}</del>`}link(s,a,e){if(s=wr(this.options.sanitize,this.options.baseUrl,s),s===null)return e;let t='<a href="'+ss(s)+'"';return a&&(t+=' title="'+a+'"'),t+=">"+e+"</a>",t}image(s,a,e){if(s=wr(this.options.sanitize,this.options.baseUrl,s),s===null)return e;let t=`<img src="${s}" alt="${e}"`;return a&&(t+=` title="${a}"`),t+=this.options.xhtml?"/>":">",t}text(s){return s}}class Ck{strong(s){return s}em(s){return s}codespan(s){return s}del(s){return s}html(s){return s}text(s){return s}link(s,a,e){return""+e}image(s,a,e){return""+e}br(){return""}}class Ek{constructor(){this.seen={}}serialize(s){return s.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(s,a){let e=s,t=0;if(this.seen.hasOwnProperty(e)){t=this.seen[s];do t++,e=s+"-"+t;while(this.seen.hasOwnProperty(e))}return a||(this.seen[s]=t,this.seen[e]=0),e}slug(s,a={}){const e=this.serialize(s);return this.getNextSafeSlug(e,a.dryrun)}}class Us{constructor(s){this.options=s||te,this.options.renderer=this.options.renderer||new Lp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ck,this.slugger=new Ek}static parse(s,a){return new Us(a).parse(s)}static parseInline(s,a){return new Us(a).parseInline(s)}parse(s,a=!0){let e="",t,o,i,p,l,c,r,k,d,u,m,v,b,h,g,_,y,x,O;const I=s.length;for(t=0;t<I;t++){if(u=s[t],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(O=this.options.extensions.renderers[u.type].call({parser:this},u),O!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type))){e+=O||"";continue}switch(u.type){case"space":continue;case"hr":{e+=this.renderer.hr();continue}case"heading":{e+=this.renderer.heading(this.parseInline(u.tokens),u.depth,xk(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue}case"code":{e+=this.renderer.code(u.text,u.lang,u.escaped);continue}case"table":{for(k="",r="",p=u.header.length,o=0;o<p;o++)r+=this.renderer.tablecell(this.parseInline(u.header[o].tokens),{header:!0,align:u.align[o]});for(k+=this.renderer.tablerow(r),d="",p=u.rows.length,o=0;o<p;o++){for(c=u.rows[o],r="",l=c.length,i=0;i<l;i++)r+=this.renderer.tablecell(this.parseInline(c[i].tokens),{header:!1,align:u.align[i]});d+=this.renderer.tablerow(r)}e+=this.renderer.table(k,d);continue}case"blockquote":{d=this.parse(u.tokens),e+=this.renderer.blockquote(d);continue}case"list":{for(m=u.ordered,v=u.start,b=u.loose,p=u.items.length,d="",o=0;o<p;o++)g=u.items[o],_=g.checked,y=g.task,h="",g.task&&(x=this.renderer.checkbox(_),b?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=x+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=x+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:x}):h+=x),h+=this.parse(g.tokens,b),d+=this.renderer.listitem(h,y,_);e+=this.renderer.list(d,m,v);continue}case"html":{e+=this.renderer.html(u.text);continue}case"paragraph":{e+=this.renderer.paragraph(this.parseInline(u.tokens));continue}case"text":{for(d=u.tokens?this.parseInline(u.tokens):u.text;t+1<I&&s[t+1].type==="text";)u=s[++t],d+=`
`+(u.tokens?this.parseInline(u.tokens):u.text);e+=a?this.renderer.paragraph(d):d;continue}default:{const w='Token with "'+u.type+'" type was not found.';if(this.options.silent){console.error(w);return}else throw new Error(w)}}}return e}parseInline(s,a){a=a||this.renderer;let e="",t,o,i;const p=s.length;for(t=0;t<p;t++){if(o=s[t],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(i=this.options.extensions.renderers[o.type].call({parser:this},o),i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){e+=i||"";continue}switch(o.type){case"escape":{e+=a.text(o.text);break}case"html":{e+=a.html(o.text);break}case"link":{e+=a.link(o.href,o.title,this.parseInline(o.tokens,a));break}case"image":{e+=a.image(o.href,o.title,o.text);break}case"strong":{e+=a.strong(this.parseInline(o.tokens,a));break}case"em":{e+=a.em(this.parseInline(o.tokens,a));break}case"codespan":{e+=a.codespan(o.text);break}case"br":{e+=a.br();break}case"del":{e+=a.del(this.parseInline(o.tokens,a));break}case"text":{e+=a.text(o.text);break}default:{const l='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return e}}function bn(n,s,a){if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof s=="function"&&(a=s,s=null),s=Cs({},bn.defaults,s||{}),$k(s),a){const e=s.highlight;let t;try{t=Vs.lex(n,s)}catch(p){return a(p)}const o=function(p){let l;if(!p)try{s.walkTokens&&bn.walkTokens(t,s.walkTokens),l=Us.parse(t,s)}catch(c){p=c}return s.highlight=e,p?a(p):a(null,l)};if(!e||e.length<3||(delete s.highlight,!t.length))return o();let i=0;bn.walkTokens(t,function(p){p.type==="code"&&(i++,setTimeout(()=>{e(p.text,p.lang,function(l,c){if(l)return o(l);c!=null&&c!==p.text&&(p.text=c,p.escaped=!0),i--,i===0&&o()})},0))}),i===0&&o();return}try{const e=Vs.lex(n,s);return s.walkTokens&&bn.walkTokens(e,s.walkTokens),Us.parse(e,s)}catch(e){if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+ss(e.message+"",!0)+"</pre>";throw e}}bn.options=bn.setOptions=function(n){return Cs(bn.defaults,n),a0(bn.defaults),bn};bn.getDefaults=Sk;bn.defaults=te;bn.use=function(...n){const s=Cs({},...n),a=bn.defaults.extensions||{renderers:{},childTokens:{}};let e;n.forEach(t=>{if(t.extensions&&(e=!0,t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const i=a.renderers?a.renderers[o.name]:null;i?a.renderers[o.name]=function(...p){let l=o.renderer.apply(this,p);return l===!1&&(l=i.apply(this,p)),l}:a.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");a[o.level]?a[o.level].unshift(o.tokenizer):a[o.level]=[o.tokenizer],o.start&&(o.level==="block"?a.startBlock?a.startBlock.push(o.start):a.startBlock=[o.start]:o.level==="inline"&&(a.startInline?a.startInline.push(o.start):a.startInline=[o.start]))}o.childTokens&&(a.childTokens[o.name]=o.childTokens)})),t.renderer){const o=bn.defaults.renderer||new Lp;for(const i in t.renderer){const p=o[i];o[i]=(...l)=>{let c=t.renderer[i].apply(o,l);return c===!1&&(c=p.apply(o,l)),c}}s.renderer=o}if(t.tokenizer){const o=bn.defaults.tokenizer||new Ap;for(const i in t.tokenizer){const p=o[i];o[i]=(...l)=>{let c=t.tokenizer[i].apply(o,l);return c===!1&&(c=p.apply(o,l)),c}}s.tokenizer=o}if(t.walkTokens){const o=bn.defaults.walkTokens;s.walkTokens=function(i){t.walkTokens.call(this,i),o&&o.call(this,i)}}e&&(s.extensions=a),bn.setOptions(s)})};bn.walkTokens=function(n,s){for(const a of n)switch(s.call(bn,a),a.type){case"table":{for(const e of a.header)bn.walkTokens(e.tokens,s);for(const e of a.rows)for(const t of e)bn.walkTokens(t.tokens,s);break}case"list":{bn.walkTokens(a.items,s);break}default:bn.defaults.extensions&&bn.defaults.extensions.childTokens&&bn.defaults.extensions.childTokens[a.type]?bn.defaults.extensions.childTokens[a.type].forEach(function(e){bn.walkTokens(a[e],s)}):a.tokens&&bn.walkTokens(a.tokens,s)}};bn.parseInline=function(n,s){if(typeof n=="undefined"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");s=Cs({},bn.defaults,s||{}),$k(s);try{const a=Vs.lexInline(n,s);return s.walkTokens&&bn.walkTokens(a,s.walkTokens),Us.parseInline(a,s)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+ss(a.message+"",!0)+"</pre>";throw a}};bn.Parser=Us;bn.parser=Us.parse;bn.Renderer=Lp;bn.TextRenderer=Ck;bn.Lexer=Vs;bn.lexer=Vs.lex;bn.Tokenizer=Ap;bn.Slugger=Ek;bn.parse=bn;bn.options;bn.setOptions;bn.use;bn.walkTokens;bn.parseInline;Us.parse;Vs.lex;var Er;const Ve=typeof window!="undefined",si=()=>{};function Ue(n){return typeof n=="function"?n():fn(n)}function Tk(n,s){return function(...a){n(()=>s.apply(this,a),{fn:s,thisArg:this,args:a})}}Ve&&((Er=window==null?void 0:window.navigator)==null?void 0:Er.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const Pk=n=>n();function Ie(n){return!!tp()&&(op(n),!0)}function f0(n,s=200,a={}){return Tk(function(e,t={}){let o,i;return p=>{const l=Ue(e),c=Ue(t.maxWait);if(o&&clearTimeout(o),l<=0||c!==void 0&&c<=0)return i&&(clearTimeout(i),i=null),p();c&&!i&&(i=setTimeout(()=>{o&&clearTimeout(o),i=null,p()},c)),o=setTimeout(()=>{i&&clearTimeout(i),i=null,p()},l)}}(s,a),n)}var Tr=Object.getOwnPropertySymbols,y0=Object.prototype.hasOwnProperty,_0=Object.prototype.propertyIsEnumerable;function w0(n,s,a={}){const e=a,{eventFilter:t=Pk}=e,o=((i,p)=>{var l={};for(var c in i)y0.call(i,c)&&p.indexOf(c)<0&&(l[c]=i[c]);if(i!=null&&Tr)for(var c of Tr(i))p.indexOf(c)<0&&_0.call(i,c)&&(l[c]=i[c]);return l})(e,["eventFilter"]);return Vn(n,Tk(t,s),o)}var S0=Object.defineProperty,x0=Object.defineProperties,$0=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,Pr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Or=(n,s,a)=>s in n?S0(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a;function C0(n,s,a={}){const e=a,{eventFilter:t}=e,o=((d,u)=>{var m={};for(var v in d)Pr.call(d,v)&&u.indexOf(v)<0&&(m[v]=d[v]);if(d!=null&&Pt)for(var v of Pt(d))u.indexOf(v)<0&&Ir.call(d,v)&&(m[v]=d[v]);return m})(e,["eventFilter"]),{eventFilter:i,pause:p,resume:l,isActive:c}=function(d=Pk){const u=an(!0);return{isActive:u,pause:function(){u.value=!1},resume:function(){u.value=!0},eventFilter:(...m)=>{u.value&&d(...m)}}}(t),r=w0(n,s,(k=((d,u)=>{for(var m in u||(u={}))Pr.call(u,m)&&Or(d,m,u[m]);if(Pt)for(var m of Pt(u))Ir.call(u,m)&&Or(d,m,u[m]);return d})({},o),x0(k,$0({eventFilter:i}))));var k;return{stop:r,pause:p,resume:l,isActive:c}}const oo=Ve?window:void 0,E0=Ve?window.document:void 0;function T0(...n){let s,a,e,t;if(typeof n[0]=="string"?([a,e,t]=n,s=oo):[s,a,e,t]=n,!s)return si;let o=si;const i=Vn(()=>function(l){var c;const r=Ue(l);return(c=r==null?void 0:r.$el)!=null?c:r}(s),l=>{o(),l&&(l.addEventListener(a,e,t),o=()=>{l.removeEventListener(a,e,t),o=si})},{immediate:!0,flush:"post"}),p=()=>{i(),o()};return Ie(p),p}const Ki=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Qi="__vueuse_ssr_handlers__";Ki[Qi]=Ki[Qi]||{};const P0=Ki[Qi];var I0=Object.defineProperty,Ar=Object.getOwnPropertySymbols,O0=Object.prototype.hasOwnProperty,A0=Object.prototype.propertyIsEnumerable,Lr=(n,s,a)=>s in n?I0(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a,Dr=(n,s)=>{for(var a in s||(s={}))O0.call(s,a)&&Lr(n,a,s[a]);if(Ar)for(var a of Ar(s))A0.call(s,a)&&Lr(n,a,s[a]);return n};const L0={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}};function qe(n,s,a,e={}){var t;const{flush:o="pre",deep:i=!0,listenToStorageChanges:p=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:r,window:k=oo,eventFilter:d,onError:u=x=>{console.error(x)}}=e,m=(r?kp:an)(s);if(!a)try{a=function(x,O){return P0[x]||O}("getDefaultStorage",()=>{var x;return(x=oo)==null?void 0:x.localStorage})()}catch(x){u(x)}if(!a)return m;const v=Ue(s),b=function(x){return x==null?"any":x instanceof Set?"set":x instanceof Map?"map":x instanceof Date?"date":typeof x=="boolean"?"boolean":typeof x=="string"?"string":typeof x=="object"||Array.isArray(x)?"object":Number.isNaN(x)?"any":"number"}(v),h=(t=e.serializer)!=null?t:L0[b],{pause:g,resume:_}=C0(m,()=>function(x){try{x==null?a.removeItem(n):a.setItem(n,h.write(x))}catch(O){u(O)}}(m.value),{flush:o,deep:i,eventFilter:d});return k&&p&&T0(k,"storage",y),y(),m;function y(x){x&&x.key!==n||(m.value=function(O){if(!O||O.key===n){g();try{const I=O?O.newValue:a.getItem(n);if(I==null)return l&&v!==null&&a.setItem(n,h.write(v)),v;if(!O&&c){const w=h.read(I);return typeof c=="function"?c(w,v):b!=="object"||Array.isArray(w)?w:Dr(Dr({},v),w)}return typeof I!="string"?I:h.read(I)}catch(I){u(I)}finally{_()}}}(x))}}var Mr,me,D0=Object.defineProperty,jr=Object.getOwnPropertySymbols,M0=Object.prototype.hasOwnProperty,j0=Object.prototype.propertyIsEnumerable,Rr=(n,s,a)=>s in n?D0(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a;function R0(n={}){const{controls:s=!1,interval:a="requestAnimationFrame"}=n,e=an(new Date),t=()=>e.value=new Date,o=a==="requestAnimationFrame"?function(i,p={}){const{immediate:l=!0,window:c=oo}=p,r=an(!1);let k=null;function d(){r.value&&c&&(i(),k=c.requestAnimationFrame(d))}function u(){!r.value&&c&&(r.value=!0,d())}function m(){r.value=!1,k!=null&&c&&(c.cancelAnimationFrame(k),k=null)}return l&&u(),Ie(m),{isActive:r,pause:m,resume:u}}(t,{immediate:!0}):function(i,p=1e3,l={}){const{immediate:c=!0,immediateCallback:r=!1}=l;let k=null;const d=an(!1);function u(){k&&(clearInterval(k),k=null)}function m(){d.value=!1,u()}function v(){fn(p)<=0||(d.value=!0,r&&i(),u(),k=setInterval(i,Ue(p)))}return c&&Ve&&v(),ns(p)&&Ie(Vn(p,()=>{d.value&&Ve&&v()})),Ie(m),{isActive:d,pause:m,resume:v}}(t,a,{immediate:!0});return s?((i,p)=>{for(var l in p||(p={}))M0.call(p,l)&&Rr(i,l,p[l]);if(jr)for(var l of jr(p))j0.call(p,l)&&Rr(i,l,p[l]);return i})({now:e},o):e}(me=Mr||(Mr={})).UP="UP",me.RIGHT="RIGHT",me.DOWN="DOWN",me.LEFT="LEFT",me.NONE="NONE";let F0=0;function B0(n,s={}){const a=an(!1),{document:e=E0,immediate:t=!0,manual:o=!1,id:i="vueuse_styletag_"+ ++F0}=s,p=an(n);let l=()=>{};const c=()=>{if(!e)return;const k=e.getElementById(i)||e.createElement("style");k.type="text/css",k.id=i,s.media&&(k.media=s.media),e.head.appendChild(k),a.value||(l=Vn(p,d=>{k.innerText=d},{immediate:!0}),a.value=!0)},r=()=>{e&&a.value&&(l(),e.head.removeChild(e.getElementById(i)),a.value=!1)};return t&&!o&&function(k,d=!0){bo()?Qn(k):d?k():Je(k)}(c),o||Ie(r),{id:i,css:p,unload:r,load:c,isLoaded:co(a)}}var N0=Object.defineProperty,Fr=Object.getOwnPropertySymbols,z0=Object.prototype.hasOwnProperty,H0=Object.prototype.propertyIsEnumerable,Br=(n,s,a)=>s in n?N0(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a;((n,s)=>{for(var a in s||(s={}))z0.call(s,a)&&Br(n,a,s[a]);if(Fr)for(var a of Fr(s))H0.call(s,a)&&Br(n,a,s[a])})({linear:function(n){return n}},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const Dp=({size:n})=>Z("svg",{width:n,height:n,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},Z("circle",{cx:50,cy:50,fill:"none",stroke:"currentColor",strokeWidth:"4",r:"40","stroke-dasharray":"85 30"},Z("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;360 50 50",keyTimes:"0;1"})));var G0=jn({name:"ImageWall",components:{LoadingIcon:Dp},props:{items:{type:Array,default:()=>[]},columnWidth:{type:Number,default:300},gap:{type:Number,default:0}},emits:["insert"],setup(n){let s=null;const a=an(null),e=an({}),t=an([]),o=()=>{const l=Math.floor((a.value.getBoundingClientRect().width+n.gap)/(n.columnWidth+n.gap));return l>0?l:1},i=async l=>{var r;if(l>=n.items.length)return;await Je();const c=Array.from(((r=a.value)==null?void 0:r.children)||[]).reduce((k,d)=>d.getBoundingClientRect().height<k.getBoundingClientRect().height?d:k);t.value[Number(c.dataset.index)].push(l),await i(l+1)},p=async(l=!1)=>{if(t.value.length===o()&&!l)return;var c;t.value=(c=o(),new Array(c).fill(null).map(()=>[]));const r=window.scrollY;await i(0),window.scrollTo({top:r})};return Vn(()=>[n.items],()=>{e.value={},p(!0)}),Vn(()=>[n.columnWidth,n.gap],()=>p()),Qn(()=>{p(!0),s=new ResizeObserver(()=>p()),s.observe(a.value)}),ho(()=>s.unobserve(a.value)),{columns:t,state:e,wall:a}}}),Co=(n,s)=>{const a=n.__vccOpts||n;for(const[e,t]of s)a[e]=t;return a};const V0=["data-index"],U0=["src","title","onLoad","onClick"];var q0=Co(G0,[["render",function(n,s,a,e,t,o){const i=Kn("LoadingIcon");return J(),sn("div",{ref:"wall",class:"wl-gallery",style:ks({gap:`${n.gap}px`})},[(J(!0),sn(Rn,null,Ps(n.columns,(p,l)=>(J(),sn("div",{key:l,class:"wl-gallery-column","data-index":l,style:ks({gap:`${n.gap}px`})},[(J(!0),sn(Rn,null,Ps(p,c=>(J(),sn(Rn,{key:c},[n.state[n.items[c].src]?Tn("v-if",!0):(J(),Ls(i,{key:0,size:36,style:{margin:"20px auto"}})),V("img",{class:"wl-gallery-item",src:n.items[c].src,title:n.items[c].title,loading:"lazy",onLoad:r=>n.state[n.items[c].src]=!0,onClick:r=>n.$emit("insert",`![](${n.items[c].src})`)},null,40,U0)],64))),128))],12,V0))),128))],4)}],["__file","ImageWall.vue"]]);const W0=["nick","mail","link"],Nr=n=>n.filter(s=>W0.includes(s)),Y0=n=>new Promise((s,a)=>{if(n.size>128e3)return a(new Error("File too large! File size limit 128KB"));const e=new FileReader;e.readAsDataURL(n),e.onload=()=>{var t;return s(((t=e.result)==null?void 0:t.toString())||"")},e.onerror=a}),X0=n=>n===!0?'<p class="wl-tex">Tex is not available in preview</p>':'<span class="wl-tex">Tex is not available in preview</span>',J0=()=>{const n={next:""},s=({keyword:a,pos:e})=>{const t=new URLSearchParams("media_filter=minimal");return t.set("key","PAY5JLFIH6V6"),t.set("limit","20"),t.set("pos",e||""),t.set("q",a),fetch(`https://g.tenor.com/v1/search?${t.toString()}`,{headers:{"Content-Type":"application/json"}}).then(o=>o.json()).catch(()=>({next:e||"",results:[]}))};return{search:(a="")=>s({keyword:a}).then(e=>(n.next=e.next,e.results.map(t=>({title:t.title,src:t.media[0].tinygif.url})))),more:a=>s({keyword:a,pos:n.next}).then(e=>(n.next=e.next,e.results.map(t=>({title:t.title,src:t.media[0].tinygif.url}))))}},K0=new RegExp(`(${/[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|\w+/.source}|${/</.source})|((?:${/(?:^|\s)\/\/(.+?)$/gm.source})|(?:${/\/\*([\S\s]*?)\*\//gm.source}))`,"gmi"),zr=["23AC69","91C132","F19726","E8552D","1AAB8E","E1147F","2980C1","1BA1E6","9FA0A0","F19726","E30B20","E30B20","A3338B"],ai={},Q0=n=>{let s=0;return n.replace(K0,(a,e,t)=>{if(t)return`<span style="color: slategray">${t}</span>`;if(e==="<")return"&lt;";let o;ai[e]?o=ai[e]:(o=zr[s],ai[e]=o);const i=`<span style="color: #${o}">${e}</span>`;return s=++s%zr.length,i})},Z0=["nick","nickError","mail","mailError","link","optional","placeholder","sofa","submit","like","cancelLike","reply","cancelReply","comment","refresh","more","preview","emoji","uploadImage","seconds","minutes","hours","days","now","uploading","login","logout","admin","sticky","word","wordHint","anonymous","level0","level1","level2","level3","level4","level5","gif","gifSearchPlaceholder","profile","approved","waiting","spam","unsticky"],oe=n=>Object.fromEntries(n.map((s,a)=>[Z0[a],s]));var ei=oe(["NickName","NickName cannot be less than 3 bytes.","E-Mail","Please confirm your email address.","Website","Optional","Comment here...","No comment yet.","Submit","Like","Cancel like","Reply","Cancel reply","Comments","Refresh","Load More...","Preview","Emoji","Upload Image","seconds ago","minutes ago","hours ago","days ago","just now","Uploading","Login","logout","Admin","Sticky","Words",`Please input comments between $0 and $1 words!
 Current word number: $2`,"Anonymous","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Search GIF","Profile","Approved","Waiting","Spam","Unsticky"]),ti=oe(["\u30CB\u30C3\u30AF\u30CD\u30FC\u30E0","3\u30D0\u30A4\u30C8\u4EE5\u4E0A\u306E\u30CB\u30C3\u30AF\u30CD\u30FC\u30E0\u3092\u3054\u5165\u529B\u304F\u3060\u3055\u3044.","\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9","\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044.","\u30B5\u30A4\u30C8","\u30AA\u30D7\u30B7\u30E7\u30F3","\u3053\u3053\u306B\u30B3\u30E1\u30F3\u30C8","\u30B3\u30E1\u30F3\u30C8\u3057\u307E\u3057\u3087\u3046~","\u63D0\u51FA\u3059\u308B","Like","Cancel like","\u8FD4\u4FE1\u3059\u308B","\u30AD\u30E3\u30F3\u30BB\u30EB","\u30B3\u30E1\u30F3\u30C8","\u66F4\u65B0","\u3055\u3089\u306B\u8AAD\u307F\u8FBC\u3080","\u30D7\u30EC\u30D3\u30E5\u30FC","\u7D75\u6587\u5B57","\u753B\u50CF\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9","\u79D2\u524D","\u5206\u524D","\u6642\u9593\u524D","\u65E5\u524D","\u305F\u3063\u3060\u4ECA","\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9","\u30ED\u30B0\u30A4\u30F3\u3059\u308B","\u30ED\u30B0\u30A2\u30A6\u30C8","\u7BA1\u7406\u8005","\u30C8\u30C3\u30D7\u306B\u7F6E\u304F","\u30EF\u30FC\u30C9",`\u30B3\u30E1\u30F3\u30C8\u306F $0 \u304B\u3089 $1 \u30EF\u30FC\u30C9\u306E\u9593\u3067\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093!
 \u73FE\u5728\u306E\u5358\u8A9E\u756A\u53F7: $2`,"\u533F\u540D","\u3046\u3048\u306B\u3093","\u306A\u304B\u306B\u3093","\u3057\u3082\u304A\u3057","\u7279\u306B\u3057\u3082\u304A\u3057","\u304B\u3052","\u306A\u306C\u3057","GIF","\u63A2\u3059 GIF","\u500B\u4EBA\u60C5\u5831","\u627F\u8A8D\u6E08\u307F","\u5F85\u3063\u3066\u3044\u308B","\u30B9\u30D1\u30E0","\u3079\u305F\u3064\u304B\u306A\u3044"]),oi=oe(["\u6635\u79F0","\u6635\u79F0\u4E0D\u80FD\u5C11\u4E8E3\u4E2A\u5B57\u7B26","\u90AE\u7BB1","\u8BF7\u586B\u5199\u6B63\u786E\u7684\u90AE\u4EF6\u5730\u5740","\u7F51\u5740","\u53EF\u9009","\u6B22\u8FCE\u8BC4\u8BBA","\u6765\u53D1\u8BC4\u8BBA\u5427~","\u63D0\u4EA4","\u559C\u6B22","\u53D6\u6D88\u559C\u6B22","\u56DE\u590D","\u53D6\u6D88\u56DE\u590D","\u8BC4\u8BBA","\u5237\u65B0","\u52A0\u8F7D\u66F4\u591A...","\u9884\u89C8","\u8868\u60C5","\u4E0A\u4F20\u56FE\u7247","\u79D2\u524D","\u5206\u949F\u524D","\u5C0F\u65F6\u524D","\u5929\u524D","\u521A\u521A","\u6B63\u5728\u4E0A\u4F20","\u767B\u5F55","\u9000\u51FA","\u535A\u4E3B","\u7F6E\u9876","\u5B57",`\u8BC4\u8BBA\u5B57\u6570\u5E94\u5728 $0 \u5230 $1 \u5B57\u4E4B\u95F4\uFF01
\u5F53\u524D\u5B57\u6570\uFF1A$2`,"\u533F\u540D","\u6F5C\u6C34","\u5192\u6CE1","\u5410\u69FD","\u6D3B\u8DC3","\u8BDD\u75E8","\u4F20\u8BF4","\u8868\u60C5\u5305","\u641C\u7D22\u8868\u60C5\u5305","\u4E2A\u4EBA\u8D44\u6599","\u901A\u8FC7","\u5F85\u5BA1\u6838","\u5783\u573E","\u53D6\u6D88\u7F6E\u9876"]),Hr=oe(["\u66B1\u7A31","\u66B1\u7A31\u4E0D\u80FD\u5C11\u65BC3\u500B\u5B57\u5143","\u90F5\u7BB1","\u8ACB\u586B\u5BEB\u6B63\u78BA\u7684\u90F5\u4EF6\u5730\u5740","\u7DB2\u5740","\u53EF\u9078","\u6B61\u8FCE\u8A55\u8AD6","\u4F86\u767C\u8A55\u8AD6\u5427~","\u63D0\u4EA4","\u559C\u6B61","\u53D6\u6D88\u559C\u6B61","\u56DE\u8986","\u53D6\u6D88\u56DE\u8986","\u8A55\u8AD6","\u5237\u65B0","\u8F09\u5165\u66F4\u591A...","\u9810\u89BD","\u8868\u60C5","\u4E0A\u50B3\u5716\u7247","\u79D2\u524D","\u5206\u9418\u524D","\u5C0F\u6642\u524D","\u5929\u524D","\u525B\u525B","\u6B63\u5728\u4E0A\u50B3","\u767B\u9304","\u9000\u51FA","\u535A\u4E3B","\u7F6E\u9802","\u5B57",`\u8A55\u8AD6\u5B57\u6578\u61C9\u5728 $0 \u5230 $1 \u5B57\u4E4B\u9593\uFF01
\u7576\u524D\u5B57\u6578\uFF1A$2`,"\u533F\u540D","\u6F5B\u6C34","\u5192\u6CE1","\u5410\u69FD","\u6D3B\u8E8D","\u8A71\u7646","\u50B3\u8AAA","\u8868\u60C5\u5305","\u641C\u7D22\u8868\u60C5\u5305","\u500B\u4EBA\u8CC7\u6599","\u901A\u904E","\u5F85\u5BE9\u6838","\u5783\u573E","\u53D6\u6D88\u7F6E\u9802"]),Gr=oe(["Apelido","Apelido n\xE3o pode ser menor que 3 bytes.","E-Mail","Por favor, confirme seu endere\xE7o de e-mail.","Website","Opcional","Comente aqui...","Nenhum coment\xE1rio, ainda.","Enviar","Like","Cancel like","Responder","Cancelar resposta","Coment\xE1rios","Refrescar","Carregar Mais...","Visualizar","Emoji","Enviar Imagem","segundos atr\xE1s","minutos atr\xE1s","horas atr\xE1s","dias atr\xE1s","agora mesmo","Enviando","Entrar","Sair","Admin","Sticky","Palavras",`Favor enviar coment\xE1rio com $0 a $1 palavras!
 N\xFAmero de palavras atuais: $2`,"An\xF4nimo","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Pesquisar GIF","informa\xE7\xE3o pessoal","Aprovado","Espera","Spam","Unsticky"]),ii=oe(["\u041F\u0441\u0435\u0432\u0434\u043E\u043D\u0438\u043C","\u041D\u0438\u043A\u043D\u0435\u0439\u043C \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043C\u0435\u043D\u044C\u0448\u0435 3 \u0431\u0430\u0439\u0442.","\u042D\u043B. \u0430\u0434\u0440\u0435\u0441","\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0432\u0430\u0448\u0435\u0439 \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0439 \u043F\u043E\u0447\u0442\u044B.","\u0412\u0435\u0431-\u0441\u0430\u0439\u0442","\u041D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439","\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u0437\u0434\u0435\u0441\u044C...","\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432.","\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C","Like","Cancel like","\u041E\u0442\u0432\u0435\u0447\u0430\u0442\u044C","\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043E\u0442\u0432\u0435\u0442","\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438","\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C","\u0417\u0430\u0433\u0440\u0443\u0437\u0438 \u0431\u043E\u043B\u044C\u0448\u0435...","\u041F\u0440\u0435\u0432\u044C\u044E","\u044D\u043C\u043E\u0434\u0437\u0438","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435","\u0441\u0435\u043A\u0443\u043D\u0434 \u043D\u0430\u0437\u0430\u0434","\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u043C\u0438\u043D\u0443\u0442 \u043D\u0430\u0437\u0430\u0434","\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0447\u0430\u0441\u043E\u0432 \u043D\u0430\u0437\u0430\u0434","\u0434\u043D\u0435\u0439 \u043D\u0430\u0437\u0430\u0434","\u043F\u0440\u044F\u043C\u043E \u0441\u0435\u0439\u0447\u0430\u0441","\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430","\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F","\u0412\u044B\u0445\u043E\u0434 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043C\u044B","\u0410\u0434\u043C\u0438\u043D","\u041B\u0438\u043F\u043A\u0438\u0439","\u0421\u043B\u043E\u0432\u0430",`\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438 \u043E\u0442 $0 \u0434\u043E $1 \u0441\u043B\u043E\u0432!
\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0441\u043B\u043E\u0432\u0430: $2`,"\u0410\u043D\u043E\u043D\u0438\u043C\u043D\u044B\u0439","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","\u041F\u043E\u0438\u0441\u043A GIF","\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435","\u041E\u0434\u043E\u0431\u0440\u0435\u043D\u043D\u044B\u0439","\u041E\u0436\u0438\u0434\u0430\u044E\u0449\u0438\u0439","\u0421\u043F\u0430\u043C","\u041D\u0435\u043B\u0438\u043F\u043A\u0438\u0439"]);const Vr={zh:oi,"zh-cn":oi,"zh-CN":oi,"zh-tw":Hr,"zh-TW":Hr,en:ei,"en-US":ei,"en-us":ei,jp:ti,"jp-jp":ti,"jp-JP":ti,"pt-br":Gr,"pt-BR":Gr,ru:ii,"ru-ru":ii,"ru-RU":ii},n1=n=>{try{n=decodeURI(n)}catch{}return n},Ik=(n="")=>n.replace(/\/$/u,""),Ok=n=>/^(https?:)?\/\//.test(n),s1=n=>{const s=Ik(n);return Ok(s)?s:`https://${s}`},a1=n=>Array.isArray(n)?n:!!n&&[0,n],pi=(n,s)=>typeof n=="function"?n:n!==!1&&s,li="{--waline-white:#000;--waline-light-grey:#666;--waline-dark-grey:#999;--waline-color:#888;--waline-bgcolor:#1e1e1e;--waline-bgcolor-light:#272727;--waline-bgcolor-hover: #444;--waline-border-color:#333;--waline-disable-bgcolor:#444;--waline-disable-color:#272727;--waline-bq-color:#272727;--waline-info-bgcolor:#272727;--waline-info-color:#666}",ci=(n,s)=>{let a=n.toString();for(;a.length<s;)a="0"+a;return a},e1=(n,s,a)=>{if(!n)return"";const e=typeof n=="string"?new Date(n.indexOf(" ")!==-1?n.replace(/-/g,"/"):n):n,t=s.getTime()-e.getTime(),o=Math.floor(t/864e5);if(o===0){const i=t%864e5,p=Math.floor(i/36e5);if(p===0){const l=i%36e5,c=Math.floor(l/6e4);if(c===0){const r=l%6e4;return`${Math.round(r/1e3)} ${a.seconds}`}return`${c} ${a.minutes}`}return`${p} ${a.hours}`}return o<0?a.now:o<8?`${o} ${a.days}`:(i=>{const p=ci(i.getDate(),2),l=ci(i.getMonth()+1,2);return`${ci(i.getFullYear(),2)}-${l}-${p}`})(e)},t1=n=>{const s=qe("WALINE_EMOJI",{}),a=Boolean(/@[0-9]+\.[0-9]+\.[0-9]+/.test(n));if(a){const e=s.value[n];if(e)return Promise.resolve(e)}return fetch(`${n}/info.json`).then(e=>e.json()).then(e=>{const t={folder:n,...e};return a&&(s.value[n]=t),t})},Ur=(n,s="",a="",e="")=>`${s?`${s}/`:""}${a}${n}${e?`.${e}`:""}`,o1={"Content-Type":"application/json"},i1=({serverURL:n,lang:s,path:a,page:e,pageSize:t,signal:o,token:i})=>{const p={};return i&&(p.Authorization=`Bearer ${i}`),fetch(`${n}/comment?path=${encodeURIComponent(a)}&pageSize=${t}&page=${e}&lang=${s}`,{signal:o,headers:p}).then(l=>l.json()).then(l=>((c,r="")=>{if(typeof c=="object"&&c.errno)throw new TypeError(`Fetch ${r} failed with ${c.errno}: ${c.errmsg}`);return c})(l,"comment list"))},qr=({serverURL:n,lang:s,token:a,objectId:e,...t})=>fetch(`${n}/comment/${e}?lang=${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)}).then(o=>o.json()),p1=n=>n.type.includes("image"),Wr=n=>{const s=Array.from(n).find(p1);return s?s.getAsFile():null},l1=/\$.*?\$/,c1=/^\$(.*?)\$/,r1=/^(?:\s{0,3})\$\$((?:[^\n]|\n[^\n])+?)\n{0,1}\$\$/,Ak=(n="",s={})=>n.replace(/:(.+?):/g,(a,e)=>s[e]?`<img class="wl-emoji" src="${s[e]}" alt="${e}">`:a),u1=(n,{emojiMap:s,highlighter:a,texRenderer:e})=>{if(bn.setOptions({highlight:a||void 0,breaks:!0,smartLists:!0,smartypants:!0}),e){const t=(o=>[{name:"blockMath",level:"block",tokenizer(i){const p=r1.exec(i);if(p!==null)return{type:"html",raw:p[0],text:o(!0,p[1])}}},{name:"inlineMath",level:"inline",start(i){const p=i.search(l1);return p!==-1?p:i.length},tokenizer(i){const p=c1.exec(i);if(p!==null)return{type:"html",raw:p[0],text:o(!1,p[1])}}}])(e);bn.use({extensions:t})}return bn.parse(Ak(n,s))};let Yr=null;const Mp=()=>Yr||(Yr=qe("WALINE_USER",{}));let Xr=null;const Lk=()=>Xr||(Xr=qe("WALINE_LIKE",[]));var d1=jn({name:"CommentBox",components:{CloseIcon:({size:n})=>Z("svg",{class:"wl-close-icon",viewBox:"0 0 1024 1024",width:n,height:n},[Z("path",{d:"M697.173 85.333h-369.92c-144.64 0-241.92 101.547-241.92 252.587v348.587c0 150.613 97.28 252.16 241.92 252.16h369.92c144.64 0 241.494-101.547 241.494-252.16V337.92c0-151.04-96.854-252.587-241.494-252.587z",fill:"currentColor"}),Z("path",{d:"m640.683 587.52-75.947-75.861 75.904-75.862a37.29 37.29 0 0 0 0-52.778 37.205 37.205 0 0 0-52.779 0l-75.946 75.818-75.862-75.946a37.419 37.419 0 0 0-52.821 0 37.419 37.419 0 0 0 0 52.821l75.947 75.947-75.776 75.733a37.29 37.29 0 1 0 52.778 52.821l75.776-75.776 75.947 75.947a37.376 37.376 0 0 0 52.779-52.821z",fill:"#888"})]),EmojiIcon:()=>Z("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},Z("path",{d:"M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z",fill:"currentColor"})),ImageIcon:()=>Z("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[Z("path",{d:"M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z",fill:"currentColor"}),Z("path",{d:"M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z",fill:"currentColor"})]),ImageWall:q0,MarkdownIcon:()=>Z("svg",{width:"16",height:"16",ariaHidden:"true"},Z("path",{d:"M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z",fill:"currentColor"})),PreviewIcon:()=>Z("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[Z("path",{d:"M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0",fill:"currentColor"}),Z("path",{d:"M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0",fill:"currentColor"})]),LoadingIcon:Dp,GifIcon:()=>Z("svg",{width:24,height:24,fill:"currentcolor",viewBox:"0 0 24 24"},[Z("path",{style:"transform: translateY(0.5px)",d:"M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"}),Z("path",{d:"M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"})])},props:{rootId:{type:String,default:""},replyId:{type:String,default:""},replyUser:{type:String,default:""}},emits:["submit","cancel-reply"],setup(n,{emit:s}){const a=Xn("config"),e=qe("WALINE_COMMENT_BOX_EDITOR",""),t=qe("WALINE_USER_META",{nick:"",mail:"",link:""}),o=Mp(),i=an({}),p=an(null),l=an(null),c=an(null),r=an(null),k=an(null),d=an(null),u=an(null),m=an({tabs:[],map:{}}),v=an(0),b=an(!1),h=an(!1),g=an(!1),_=an(""),y=an(0),x=pa({loading:!0,list:[]}),O=an(0),I=an(!1),w=an(""),G=an(!1),U=vn(()=>a.value.locale),D=vn(()=>{var N;return Boolean((N=o.value)==null?void 0:N.token)}),C=vn(()=>a.value.imageUploader!==!1),E=N=>{const X=p.value,en=X.selectionStart,wn=X.selectionEnd||0,xn=X.scrollTop;e.value=X.value.substring(0,en)+N+X.value.substring(wn,X.value.length),X.focus(),X.selectionStart=en+N.length,X.selectionEnd=en+N.length,X.scrollTop=xn},A=N=>{const X=`![${a.value.locale.uploading} ${N.name}]()`;return E(X),Promise.resolve().then(()=>a.value.imageUploader(N)).then(en=>{e.value=e.value.replace(X,`\r
![${N.name}](${en})`)}).catch(en=>{alert(en.message),e.value=e.value.replace(X,"")})},M=()=>{var W,R,K,_n,$n;const{serverURL:N,lang:X,login:en,wordLimit:wn,requiredMeta:xn}=a.value,P={comment:w.value,nick:t.value.nick,mail:t.value.mail,link:t.value.link,ua:navigator.userAgent,url:a.value.path};if((W=o.value)!=null&&W.token)P.nick=o.value.display_name,P.mail=o.value.email,P.link=o.value.url;else{if(en==="force")return;if(xn.indexOf("nick")>-1&&!P.nick)return(R=i.value.nick)==null||R.focus(),alert(U.value.nickError);if(xn.indexOf("mail")>-1&&!P.mail||P.mail&&!/^\w(?:[\w._-]*\w)?@(?:\w(?:[\w-]*\w)?\.)*\w+$/.exec(P.mail))return(K=i.value.mail)==null||K.focus(),alert(U.value.mailError);if(!P.comment)return void((_n=p.value)==null?void 0:_n.focus());P.nick||(P.nick=U.value.anonymous)}if(!I.value)return alert(U.value.wordHint.replace("$0",wn[0].toString()).replace("$1",wn[1].toString()).replace("$2",y.value.toString()));P.comment=Ak(P.comment,m.value.map),n.replyId&&n.rootId&&(P.pid=n.replyId,P.rid=n.rootId,P.at=n.replyUser),G.value=!0,(({serverURL:dn,lang:mn,token:f,comment:S})=>{const T={"Content-Type":"application/json"};return f&&(T.Authorization=`Bearer ${f}`),fetch(`${dn}/comment?lang=${mn}`,{method:"POST",headers:T,body:JSON.stringify(S)}).then(L=>L.json())})({serverURL:N,lang:X,token:($n=o.value)==null?void 0:$n.token,comment:P}).then(dn=>{if(G.value=!1,dn.errmsg)return alert(dn.errmsg);s("submit",dn.data),e.value="",_.value="",n.replyId&&s("cancel-reply")}).catch(dn=>{G.value=!1,alert(dn.message)})},j=N=>{c.value.contains(N.target)||r.value.contains(N.target)||(b.value=!1),k.value.contains(N.target)||d.value.contains(N.target)||(h.value=!1)},q=async N=>{var R;const{scrollTop:X,clientHeight:en,scrollHeight:wn}=N.target,xn=(en+X)/wn,P=a.value.search,W=((R=u.value)==null?void 0:R.value)||"";xn<.9||x.loading||(x.loading=!0,x.list.push(...P.more?await P.more(W,x.list.length):await P.search(W)),x.loading=!1,setTimeout(()=>{N.target.scrollTop=X},50))},nn=f0(N=>{x.list=[],q(N)},300);Vn([a,y],([N,X])=>{const{wordLimit:en}=N;en?X<en[0]&&en[0]!==0?(O.value=en[0],I.value=!1):X>en[1]?(O.value=en[1],I.value=!1):(O.value=en[1],I.value=!0):(O.value=0,I.value=!0)},{immediate:!0}),Vn(h,async N=>{if(!N)return;const X=a.value.search;u.value&&(u.value.value=""),x.loading=!0,x.list=X.default?await X.default():await X.search(""),x.loading=!1});const yn=({data:N})=>{N&&N.type==="profile"&&(o.value={...o.value,...N.data},[localStorage,sessionStorage].filter(X=>X.getItem("WALINE_USER")).forEach(X=>X.setItem("WALINE_USER",JSON.stringify(o))))};return Qn(()=>{document.body.addEventListener("click",j),window.addEventListener("message",yn),Vn(()=>e.value,N=>{const{highlighter:X,texRenderer:en}=a.value;w.value=N,_.value=u1(N,{emojiMap:m.value.map,highlighter:X,texRenderer:en}),y.value=(wn=>(xn=>xn.match(/[\w\d\s\u00C0-\u024F]+/giu)||[])(wn).reduce((xn,P)=>xn+(P.trim()===""?0:P.trim().split(/\s+/u).length),0)+(xn=>xn.match(/[\u4E00-\u9FA5]/gu)||[])(wn).length)(N),N?yr(p.value):yr.destroy(p.value)},{immediate:!0}),Vn(()=>a.value.emoji,N=>{return(X=Array.isArray(N)?N:[],Promise.all(X.map(en=>typeof en=="string"?t1(Ik(en)):Promise.resolve(en))).then(en=>{const wn={tabs:[],map:{}};return en.forEach(xn=>{const{name:P,folder:W,icon:R,prefix:K,type:_n,items:$n}=xn;wn.tabs.push({name:P,icon:Ur(R,W,K,_n),items:$n.map(dn=>{const mn=`${K||""}${dn}`;return wn.map[mn]=Ur(dn,W,K,_n),mn})})}),wn})).then(en=>{m.value=en});var X},{immediate:!0})}),nt(()=>{document.body.removeEventListener("click",j),window.removeEventListener("message",yn)}),{config:a,locale:U,insert:E,onChange:()=>{const N=l.value;N.files&&C.value&&A(N.files[0]).then(()=>{N.value=""})},onDrop:N=>{var X;if((X=N.dataTransfer)!=null&&X.items){const en=Wr(N.dataTransfer.items);en&&C.value&&(A(en),N.preventDefault())}},onKeyDown:N=>{const X=N.key;(N.ctrlKey||N.metaKey)&&X==="Enter"&&M()},onPaste:N=>{if(N.clipboardData){const X=Wr(N.clipboardData.items);X&&C.value&&A(X)}},onLogin:N=>{N.preventDefault();const{lang:X,serverURL:en}=a.value,wn=(window.innerWidth-450)/2,xn=(window.innerHeight-450)/2,P=window.open(`${en}/ui/login?lng=${encodeURIComponent(X)}`,"_blank",`width=450,height=450,left=${wn},top=${xn},scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no`);P==null||P.postMessage({type:"TOKEN",data:null},"*");const W=({data:R})=>{R&&R.type==="userInfo"&&R.data.token&&(P==null||P.close(),o.value=R.data,(R.data.remember?localStorage:sessionStorage).setItem("WALINE_USER",JSON.stringify(R.data)),window.removeEventListener("message",W))};window.addEventListener("message",W)},onLogout:()=>{o.value={},localStorage.setItem("WALINE_USER","null"),sessionStorage.setItem("WALINE_USER","null")},onProfile:N=>{var P;N.preventDefault();const{lang:X,serverURL:en}=a.value,wn=(window.innerWidth-800)/2,xn=(window.innerHeight-800)/2;(P=window.open(`${en}/ui/profile?lng=${encodeURIComponent(X)}`,"_blank",`width=800,height=800,left=${wn},top=${xn},scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no`))==null||P.postMessage({type:"TOKEN",data:o.value.token},"*")},submitComment:M,onImageWallScroll:q,onGifSearch:nn,isLogin:D,userInfo:o,isSubmitting:G,wordNumber:y,wordLimit:O,isWordNumberLegal:I,editor:e,userMeta:t,emoji:m,emojiTabIndex:v,showEmoji:b,gifData:x,showGif:h,canUploadImage:C,previewText:_,showPreview:g,inputRefs:i,editorRef:p,emojiButtonRef:c,emojiPopupRef:r,gifButtonRef:k,gifPopupRef:d,imageUploadRef:l,gifSearchInputRef:u}}});const k1={class:"wl-comment"},m1={key:0,class:"wl-login-info"},v1={class:"wl-avatar"},h1=["title"],g1=["title"],b1=["src"],f1=["title","textContent"],y1={class:"wl-panel"},_1=["for","textContent"],w1=["id","onUpdate:modelValue","name","type"],S1=["placeholder"],x1={class:"wl-preview"},$1=V("hr",null,null,-1),C1=["innerHTML"],E1={class:"wl-footer"},T1={class:"wl-actions"},P1={href:"https://guides.github.com/features/mastering-markdown/",title:"Markdown Guide","aria-label":"Markdown is supported",class:"wl-action",target:"_blank",rel:"noreferrer"},I1=["title"],O1=["title"],A1=["title"],L1=["title"],D1={class:"wl-info"},M1={class:"wl-text-number"},j1={key:0},R1=fs(" \xA0/\xA0 "),F1=["textContent"],B1=["textContent"],N1=["disabled"],z1=["placeholder"],H1={key:0,class:"wl-loading"},G1={key:0,class:"wl-tab-wrapper"},V1=["title","onClick"],U1=["src","alt"],q1={key:0,class:"wl-tabs"},W1=["onClick"],Y1=["src","alt","title"],X1=["title"];var Dk=Co(d1,[["render",function(n,s,a,e,t,o){const i=Kn("CloseIcon"),p=Kn("MarkdownIcon"),l=Kn("EmojiIcon"),c=Kn("GifIcon"),r=Kn("ImageIcon"),k=Kn("PreviewIcon"),d=Kn("LoadingIcon"),u=Kn("ImageWall");return J(),sn("div",k1,[n.config.login!=="disable"&&n.isLogin?(J(),sn("div",m1,[V("div",v1,[V("button",{class:"wl-logout-btn",title:n.locale.logout,onClick:s[0]||(s[0]=(...m)=>n.onLogout&&n.onLogout(...m))},[En(i,{size:14})],8,h1),V("a",{href:"#",class:"wl-login-nick","aria-label":"Profile",title:n.locale.profile,onClick:s[1]||(s[1]=(...m)=>n.onProfile&&n.onProfile(...m))},[V("img",{src:n.userInfo.avatar,alt:"avatar"},null,8,b1)],8,g1)]),V("a",{href:"#",class:"wl-login-nick","aria-label":"Profile",title:n.locale.profile,onClick:s[2]||(s[2]=(...m)=>n.onProfile&&n.onProfile(...m)),textContent:Ln(n.userInfo.display_name)},null,8,f1)])):Tn("v-if",!0),V("div",y1,[n.config.login!=="force"&&n.config.meta.length&&!n.isLogin?(J(),sn("div",{key:0,class:es(["wl-header",`item${n.config.meta.length}`])},[(J(!0),sn(Rn,null,Ps(n.config.meta,m=>(J(),sn("div",{key:m,class:"wl-header-item"},[V("label",{for:m,textContent:Ln(n.locale[m]+(n.config.requiredMeta.includes(m)||!n.config.requiredMeta.length?"":`(${n.locale.optional})`))},null,8,_1),qn(V("input",{id:`wl-${m}`,ref_for:!0,ref:v=>{v&&(n.inputRefs[m]=v)},"onUpdate:modelValue":v=>n.userMeta[m]=v,class:es(["wl-input",`wl-${m}`]),name:m,type:m==="mail"?"email":"text"},null,10,w1),[[dh,n.userMeta[m]]])]))),128))],2)):Tn("v-if",!0),qn(V("textarea",{id:"wl-edit",ref:"editorRef","onUpdate:modelValue":s[3]||(s[3]=m=>n.editor=m),class:"wl-editor",placeholder:n.replyUser?`@${n.replyUser}`:n.locale.placeholder,onKeydown:s[4]||(s[4]=(...m)=>n.onKeyDown&&n.onKeyDown(...m)),onDrop:s[5]||(s[5]=(...m)=>n.onDrop&&n.onDrop(...m)),onPaste:s[6]||(s[6]=(...m)=>n.onPaste&&n.onPaste(...m))},null,40,S1),[[Pi,n.editor]]),qn(V("div",x1,[$1,V("h4",null,Ln(n.locale.preview)+":",1),Tn(" eslint-disable-next-line vue/no-v-html "),V("div",{class:"wl-content",innerHTML:n.previewText},null,8,C1)],512),[[Jn,n.showPreview]]),V("div",E1,[V("div",T1,[V("a",P1,[En(p)]),qn(V("button",{ref:"emojiButtonRef",class:es(["wl-action",{actived:n.showEmoji}]),title:n.locale.emoji,onClick:s[7]||(s[7]=m=>n.showEmoji=!n.showEmoji)},[En(l)],10,I1),[[Jn,n.emoji.tabs.length]]),n.config.search?(J(),sn("button",{key:0,ref:"gifButtonRef",class:es(["wl-action",{actived:n.showGif}]),title:n.locale.gif,onClick:s[8]||(s[8]=m=>n.showGif=!n.showGif)},[En(c)],10,O1)):Tn("v-if",!0),V("input",{id:"wl-image-upload",ref:"imageUploadRef",class:"upload",type:"file",accept:".png,.jpg,.jpeg,.webp,.bmp,.gif",onChange:s[9]||(s[9]=(...m)=>n.onChange&&n.onChange(...m))},null,544),n.canUploadImage?(J(),sn("label",{key:1,for:"wl-image-upload",class:"wl-action",title:n.locale.uploadImage},[En(r)],8,A1)):Tn("v-if",!0),V("button",{class:es(["wl-action",{actived:n.showPreview}]),title:n.locale.preview,onClick:s[10]||(s[10]=m=>n.showPreview=!n.showPreview)},[En(k)],10,L1)]),V("div",D1,[V("div",M1,[fs(Ln(n.wordNumber)+" ",1),n.config.wordLimit?(J(),sn("span",j1,[R1,V("span",{class:es({illegal:!n.isWordNumberLegal}),textContent:Ln(n.wordLimit)},null,10,F1)])):Tn("v-if",!0),fs(" \xA0"+Ln(n.locale.word),1)]),n.config.login==="disable"||n.isLogin?Tn("v-if",!0):(J(),sn("button",{key:0,class:"wl-btn",onClick:s[11]||(s[11]=(...m)=>n.onLogin&&n.onLogin(...m)),textContent:Ln(n.locale.login)},null,8,B1)),n.config.login!=="force"||n.isLogin?(J(),sn("button",{key:1,class:"wl-btn primary",title:"Cmd|Ctrl + Enter",disabled:n.isSubmitting,onClick:s[12]||(s[12]=(...m)=>n.submitComment&&n.submitComment(...m))},[n.isSubmitting?(J(),Ls(d,{key:0,size:16})):(J(),sn(Rn,{key:1},[fs(Ln(n.locale.submit),1)],64))],8,N1)):Tn("v-if",!0)]),V("div",{ref:"gifPopupRef",class:es(["wl-gif-popup",{display:n.showGif}])},[V("input",{ref:"gifSearchInputRef",type:"text",placeholder:n.locale.gifSearchPlaceholder,onInput:s[13]||(s[13]=(...m)=>n.onGifSearch&&n.onGifSearch(...m))},null,40,z1),En(u,{items:n.gifData.list,"column-width":200,gap:6,onInsert:s[14]||(s[14]=m=>n.insert(m)),onScroll:n.onImageWallScroll},null,8,["items","onScroll"]),n.gifData.loading?(J(),sn("div",H1,[En(d,{size:30})])):Tn("v-if",!0)],2),V("div",{ref:"emojiPopupRef",class:es(["wl-emoji-popup",{display:n.showEmoji}])},[(J(!0),sn(Rn,null,Ps(n.emoji.tabs,(m,v)=>(J(),sn(Rn,{key:m.name},[v===n.emojiTabIndex?(J(),sn("div",G1,[(J(!0),sn(Rn,null,Ps(m.items,b=>(J(),sn("button",{key:b,title:b,onClick:h=>n.insert(`:${b}:`)},[n.showEmoji?(J(),sn("img",{key:0,class:"wl-emoji",src:n.emoji.map[b],alt:b,loading:"lazy",referrerPolicy:"no-referrer"},null,8,U1)):Tn("v-if",!0)],8,V1))),128))])):Tn("v-if",!0)],64))),128)),n.emoji.tabs.length>1?(J(),sn("div",q1,[(J(!0),sn(Rn,null,Ps(n.emoji.tabs,(m,v)=>(J(),sn("button",{key:m.name,class:es(["wl-tab",{active:n.emojiTabIndex===v}]),onClick:b=>n.emojiTabIndex=v},[V("img",{class:"wl-emoji",src:m.icon,alt:m.name,title:m.name,loading:"lazy",referrerPolicy:"no-referrer"},null,8,Y1)],10,W1))),128))])):Tn("v-if",!0)],2)])]),n.replyId?(J(),sn("button",{key:1,class:"wl-close",title:n.locale.cancelReply,onClick:s[15]||(s[15]=m=>n.$emit("cancel-reply"))},[En(i,{size:24})],8,X1)):Tn("v-if",!0)])}],["__file","CommentBox.vue"]]);const J1=["approved","waiting","spam"];var K1=jn({components:{CommentBox:Dk,DeleteIcon:()=>Z("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},Z("path",{d:"m341.013 394.667 27.755 393.45h271.83l27.733-393.45h64.106l-28.01 397.952a64 64 0 0 1-63.83 59.498H368.768a64 64 0 0 1-63.83-59.52l-28.053-397.93h64.128zm139.307 19.818v298.667h-64V414.485h64zm117.013 0v298.667h-64V414.485h64zM181.333 288h640v64h-640v-64zm453.483-106.667v64h-256v-64h256z",fill:"red"})),LikeIcon:({active:n=!1})=>Z("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[Z("path",{d:"M850.654 323.804c-11.042-25.625-26.862-48.532-46.885-68.225-20.022-19.61-43.258-34.936-69.213-45.73-26.78-11.124-55.124-16.727-84.375-16.727-40.622 0-80.256 11.123-114.698 32.135A214.79 214.79 0 0 0 512 241.819a214.79 214.79 0 0 0-23.483-16.562c-34.442-21.012-74.076-32.135-114.698-32.135-29.25 0-57.595 5.603-84.375 16.727-25.872 10.711-49.19 26.12-69.213 45.73-20.105 19.693-35.843 42.6-46.885 68.225-11.453 26.615-17.303 54.877-17.303 83.963 0 27.439 5.603 56.03 16.727 85.117 9.31 24.307 22.659 49.52 39.715 74.981 27.027 40.293 64.188 82.316 110.33 124.915 76.465 70.615 152.189 119.394 155.402 121.371l19.528 12.525c8.652 5.52 19.776 5.52 28.427 0l19.529-12.525c3.213-2.06 78.854-50.756 155.401-121.371 46.143-42.6 83.304-84.622 110.33-124.915 17.057-25.46 30.487-50.674 39.716-74.981 11.124-29.087 16.727-57.678 16.727-85.117.082-29.086-5.768-57.348-17.221-83.963z"+(n?"":"M512 761.5S218.665 573.55 218.665 407.767c0-83.963 69.461-152.023 155.154-152.023 60.233 0 112.473 33.618 138.181 82.727 25.708-49.109 77.948-82.727 138.18-82.727 85.694 0 155.155 68.06 155.155 152.023C805.335 573.551 512 761.5 512 761.5z"),fill:n?"red":"currentColor"})]),ReplyIcon:()=>Z("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},Z("path",{d:"M810.667 213.333a64 64 0 0 1 64 64V704a64 64 0 0 1-64 64H478.336l-146.645 96.107a21.333 21.333 0 0 1-33.024-17.856V768h-85.334a64 64 0 0 1-64-64V277.333a64 64 0 0 1 64-64h597.334zm0 64H213.333V704h149.334v63.296L459.243 704h351.424V277.333zm-271.36 213.334v64h-176.64v-64h176.64zm122.026-128v64H362.667v-64h298.666z",fill:"currentColor"})),VerifiedIcon:()=>Z("svg",{class:"verified-icon",viewBox:"0 0 1024 1024",width:"14",height:"14"},Z("path",{d:"m894.4 461.56-54.4-63.2c-10.4-12-18.8-34.4-18.8-50.4v-68c0-42.4-34.8-77.2-77.2-77.2h-68c-15.6 0-38.4-8.4-50.4-18.8l-63.2-54.4c-27.6-23.6-72.8-23.6-100.8 0l-62.8 54.8c-12 10-34.8 18.4-50.4 18.4h-69.2c-42.4 0-77.2 34.8-77.2 77.2v68.4c0 15.6-8.4 38-18.4 50l-54 63.6c-23.2 27.6-23.2 72.4 0 100l54 63.6c10 12 18.4 34.4 18.4 50v68.4c0 42.4 34.8 77.2 77.2 77.2h69.2c15.6 0 38.4 8.4 50.4 18.8l63.2 54.4c27.6 23.6 72.8 23.6 100.8 0l63.2-54.4c12-10.4 34.4-18.8 50.4-18.8h68c42.4 0 77.2-34.8 77.2-77.2v-68c0-15.6 8.4-38.4 18.8-50.4l54.4-63.2c23.2-27.6 23.2-73.2-.4-100.8zm-216-25.2-193.2 193.2a30 30 0 0 1-42.4 0l-96.8-96.8a30.16 30.16 0 0 1 0-42.4c11.6-11.6 30.8-11.6 42.4 0l75.6 75.6 172-172c11.6-11.6 30.8-11.6 42.4 0 11.6 11.6 11.6 30.8 0 42.4z",fill:"#27ae60"}))},props:{comment:{type:Object,required:!0},rootId:{type:String,required:!0},reply:{type:Object,default:null}},emits:["submit","reply","like","delete","status","sticky"],setup(n){const s=Xn("config"),a=Lk(),e=Mp(),t=vn(()=>s.value.locale),o=vn(()=>{const{link:k}=n.comment;return k?Ok(k)?k:`https://${k}`:""}),i=vn(()=>a.value.includes(n.comment.objectId)),p=((k,d)=>{const u=R0();return vn(()=>e1(k,u.value,d))})(n.comment.insertedAt,t.value),l=vn(()=>e.value.type==="administrator"),c=vn(()=>n.comment.user_id&&e.value.objectId===n.comment.user_id),r=vn(()=>{var k;return n.comment.objectId===((k=n.reply)==null?void 0:k.objectId)});return{config:s,locale:t,isReplyingCurrent:r,link:o,like:i,time:p,isAdmin:l,isOwner:c,commentStatus:J1}}});const Q1=["id"],Z1={class:"wl-user","aria-hidden":"true"},n2=["src"],s2={class:"wl-card"},a2={class:"wl-head"},e2=["href"],t2={key:1,class:"wl-nick"},o2=["textContent"],i2=["textContent"],p2=["textContent"],l2=["textContent"],c2=["textContent"],r2={class:"wl-comment-actions"},u2=["title"],d2=["textContent"],k2=["title"],m2={class:"wl-meta","aria-hidden":"true"},v2=["textContent"],h2=["textContent"],g2=["textContent"],b2=["innerHTML"],f2={key:0,class:"wl-admin-actions"},y2={class:"wl-comment-status"},_2=["disabled","onClick","textContent"],w2={key:1,class:"wl-reply-wrapper"},S2={key:2,class:"wl-quote"};var x2=jn({name:"WalineRoot",components:{CommentBox:Dk,CommentCard:Co(K1,[["render",function(n,s,a,e,t,o){const i=Kn("VerifiedIcon"),p=Kn("DeleteIcon"),l=Kn("LikeIcon"),c=Kn("ReplyIcon"),r=Kn("CommentBox"),k=Kn("CommentCard",!0);return J(),sn("div",{id:n.comment.objectId,class:"wl-item"},[V("div",Z1,[n.comment.avatar?(J(),sn("img",{key:0,src:n.comment.avatar},null,8,n2)):Tn("v-if",!0),n.comment.type?(J(),Ls(i,{key:1})):Tn("v-if",!0)]),V("div",s2,[V("div",a2,[n.link?(J(),sn("a",{key:0,class:"wl-nick",href:n.link,target:"_blank",rel:"nofollow noreferrer"},Ln(n.comment.nick),9,e2)):(J(),sn("span",t2,Ln(n.comment.nick),1)),n.comment.type==="administrator"?(J(),sn("span",{key:2,class:"wl-badge",textContent:Ln(n.locale.admin)},null,8,o2)):Tn("v-if",!0),n.comment.label?(J(),sn("span",{key:3,class:"wl-badge",textContent:Ln(n.comment.label)},null,8,i2)):Tn("v-if",!0),n.comment.sticky?(J(),sn("span",{key:4,class:"wl-badge",textContent:Ln(n.locale.sticky)},null,8,p2)):Tn("v-if",!0),n.comment.level!==void 0&&n.comment.level>=0?(J(),sn("span",{key:5,class:es(`wl-badge level${n.comment.level}`),textContent:Ln(n.locale[`level${n.comment.level}`]||`Level ${n.comment.level}`)},null,10,l2)):Tn("v-if",!0),V("span",{class:"wl-time",textContent:Ln(n.time)},null,8,c2),V("div",r2,[n.isAdmin||n.isOwner?(J(),sn("button",{key:0,class:"wl-delete",onClick:s[0]||(s[0]=d=>n.$emit("delete",n.comment))},[En(p)])):Tn("v-if",!0),V("button",{class:"wl-like",title:n.like?n.locale.cancelLike:n.locale.like,onClick:s[1]||(s[1]=d=>n.$emit("like",n.comment))},[En(l,{active:n.like},null,8,["active"]),"like"in n.comment?(J(),sn("span",{key:0,textContent:Ln(n.comment.like)},null,8,d2)):Tn("v-if",!0)],8,u2),V("button",{class:es(["wl-reply",{active:n.isReplyingCurrent}]),title:n.isReplyingCurrent?n.locale.cancelReply:n.locale.reply,onClick:s[2]||(s[2]=d=>n.$emit("reply",n.isReplyingCurrent?null:n.comment))},[En(c)],10,k2)])]),V("div",m2,[n.comment.addr?(J(),sn("span",{key:0,textContent:Ln(n.comment.addr)},null,8,v2)):Tn("v-if",!0),n.comment.browser?(J(),sn("span",{key:1,textContent:Ln(n.comment.browser)},null,8,h2)):Tn("v-if",!0),n.comment.os?(J(),sn("span",{key:2,textContent:Ln(n.comment.os)},null,8,g2)):Tn("v-if",!0)]),Tn(" eslint-disable-next-line vue/no-v-html "),V("div",{class:"wl-content",innerHTML:n.comment.comment},null,8,b2),n.isAdmin?(J(),sn("div",f2,[V("span",y2,[(J(!0),sn(Rn,null,Ps(n.commentStatus,d=>(J(),sn("button",{key:d,class:es(`wl-btn wl-${d}`),disabled:n.comment.status===d,onClick:u=>n.$emit("status",{status:d,comment:n.comment}),textContent:Ln(n.locale[d])},null,10,_2))),128))]),n.isAdmin&&!n.comment.rid?(J(),sn("button",{key:0,class:"wl-btn wl-sticky",onClick:s[3]||(s[3]=d=>n.$emit("sticky",n.comment))},Ln(n.comment.sticky?n.locale.unsticky:n.locale.sticky),1)):Tn("v-if",!0)])):Tn("v-if",!0),n.isReplyingCurrent?(J(),sn("div",w2,[En(r,{"reply-id":n.comment.objectId,"reply-user":n.comment.nick,"root-id":n.rootId,onSubmit:s[4]||(s[4]=d=>n.$emit("submit",d)),onCancelReply:s[5]||(s[5]=d=>n.$emit("reply",null))},null,8,["reply-id","reply-user","root-id"])])):Tn("v-if",!0),n.comment.children?(J(),sn("div",S2,[(J(!0),sn(Rn,null,Ps(n.comment.children,d=>(J(),Ls(k,{key:d.objectId,comment:d,reply:n.reply,"root-id":n.rootId,onReply:s[6]||(s[6]=u=>n.$emit("reply",u)),onSubmit:s[7]||(s[7]=u=>n.$emit("submit",u)),onLike:s[8]||(s[8]=u=>n.$emit("like",u)),onDelete:s[9]||(s[9]=u=>n.$emit("delete",u)),onStatus:s[10]||(s[10]=u=>n.$emit("status",u)),onSticky:s[11]||(s[11]=u=>n.$emit("sticky",u))},null,8,["comment","reply","root-id"]))),128))])):Tn("v-if",!0)])],8,Q1)}],["__file","CommentCard.vue"]]),LoadingIcon:Dp},props:["serverURL","path","meta","requiredMeta","dark","lang","locale","pageSize","wordLimit","emoji","login","highlighter","texRenderer","imageUploader","search","copyright"],setup(n){const s=vn(()=>(({serverURL:m,path:v=location.pathname,lang:b="zh-CN",locale:h,emoji:g=["//unpkg.com/@waline/emojis@1.0.1/weibo"],meta:_=["nick","mail","link"],requiredMeta:y=[],dark:x=!1,pageSize:O=10,wordLimit:I,imageUploader:w,highlighter:G,texRenderer:U,copyright:D=!0,login:C="enable",search:E=J0(),...A})=>({serverURL:s1(m),path:n1(v),locale:{...Vr[b]||Vr["zh-CN"],...typeof h=="object"?h:{}},wordLimit:a1(I),meta:Nr(_),requiredMeta:Nr(y),imageUploader:pi(w,Y0),highlighter:pi(G,Q0),texRenderer:pi(U,X0),lang:b,dark:x,emoji:g,pageSize:O,login:C,copyright:D,search:E,...A}))(n)),a=Mp(),e=Lk(),t=an("loading"),o=an(0),i=an(1),p=an(0),l=an([]),c=an(null),r=vn(()=>{return typeof(m=s.value.dark)=="string"?m==="auto"?`@media(prefers-color-scheme:dark){body${li}}`:`${m}${li}`:m===!0?`:root${li}`:"";var m});let k;B0(r);const d=m=>{var _;const{serverURL:v,path:b,pageSize:h}=s.value,g=new AbortController;t.value="loading",k==null||k(),i1({serverURL:v,lang:s.value.lang,path:b,pageSize:h,page:m,signal:g.signal,token:(_=a.value)==null?void 0:_.token}).then(y=>{t.value="success",o.value=y.count,l.value.push(...y.data),i.value=m,p.value=y.totalPages}).catch(y=>{y.name!=="AbortError"&&(console.error(y.message),t.value="error")}),k=g.abort.bind(g)},u=()=>{o.value=0,l.value=[],d(1)};return zs("config",s),Vn(()=>n.path,u),Qn(()=>u()),{config:s,darkmodeStyle:r,i18n:vn(()=>s.value.locale),status:t,count:o,page:i,totalPages:p,data:l,reply:c,loadMore:()=>d(i.value+1),refresh:u,onReply:m=>{c.value=m},onSubmit:m=>{if(m.rid){const v=l.value.find(({objectId:b})=>b===m.rid);if(!v)return;Array.isArray(v.children)||(v.children=[]),v.children.push(m)}else l.value.unshift(m)},onStatusChange:async({comment:m,status:v})=>{var g;if(m.status===v)return;const{serverURL:b,lang:h}=s.value;await qr({serverURL:b,lang:h,token:(g=a.value)==null?void 0:g.token,objectId:m.objectId,status:v}),m.status=v},onDelete:async({objectId:m})=>{var h;if(!confirm("Are you sure you want to delete this comment?"))return;const{serverURL:v,lang:b}=s.value;await(({serverURL:g,lang:_,token:y,objectId:x})=>fetch(`${g}/comment/${x}?lang=${_}`,{method:"DELETE",headers:{Authorization:`Bearer ${y}`}}).then(O=>O.json()))({serverURL:v,lang:b,token:(h=a.value)==null?void 0:h.token,objectId:m}),l.value.some((g,_)=>g.objectId===m?(l.value=l.value.filter((y,x)=>x!==_),!0):g.children.some((y,x)=>y.objectId===m&&(l.value[_].children=g.children.filter((O,I)=>I!==x),!0)))},onSticky:async m=>{var h;if(m.rid)return;const{serverURL:v,lang:b}=s.value;await qr({serverURL:v,lang:b,token:(h=a.value)==null?void 0:h.token,objectId:m.objectId,sticky:m.sticky?0:1}),m.sticky=!m.sticky},onLike:async m=>{const{serverURL:v,lang:b}=s.value,{objectId:h}=m,g=e.value.includes(h);await(({serverURL:_,lang:y,objectId:x,like:O})=>fetch(`${_}/comment/${x}?lang=${y}`,{method:"PUT",headers:o1,body:JSON.stringify({like:O})}).then(I=>I.json()))({serverURL:v,lang:b,objectId:h,like:!g}),g?e.value=e.value.filter(_=>_!==h):(e.value=[...e.value,h],e.value.length>50&&(e.value=e.value.slice(-50))),m.like=(m.like||0)+(g?-1:1)},version:"2.6.3"}}});const $2={"data-waline":""},C2={class:"wl-count"},E2=["textContent"],T2={class:"wl-cards"},P2={key:1,class:"wl-operation"},I2=["textContent"],O2={key:0,class:"wl-loading"},A2=["textContent"],L2={class:"wl-operation"},D2=["textContent"],M2={key:3,class:"wl-power"},j2=fs(" Powered by "),R2=V("a",{href:"https://github.com/walinejs/waline",target:"_blank",rel:"noreferrer"}," Waline ",-1);var F2=Co(x2,[["render",function(n,s,a,e,t,o){const i=Kn("CommentBox"),p=Kn("CommentCard"),l=Kn("LoadingIcon");return J(),sn("div",$2,[n.reply?Tn("v-if",!0):(J(),Ls(i,{key:0,onSubmit:n.onSubmit},null,8,["onSubmit"])),V("div",C2,[n.count?(J(),sn("span",{key:0,class:"wl-num",textContent:Ln(n.count)},null,8,E2)):Tn("v-if",!0),fs(" "+Ln(n.i18n.comment),1)]),V("div",T2,[(J(!0),sn(Rn,null,Ps(n.data,c=>(J(),Ls(p,{key:c.objectId,"root-id":c.objectId,comment:c,reply:n.reply,onReply:n.onReply,onSubmit:n.onSubmit,onStatus:n.onStatusChange,onDelete:n.onDelete,onSticky:n.onSticky,onLike:n.onLike},null,8,["root-id","comment","reply","onReply","onSubmit","onStatus","onDelete","onSticky","onLike"]))),128))]),n.status==="error"?(J(),sn("div",P2,[V("button",{type:"button",class:"wl-btn",onClick:s[0]||(s[0]=(...c)=>n.refresh&&n.refresh(...c)),textContent:Ln(n.i18n.refresh)},null,8,I2)])):(J(),sn(Rn,{key:2},[n.status==="loading"?(J(),sn("div",O2,[En(l,{size:30})])):n.data.length?n.page<n.totalPages?(J(),sn(Rn,{key:2},[Tn(" Load more button "),V("div",L2,[V("button",{type:"button",class:"wl-btn",onClick:s[1]||(s[1]=(...c)=>n.loadMore&&n.loadMore(...c)),textContent:Ln(n.i18n.more)},null,8,D2)])],2112)):Tn("v-if",!0):(J(),sn("div",{key:1,class:"wl-empty",textContent:Ln(n.i18n.sofa)},null,8,A2))],64)),Tn(" Copyright Information "),n.config.copyright?(J(),sn("div",M2,[j2,R2,fs(" v"+Ln(n.version),1)])):Tn("v-if",!0)])}],["__file","Waline.vue"]]);const Jr=n=>{const s=((a="")=>a.replace(/\/$/u,""))(n);return/^(https?:)?\/\//.test(s)?s:`https://${s}`},B2=n=>{n.name!=="AbortError"&&console.error(n.message)},N2={"Content-Type":"application/json"},Mk=(n,s="")=>{if(typeof n=="object"&&n.errno)throw new TypeError(`Fetch ${s} failed with ${n.errno}: ${n.errmsg}`);return n},z2=({serverURL:n,lang:s,paths:a,signal:e})=>fetch(`${n}/article?path=${encodeURIComponent(a.join(","))}&lang=${s}`,{signal:e}).then(t=>t.json()).then(t=>Mk(t,"visit count")).then(t=>Array.isArray(t)?t:[t]),H2=({serverURL:n,lang:s,path:a})=>fetch(`${n}/article?lang=${s}`,{method:"POST",headers:N2,body:JSON.stringify({path:a})}).then(e=>e.json()).then(e=>Mk(e,"visit count")),Kr=n=>n.dataset.path||n.getAttribute("id"),Qr=(n,s)=>{s.forEach((a,e)=>{a.innerText=n[e].toString()})},G2=({serverURL:n,path:s=window.location.pathname,selector:a=".waline-pageview-count",update:e=!0,lang:t="zh-CN"})=>{const o=new AbortController,i=Array.from(document.querySelectorAll(a)),p=c=>{const r=Kr(c);return r!==null&&s!==r},l=c=>z2({serverURL:Jr(n),paths:c.map(r=>Kr(r)||s),lang:t,signal:o.signal}).then(r=>Qr(r,c)).catch(B2);if(e){const c=i.filter(k=>!p(k)),r=i.filter(p);H2({serverURL:Jr(n),path:s,lang:t}).then(k=>Qr(new Array(c.length).fill(k),c)),r.length&&l(r)}else l(i);return o.abort.bind(o)};const ba={provider:"Waline",serverURL:"https://anyfork.top",pageview:!0},ri=Boolean(ba.serverURL),V2={"/":{placeholder:"\u8BF7\u7559\u8A00\u3002(\u586B\u5199\u90AE\u7BB1\u53EF\u5728\u88AB\u56DE\u590D\u65F6\u6536\u5230\u90AE\u4EF6\u63D0\u9192)"}};var U2=jn({name:"WalineComment",setup(){const n=et(),s=at(),a=yp(),e=vk(V2);let t;const o=vn(()=>{if(!ri)return!1;const l=ba.comment!==!1,c=s.value.comment;return Boolean(c)||l!==!1&&c!==!1}),i=vn(()=>{if(!ri)return!1;const l=ba.pageview!==!1,c=s.value.pageview;return Boolean(c)||l!==!1&&c!==!1}),p=vn(()=>({lang:a.value==="zh-CN"?"zh-CN":"en",locale:{...e.value,...ba.locale||{}},emoji:["//unpkg.com/@waline/emojis@1.0.1/weibo","//unpkg.com/@waline/emojis@1.0.1/bilibili"],dark:"html.dark",...ba,path:qt(n.path)}));return Qn(()=>{Vn(()=>n.path,()=>{t==null||t(),i.value&&setTimeout(()=>{t=G2({serverURL:ba.serverURL,path:qt(n.path)})},ba.delay||500)},{immediate:!0})}),()=>o.value?Z("div",{class:"waline-wrapper"},ri?Z(F2,p.value):[]):null}});const q2={provider:"Waline",serverURL:"https://anyfork.top",pageview:!0};var W2=Yn({enhance:({app:n})=>{const s=jn({name:"CommentService",props:{darkmode:Boolean},setup(a){const e=at(),t=vn(()=>e.value.comment||q2!==!1&&e.value.comment!==!1);return()=>Z(U2,{darkmode:a.darkmode,style:{display:t.value?"block":"none"}})}});n.component("CommentService",s)}});const jp=n=>(Ke("data-v-39610392"),n=n(),Qe(),n),Y2={class:"loader-container"},X2=jp(()=>V("div",{class:"loader-child"},null,-1)),J2=jp(()=>V("div",{class:"loader-child"},null,-1)),K2=jp(()=>V("div",{class:"loader-child"},null,-1)),Q2=[X2,J2,K2],Z2=jn({__name:"RotateLoading",setup(n){Ca(a=>({"5f94fdd0":s.value}));const s=an("#3eaf7c");return(a,e)=>(J(),sn("div",Y2,Q2))}});var nS=as(Z2,[["__scopeId","data-v-39610392"],["__file","RotateLoading.vue"]]);const sS=n=>(Ke("data-v-52d39f88"),n=n(),Qe(),n),aS={class:"load-container"},eS=sS(()=>V("div",{class:"boxLoading"},null,-1)),tS=[eS],oS=jn({__name:"BoxLoading",setup(n){Ca(a=>({"6e053614":s.value}));const s=an("#3eaf7c");return(a,e)=>(J(),sn("div",aS,tS))}});var iS=as(oS,[["__scopeId","data-v-52d39f88"],["__file","BoxLoading.vue"]]);const pS={class:"load-container"},lS=qu('<div class="container container1" data-v-40cfaf09><div class="circle circle1" data-v-40cfaf09></div><div class="circle circle2" data-v-40cfaf09></div><div class="circle circle3" data-v-40cfaf09></div><div class="circle circle4" data-v-40cfaf09></div></div><div class="container container2" data-v-40cfaf09><div class="circle circle1" data-v-40cfaf09></div><div class="circle circle2" data-v-40cfaf09></div><div class="circle circle3" data-v-40cfaf09></div><div class="circle circle4" data-v-40cfaf09></div></div><div class="container container3" data-v-40cfaf09><div class="circle circle1" data-v-40cfaf09></div><div class="circle circle2" data-v-40cfaf09></div><div class="circle circle3" data-v-40cfaf09></div><div class="circle circle4" data-v-40cfaf09></div></div>',3),cS=[lS],rS=jn({__name:"CircleLoading",setup(n){Ca(a=>({"0b101200":s.value}));const s=an("#3eaf7c");return(a,e)=>(J(),sn("div",pS,cS))}});var uS=as(rS,[["__scopeId","data-v-40cfaf09"],["__file","CircleLoading.vue"]]);const Rp=n=>(Ke("data-v-7460653c"),n=n(),Qe(),n),dS={class:"load-container"},kS=Rp(()=>V("div",{class:"load load1"},null,-1)),mS=Rp(()=>V("div",{class:"load load2"},null,-1)),vS=Rp(()=>V("div",{class:"load"},null,-1)),hS=[kS,mS,vS],gS=jn({__name:"PointLoading",setup(n){Ca(a=>({"5e747287":s.value}));const s=an("#3eaf7c");return(a,e)=>(J(),sn("div",dS,hS))}});var bS=as(gS,[["__scopeId","data-v-7460653c"],["__file","PointLoading.vue"]]);const fS={class:"load-container"},yS=qu('<div class="container" data-v-a205d7be><div class="boxLoading boxLoading1" data-v-a205d7be></div><div class="boxLoading boxLoading2" data-v-a205d7be></div><div class="boxLoading boxLoading3" data-v-a205d7be></div><div class="boxLoading boxLoading4" data-v-a205d7be></div><div class="boxLoading boxLoading5" data-v-a205d7be></div></div>',1),_S=[yS],wS=jn({__name:"LineLoading",setup(n){Ca(a=>({"333fc7be":s.value}));const s=an("#3eaf7c");return(a,e)=>(J(),sn("div",fS,_S))}});var SS=as(wS,[["__scopeId","data-v-a205d7be"],["__file","LineLoading.vue"]]);const xS={class:"loader-main"},$S=jn({__name:"DefaultLoading",setup(n){Ca(a=>({"7cec7c83":s.value}));const s=an("#3eaf7c");return(a,e)=>(J(),sn("div",xS,[(J(),sn(Rn,null,Ps(4,t=>V("div",{key:`out${t}`})),64))]))}});var CS=as($S,[["__scopeId","data-v-9b0134fe"],["__file","DefaultLoading.vue"]]);const ES={id:"loader-wrapper"},TS={class:"title"},PS={class:"description"},IS=jn({__name:"LoadingPage",setup(n){const s=at(),a=wp(),e=[nS,iS,uS,SS,bS,CS],t=vn(()=>e[Math.floor(Math.random()*5)]);return(o,i)=>(J(),sn("div",ES,[V("h3",TS,Ln(fn(a).title||fn(s).title),1),V("p",PS,Ln(fn(a).description||fn(s).description),1),(J(),Ls(iv(fn(t))))]))}});var OS=as(IS,[["__scopeId","data-v-7e05752b"],["__file","LoadingPage.vue"]]),AS=Yn({enhance({app:n}){n.component("LoadingPage",OS)}}),LS=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function DS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jk={exports:{}};/*!
 * 
 *   typed.js - A JavaScript Typing Animation Library
 *   Author: Matt Boldt <me@mattboldt.com>
 *   Version: v2.0.12
 *   Url: https://github.com/mattboldt/typed.js
 *   License(s): MIT
 * 
 */(function(n,s){(function(e,t){n.exports=t()})(LS,function(){return function(a){var e={};function t(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return a[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}return t.m=a,t.c=e,t.p="",t(0)}([function(a,e,t){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function r(k,d){for(var u=0;u<d.length;u++){var m=d[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(k,m.key,m)}}return function(k,d,u){return d&&r(k.prototype,d),u&&r(k,u),k}}();function i(r,k){if(!(r instanceof k))throw new TypeError("Cannot call a class as a function")}var p=t(1),l=t(3),c=function(){function r(k,d){i(this,r),p.initializer.load(this,d,k),this.begin()}return o(r,[{key:"toggle",value:function(){this.pause.status?this.start():this.stop()}},{key:"stop",value:function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))}},{key:"start",value:function(){this.typingComplete||!this.pause.status||(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))}},{key:"destroy",value:function(){this.reset(!1),this.options.onDestroy(this)}},{key:"reset",value:function(){var d=arguments.length<=0||arguments[0]===void 0?!0:arguments[0];clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,d&&(this.insertCursor(),this.options.onReset(this),this.begin())}},{key:"begin",value:function(){var d=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){!d.currentElContent||d.currentElContent.length===0?d.typewrite(d.strings[d.sequence[d.arrayPos]],d.strPos):d.backspace(d.currentElContent,d.currentElContent.length)},this.startDelay)}},{key:"typewrite",value:function(d,u){var m=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var v=this.humanizer(this.typeSpeed),b=1;if(this.pause.status===!0){this.setPauseStatus(d,u,!0);return}this.timeout=setTimeout(function(){u=l.htmlParser.typeHtmlChars(d,u,m);var h=0,g=d.substr(u);if(g.charAt(0)==="^"&&/^\^\d+/.test(g)){var _=1;g=/\d+/.exec(g)[0],_+=g.length,h=parseInt(g),m.temporaryPause=!0,m.options.onTypingPaused(m.arrayPos,m),d=d.substring(0,u)+d.substring(u+_),m.toggleBlinking(!0)}if(g.charAt(0)==="`"){for(;d.substr(u+b).charAt(0)!=="`"&&(b++,!(u+b>d.length)););var y=d.substring(0,u),x=d.substring(y.length+1,u+b),O=d.substring(u+b+1);d=y+x+O,b--}m.timeout=setTimeout(function(){m.toggleBlinking(!1),u>=d.length?m.doneTyping(d,u):m.keepTyping(d,u,b),m.temporaryPause&&(m.temporaryPause=!1,m.options.onTypingResumed(m.arrayPos,m))},h)},v)}},{key:"keepTyping",value:function(d,u,m){u===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this)),u+=m;var v=d.substr(0,u);this.replaceText(v),this.typewrite(d,u)}},{key:"doneTyping",value:function(d,u){var m=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),!(this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount))&&(this.timeout=setTimeout(function(){m.backspace(d,u)},this.backDelay))}},{key:"backspace",value:function(d,u){var m=this;if(this.pause.status===!0){this.setPauseStatus(d,u,!1);return}if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var v=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){u=l.htmlParser.backSpaceHtmlChars(d,u,m);var b=d.substr(0,u);if(m.replaceText(b),m.smartBackspace){var h=m.strings[m.arrayPos+1];h&&b===h.substr(0,u)?m.stopNum=u:m.stopNum=0}u>m.stopNum?(u--,m.backspace(d,u)):u<=m.stopNum&&(m.arrayPos++,m.arrayPos===m.strings.length?(m.arrayPos=0,m.options.onLastStringBackspaced(),m.shuffleStringsIfNeeded(),m.begin()):m.typewrite(m.strings[m.sequence[m.arrayPos]],u))},v)}},{key:"complete",value:function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0}},{key:"setPauseStatus",value:function(d,u,m){this.pause.typewrite=m,this.pause.curString=d,this.pause.curStrPos=u}},{key:"toggleBlinking",value:function(d){!this.cursor||this.pause.status||this.cursorBlinking!==d&&(this.cursorBlinking=d,d?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink"))}},{key:"humanizer",value:function(d){return Math.round(Math.random()*d/2)+d}},{key:"shuffleStringsIfNeeded",value:function(){!this.shuffle||(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))}},{key:"initFadeOut",value:function(){var d=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){d.arrayPos++,d.replaceText(""),d.strings.length>d.arrayPos?d.typewrite(d.strings[d.sequence[d.arrayPos]],0):(d.typewrite(d.strings[0],0),d.arrayPos=0)},this.fadeOutDelay)}},{key:"replaceText",value:function(d){this.attr?this.el.setAttribute(this.attr,d):this.isInput?this.el.value=d:this.contentType==="html"?this.el.innerHTML=d:this.el.textContent=d}},{key:"bindFocusEvents",value:function(){var d=this;!this.isInput||(this.el.addEventListener("focus",function(u){d.stop()}),this.el.addEventListener("blur",function(u){d.el.value&&d.el.value.length!==0||d.start()}))}},{key:"insertCursor",value:function(){!this.showCursor||this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling))}}]),r}();e.default=c,a.exports=e.default},function(a,e,t){Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(u){for(var m=1;m<arguments.length;m++){var v=arguments[m];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(u[b]=v[b])}return u},i=function(){function u(m,v){for(var b=0;b<v.length;b++){var h=v[b];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(m,h.key,h)}}return function(m,v,b){return v&&u(m.prototype,v),b&&u(m,b),m}}();function p(u){return u&&u.__esModule?u:{default:u}}function l(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")}var c=t(2),r=p(c),k=function(){function u(){l(this,u)}return i(u,[{key:"load",value:function(v,b,h){if(typeof h=="string"?v.el=document.querySelector(h):v.el=h,v.options=o({},r.default,b),v.isInput=v.el.tagName.toLowerCase()==="input",v.attr=v.options.attr,v.bindInputFocusEvents=v.options.bindInputFocusEvents,v.showCursor=v.isInput?!1:v.options.showCursor,v.cursorChar=v.options.cursorChar,v.cursorBlinking=!0,v.elContent=v.attr?v.el.getAttribute(v.attr):v.el.textContent,v.contentType=v.options.contentType,v.typeSpeed=v.options.typeSpeed,v.startDelay=v.options.startDelay,v.backSpeed=v.options.backSpeed,v.smartBackspace=v.options.smartBackspace,v.backDelay=v.options.backDelay,v.fadeOut=v.options.fadeOut,v.fadeOutClass=v.options.fadeOutClass,v.fadeOutDelay=v.options.fadeOutDelay,v.isPaused=!1,v.strings=v.options.strings.map(function(O){return O.trim()}),typeof v.options.stringsElement=="string"?v.stringsElement=document.querySelector(v.options.stringsElement):v.stringsElement=v.options.stringsElement,v.stringsElement){v.strings=[],v.stringsElement.style.display="none";var g=Array.prototype.slice.apply(v.stringsElement.children),_=g.length;if(_)for(var y=0;y<_;y+=1){var x=g[y];v.strings.push(x.innerHTML.trim())}}v.strPos=0,v.arrayPos=0,v.stopNum=0,v.loop=v.options.loop,v.loopCount=v.options.loopCount,v.curLoop=0,v.shuffle=v.options.shuffle,v.sequence=[],v.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},v.typingComplete=!1;for(var y in v.strings)v.sequence[y]=y;v.currentElContent=this.getCurrentElContent(v),v.autoInsertCss=v.options.autoInsertCss,this.appendAnimationCss(v)}},{key:"getCurrentElContent",value:function(v){var b="";return v.attr?b=v.el.getAttribute(v.attr):v.isInput?b=v.el.value:v.contentType==="html"?b=v.el.innerHTML:b=v.el.textContent,b}},{key:"appendAnimationCss",value:function(v){var b="data-typed-js-css";if(!!v.autoInsertCss&&!(!v.showCursor&&!v.fadeOut)&&!document.querySelector("["+b+"]")){var h=document.createElement("style");h.type="text/css",h.setAttribute(b,!0);var g="";v.showCursor&&(g+=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `),v.fadeOut&&(g+=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `),h.length!==0&&(h.innerHTML=g,document.body.appendChild(h))}}}]),u}();e.default=k;var d=new k;e.initializer=d},function(a,e){Object.defineProperty(e,"__esModule",{value:!0});var t={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(i){},onComplete:function(i){},preStringTyped:function(i,p){},onStringTyped:function(i,p){},onLastStringBackspaced:function(i){},onTypingPaused:function(i,p){},onTypingResumed:function(i,p){},onReset:function(i){},onStop:function(i,p){},onStart:function(i,p){},onDestroy:function(i){}};e.default=t,a.exports=e.default},function(a,e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function l(c,r){for(var k=0;k<r.length;k++){var d=r[k];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,r,k){return r&&l(c.prototype,r),k&&l(c,k),c}}();function o(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var i=function(){function l(){o(this,l)}return t(l,[{key:"typeHtmlChars",value:function(r,k,d){if(d.contentType!=="html")return k;var u=r.substr(k).charAt(0);if(u==="<"||u==="&"){var m="";for(u==="<"?m=">":m=";";r.substr(k+1).charAt(0)!==m&&(k++,!(k+1>r.length)););k++}return k}},{key:"backSpaceHtmlChars",value:function(r,k,d){if(d.contentType!=="html")return k;var u=r.substr(k).charAt(0);if(u===">"||u===";"){var m="";for(u===">"?m="<":m="&";r.substr(k-1).charAt(0)!==m&&(k--,!(k<0)););k--}return k}}]),l}();e.default=i;var p=new i;e.htmlParser=p}])})})(jk);var tx=DS(jk.exports);const ui=an(!1),Rk=()=>({showLoading:()=>ui.value=!0,hiddenLoading:()=>ui.value=!1,loading:ui}),MS={class:"fixed w-full h-screen bg-[#fff] z-[100000] overflow-hidden top-0"},jS=jn({__name:"Loading",setup(n){const{loading:s}=Rk();return(a,e)=>{const t=Kn("LoadingPage");return qn((J(),sn("div",MS,[En(t)],512)),[[Jn,fn(s)]])}}});var Fk=as(jS,[["__file","Loading.vue"]]),RS=Object.freeze(Object.defineProperty({__proto__:null,default:Fk},Symbol.toStringTag,{value:"Module"})),FS=Yn({enhance({app:n,router:s,siteData:a}){const{showLoading:e,hiddenLoading:t}=Rk();s.beforeEach((o,i,p)=>{e(),p()}),s.afterEach((o,i)=>{t()})},setup(){},rootComponents:[Fk]});const di=[zg,Vg,Yg,ib,rb,vb,ef,tf,h_,__,x_,$_,A_,U_,kw,yw,xw,Dw,Hw,Yw,Zw,W2,AS,FS],BS=[["v-8daa1a0e","/",{title:""},["/index.html","/README.md"]],["v-db9b3b8e","/posts/design-pattern/",{_blog:{data:{key:"v-db9b3b8e",path:"/posts/design-pattern/",title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",lang:"zh-CN",frontmatter:{title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",description:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava",date:"2022-08-19T21:55:00.000Z",sidebar:"auto",tag:["\u8BBE\u8BA1\u6A21\u5F0F"],category:["java"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208242030437.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/design-pattern/"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"og:description",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"article:published_time",content:"2022-08-19T21:55:00.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
`,headers:[{level:1,title:"1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",slug:"_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",children:[{level:2,title:"1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",slug:"_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",children:[]},{level:2,title:"1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",slug:"_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",children:[]},{level:2,title:"1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",slug:"_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",children:[]},{level:2,title:"1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",slug:"_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",children:[]}]},{level:1,title:"2\uFF0CUML \u56FE",slug:"_2-uml-\u56FE",children:[{level:2,title:"2.1 \u7C7B\u56FE\u6982\u8FF0",slug:"_2-1-\u7C7B\u56FE\u6982\u8FF0",children:[]},{level:2,title:"2.2 \u7C7B\u56FE\u7684\u4F5C\u7528",slug:"_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528",children:[]},{level:2,title:"2.3 \u7C7B\u56FE\u8868\u793A\u6CD5",slug:"_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5",children:[{level:3,title:"2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F",children:[]},{level:3,title:"2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",children:[{level:4,title:"2.3.2.1 \u5173\u8054\u5173\u7CFB",slug:"_2-3-2-1-\u5173\u8054\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.2 \u805A\u5408\u5173\u7CFB",slug:"_2-3-2-2-\u805A\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.3 \u7EC4\u5408\u5173\u7CFB",slug:"_2-3-2-3-\u7EC4\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.4 \u4F9D\u8D56\u5173\u7CFB",slug:"_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.5 \u7EE7\u627F\u5173\u7CFB",slug:"_2-3-2-5-\u7EE7\u627F\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.6 \u5B9E\u73B0\u5173\u7CFB",slug:"_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB",children:[]}]}]}]},{level:1,title:"3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",slug:"_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",children:[{level:2,title:"3.1 \u5F00\u95ED\u539F\u5219",slug:"_3-1-\u5F00\u95ED\u539F\u5219",children:[]},{level:2,title:"3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219",slug:"_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219",children:[]},{level:2,title:"3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219",slug:"_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219",children:[]},{level:2,title:"3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219",slug:"_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219",children:[]},{level:2,title:"3.5 \u8FEA\u7C73\u7279\u6CD5\u5219",slug:"_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219",children:[]},{level:2,title:"3.6 \u5408\u6210\u590D\u7528\u539F\u5219",slug:"_3-6-\u5408\u6210\u590D\u7528\u539F\u5219",children:[]}]},{level:1,title:"4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F",slug:"_4-\u521B\u5EFA\u8005\u6A21\u5F0F",children:[{level:2,title:"4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",slug:"_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",children:[{level:3,title:"4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",slug:"_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",children:[]},{level:3,title:"4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",slug:"_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",children:[]},{level:3,title:"4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",slug:"_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",children:[{level:4,title:"4.1.3.1 \u95EE\u9898\u6F14\u793A",slug:"_4-1-3-1-\u95EE\u9898\u6F14\u793A",children:[]},{level:4,title:"4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3",slug:"_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3",children:[]}]},{level:3,title:"4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B",slug:"_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B",children:[]}]},{level:2,title:"4.2 \u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-\u5DE5\u5382\u6A21\u5F0F",children:[{level:3,title:"4.2.1 \u6982\u8FF0",slug:"_4-2-1-\u6982\u8FF0",children:[]},{level:3,title:"4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.2.1 \u7ED3\u6784",slug:"_4-2-2-1-\u7ED3\u6784",children:[]},{level:4,title:"4.2.2.2 \u5B9E\u73B0",slug:"_4-2-2-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.2.4 \u4F18\u7F3A\u70B9",slug:"_4-2-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.2.3 \u6269\u5C55",slug:"_4-2-2-3-\u6269\u5C55",children:[]}]},{level:3,title:"4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",slug:"_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",children:[{level:4,title:"4.2.3.1 \u6982\u5FF5",slug:"_4-2-3-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.3.2 \u7ED3\u6784",slug:"_4-2-3-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.3.3 \u5B9E\u73B0",slug:"_4-2-3-3-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.3.4 \u4F18\u7F3A\u70B9",slug:"_4-2-3-4-\u4F18\u7F3A\u70B9",children:[]}]},{level:3,title:"4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.4.1 \u6982\u5FF5",slug:"_4-2-4-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.4.2 \u7ED3\u6784",slug:"_4-2-4-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.4.2 \u5B9E\u73B0",slug:"_4-2-4-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.4.3 \u4F18\u7F3A\u70B9",slug:"_4-2-4-3-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.4.4 \u4F7F\u7528\u573A\u666F",slug:"_4-2-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:3,title:"4.2.5 \u6A21\u5F0F\u6269\u5C55",slug:"_4-2-5-\u6A21\u5F0F\u6269\u5C55",children:[]},{level:3,title:"4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5",slug:"_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5",children:[]}]},{level:2,title:"4.3 \u539F\u578B\u6A21\u5F0F",slug:"_4-3-\u539F\u578B\u6A21\u5F0F",children:[{level:3,title:"4.3.1 \u6982\u8FF0",slug:"_4-3-1-\u6982\u8FF0",children:[]},{level:3,title:"4.3.2 \u7ED3\u6784",slug:"_4-3-2-\u7ED3\u6784",children:[]},{level:3,title:"4.3.3 \u5B9E\u73B0",slug:"_4-3-3-\u5B9E\u73B0",children:[]},{level:3,title:"4.3.4 \u6848\u4F8B",slug:"_4-3-4-\u6848\u4F8B",children:[]},{level:3,title:"4.3.5 \u4F7F\u7528\u573A\u666F",slug:"_4-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09",slug:"_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686",children:[]}]},{level:2,title:"4.5 \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[{level:3,title:"4.4.1 \u6982\u8FF0",slug:"_4-4-1-\u6982\u8FF0",children:[]},{level:3,title:"4.4.2 \u7ED3\u6784",slug:"_4-4-2-\u7ED3\u6784",children:[]},{level:3,title:"4.4.3 \u5B9E\u4F8B",slug:"_4-4-3-\u5B9E\u4F8B",children:[]},{level:3,title:"4.4.4 \u4F18\u7F3A\u70B9",slug:"_4-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"4.4.5 \u4F7F\u7528\u573A\u666F",slug:"_4-4-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.4.6 \u6A21\u5F0F\u6269\u5C55",slug:"_4-4-6-\u6A21\u5F0F\u6269\u5C55",children:[]}]},{level:2,title:"4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",slug:"_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",children:[{level:3,title:"4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]},{level:3,title:"4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]}]}]},{level:1,title:"5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F",slug:"_5-\u7ED3\u6784\u578B\u6A21\u5F0F",children:[{level:2,title:"5.1 \u4EE3\u7406\u6A21\u5F0F",slug:"_5-1-\u4EE3\u7406\u6A21\u5F0F",children:[{level:3,title:"5.1.1 \u6982\u8FF0",slug:"_5-1-1-\u6982\u8FF0",children:[]},{level:3,title:"5.1.2 \u7ED3\u6784",slug:"_5-1-2-\u7ED3\u6784",children:[]},{level:3,title:"5.1.3 \u9759\u6001\u4EE3\u7406",slug:"_5-1-3-\u9759\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.4 JDK \u52A8\u6001\u4EE3\u7406",slug:"_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406",slug:"_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",slug:"_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",children:[]},{level:3,title:"5.1.7 \u4F18\u7F3A\u70B9",slug:"_5-1-7-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"5.1.8 \u4F7F\u7528\u573A\u666F",slug:"_5-1-8-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.2 \u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-\u9002\u914D\u5668\u6A21\u5F0F",children:[{level:3,title:"5.2.1 \u6982\u8FF0",slug:"_5-2-1-\u6982\u8FF0",children:[]},{level:3,title:"5.2.2 \u7ED3\u6784",slug:"_5-2-2-\u7ED3\u6784",children:[]},{level:3,title:"5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.5 \u5E94\u7528\u573A\u666F",slug:"_5-2-5-\u5E94\u7528\u573A\u666F",children:[]},{level:3,title:"5.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.3 \u88C5\u9970\u8005\u6A21\u5F0F",slug:"_5-3-\u88C5\u9970\u8005\u6A21\u5F0F",children:[{level:3,title:"5.3.1 \u6982\u8FF0",slug:"_5-3-1-\u6982\u8FF0",children:[]},{level:3,title:"5.3.2 \u7ED3\u6784",slug:"_5-3-2-\u7ED3\u6784",children:[]},{level:3,title:"5.3.3 \u6848\u4F8B",slug:"_5-3-3-\u6848\u4F8B",children:[]},{level:3,title:"5.3.4 \u4F7F\u7528\u573A\u666F",slug:"_5-3-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.3.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-3-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]},{level:3,title:"5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",slug:"_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",children:[]}]},{level:2,title:"5.4 \u6865\u63A5\u6A21\u5F0F",slug:"_5-4-\u6865\u63A5\u6A21\u5F0F",children:[{level:3,title:"5.4.1 \u6982\u8FF0",slug:"_5-4-1-\u6982\u8FF0",children:[]},{level:3,title:"5.4.2 \u7ED3\u6784",slug:"_5-4-2-\u7ED3\u6784",children:[]},{level:3,title:"5.4.3 \u6848\u4F8B",slug:"_5-4-3-\u6848\u4F8B",children:[]},{level:3,title:"5.4.4 \u4F7F\u7528\u573A\u666F",slug:"_5-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.5 \u5916\u89C2\u6A21\u5F0F",slug:"_5-5-\u5916\u89C2\u6A21\u5F0F",children:[{level:3,title:"5.5.1 \u6982\u8FF0",slug:"_5-5-1-\u6982\u8FF0",children:[]},{level:3,title:"5.5.2 \u7ED3\u6784",slug:"_5-5-2-\u7ED3\u6784",children:[]},{level:3,title:"5.5.3 \u6848\u4F8B",slug:"_5-5-3-\u6848\u4F8B",children:[]},{level:3,title:"5.5.4 \u4F7F\u7528\u573A\u666F",slug:"_5-5-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.5.5 \u6E90\u7801\u89E3\u6790",slug:"_5-5-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.6 \u7EC4\u5408\u6A21\u5F0F",slug:"_5-6-\u7EC4\u5408\u6A21\u5F0F",children:[{level:3,title:"5.6.1 \u6982\u8FF0",slug:"_5-6-1-\u6982\u8FF0",children:[]},{level:3,title:"5.6.2 \u7ED3\u6784",slug:"_5-6-2-\u7ED3\u6784",children:[]},{level:3,title:"5.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",slug:"_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",children:[]},{level:3,title:"5.6.5 \u4F18\u70B9",slug:"_5-6-5-\u4F18\u70B9",children:[]},{level:3,title:"5.6.6 \u4F7F\u7528\u573A\u666F",slug:"_5-6-6-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.7 \u4EAB\u5143\u6A21\u5F0F",slug:"_5-7-\u4EAB\u5143\u6A21\u5F0F",children:[{level:3,title:"5.7.1 \u6982\u8FF0",slug:"_5-7-1-\u6982\u8FF0",children:[]},{level:3,title:"5.7.2 \u7ED3\u6784",slug:"_5-7-2-\u7ED3\u6784",children:[]},{level:3,title:"5.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",slug:"_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.7.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-7-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]}]},{level:1,title:"6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F",slug:"_6-\u884C\u4E3A\u578B\u6A21\u5F0F",children:[{level:2,title:"6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",slug:"_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",children:[{level:3,title:"6.1.1 \u6982\u8FF0",slug:"_6-1-1-\u6982\u8FF0",children:[]},{level:3,title:"6.1.2 \u7ED3\u6784",slug:"_6-1-2-\u7ED3\u6784",children:[]},{level:3,title:"6.1.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-1-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.1.3 \u4F18\u7F3A\u70B9",slug:"_6-1-3-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.1.4 \u9002\u7528\u573A\u666F",slug:"_6-1-4-\u9002\u7528\u573A\u666F",children:[]},{level:3,title:"6.1.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-1-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.2 \u7B56\u7565\u6A21\u5F0F",slug:"_6-2-\u7B56\u7565\u6A21\u5F0F",children:[{level:3,title:"6.2.1 \u6982\u8FF0",slug:"_6-2-1-\u6982\u8FF0",children:[]},{level:3,title:"6.2.2 \u7ED3\u6784",slug:"_6-2-2-\u7ED3\u6784",children:[]},{level:3,title:"6.2.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-2-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.2.4 \u4F18\u7F3A\u70B9",slug:"_6-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.2.5 \u4F7F\u7528\u573A\u666F",slug:"_6-2-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.3 \u547D\u4EE4\u6A21\u5F0F",slug:"_6-3-\u547D\u4EE4\u6A21\u5F0F",children:[{level:3,title:"6.3.1 \u6982\u8FF0",slug:"_6-3-1-\u6982\u8FF0",children:[]},{level:3,title:"6.3.2 \u7ED3\u6784",slug:"_6-3-2-\u7ED3\u6784",children:[]},{level:3,title:"6.3.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-3-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.3.4 \u4F18\u7F3A\u70B9",slug:"_6-3-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.3.5 \u4F7F\u7528\u573A\u666F",slug:"_6-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.3.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-3-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F",slug:"_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F",children:[{level:3,title:"6.4.1 \u6982\u8FF0",slug:"_6-4-1-\u6982\u8FF0",children:[]},{level:3,title:"6.4.2 \u7ED3\u6784",slug:"_6-4-2-\u7ED3\u6784",children:[]},{level:3,title:"6.4.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-4-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.4.4 \u4F18\u7F3A\u70B9",slug:"_6-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.4.5 \u6E90\u7801\u89E3\u6790",slug:"_6-4-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.5 \u72B6\u6001\u6A21\u5F0F",slug:"_6-5-\u72B6\u6001\u6A21\u5F0F",children:[{level:3,title:"6.5.1 \u6982\u8FF0",slug:"_6-5-1-\u6982\u8FF0",children:[]},{level:3,title:"6.5.2 \u7ED3\u6784",slug:"_6-5-2-\u7ED3\u6784",children:[]},{level:3,title:"6.5.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-5-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.5.4 \u4F18\u7F3A\u70B9",slug:"_6-5-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.5.5 \u4F7F\u7528\u573A\u666F",slug:"_6-5-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F",slug:"_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F",children:[{level:3,title:"6.6.1 \u6982\u8FF0",slug:"_6-6-1-\u6982\u8FF0",children:[]},{level:3,title:"6.6.2 \u7ED3\u6784",slug:"_6-6-2-\u7ED3\u6784",children:[]},{level:3,title:"6.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.6.4 \u4F18\u7F3A\u70B9",slug:"_6-6-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.6.5 \u4F7F\u7528\u573A\u666F",slug:"_6-6-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",slug:"_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",children:[]}]},{level:2,title:"6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F",slug:"_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F",children:[{level:3,title:"6.7.1 \u6982\u8FF0",slug:"_6-7-1-\u6982\u8FF0",children:[]},{level:3,title:"6.7.2 \u7ED3\u6784",slug:"_6-7-2-\u7ED3\u6784",children:[]},{level:3,title:"6.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.7.4 \u4F18\u7F3A\u70B9",slug:"_6-7-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.7.5 \u4F7F\u7528\u573A\u666F",slug:"_6-7-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F",slug:"_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F",children:[{level:3,title:"6.8.1 \u6982\u8FF0",slug:"_6-8-1-\u6982\u8FF0",children:[]},{level:3,title:"6.8.2 \u7ED3\u6784",slug:"_6-8-2-\u7ED3\u6784",children:[]},{level:3,title:"6.8.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-8-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.8.4 \u4F18\u7F3A\u70B9",slug:"_6-8-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.8.5 \u4F7F\u7528\u573A\u666F",slug:"_6-8-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.8.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-8-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F",slug:"_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F",children:[{level:3,title:"6.9.1 \u6982\u8FF0",slug:"_6-9-1-\u6982\u8FF0",children:[]},{level:3,title:"6.9.2 \u7ED3\u6784",slug:"_6-9-2-\u7ED3\u6784",children:[]},{level:3,title:"6.9.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-9-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.9.4 \u4F18\u7F3A\u70B9",slug:"_6-9-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.9.5 \u4F7F\u7528\u573A\u666F",slug:"_6-9-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.9.6 \u6269\u5C55",slug:"_6-9-6-\u6269\u5C55",children:[]}]},{level:2,title:"6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[{level:3,title:"6.10.1 \u6982\u8FF0",slug:"_6-10-1-\u6982\u8FF0",children:[]},{level:3,title:"6.10.2 \u7ED3\u6784",slug:"_6-10-2-\u7ED3\u6784",children:[]},{level:3,title:"6.10.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-10-3-\u6848\u4F8B\u5B9E\u73B0",children:[{level:4,title:"6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]},{level:4,title:"6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]}]},{level:3,title:"6.10.4 \u4F18\u7F3A\u70B9",slug:"_6-10-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.10.5 \u4F7F\u7528\u573A\u666F",slug:"_6-10-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.11 \u89E3\u91CA\u5668\u6A21\u5F0F",slug:"_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F",children:[{level:3,title:"6.11.1 \u6982\u8FF0",slug:"_6-11-1-\u6982\u8FF0",children:[]},{level:3,title:"6.11.2 \u7ED3\u6784",slug:"_6-11-2-\u7ED3\u6784",children:[]},{level:3,title:"6.11.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-11-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.11.4 \u4F18\u7F3A\u70B9",slug:"_6-11-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.11.5 \u4F7F\u7528\u573A\u666F",slug:"_6-11-5-\u4F7F\u7528\u573A\u666F",children:[]}]}]},{level:1,title:"7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6",slug:"_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6",children:[{level:2,title:"7.1 spring \u4F7F\u7528\u56DE\u987E",slug:"_7-1-spring-\u4F7F\u7528\u56DE\u987E",children:[]},{level:2,title:"7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784",slug:"_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784",children:[{level:3,title:"7.1.1 bean \u6982\u8FF0",slug:"_7-1-1-bean-\u6982\u8FF0",children:[]}]},{level:2,title:"7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790",slug:"_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790",children:[{level:3,title:"7.3.1 BeanFactory \u89E3\u6790",slug:"_7-3-1-beanfactory-\u89E3\u6790",children:[]},{level:3,title:"7.3.2 BeanDefinition \u89E3\u6790",slug:"_7-3-2-beandefinition-\u89E3\u6790",children:[]},{level:3,title:"7.3.3 BeanDefinitionReader \u89E3\u6790",slug:"_7-3-3-beandefinitionreader-\u89E3\u6790",children:[]},{level:3,title:"7.3.4 BeanDefinitionRegistry \u89E3\u6790",slug:"_7-3-4-beandefinitionregistry-\u89E3\u6790",children:[]},{level:3,title:"7.3.5 \u521B\u5EFA\u5BB9\u5668",slug:"_7-3-5-\u521B\u5EFA\u5BB9\u5668",children:[]}]},{level:2,title:"7.4 \u81EA\u5B9A\u4E49 SpringIOC",slug:"_7-4-\u81EA\u5B9A\u4E49-springioc",children:[{level:3,title:"7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B",slug:"_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B",children:[{level:4,title:"7.4.1.1 PropertyValue \u7C7B",slug:"_7-4-1-1-propertyvalue-\u7C7B",children:[]},{level:4,title:"7.4.1.2 MutablePropertyValues \u7C7B",slug:"_7-4-1-2-mutablepropertyvalues-\u7C7B",children:[]},{level:4,title:"7.4.1.3 BeanDefinition \u7C7B",slug:"_7-4-1-3-beandefinition-\u7C7B",children:[]}]},{level:3,title:"7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",slug:"_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3",slug:"_7-4-2-1-beandefinitionregistry-\u63A5\u53E3",children:[]},{level:4,title:"7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B",slug:"_7-4-2-2-simplebeandefinitionregistry-\u7C7B",children:[]}]},{level:3,title:"7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",slug:"_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.3.1 BeanDefinitionReader \u63A5\u53E3",slug:"_7-4-3-1-beandefinitionreader-\u63A5\u53E3",children:[]},{level:4,title:"7.4.3.2 XmlBeanDefinitionReader \u7C7B",slug:"_7-4-3-2-xmlbeandefinitionreader-\u7C7B",children:[]}]},{level:3,title:"7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B",slug:"_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.4.1 BeanFactory \u63A5\u53E3",slug:"_7-4-4-1-beanfactory-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.2 ApplicationContext \u63A5\u53E3",slug:"_7-4-4-2-applicationcontext-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.3 AbstractApplicationContext \u7C7B",slug:"_7-4-4-3-abstractapplicationcontext-\u7C7B",children:[]},{level:4,title:"7.4.4.4 ClassPathXmlApplicationContext \u7C7B",slug:"_7-4-4-4-classpathxmlapplicationcontext-\u7C7B",children:[]}]},{level:3,title:"7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3",slug:"_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3",children:[{level:4,title:"7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",slug:"_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",children:[]},{level:4,title:"7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",slug:"_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",children:[]},{level:4,title:"7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",slug:"_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",children:[]}]}]}]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/design-pattern/README.md",readingTime:{minutes:164.7,words:49409},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/design-pattern/`},key:"v-db9b3b8e",path:"/posts/design-pattern/",title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",lang:"zh-CN",frontmatter:{title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",description:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava",date:"2022-08-19T21:55:00.000Z",sidebar:"auto",tag:["\u8BBE\u8BA1\u6A21\u5F0F"],category:["java"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208242030437.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/design-pattern/"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"og:description",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"article:published_time",content:"2022-08-19T21:55:00.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
`,headers:[{level:1,title:"1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",slug:"_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",children:[{level:2,title:"1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",slug:"_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",children:[]},{level:2,title:"1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",slug:"_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",children:[]},{level:2,title:"1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",slug:"_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",children:[]},{level:2,title:"1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",slug:"_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",children:[]}]},{level:1,title:"2\uFF0CUML \u56FE",slug:"_2-uml-\u56FE",children:[{level:2,title:"2.1 \u7C7B\u56FE\u6982\u8FF0",slug:"_2-1-\u7C7B\u56FE\u6982\u8FF0",children:[]},{level:2,title:"2.2 \u7C7B\u56FE\u7684\u4F5C\u7528",slug:"_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528",children:[]},{level:2,title:"2.3 \u7C7B\u56FE\u8868\u793A\u6CD5",slug:"_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5",children:[{level:3,title:"2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F",children:[]},{level:3,title:"2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",children:[{level:4,title:"2.3.2.1 \u5173\u8054\u5173\u7CFB",slug:"_2-3-2-1-\u5173\u8054\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.2 \u805A\u5408\u5173\u7CFB",slug:"_2-3-2-2-\u805A\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.3 \u7EC4\u5408\u5173\u7CFB",slug:"_2-3-2-3-\u7EC4\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.4 \u4F9D\u8D56\u5173\u7CFB",slug:"_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.5 \u7EE7\u627F\u5173\u7CFB",slug:"_2-3-2-5-\u7EE7\u627F\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.6 \u5B9E\u73B0\u5173\u7CFB",slug:"_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB",children:[]}]}]}]},{level:1,title:"3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",slug:"_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",children:[{level:2,title:"3.1 \u5F00\u95ED\u539F\u5219",slug:"_3-1-\u5F00\u95ED\u539F\u5219",children:[]},{level:2,title:"3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219",slug:"_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219",children:[]},{level:2,title:"3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219",slug:"_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219",children:[]},{level:2,title:"3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219",slug:"_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219",children:[]},{level:2,title:"3.5 \u8FEA\u7C73\u7279\u6CD5\u5219",slug:"_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219",children:[]},{level:2,title:"3.6 \u5408\u6210\u590D\u7528\u539F\u5219",slug:"_3-6-\u5408\u6210\u590D\u7528\u539F\u5219",children:[]}]},{level:1,title:"4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F",slug:"_4-\u521B\u5EFA\u8005\u6A21\u5F0F",children:[{level:2,title:"4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",slug:"_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",children:[{level:3,title:"4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",slug:"_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",children:[]},{level:3,title:"4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",slug:"_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",children:[]},{level:3,title:"4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",slug:"_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",children:[{level:4,title:"4.1.3.1 \u95EE\u9898\u6F14\u793A",slug:"_4-1-3-1-\u95EE\u9898\u6F14\u793A",children:[]},{level:4,title:"4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3",slug:"_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3",children:[]}]},{level:3,title:"4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B",slug:"_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B",children:[]}]},{level:2,title:"4.2 \u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-\u5DE5\u5382\u6A21\u5F0F",children:[{level:3,title:"4.2.1 \u6982\u8FF0",slug:"_4-2-1-\u6982\u8FF0",children:[]},{level:3,title:"4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.2.1 \u7ED3\u6784",slug:"_4-2-2-1-\u7ED3\u6784",children:[]},{level:4,title:"4.2.2.2 \u5B9E\u73B0",slug:"_4-2-2-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.2.4 \u4F18\u7F3A\u70B9",slug:"_4-2-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.2.3 \u6269\u5C55",slug:"_4-2-2-3-\u6269\u5C55",children:[]}]},{level:3,title:"4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",slug:"_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",children:[{level:4,title:"4.2.3.1 \u6982\u5FF5",slug:"_4-2-3-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.3.2 \u7ED3\u6784",slug:"_4-2-3-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.3.3 \u5B9E\u73B0",slug:"_4-2-3-3-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.3.4 \u4F18\u7F3A\u70B9",slug:"_4-2-3-4-\u4F18\u7F3A\u70B9",children:[]}]},{level:3,title:"4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.4.1 \u6982\u5FF5",slug:"_4-2-4-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.4.2 \u7ED3\u6784",slug:"_4-2-4-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.4.2 \u5B9E\u73B0",slug:"_4-2-4-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.4.3 \u4F18\u7F3A\u70B9",slug:"_4-2-4-3-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.4.4 \u4F7F\u7528\u573A\u666F",slug:"_4-2-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:3,title:"4.2.5 \u6A21\u5F0F\u6269\u5C55",slug:"_4-2-5-\u6A21\u5F0F\u6269\u5C55",children:[]},{level:3,title:"4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5",slug:"_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5",children:[]}]},{level:2,title:"4.3 \u539F\u578B\u6A21\u5F0F",slug:"_4-3-\u539F\u578B\u6A21\u5F0F",children:[{level:3,title:"4.3.1 \u6982\u8FF0",slug:"_4-3-1-\u6982\u8FF0",children:[]},{level:3,title:"4.3.2 \u7ED3\u6784",slug:"_4-3-2-\u7ED3\u6784",children:[]},{level:3,title:"4.3.3 \u5B9E\u73B0",slug:"_4-3-3-\u5B9E\u73B0",children:[]},{level:3,title:"4.3.4 \u6848\u4F8B",slug:"_4-3-4-\u6848\u4F8B",children:[]},{level:3,title:"4.3.5 \u4F7F\u7528\u573A\u666F",slug:"_4-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09",slug:"_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686",children:[]}]},{level:2,title:"4.5 \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[{level:3,title:"4.4.1 \u6982\u8FF0",slug:"_4-4-1-\u6982\u8FF0",children:[]},{level:3,title:"4.4.2 \u7ED3\u6784",slug:"_4-4-2-\u7ED3\u6784",children:[]},{level:3,title:"4.4.3 \u5B9E\u4F8B",slug:"_4-4-3-\u5B9E\u4F8B",children:[]},{level:3,title:"4.4.4 \u4F18\u7F3A\u70B9",slug:"_4-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"4.4.5 \u4F7F\u7528\u573A\u666F",slug:"_4-4-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.4.6 \u6A21\u5F0F\u6269\u5C55",slug:"_4-4-6-\u6A21\u5F0F\u6269\u5C55",children:[]}]},{level:2,title:"4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",slug:"_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",children:[{level:3,title:"4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]},{level:3,title:"4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]}]}]},{level:1,title:"5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F",slug:"_5-\u7ED3\u6784\u578B\u6A21\u5F0F",children:[{level:2,title:"5.1 \u4EE3\u7406\u6A21\u5F0F",slug:"_5-1-\u4EE3\u7406\u6A21\u5F0F",children:[{level:3,title:"5.1.1 \u6982\u8FF0",slug:"_5-1-1-\u6982\u8FF0",children:[]},{level:3,title:"5.1.2 \u7ED3\u6784",slug:"_5-1-2-\u7ED3\u6784",children:[]},{level:3,title:"5.1.3 \u9759\u6001\u4EE3\u7406",slug:"_5-1-3-\u9759\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.4 JDK \u52A8\u6001\u4EE3\u7406",slug:"_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406",slug:"_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",slug:"_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",children:[]},{level:3,title:"5.1.7 \u4F18\u7F3A\u70B9",slug:"_5-1-7-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"5.1.8 \u4F7F\u7528\u573A\u666F",slug:"_5-1-8-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.2 \u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-\u9002\u914D\u5668\u6A21\u5F0F",children:[{level:3,title:"5.2.1 \u6982\u8FF0",slug:"_5-2-1-\u6982\u8FF0",children:[]},{level:3,title:"5.2.2 \u7ED3\u6784",slug:"_5-2-2-\u7ED3\u6784",children:[]},{level:3,title:"5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.5 \u5E94\u7528\u573A\u666F",slug:"_5-2-5-\u5E94\u7528\u573A\u666F",children:[]},{level:3,title:"5.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.3 \u88C5\u9970\u8005\u6A21\u5F0F",slug:"_5-3-\u88C5\u9970\u8005\u6A21\u5F0F",children:[{level:3,title:"5.3.1 \u6982\u8FF0",slug:"_5-3-1-\u6982\u8FF0",children:[]},{level:3,title:"5.3.2 \u7ED3\u6784",slug:"_5-3-2-\u7ED3\u6784",children:[]},{level:3,title:"5.3.3 \u6848\u4F8B",slug:"_5-3-3-\u6848\u4F8B",children:[]},{level:3,title:"5.3.4 \u4F7F\u7528\u573A\u666F",slug:"_5-3-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.3.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-3-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]},{level:3,title:"5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",slug:"_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",children:[]}]},{level:2,title:"5.4 \u6865\u63A5\u6A21\u5F0F",slug:"_5-4-\u6865\u63A5\u6A21\u5F0F",children:[{level:3,title:"5.4.1 \u6982\u8FF0",slug:"_5-4-1-\u6982\u8FF0",children:[]},{level:3,title:"5.4.2 \u7ED3\u6784",slug:"_5-4-2-\u7ED3\u6784",children:[]},{level:3,title:"5.4.3 \u6848\u4F8B",slug:"_5-4-3-\u6848\u4F8B",children:[]},{level:3,title:"5.4.4 \u4F7F\u7528\u573A\u666F",slug:"_5-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.5 \u5916\u89C2\u6A21\u5F0F",slug:"_5-5-\u5916\u89C2\u6A21\u5F0F",children:[{level:3,title:"5.5.1 \u6982\u8FF0",slug:"_5-5-1-\u6982\u8FF0",children:[]},{level:3,title:"5.5.2 \u7ED3\u6784",slug:"_5-5-2-\u7ED3\u6784",children:[]},{level:3,title:"5.5.3 \u6848\u4F8B",slug:"_5-5-3-\u6848\u4F8B",children:[]},{level:3,title:"5.5.4 \u4F7F\u7528\u573A\u666F",slug:"_5-5-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.5.5 \u6E90\u7801\u89E3\u6790",slug:"_5-5-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.6 \u7EC4\u5408\u6A21\u5F0F",slug:"_5-6-\u7EC4\u5408\u6A21\u5F0F",children:[{level:3,title:"5.6.1 \u6982\u8FF0",slug:"_5-6-1-\u6982\u8FF0",children:[]},{level:3,title:"5.6.2 \u7ED3\u6784",slug:"_5-6-2-\u7ED3\u6784",children:[]},{level:3,title:"5.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",slug:"_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",children:[]},{level:3,title:"5.6.5 \u4F18\u70B9",slug:"_5-6-5-\u4F18\u70B9",children:[]},{level:3,title:"5.6.6 \u4F7F\u7528\u573A\u666F",slug:"_5-6-6-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.7 \u4EAB\u5143\u6A21\u5F0F",slug:"_5-7-\u4EAB\u5143\u6A21\u5F0F",children:[{level:3,title:"5.7.1 \u6982\u8FF0",slug:"_5-7-1-\u6982\u8FF0",children:[]},{level:3,title:"5.7.2 \u7ED3\u6784",slug:"_5-7-2-\u7ED3\u6784",children:[]},{level:3,title:"5.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",slug:"_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.7.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-7-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]}]},{level:1,title:"6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F",slug:"_6-\u884C\u4E3A\u578B\u6A21\u5F0F",children:[{level:2,title:"6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",slug:"_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",children:[{level:3,title:"6.1.1 \u6982\u8FF0",slug:"_6-1-1-\u6982\u8FF0",children:[]},{level:3,title:"6.1.2 \u7ED3\u6784",slug:"_6-1-2-\u7ED3\u6784",children:[]},{level:3,title:"6.1.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-1-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.1.3 \u4F18\u7F3A\u70B9",slug:"_6-1-3-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.1.4 \u9002\u7528\u573A\u666F",slug:"_6-1-4-\u9002\u7528\u573A\u666F",children:[]},{level:3,title:"6.1.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-1-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.2 \u7B56\u7565\u6A21\u5F0F",slug:"_6-2-\u7B56\u7565\u6A21\u5F0F",children:[{level:3,title:"6.2.1 \u6982\u8FF0",slug:"_6-2-1-\u6982\u8FF0",children:[]},{level:3,title:"6.2.2 \u7ED3\u6784",slug:"_6-2-2-\u7ED3\u6784",children:[]},{level:3,title:"6.2.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-2-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.2.4 \u4F18\u7F3A\u70B9",slug:"_6-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.2.5 \u4F7F\u7528\u573A\u666F",slug:"_6-2-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.3 \u547D\u4EE4\u6A21\u5F0F",slug:"_6-3-\u547D\u4EE4\u6A21\u5F0F",children:[{level:3,title:"6.3.1 \u6982\u8FF0",slug:"_6-3-1-\u6982\u8FF0",children:[]},{level:3,title:"6.3.2 \u7ED3\u6784",slug:"_6-3-2-\u7ED3\u6784",children:[]},{level:3,title:"6.3.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-3-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.3.4 \u4F18\u7F3A\u70B9",slug:"_6-3-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.3.5 \u4F7F\u7528\u573A\u666F",slug:"_6-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.3.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-3-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F",slug:"_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F",children:[{level:3,title:"6.4.1 \u6982\u8FF0",slug:"_6-4-1-\u6982\u8FF0",children:[]},{level:3,title:"6.4.2 \u7ED3\u6784",slug:"_6-4-2-\u7ED3\u6784",children:[]},{level:3,title:"6.4.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-4-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.4.4 \u4F18\u7F3A\u70B9",slug:"_6-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.4.5 \u6E90\u7801\u89E3\u6790",slug:"_6-4-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.5 \u72B6\u6001\u6A21\u5F0F",slug:"_6-5-\u72B6\u6001\u6A21\u5F0F",children:[{level:3,title:"6.5.1 \u6982\u8FF0",slug:"_6-5-1-\u6982\u8FF0",children:[]},{level:3,title:"6.5.2 \u7ED3\u6784",slug:"_6-5-2-\u7ED3\u6784",children:[]},{level:3,title:"6.5.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-5-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.5.4 \u4F18\u7F3A\u70B9",slug:"_6-5-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.5.5 \u4F7F\u7528\u573A\u666F",slug:"_6-5-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F",slug:"_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F",children:[{level:3,title:"6.6.1 \u6982\u8FF0",slug:"_6-6-1-\u6982\u8FF0",children:[]},{level:3,title:"6.6.2 \u7ED3\u6784",slug:"_6-6-2-\u7ED3\u6784",children:[]},{level:3,title:"6.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.6.4 \u4F18\u7F3A\u70B9",slug:"_6-6-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.6.5 \u4F7F\u7528\u573A\u666F",slug:"_6-6-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",slug:"_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",children:[]}]},{level:2,title:"6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F",slug:"_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F",children:[{level:3,title:"6.7.1 \u6982\u8FF0",slug:"_6-7-1-\u6982\u8FF0",children:[]},{level:3,title:"6.7.2 \u7ED3\u6784",slug:"_6-7-2-\u7ED3\u6784",children:[]},{level:3,title:"6.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.7.4 \u4F18\u7F3A\u70B9",slug:"_6-7-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.7.5 \u4F7F\u7528\u573A\u666F",slug:"_6-7-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F",slug:"_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F",children:[{level:3,title:"6.8.1 \u6982\u8FF0",slug:"_6-8-1-\u6982\u8FF0",children:[]},{level:3,title:"6.8.2 \u7ED3\u6784",slug:"_6-8-2-\u7ED3\u6784",children:[]},{level:3,title:"6.8.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-8-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.8.4 \u4F18\u7F3A\u70B9",slug:"_6-8-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.8.5 \u4F7F\u7528\u573A\u666F",slug:"_6-8-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.8.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-8-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F",slug:"_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F",children:[{level:3,title:"6.9.1 \u6982\u8FF0",slug:"_6-9-1-\u6982\u8FF0",children:[]},{level:3,title:"6.9.2 \u7ED3\u6784",slug:"_6-9-2-\u7ED3\u6784",children:[]},{level:3,title:"6.9.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-9-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.9.4 \u4F18\u7F3A\u70B9",slug:"_6-9-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.9.5 \u4F7F\u7528\u573A\u666F",slug:"_6-9-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.9.6 \u6269\u5C55",slug:"_6-9-6-\u6269\u5C55",children:[]}]},{level:2,title:"6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[{level:3,title:"6.10.1 \u6982\u8FF0",slug:"_6-10-1-\u6982\u8FF0",children:[]},{level:3,title:"6.10.2 \u7ED3\u6784",slug:"_6-10-2-\u7ED3\u6784",children:[]},{level:3,title:"6.10.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-10-3-\u6848\u4F8B\u5B9E\u73B0",children:[{level:4,title:"6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]},{level:4,title:"6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]}]},{level:3,title:"6.10.4 \u4F18\u7F3A\u70B9",slug:"_6-10-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.10.5 \u4F7F\u7528\u573A\u666F",slug:"_6-10-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.11 \u89E3\u91CA\u5668\u6A21\u5F0F",slug:"_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F",children:[{level:3,title:"6.11.1 \u6982\u8FF0",slug:"_6-11-1-\u6982\u8FF0",children:[]},{level:3,title:"6.11.2 \u7ED3\u6784",slug:"_6-11-2-\u7ED3\u6784",children:[]},{level:3,title:"6.11.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-11-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.11.4 \u4F18\u7F3A\u70B9",slug:"_6-11-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.11.5 \u4F7F\u7528\u573A\u666F",slug:"_6-11-5-\u4F7F\u7528\u573A\u666F",children:[]}]}]},{level:1,title:"7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6",slug:"_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6",children:[{level:2,title:"7.1 spring \u4F7F\u7528\u56DE\u987E",slug:"_7-1-spring-\u4F7F\u7528\u56DE\u987E",children:[]},{level:2,title:"7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784",slug:"_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784",children:[{level:3,title:"7.1.1 bean \u6982\u8FF0",slug:"_7-1-1-bean-\u6982\u8FF0",children:[]}]},{level:2,title:"7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790",slug:"_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790",children:[{level:3,title:"7.3.1 BeanFactory \u89E3\u6790",slug:"_7-3-1-beanfactory-\u89E3\u6790",children:[]},{level:3,title:"7.3.2 BeanDefinition \u89E3\u6790",slug:"_7-3-2-beandefinition-\u89E3\u6790",children:[]},{level:3,title:"7.3.3 BeanDefinitionReader \u89E3\u6790",slug:"_7-3-3-beandefinitionreader-\u89E3\u6790",children:[]},{level:3,title:"7.3.4 BeanDefinitionRegistry \u89E3\u6790",slug:"_7-3-4-beandefinitionregistry-\u89E3\u6790",children:[]},{level:3,title:"7.3.5 \u521B\u5EFA\u5BB9\u5668",slug:"_7-3-5-\u521B\u5EFA\u5BB9\u5668",children:[]}]},{level:2,title:"7.4 \u81EA\u5B9A\u4E49 SpringIOC",slug:"_7-4-\u81EA\u5B9A\u4E49-springioc",children:[{level:3,title:"7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B",slug:"_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B",children:[{level:4,title:"7.4.1.1 PropertyValue \u7C7B",slug:"_7-4-1-1-propertyvalue-\u7C7B",children:[]},{level:4,title:"7.4.1.2 MutablePropertyValues \u7C7B",slug:"_7-4-1-2-mutablepropertyvalues-\u7C7B",children:[]},{level:4,title:"7.4.1.3 BeanDefinition \u7C7B",slug:"_7-4-1-3-beandefinition-\u7C7B",children:[]}]},{level:3,title:"7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",slug:"_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3",slug:"_7-4-2-1-beandefinitionregistry-\u63A5\u53E3",children:[]},{level:4,title:"7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B",slug:"_7-4-2-2-simplebeandefinitionregistry-\u7C7B",children:[]}]},{level:3,title:"7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",slug:"_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.3.1 BeanDefinitionReader \u63A5\u53E3",slug:"_7-4-3-1-beandefinitionreader-\u63A5\u53E3",children:[]},{level:4,title:"7.4.3.2 XmlBeanDefinitionReader \u7C7B",slug:"_7-4-3-2-xmlbeandefinitionreader-\u7C7B",children:[]}]},{level:3,title:"7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B",slug:"_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.4.1 BeanFactory \u63A5\u53E3",slug:"_7-4-4-1-beanfactory-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.2 ApplicationContext \u63A5\u53E3",slug:"_7-4-4-2-applicationcontext-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.3 AbstractApplicationContext \u7C7B",slug:"_7-4-4-3-abstractapplicationcontext-\u7C7B",children:[]},{level:4,title:"7.4.4.4 ClassPathXmlApplicationContext \u7C7B",slug:"_7-4-4-4-classpathxmlapplicationcontext-\u7C7B",children:[]}]},{level:3,title:"7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3",slug:"_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3",children:[{level:4,title:"7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",slug:"_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",children:[]},{level:4,title:"7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",slug:"_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",children:[]},{level:4,title:"7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",slug:"_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",children:[]}]}]}]}],content:`---
title: Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F
description: 'Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava'
date: 2022-8-19 21:55:00
sidebar: 'auto'
tag:
  - \u8BBE\u8BA1\u6A21\u5F0F
category:
  - java
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208242030437.jpg
---

\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002

<!-- more -->

# 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0

## 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F

"\u8BBE\u8BA1\u6A21\u5F0F"\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002

1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB\`\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09\`\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002

1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002

## 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5

\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002

## 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027

\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002

\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002

- \u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002
- \u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002
- \u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002

## 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B

- **\u521B\u5EFA\u578B\u6A21\u5F0F**

  \u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002

- **\u7ED3\u6784\u578B\u6A21\u5F0F**

  \u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002

- **\u884C\u4E3A\u578B\u6A21\u5F0F**

  \u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002

# 2\uFF0CUML \u56FE

\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002

UML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002

## 2.1 \u7C7B\u56FE\u6982\u8FF0

\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002

## 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528

- \u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B
- \u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002

## 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5

### 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002

![](\\img\\Employee.jpg)

\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A

- +\uFF1A\u8868\u793A public

- -\uFF1A\u8868\u793A private

- #\uFF1A\u8868\u793A protected

\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]**

\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]**

> \u6CE8\u610F\uFF1A
>
> \u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684
>
> \u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762

**\u4E3E\u4E2A\u6817\u5B50\uFF1A**

![](\\img\\demo.png)

\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A

- method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002
- method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002
- method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002

### 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F

#### 2.3.2.1 \u5173\u8054\u5173\u7CFB

\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002

\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002

**1\uFF0C\u5355\u5411\u5173\u8054**

![](\\img\\customer_address.png)

\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002

**2\uFF0C\u53CC\u5411\u5173\u8054**

![](\\img\\customer_product.png)

\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List\\<Product>\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002

**3\uFF0C\u81EA\u5173\u8054**

![](\\img\\node.png)

\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002

#### 2.3.2.2 \u805A\u5408\u5173\u7CFB

\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002

\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A

![](\\img\\image-20191229173422328.png)

#### 2.3.2.3 \u7EC4\u5408\u5173\u7CFB

\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002

\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A

![](\\img\\image-20191229173455149.png)

#### 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB

\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A

![](\\img\\image-20191229173518926.png)

#### 2.3.2.5 \u7EE7\u627F\u5173\u7CFB

\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A

![](\\img\\image-20191229173539838.png)

#### 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB

\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002

![](\\img\\image-20191229173554296.png)

# 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219

\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002

## 3.1 \u5F00\u95ED\u539F\u5219

**\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED**\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002

\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002

\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002

\u4E0B\u9762\u4EE5 \`\u641C\u72D7\u8F93\u5165\u6CD5\` \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002

\u3010\u4F8B\u3011\`\u641C\u72D7\u8F93\u5165\u6CD5\` \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002

\u5206\u6790\uFF1A\`\u641C\u72D7\u8F93\u5165\u6CD5\` \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002

![](\\img\\open-close.png)

## 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219

\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002

\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002

\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50

\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002

\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002

![](\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png)

\u4EE3\u7801\u5982\u4E0B\uFF1A

**\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A**

\`\`\`java
public class Rectangle {
    private double length;
    private double width;

    public double getLength() {
        return length;
    }

    public void setLength(double length) {
        this.length = length;
    }

    public double getWidth() {
        return width;
    }

    public void setWidth(double width) {
        this.width = width;
    }
}
\`\`\`

**\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A**

\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002

\`\`\`java
public class Square extends Rectangle {

    public void setWidth(double width) {
        super.setLength(width);
        super.setWidth(width);
    }

    public void setLength(double length) {
        super.setLength(length);
        super.setWidth(length);
    }
}
\`\`\`

\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002

\`\`\`java
public class RectangleDemo {

    public static void resize(Rectangle rectangle) {
        while (rectangle.getWidth() <= rectangle.getLength()) {
            rectangle.setWidth(rectangle.getWidth() + 1);
        }
    }

    //\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD
    public static void printLengthAndWidth(Rectangle rectangle) {
        System.out.println(rectangle.getLength());
        System.out.println(rectangle.getWidth());
    }

    public static void main(String[] args) {
        Rectangle rectangle = new Rectangle();
        rectangle.setLength(20);
        rectangle.setWidth(10);
        resize(rectangle);
        printLengthAndWidth(rectangle);

        System.out.println("============");

        Rectangle rectangle1 = new Square();
        rectangle1.setLength(10);
        resize(rectangle1);
        printLengthAndWidth(rectangle1);
    }
}
\`\`\`

\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002
\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002

\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3

<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />

## 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219

\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219

\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111

\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002

**\u7C7B\u56FE\u5982\u4E0B\uFF1A**

<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

**\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:**

\`\`\`java
public class XiJieHardDisk implements HardDisk {

    public void save(String data) {
        System.out.println("\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E" + data);
    }

    public String get() {
        System.out.println("\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E");
        return "\u6570\u636E";
    }
}
\`\`\`

**Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A**

\`\`\`java
public class IntelCpu implements Cpu {

    public void run() {
        System.out.println("\u4F7F\u7528Intel\u5904\u7406\u5668");
    }
}
\`\`\`

**\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A**

\`\`\`java
public class KingstonMemory implements Memory {

    public void save() {
        System.out.println("\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761");
    }
}
\`\`\`

**\u7535\u8111\uFF08Computer\uFF09\uFF1A**

\`\`\`java
public class Computer {

    private XiJieHardDisk hardDisk;
    private IntelCpu cpu;
    private KingstonMemory memory;

    public IntelCpu getCpu() {
        return cpu;
    }

    public void setCpu(IntelCpu cpu) {
        this.cpu = cpu;
    }

    public KingstonMemory getMemory() {
        return memory;
    }

    public void setMemory(KingstonMemory memory) {
        this.memory = memory;
    }

    public XiJieHardDisk getHardDisk() {
        return hardDisk;
    }

    public void setHardDisk(XiJieHardDisk hardDisk) {
        this.hardDisk = hardDisk;
    }

    public void run() {
        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");
        cpu.run();
        memory.save();
        String data = hardDisk.get();
        System.out.println("\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A" + data);
    }
}
\`\`\`

**\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A**

\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002

\`\`\`java
public class TestComputer {
    public static void main(String[] args) {
        Computer computer = new Computer();
        computer.setHardDisk(new XiJieHardDisk());
        computer.setCpu(new IntelCpu());
        computer.setMemory(new KingstonMemory());

        computer.run();
    }
}
\`\`\`

\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002

\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A

\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002

**\u7C7B\u56FE\u5982\u4E0B\uFF1A**

<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />

**\u7535\u8111\uFF08Computer\uFF09\uFF1A**

\`\`\`java
public class Computer {

    private HardDisk hardDisk;
    private Cpu cpu;
    private Memory memory;

    public HardDisk getHardDisk() {
        return hardDisk;
    }

    public void setHardDisk(HardDisk hardDisk) {
        this.hardDisk = hardDisk;
    }

    public Cpu getCpu() {
        return cpu;
    }

    public void setCpu(Cpu cpu) {
        this.cpu = cpu;
    }

    public Memory getMemory() {
        return memory;
    }

    public void setMemory(Memory memory) {
        this.memory = memory;
    }

    public void run() {
        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");
    }
}
\`\`\`

\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002

## 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219

\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219

\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B

\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\`\u9ED1\u9A6C\`\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png)

\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A

![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png)

\u4EE3\u7801\u5982\u4E0B\uFF1A

**AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A**

\`\`\`java
public interface AntiTheft {
    void antiTheft();
}
\`\`\`

**Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A**

\`\`\`java
public interface Fireproof {
    void fireproof();
}
\`\`\`

**Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A**

\`\`\`java
public interface Waterproof {
    void waterproof();
}
\`\`\`

**HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**

\`\`\`java
public class HeiMaSafetyDoor implements AntiTheft,Fireproof,Waterproof {
    public void antiTheft() {
        System.out.println("\u9632\u76D7");
    }

    public void fireproof() {
        System.out.println("\u9632\u706B");
    }


    public void waterproof() {
        System.out.println("\u9632\u6C34");
    }
}
\`\`\`

**ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**

\`\`\`java
public class ItcastSafetyDoor implements AntiTheft,Fireproof {
    public void antiTheft() {
        System.out.println("\u9632\u76D7");
    }

    public void fireproof() {
        System.out.println("\u9632\u706B");
    }
}
\`\`\`

## 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219

\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002

\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002

\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002

\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219

\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B

\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

**\u660E\u661F\u7C7B\uFF08Star\uFF09**

\`\`\`java
public class Star {
    private String name;

    public Star(String name) {
        this.name=name;
    }

    public String getName() {
        return name;
    }
}
\`\`\`

**\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09**

\`\`\`java
public class Fans {
    private String name;

    public Fans(String name) {
        this.name=name;
    }

    public String getName() {
        return name;
    }
}
\`\`\`

**\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09**

\`\`\`java
public class Company {
    private String name;

    public Company(String name) {
        this.name=name;
    }

    public String getName() {
        return name;
    }
}
\`\`\`

**\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09**

\`\`\`java
public class Agent {
    private Star star;
    private Fans fans;
    private Company company;

    public void setStar(Star star) {
        this.star = star;
    }

    public void setFans(Fans fans) {
        this.fans = fans;
    }

    public void setCompany(Company company) {
        this.company = company;
    }

    public void meeting() {
        System.out.println(fans.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u89C1\u9762\u4E86\u3002");
    }

    public void business() {
        System.out.println(company.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u6D3D\u6DE1\u4E1A\u52A1\u3002");
    }
}
\`\`\`

## 3.6 \u5408\u6210\u590D\u7528\u539F\u5219

\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002

\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002

\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A

1. \u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002
2. \u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002
3. \u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002

\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A

1. \u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002
2. \u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002
3. \u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219

\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F

\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />

\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002

<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />

# 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F

\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002

\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002

\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A

- \u5355\u4F8B\u6A21\u5F0F
- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F
- \u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F
- \u539F\u578B\u6A21\u5F0F
- \u5EFA\u9020\u8005\u6A21\u5F0F

## 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F

\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002

\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002

### 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784

\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A

- \u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B
- \u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B

### 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0

> \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A
>
> \u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA
>
> \u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA

1. \u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09

   \`\`\`java
   /**
    * \u997F\u6C49\u5F0F
    *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61
    */
   public class Singleton {
       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance = new Singleton();

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002

2. \u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09

   \`\`\`java
   /**
    * \u6076\u6C49\u5F0F
    *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance;

       static {
           instance = new Singleton();
       }

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002

3. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09

   \`\`\`java
   /**
    * \u61D2\u6C49\u5F0F
    *  \u7EBF\u7A0B\u4E0D\u5B89\u5168
    */
   public class Singleton {
       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance;

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {

           if(instance == null) {
               instance = new Singleton();
           }
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002

4. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09

   \`\`\`java
   /**
    * \u61D2\u6C49\u5F0F
    *  \u7EBF\u7A0B\u5B89\u5168
    */
   public class Singleton {
       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance;

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static synchronized Singleton getInstance() {

           if(instance == null) {
               instance = new Singleton();
           }
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002

5. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09

   \u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E \`getInstance()\` \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F

   \`\`\`java
   /**
    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       private static Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B
           if(instance == null) {
               synchronized (Singleton.class) {
                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull
                   if(instance == null) {
                       instance = new Singleton();
                   }
               }
           }
           return instance;
       }
   }
   \`\`\`

   \u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002

   \u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 \`volatile\` \u5173\u952E\u5B57, \`volatile\` \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002

   \`\`\`java
   /**
    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       private static volatile Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645
           if(instance == null) {
               synchronized (Singleton.class) {
                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A
                   if(instance == null) {
                       instance = new Singleton();
                   }
               }
           }
           return instance;
       }
   }
   \`\`\`

   <div color="red">\u5C0F\u7ED3\uFF1A</div>

   \u6DFB\u52A0 \`volatile\` \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002

6. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09

   \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB \`static\` \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002

   \`\`\`java
   /**
    * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       private static class SingletonHolder {
           private static final Singleton INSTANCE = new Singleton();
       }

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
           return SingletonHolder.INSTANCE;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder

   \u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002

   <div color="red">\u5C0F\u7ED3\uFF1A</div>

   \u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002

7. \u679A\u4E3E\u65B9\u5F0F

   \u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002

   \`\`\`java
   /**
    * \u679A\u4E3E\u65B9\u5F0F
    */
   public enum Singleton {
       INSTANCE;
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002

### 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898

#### 4.1.3.1 \u95EE\u9898\u6F14\u793A

\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002

- \u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316

  **Singleton \u7C7B\uFF1A**

  \`\`\`java
  public class Singleton implements Serializable {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {}

      private static class SingletonHolder {
          private static final Singleton INSTANCE = new Singleton();
      }

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {
          return SingletonHolder.INSTANCE;
      }
  }
  \`\`\`

  **Test \u7C7B\uFF1A**

  \`\`\`java
  public class Test {
      public static void main(String[] args) throws Exception {
          //\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61
          //writeObject2File();
          //\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61
          Singleton s1 = readObjectFromFile();
          Singleton s2 = readObjectFromFile();

          //\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
          System.out.println(s1 == s2);
      }

      private static Singleton readObjectFromFile() throws Exception {
          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61
          ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));
          //\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61
          Singleton instance = (Singleton) ois.readObject();

          return instance;
      }

      public static void writeObject2File() throws Exception {
          //\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61
          Singleton instance = Singleton.getInstance();
          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41
          ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));
          //\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D
          oos.writeObject(instance);
      }
  }
  \`\`\`

  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F\`false\`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002

- \u53CD\u5C04

  **Singleton \u7C7B\uFF1A**

  \`\`\`java
  public class Singleton {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {}

      private static volatile Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {

          if(instance != null) {
              return instance;
          }

          synchronized (Singleton.class) {
              if(instance != null) {
                  return instance;
              }
              instance = new Singleton();
              return instance;
          }
      }
  }
  \`\`\`

  **Test \u7C7B\uFF1A**

  \`\`\`java
  public class Test {
      public static void main(String[] args) throws Exception {
          //\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61
          Class clazz = Singleton.class;
          //\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61
          Constructor constructor = clazz.getDeclaredConstructor();
          //\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5
          constructor.setAccessible(true);

          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1
          Singleton s1 = (Singleton) constructor.newInstance();
          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2
          Singleton s2 = (Singleton) constructor.newInstance();

          //\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
          System.out.println(s1 == s2);
      }
  }
  \`\`\`

  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F\`false\`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F

> <div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002

#### 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3

- \u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5

  \u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0\`readResolve()\`\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002

  **Singleton \u7C7B\uFF1A**

  \`\`\`java
  public class Singleton implements Serializable {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {}

      private static class SingletonHolder {
          private static final Singleton INSTANCE = new Singleton();
      }

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {
          return SingletonHolder.INSTANCE;
      }

      /**
       * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F
       */
      private Object readResolve() {
          return SingletonHolder.INSTANCE;
      }
  }
  \`\`\`

  **\u6E90\u7801\u89E3\u6790\uFF1A**

  ObjectInputStream \u7C7B

  \`\`\`java
  public final Object readObject() throws IOException, ClassNotFoundException{
      ...
      // if nested read, passHandle contains handle of enclosing object
      int outerHandle = passHandle;
      try {
          Object obj = readObject0(false);//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5
      .....
  }

  private Object readObject0(boolean unshared) throws IOException {
  	...
      try {
  		switch (tc) {
  			...
  			case TC_OBJECT:
  				return checkResolve(readOrdinaryObject(unshared));//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5
  			...
          }
      } finally {
          depth--;
          bin.setBlockDataMode(oldMode);
      }
  }

  private Object readOrdinaryObject(boolean unshared) throws IOException {
  	...
  	//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C
      obj = desc.isInstantiable() ? desc.newInstance() : null;
      ...
      // \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue
      if (obj != null && handles.lookupException(passHandle) == null && desc.hasReadResolveMethod()) {
      	// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF
      	// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002
      	Object rep = desc.invokeReadResolve(obj);
       	...
      }
      return obj;
  }
  \`\`\`

- \u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5

  \`\`\`java
  public class Singleton {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {
          /*
             \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801
          */
          if(instance != null) {
              throw new RuntimeException();
          }
      }

      private static volatile Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {

          if(instance != null) {
              return instance;
          }

          synchronized (Singleton.class) {
              if(instance != null) {
                  return instance;
              }
              instance = new Singleton();
              return instance;
          }
      }
  }
  \`\`\`

  <div color="red">\u8BF4\u660E:</div>

  \u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002

### 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B

Runtime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002

1. \u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F

   \`\`\`java
   public class Runtime {
       private static Runtime currentRuntime = new Runtime();

       /**
        * Returns the runtime object associated with the current Java application.
        * Most of the methods of class <code>Runtime</code> are instance
        * methods and must be invoked with respect to the current runtime object.
        *
        * @return  the <code>Runtime</code> object associated with the current
        *          Java application.
        */
       public static Runtime getRuntime() {
           return currentRuntime;
       }

       /** Don't let anyone else instantiate this class */
       private Runtime() {}
       ...
   }
   \`\`\`

   \u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002

2. \u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5

   \`\`\`java
   public class RuntimeDemo {
       public static void main(String[] args) throws IOException {
           //\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61
           Runtime runtime = Runtime.getRuntime();

           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002
           System.out.println(runtime.totalMemory());
           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002
           System.out.println(runtime.maxMemory());

           //\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61
           Process process = runtime.exec("ipconfig");
           //\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6
           InputStream inputStream = process.getInputStream();
           byte[] arr = new byte[1024 * 1024* 100];
           int b = inputStream.read(arr);
           System.out.println(new String(arr,0,b,"gbk"));
       }
   }
   \`\`\`

## 4.2 \u5DE5\u5382\u6A21\u5F0F

### 4.2.1 \u6982\u8FF0

\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002

\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002

\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A

<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />

\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A**\u89E3\u8026**\u3002

\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528

- \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09
- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F
- \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F

### 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F

\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002

#### 4.2.2.1 \u7ED3\u6784

\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002
- \u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B
- \u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002

#### 4.2.2.2 \u5B9E\u73B0

\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />

\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class SimpleCoffeeFactory {

    public Coffee createCoffee(String type) {
        Coffee coffee = null;
        if("americano".equals(type)) {
            coffee = new AmericanoCoffee();
        } else if("latte".equals(type)) {
            coffee = new LatteCoffee();
        }
        return coffee;
    }
}
\`\`\`

\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002

\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002

#### 4.2.2.4 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002

**\u7F3A\u70B9\uFF1A**

\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002

#### 4.2.2.3 \u6269\u5C55

**\u9759\u6001\u5DE5\u5382**

\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class SimpleCoffeeFactory {

    public static Coffee createCoffee(String type) {
        Coffee coffee = null;
        if("americano".equals(type)) {
            coffee = new AmericanoCoffee();
        } else if("latte".equals(type)) {
            coffee = new LatteCoffee();
        }
        return coffe;
    }
}
\`\`\`

### 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F

\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002

#### 4.2.3.1 \u6982\u5FF5

\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002

#### 4.2.3.2 \u7ED3\u6784

\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002
- \u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002
- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002
- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002

#### 4.2.3.3 \u5B9E\u73B0

\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u62BD\u8C61\u5DE5\u5382\uFF1A

\`\`\`java
public interface CoffeeFactory {

    Coffee createCoffee();
}
\`\`\`

\u5177\u4F53\u5DE5\u5382\uFF1A

\`\`\`java
public class LatteCoffeeFactory implements CoffeeFactory {

    public Coffee createCoffee() {
        return new LatteCoffee();
    }
}

public class AmericanCoffeeFactory implements CoffeeFactory {

    public Coffee createCoffee() {
        return new AmericanCoffee();
    }
}
\`\`\`

\u5496\u5561\u5E97\u7C7B\uFF1A

\`\`\`java
public class CoffeeStore {

    private CoffeeFactory factory;

    public CoffeeStore(CoffeeFactory factory) {
        this.factory = factory;
    }

    public Coffee orderCoffee(String type) {
        Coffee coffee = factory.createCoffee();
        coffee.addMilk();
        coffee.addsugar();
        return coffee;
    }
}
\`\`\`

\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002

\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002

#### 4.2.3.4 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B
- \u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B

**\u7F3A\u70B9\uFF1A**

- \u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002

### 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F

\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002

\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002

\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002

<img src="/img/image-20200401214509176.png" style="zoom:67%;" />

<img src="/img/image-20200401222951963.png" style="zoom:67%;" />

#### 4.2.4.1 \u6982\u5FF5

\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002

\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002

#### 4.2.4.2 \u7ED3\u6784

\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A

- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002
- \u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002
- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002
- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002

#### 4.2.4.2 \u5B9E\u73B0

\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u62BD\u8C61\u5DE5\u5382\uFF1A

\`\`\`java
public interface DessertFactory {

    Coffee createCoffee();

    Dessert createDessert();
}
\`\`\`

\u5177\u4F53\u5DE5\u5382\uFF1A

\`\`\`java
//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382
public class AmericanDessertFactory implements DessertFactory {

    public Coffee createCoffee() {
        return new AmericanCoffee();
    }

    public Dessert createDessert() {
        return new MatchaMousse();
    }
}
//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382
public class ItalyDessertFactory implements DessertFactory {

    public Coffee createCoffee() {
        return new LatteCoffee();
    }

    public Dessert createDessert() {
        return new Tiramisu();
    }
}
\`\`\`

\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002

#### 4.2.4.3 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002

**\u7F3A\u70B9\uFF1A**

\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002

#### 4.2.4.4 \u4F7F\u7528\u573A\u666F

- \u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002

- \u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002

- \u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002

\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002

### 4.2.5 \u6A21\u5F0F\u6269\u5C55

**\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408**

\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002

\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6

\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties

\`\`\`properties
american=com.itheima.pattern.factory.config_factory.AmericanCoffee
latte=com.itheima.pattern.factory.config_factory.LatteCoffee
\`\`\`

\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B

\`\`\`java
public class CoffeeFactory {

    private static Map<String,Coffee> map = new HashMap();

    static {
        Properties p = new Properties();
        InputStream is = CoffeeFactory.class.getClassLoader().getResourceAsStream("bean.properties");
        try {
            p.load(is);
            //\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61
            Set<Object> keys = p.keySet();
            for (Object key : keys) {
                //\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09
                String className = p.getProperty((String) key);
                //\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61
                Class clazz = Class.forName(className);
                Coffee obj = (Coffee) clazz.newInstance();
                map.put((String)key,obj);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Coffee createCoffee(String name) {

        return map.get(name);
    }
}
\`\`\`

\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002

### 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5

\`\`\`java
public class Demo {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("\u4EE4\u72D0\u51B2");
        list.add("\u98CE\u6E05\u626C");
        list.add("\u4EFB\u6211\u884C");

        //\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61
        Iterator<String> it = list.iterator();
        //\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386
        while(it.hasNext()) {
            String ele = it.next();
            System.out.println(ele);
        }
    }
}
\`\`\`

\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A

<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />

Collection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002

> \u53E6\uFF1A
>
> \u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B
>
> \u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B

## 4.3 \u539F\u578B\u6A21\u5F0F

### 4.3.1 \u6982\u8FF0

\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002

### 4.3.2 \u7ED3\u6784

\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002
- \u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002
- \u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002

\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u539F\u578B\u6A21\u5F0F.png)

### 4.3.3 \u5B9E\u73B0

\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002

> \u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002
>
> \u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002

Java \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 \`clone()\` \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

**Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A**

\`\`\`java
public class Realizetype implements Cloneable {

    public Realizetype() {
        System.out.println("\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01");
    }

    @Override
    protected Realizetype clone() throws CloneNotSupportedException {
        System.out.println("\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01");
        return (Realizetype) super.clone();
    }
}
\`\`\`

**PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A**

\`\`\`java
public class PrototypeTest {
    public static void main(String[] args) throws CloneNotSupportedException {
        Realizetype r1 = new Realizetype();
        Realizetype r2 = r1.clone();

        System.out.println("\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (r1 == r2));
    }
}
\`\`\`

### 4.3.4 \u6848\u4F8B

**\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6**

\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5956\u72B6\u7C7B
public class Citation implements Cloneable {
    private String name;

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return (this.name);
    }

    public void show() {
        System.out.println(name + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");
    }

    @Override
    public Citation clone() throws CloneNotSupportedException {
        return (Citation) super.clone();
    }
}

//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B
public class CitationTest {
    public static void main(String[] args) throws CloneNotSupportedException {
        Citation c1 = new Citation();
        c1.setName("\u5F20\u4E09");

        //\u590D\u5236\u5956\u72B6
        Citation c2 = c1.clone();
        //\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB
        c2.setName("\u674E\u56DB");

        c1.show();
        c2.show();
    }
}
\`\`\`

### 4.3.5 \u4F7F\u7528\u573A\u666F

- \u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002
- \u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002

### 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09

\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5956\u72B6\u7C7B
public class Citation implements Cloneable {
    private Student stu;

    public Student getStu() {
        return stu;
    }

    public void setStu(Student stu) {
        this.stu = stu;
    }

    void show() {
        System.out.println(stu.getName() + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");
    }

    @Override
    public Citation clone() throws CloneNotSupportedException {
        return (Citation) super.clone();
    }
}

//\u5B66\u751F\u7C7B
public class Student {
    private String name;
    private String address;

    public Student(String name, String address) {
        this.name = name;
        this.address = address;
    }

    public Student() {
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }
}

//\u6D4B\u8BD5\u7C7B
public class CitationTest {
    public static void main(String[] args) throws CloneNotSupportedException {

        Citation c1 = new Citation();
        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");
        c1.setStu(stu);

        //\u590D\u5236\u5956\u72B6
        Citation c2 = c1.clone();
        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61
        Student stu1 = c2.getStu();
        stu1.setName("\u674E\u56DB");

        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));

        c1.show();
        c2.show();
    }
}
\`\`\`

\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A

<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />

<div color="red">\u8BF4\u660E\uFF1A</div>

\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class CitationTest1 {
    public static void main(String[] args) throws Exception {
        Citation c1 = new Citation();
        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");
        c1.setStu(stu);

        //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));
        //\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D
        oos.writeObject(c1);
        oos.close();

        //\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));
        //\u8BFB\u53D6\u5BF9\u8C61
        Citation c2 = (Citation) ois.readObject();
        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61
        Student stu1 = c2.getStu();
        stu1.setName("\u674E\u56DB");

        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));

        c1.show();
        c2.show();
    }
}
\`\`\`

\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A

<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />

> \u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002

## 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F

### 4.4.1 \u6982\u8FF0

\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002

<img src="/img/image-20200413225341516.png" style="zoom:60%;" />

- \u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002
- \u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002
- \u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002

### 4.4.2 \u7ED3\u6784

\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002

- \u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002

- \u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002

- \u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />

### 4.4.3 \u5B9E\u4F8B

**\u521B\u5EFA\u5171\u4EAB\u5355\u8F66**

\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002

\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />

\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u81EA\u884C\u8F66\u7C7B
public class Bike {
    private String frame;
    private String seat;

    public String getFrame() {
        return frame;
    }

    public void setFrame(String frame) {
        this.frame = frame;
    }

    public String getSeat() {
        return seat;
    }

    public void setSeat(String seat) {
        this.seat = seat;
    }
}

// \u62BD\u8C61 builder \u7C7B
public abstract class Builder {

    protected Bike mBike = new Bike();

    public abstract void buildFrame();
    public abstract void buildSeat();
    public abstract Bike createBike();
}

//\u6469\u62DC\u5355\u8F66Builder\u7C7B
public class MobikeBuilder extends Builder {

    @Override
    public void buildFrame() {
        mBike.setFrame("\u94DD\u5408\u91D1\u8F66\u67B6");
    }

    @Override
    public void buildSeat() {
        mBike.setSeat("\u771F\u76AE\u8F66\u5EA7");
    }

    @Override
    public Bike createBike() {
        return mBike;
    }
}

//ofo\u5355\u8F66Builder\u7C7B
public class OfoBuilder extends Builder {

    @Override
    public void buildFrame() {
        mBike.setFrame("\u78B3\u7EA4\u7EF4\u8F66\u67B6");
    }

    @Override
    public void buildSeat() {
        mBike.setSeat("\u6A61\u80F6\u8F66\u5EA7");
    }

    @Override
    public Bike createBike() {
        return mBike;
    }
}

//\u6307\u6325\u8005\u7C7B
public class Director {
    private Builder mBuilder;

    public Director(Builder builder) {
        mBuilder = builder;
    }

    public Bike construct() {
        mBuilder.buildFrame();
        mBuilder.buildSeat();
        return mBuilder.createBike();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        showBike(new OfoBuilder());
        showBike(new MobikeBuilder());
    }
    private static void showBike(Builder builder) {
        Director director = new Director(builder);
        Bike bike = director.construct();
        System.out.println(bike.getFrame());
        System.out.println(bike.getSeat());
    }
}
\`\`\`

**\u6CE8\u610F\uFF1A**

\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408

\`\`\`java
// \u62BD\u8C61 builder \u7C7B
public abstract class Builder {

    protected Bike mBike = new Bike();

    public abstract void buildFrame();
    public abstract void buildSeat();
    public abstract Bike createBike();

    public Bike construct() {
        this.buildFrame();
        this.BuildSeat();
        return this.createBike();
    }
}
\`\`\`

**\u8BF4\u660E\uFF1A**

\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002

### 4.4.4 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002
- \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002
- \u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002
- \u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002

**\u7F3A\u70B9\uFF1A**

\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002

### 4.4.5 \u4F7F\u7528\u573A\u666F

\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002

- \u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002
- \u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002

### 4.4.6 \u6A21\u5F0F\u6269\u5C55

\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002

\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class Phone {
    private String cpu;
    private String screen;
    private String memory;
    private String mainboard;

    public Phone(String cpu, String screen, String memory, String mainboard) {
        this.cpu = cpu;
        this.screen = screen;
        this.memory = memory;
        this.mainboard = mainboard;
    }

    public String getCpu() {
        return cpu;
    }

    public void setCpu(String cpu) {
        this.cpu = cpu;
    }

    public String getScreen() {
        return screen;
    }

    public void setScreen(String screen) {
        this.screen = screen;
    }

    public String getMemory() {
        return memory;
    }

    public void setMemory(String memory) {
        this.memory = memory;
    }

    public String getMainboard() {
        return mainboard;
    }

    public void setMainboard(String mainboard) {
        this.mainboard = mainboard;
    }

    @Override
    public String toString() {
        return "Phone{" +
                "cpu='" + cpu + '\\'' +
                ", screen='" + screen + '\\'' +
                ", memory='" + memory + '\\'' +
                ", mainboard='" + mainboard + '\\'' +
                '}';
    }
}

public class Client {
    public static void main(String[] args) {
        //\u6784\u5EFAPhone\u5BF9\u8C61
        Phone phone = new Phone("intel","\u4E09\u661F\u5C4F\u5E55","\u91D1\u58EB\u987F","\u534E\u7855");
        System.out.println(phone);
    }
}
\`\`\`

\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002

\u91CD\u6784\u540E\u4EE3\u7801\uFF1A

\`\`\`java
public class Phone {

    private String cpu;
    private String screen;
    private String memory;
    private String mainboard;

    private Phone(Builder builder) {
        cpu = builder.cpu;
        screen = builder.screen;
        memory = builder.memory;
        mainboard = builder.mainboard;
    }

    public static final class Builder {
        private String cpu;
        private String screen;
        private String memory;
        private String mainboard;

        public Builder() {}

        public Builder cpu(String val) {
            cpu = val;
            return this;
        }
        public Builder screen(String val) {
            screen = val;
            return this;
        }
        public Builder memory(String val) {
            memory = val;
            return this;
        }
        public Builder mainboard(String val) {
            mainboard = val;
            return this;
        }
        public Phone build() {
            return new Phone(this);}
    }
    @Override
    public String toString() {
        return "Phone{" +
                "cpu='" + cpu + '\\'' +
                ", screen='" + screen + '\\'' +
                ", memory='" + memory + '\\'' +
                ", mainboard='" + mainboard + '\\'' +
                '}';
    }
}

public class Client {
    public static void main(String[] args) {
        Phone phone = new Phone.Builder()
                .cpu("intel")
                .mainboard("\u534E\u7855")
                .memory("\u91D1\u58EB\u987F")
                .screen("\u4E09\u661F")
                .build();
        System.out.println(phone);
    }
}
\`\`\`

\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002

## 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4

### 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F

\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002

\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002

### 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F

\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002

\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002

\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002

# 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F

\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002

\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002

\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A

- \u4EE3\u7406\u6A21\u5F0F
- \u9002\u914D\u5668\u6A21\u5F0F
- \u88C5\u9970\u8005\u6A21\u5F0F
- \u6865\u63A5\u6A21\u5F0F
- \u5916\u89C2\u6A21\u5F0F
- \u7EC4\u5408\u6A21\u5F0F
- \u4EAB\u5143\u6A21\u5F0F

## 5.1 \u4EE3\u7406\u6A21\u5F0F

### 5.1.1 \u6982\u8FF0

\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002

Java \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002

### 5.1.2 \u7ED3\u6784

\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002
- \u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002
- \u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002

### 5.1.3 \u9759\u6001\u4EE3\u7406

\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002

\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968

\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5356\u7968\u63A5\u53E3
public interface SellTickets {
    void sell();
}

//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3
public class TrainStation implements SellTickets {

    public void sell() {
        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");
    }
}

//\u4EE3\u552E\u70B9
public class ProxyPoint implements SellTickets {

    private TrainStation station = new TrainStation();

    public void sell() {
        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528");
        station.sell();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        ProxyPoint pp = new ProxyPoint();
        pp.sell();
    }
}
\`\`\`

\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002

### 5.1.4 JDK \u52A8\u6001\u4EE3\u7406

\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5356\u7968\u63A5\u53E3
public interface SellTickets {
    void sell();
}

//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3
public class TrainStation implements SellTickets {

    public void sell() {
        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");
    }
}

//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61
public class ProxyFactory {

    private TrainStation station = new TrainStation();

    public SellTickets getProxyObject() {
        //\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
        /*
            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF
                Class<?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3
                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F
         */
        SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),
                station.getClass().getInterfaces(),
                new InvocationHandler() {
                    /*
                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61
                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B
                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570
                     */
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {

                        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");
                        //\u6267\u884C\u771F\u5B9E\u5BF9\u8C61
                        Object result = method.invoke(station, args);
                        return result;
                    }
                });
        return sellTickets;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
        ProxyFactory factory = new ProxyFactory();

        SellTickets proxyObject = factory.getProxyObject();
        proxyObject.sell();
    }
}
\`\`\`

<div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>

- ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F

  ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A

  \`\`\`java
  package com.sun.proxy;

  import com.itheima.proxy.dynamic.jdk.SellTickets;
  import java.lang.reflect.InvocationHandler;
  import java.lang.reflect.Method;
  import java.lang.reflect.Proxy;
  import java.lang.reflect.UndeclaredThrowableException;

  public final class $Proxy0 extends Proxy implements SellTickets {
      private static Method m1;
      private static Method m2;
      private static Method m3;
      private static Method m0;

      public $Proxy0(InvocationHandler invocationHandler) {
          super(invocationHandler);
      }

      static {
          try {
              m1 = Class.forName("java.lang.Object").getMethod("equals", Class.forName("java.lang.Object"));
              m2 = Class.forName("java.lang.Object").getMethod("toString", new Class[0]);
              m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);
              m0 = Class.forName("java.lang.Object").getMethod("hashCode", new Class[0]);
              return;
          }
          catch (NoSuchMethodException noSuchMethodException) {
              throw new NoSuchMethodError(noSuchMethodException.getMessage());
          }
          catch (ClassNotFoundException classNotFoundException) {
              throw new NoClassDefFoundError(classNotFoundException.getMessage());
          }
      }

      public final boolean equals(Object object) {
          try {
              return (Boolean)this.h.invoke(this, m1, new Object[]{object});
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }

      public final String toString() {
          try {
              return (String)this.h.invoke(this, m2, null);
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }

      public final int hashCode() {
          try {
              return (Integer)this.h.invoke(this, m0, null);
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }

      public final void sell() {
          try {
              this.h.invoke(this, m3, null);
              return;
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }
  }
  \`\`\`

  \u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A

  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002
  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002

- \u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F

  \u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A

  \`\`\`java
  //\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B
  public final class $Proxy0 extends Proxy implements SellTickets {
      private static Method m3;

      public $Proxy0(InvocationHandler invocationHandler) {
          super(invocationHandler);
      }

      static {
          m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);
      }

      public final void sell() {
          this.h.invoke(this, m3, null);
      }
  }

  //Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B
  public class Proxy implements java.io.Serializable {
  	protected InvocationHandler h;

  	protected Proxy(InvocationHandler h) {
          this.h = h;
      }
  }

  //\u4EE3\u7406\u5DE5\u5382\u7C7B
  public class ProxyFactory {

      private TrainStation station = new TrainStation();

      public SellTickets getProxyObject() {
          SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),
                  station.getClass().getInterfaces(),
                  new InvocationHandler() {

                      public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {

                          System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");
                          Object result = method.invoke(station, args);
                          return result;
                      }
                  });
          return sellTickets;
      }
  }


  //\u6D4B\u8BD5\u8BBF\u95EE\u7C7B
  public class Client {
      public static void main(String[] args) {
          //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
          ProxyFactory factory = new ProxyFactory();
          SellTickets proxyObject = factory.getProxyObject();
          proxyObject.sell();
      }
  }
  \`\`\`

\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A

    1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5
    2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5
    3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5
    4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5

### 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406

\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002

\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002

CGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002

CGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A

\`\`\`xml
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
</dependency>
\`\`\`

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u706B\u8F66\u7AD9
public class TrainStation {

    public void sell() {
        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");
    }
}

//\u4EE3\u7406\u5DE5\u5382
public class ProxyFactory implements MethodInterceptor {

    private TrainStation target = new TrainStation();

    public TrainStation getProxyObject() {
        //\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570
        Enhancer enhancer =new Enhancer();
        //\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61
        enhancer.setSuperclass(target.getClass());
        //\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570
        enhancer.setCallback(this);
        //\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61
        TrainStation obj = (TrainStation) enhancer.create();
        return obj;
    }

    /*
        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
            o \uFF1A \u4EE3\u7406\u5BF9\u8C61
            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B
            args \uFF1A \u5B9E\u9645\u53C2\u6570
            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B
     */
    public TrainStation intercept(Object o, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {
        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");
        TrainStation result = (TrainStation) methodProxy.invokeSuper(o, args);
        return result;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61
        ProxyFactory factory = new ProxyFactory();
        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
        TrainStation proxyObject = factory.getProxyObject();

        proxyObject.sell();
    }
}
\`\`\`

### 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4

- jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406

  \u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002

  \u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002

- \u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406

  \u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002

  \u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898

### 5.1.7 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B
- \u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B
- \u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B

**\u7F3A\u70B9\uFF1A**

- \u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B

### 5.1.8 \u4F7F\u7528\u573A\u666F

- \u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406

  \u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002

- \u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406

  \u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002

- \u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406

  \u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002

## 5.2 \u9002\u914D\u5668\u6A21\u5F0F

### 5.2.1 \u6982\u8FF0

\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002

![](\\img\\\u8F6C\u63A5\u5934.png)

**\u5B9A\u4E49\uFF1A**

\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002

\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002

### 5.2.2 \u7ED3\u6784

\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002
- \u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002
- \u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002

### 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F

\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002

\u3010\u4F8B\u3011\u8BFB\u5361\u5668

\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//SD\u5361\u7684\u63A5\u53E3
public interface SDCard {
    //\u8BFB\u53D6SD\u5361\u65B9\u6CD5
    String readSD();
    //\u5199\u5165SD\u5361\u529F\u80FD
    void writeSD(String msg);
}

//SD\u5361\u5B9E\u73B0\u7C7B
public class SDCardImpl implements SDCard {
    public String readSD() {
        String msg = "sd card read a msg :hello word SD";
        return msg;
    }

    public void writeSD(String msg) {
        System.out.println("sd card write msg : " + msg);
    }
}

//\u7535\u8111\u7C7B
public class Computer {

    public String readSD(SDCard sdCard) {
        if(sdCard == null) {
            throw new NullPointerException("sd card null");
        }
        return sdCard.readSD();
    }
}

//TF\u5361\u63A5\u53E3
public interface TFCard {
    //\u8BFB\u53D6TF\u5361\u65B9\u6CD5
    String readTF();
    //\u5199\u5165TF\u5361\u529F\u80FD
    void writeTF(String msg);
}

//TF\u5361\u5B9E\u73B0\u7C7B
public class TFCardImpl implements TFCard {

    public String readTF() {
        String msg ="tf card read msg : hello word tf card";
        return msg;
    }

    public void writeTF(String msg) {
        System.out.println("tf card write a msg : " + msg);
    }
}

//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09
public class SDAdapterTF extends TFCardImpl implements SDCard {

    public String readSD() {
        System.out.println("adapter read tf card ");
        return readTF();
    }

    public void writeSD(String msg) {
        System.out.println("adapter write tf card");
        writeTF(msg);
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Computer computer = new Computer();
        SDCard sdCard = new SDCardImpl();
        System.out.println(computer.readSD(sdCard));

        System.out.println("------------");

        SDAdapterTF adapter = new SDAdapterTF();
        System.out.println(computer.readSD(adapter));
    }
}
\`\`\`

\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002

### 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F

\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002

\u3010\u4F8B\u3011\u8BFB\u5361\u5668

\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002

\`\`\`java
//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09
public class SDAdapterTF  implements SDCard {

    private TFCard tfCard;

    public SDAdapterTF(TFCard tfCard) {
        this.tfCard = tfCard;
    }

    public String readSD() {
        System.out.println("adapter read tf card ");
        return tfCard.readTF();
    }

    public void writeSD(String msg) {
        System.out.println("adapter write tf card");
        tfCard.writeTF(msg);
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Computer computer = new Computer();
        SDCard sdCard = new SDCardImpl();
        System.out.println(computer.readSD(sdCard));

        System.out.println("------------");

        TFCard tfCard = new TFCardImpl();
        SDAdapterTF adapter = new SDAdapterTF(tfCard);
        System.out.println(computer.readSD(adapter));
    }
}
\`\`\`

> \u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002

### 5.2.5 \u5E94\u7528\u573A\u666F

- \u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002
- \u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002

### 5.2.6 JDK \u6E90\u7801\u89E3\u6790

Reader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002

InputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A

\`\`\`java
public int read() throws IOException {
    return sd.read();
}

public int read(char cbuf[], int offset, int length) throws IOException {
    return sd.read(cbuf, offset, length);
}
\`\`\`

\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png)

\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A

- InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002
- StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002

<div color="red">\u7ED3\u8BBA\uFF1A</div>

\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002

## 5.3 \u88C5\u9970\u8005\u6A21\u5F0F

### 5.3.1 \u6982\u8FF0

\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002

\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002

<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />

\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A

- \u6269\u5C55\u6027\u4E0D\u597D

  \u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002

- \u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B

**\u5B9A\u4E49\uFF1A**

\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002

### 5.3.2 \u7ED3\u6784

\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A

- \u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002
- \u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002
- \u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002
- \u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002

### 5.3.3 \u6848\u4F8B

\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5FEB\u9910\u63A5\u53E3
public abstract class FastFood {
    private float price;
    private String desc;

    public FastFood() {
    }

    public FastFood(float price, String desc) {
        this.price = price;
        this.desc = desc;
    }

    public void setPrice(float price) {
        this.price = price;
    }

    public float getPrice() {
        return price;
    }

    public String getDesc() {
        return desc;
    }

    public void setDesc(String desc) {
        this.desc = desc;
    }

    public abstract float cost();  //\u83B7\u53D6\u4EF7\u683C
}

//\u7092\u996D
public class FriedRice extends FastFood {

    public FriedRice() {
        super(10, "\u7092\u996D");
    }

    public float cost() {
        return getPrice();
    }
}

//\u7092\u9762
public class FriedNoodles extends FastFood {

    public FriedNoodles() {
        super(12, "\u7092\u9762");
    }

    public float cost() {
        return getPrice();
    }
}

//\u914D\u6599\u7C7B
public abstract class Garnish extends FastFood {

    private FastFood fastFood;

    public FastFood getFastFood() {
        return fastFood;
    }

    public void setFastFood(FastFood fastFood) {
        this.fastFood = fastFood;
    }

    public Garnish(FastFood fastFood, float price, String desc) {
        super(price,desc);
        this.fastFood = fastFood;
    }
}

//\u9E21\u86CB\u914D\u6599
public class Egg extends Garnish {

    public Egg(FastFood fastFood) {
        super(fastFood,1,"\u9E21\u86CB");
    }

    public float cost() {
        return getPrice() + getFastFood().getPrice();
    }

    @Override
    public String getDesc() {
        return super.getDesc() + getFastFood().getDesc();
    }
}

//\u57F9\u6839\u914D\u6599
public class Bacon extends Garnish {

    public Bacon(FastFood fastFood) {

        super(fastFood,2,"\u57F9\u6839");
    }

    @Override
    public float cost() {
        return getPrice() + getFastFood().getPrice();
    }

    @Override
    public String getDesc() {
        return super.getDesc() + getFastFood().getDesc();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u70B9\u4E00\u4EFD\u7092\u996D
        FastFood food = new FriedRice();
        //\u82B1\u8D39\u7684\u4EF7\u683C
        System.out.println(food.getDesc() + " " + food.cost() + "\u5143");

        System.out.println("========");
        //\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D
        FastFood food1 = new FriedRice();

        food1 = new Egg(food1);
        //\u82B1\u8D39\u7684\u4EF7\u683C
        System.out.println(food1.getDesc() + " " + food1.cost() + "\u5143");

        System.out.println("========");
        //\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762
        FastFood food2 = new FriedNoodles();
        food2 = new Bacon(food2);
        //\u82B1\u8D39\u7684\u4EF7\u683C
        System.out.println(food2.getDesc() + " " + food2.cost() + "\u5143");
    }
}
\`\`\`

**\u597D\u5904\uFF1A**

- \u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002

- \u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002

### 5.3.4 \u4F7F\u7528\u573A\u666F

- \u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002

  \u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A

  - \u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B
  - \u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09

- \u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002

- \u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002

### 5.3.5 JDK \u6E90\u7801\u89E3\u6790

IO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002

\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter

\`\`\`java
public class Demo {
    public static void main(String[] args) throws Exception{
        //\u521B\u5EFABufferedWriter\u5BF9\u8C61
        //\u521B\u5EFAFileWriter\u5BF9\u8C61
        FileWriter fw = new FileWriter("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt");
        BufferedWriter bw = new BufferedWriter(fw);

        //\u5199\u6570\u636E
        bw.write("hello Buffered");

        bw.close();
    }
}
\`\`\`

\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A

<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />

> <div color="red">\u5C0F\u7ED3\uFF1A</div>
>
> \u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002

### 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B

\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A

- \u76F8\u540C\u70B9\uFF1A
  - \u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3
  - \u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61
  - \u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5
- \u4E0D\u540C\u70B9\uFF1A
  - \u76EE\u7684\u4E0D\u540C
    \u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61
    \u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61
  - \u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C
    \u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012
    \u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61

## 5.4 \u6865\u63A5\u6A21\u5F0F

### 5.4.1 \u6982\u8FF0

\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A

![](\\img\\image-20200207194617620.png)

\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002

\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002

**\u5B9A\u4E49\uFF1A**

\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002

### 5.4.2 \u7ED3\u6784

\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002
- \u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002
- \u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002
- \u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002

### 5.4.3 \u6848\u4F8B

\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668

\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u89C6\u9891\u6587\u4EF6
public interface VideoFile {
    void decode(String fileName);
}

//avi\u6587\u4EF6
public class AVIFile implements VideoFile {
    public void decode(String fileName) {
        System.out.println("avi\u89C6\u9891\u6587\u4EF6\uFF1A"+ fileName);
    }
}

//rmvb\u6587\u4EF6
public class REVBBFile implements VideoFile {

    public void decode(String fileName) {
        System.out.println("rmvb\u6587\u4EF6\uFF1A" + fileName);
    }
}

//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C
public abstract class OperatingSystemVersion {

    protected VideoFile videoFile;

    public OperatingSystemVersion(VideoFile videoFile) {
        this.videoFile = videoFile;
    }

    public abstract void play(String fileName);
}

//Windows\u7248\u672C
public class Windows extends OperatingSystem {

    public Windows(VideoFile videoFile) {
        super(videoFile);
    }

    public void play(String fileName) {
        videoFile.decode(fileName);
    }
}

//mac\u7248\u672C
public class Mac extends OperatingSystemVersion {

    public Mac(VideoFile videoFile) {
        super(videoFile);
    }

    public void play(String fileName) {
		videoFile.decode(fileName);
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        OperatingSystem os = new Windows(new AVIFile());
        os.play("\u6218\u72FC3");
    }
}
\`\`\`

**\u597D\u5904\uFF1A**

- \u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002

  \u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002

- \u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E

### 5.4.4 \u4F7F\u7528\u573A\u666F

- \u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002
- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002
- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002

## 5.5 \u5916\u89C2\u6A21\u5F0F

### 5.5.1 \u6982\u8FF0

\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002

**\u5B9A\u4E49\uFF1A**

\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002

\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528

![](\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg)

### 5.5.2 \u7ED3\u6784

\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002
- \u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002

### 5.5.3 \u6848\u4F8B

\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236

\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u706F\u7C7B
public class Light {
    public void on() {
        System.out.println("\u6253\u5F00\u4E86\u706F....");
    }

    public void off() {
        System.out.println("\u5173\u95ED\u4E86\u706F....");
    }
}

//\u7535\u89C6\u7C7B
public class TV {
    public void on() {
        System.out.println("\u6253\u5F00\u4E86\u7535\u89C6....");
    }

    public void off() {
        System.out.println("\u5173\u95ED\u4E86\u7535\u89C6....");
    }
}

//\u63A7\u5236\u7C7B
public class AirCondition {
    public void on() {
        System.out.println("\u6253\u5F00\u4E86\u7A7A\u8C03....");
    }

    public void off() {
        System.out.println("\u5173\u95ED\u4E86\u7A7A\u8C03....");
    }
}

//\u667A\u80FD\u97F3\u7BB1
public class SmartAppliancesFacade {

    private Light light;
    private TV tv;
    private AirCondition airCondition;

    public SmartAppliancesFacade() {
        light = new Light();
        tv = new TV();
        airCondition = new AirCondition();
    }

    public void say(String message) {
        if(message.contains("\u6253\u5F00")) {
            on();
        } else if(message.contains("\u5173\u95ED")) {
            off();
        } else {
            System.out.println("\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01");
        }
    }

    //\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668
    private void on() {
        System.out.println("\u8D77\u5E8A\u4E86");
        light.on();
        tv.on();
        airCondition.on();
    }

    //\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668
    private void off() {
        System.out.println("\u7761\u89C9\u4E86");
        light.off();
        tv.off();
        airCondition.off();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61
        SmartAppliancesFacade facade = new SmartAppliancesFacade();
        //\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92
        facade.say("\u6253\u5F00\u5BB6\u7535");
        facade.say("\u5173\u95ED\u5BB6\u7535");
    }
}
\`\`\`

**\u597D\u5904\uFF1A**

- \u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002
- \u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002

**\u7F3A\u70B9\uFF1A**

- \u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6

### 5.5.4 \u4F7F\u7528\u573A\u666F

- \u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002
- \u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002
- \u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002

### 5.5.5 \u6E90\u7801\u89E3\u6790

\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002

<img src="/img/image-20200207234545691.png" style="zoom:60%;" />

RequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A

<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />

**\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F**

\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002

## 5.6 \u7EC4\u5408\u6A21\u5F0F

### 5.6.1 \u6982\u8FF0

<img src="/img/image-20200208180417291.png" style="zoom:60%;" />

\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002

**\u5B9A\u4E49\uFF1A**

\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002

### 5.6.2 \u7ED3\u6784

\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A

- \u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002
- \u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002
- \u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002

### 5.6.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355

\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002

<img src="/img/image-20200208182322313.png" style="zoom:80%;" />

\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A

<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />

**\u4EE3\u7801\u5B9E\u73B0\uFF1A**

\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002

\`\`\`java
//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B
public abstract class MenuComponent {

    protected String name;
    protected int level;

    //\u6DFB\u52A0\u83DC\u5355
    public void add(MenuComponent menuComponent){
        throw new UnsupportedOperationException();
    }

    //\u79FB\u9664\u83DC\u5355
    public void remove(MenuComponent menuComponent){
        throw new UnsupportedOperationException();
    }

    //\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355
    public MenuComponent getChild(int i){
        throw new UnsupportedOperationException();
    }

    //\u83B7\u53D6\u83DC\u5355\u540D\u79F0
    public String getName(){
        return name;
    }

    public void print(){
        throw new UnsupportedOperationException();
    }
}
\`\`\`

\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002

\`\`\`java
public class Menu extends MenuComponent {

    private List<MenuComponent> menuComponentList;

    public Menu(String name,int level){
        this.level = level;
        this.name = name;
        menuComponentList = new ArrayList<MenuComponent>();
    }

    @Override
    public void add(MenuComponent menuComponent) {
        menuComponentList.add(menuComponent);
    }

    @Override
    public void remove(MenuComponent menuComponent) {
        menuComponentList.remove(menuComponent);
    }

    @Override
    public MenuComponent getChild(int i) {
        return menuComponentList.get(i);
    }

    @Override
    public void print() {

        for (int i = 1; i < level; i++) {
            System.out.print("--");
        }
        System.out.println(name);
        for (MenuComponent menuComponent : menuComponentList) {
            menuComponent.print();
        }
    }
}
\`\`\`

Menu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002

\`\`\`java
public class MenuItem extends MenuComponent {

    public MenuItem(String name,int level) {
        this.name = name;
        this.level = level;
    }

    @Override
    public void print() {
        for (int i = 1; i < level; i++) {
            System.out.print("--");
        }
        System.out.println(name);
    }
}
\`\`\`

MenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002

### 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B

\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002

- \u900F\u660E\u7EC4\u5408\u6A21\u5F0F

  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D \`MenuComponent\` \u58F0\u660E\u4E86 \`add\`\u3001\`remove\` \u3001\`getChild\` \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002

  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09

- \u5B89\u5168\u7EC4\u5408\u6A21\u5F0F

  \u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 \`Menu\` \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002

  <img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />

### 5.6.5 \u4F18\u70B9

- \u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002
- \u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002
- \u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002
- \u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002

### 5.6.6 \u4F7F\u7528\u573A\u666F

\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002

## 5.7 \u4EAB\u5143\u6A21\u5F0F

### 5.7.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002

### 5.7.2 \u7ED3\u6784

\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A

1. \u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002
2. \u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002

\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002
- \u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002
- \u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002
- \u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002

### 5.7.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757

\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002

<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />

**\u5148\u6765\u770B\u7C7B\u56FE\uFF1A**

<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />

**\u4EE3\u7801\u5982\u4E0B\uFF1A**

\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002

\`\`\`java
public abstract class AbstractBox {
    public abstract String getShape();

    public void display(String color) {
        System.out.println("\u65B9\u5757\u5F62\u72B6\uFF1A" + this.getShape() + " \u989C\u8272\uFF1A" + color);
    }
}
\`\`\`

\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002

\`\`\`java
public class IBox extends AbstractBox {

    @Override
    public String getShape() {
        return "I";
    }
}

public class LBox extends AbstractBox {

    @Override
    public String getShape() {
        return "L";
    }
}

public class OBox extends AbstractBox {

    @Override
    public String getShape() {
        return "O";
    }
}
\`\`\`

\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002

\`\`\`java
public class BoxFactory {

    private static HashMap<String, AbstractBox> map;

    private BoxFactory() {
        map = new HashMap<String, AbstractBox>();
        AbstractBox iBox = new IBox();
        AbstractBox lBox = new LBox();
        AbstractBox oBox = new OBox();
        map.put("I", iBox);
        map.put("L", lBox);
        map.put("O", oBox);
    }

    public static final BoxFactory getInstance() {
        return SingletonHolder.INSTANCE;
    }

    private static class SingletonHolder {
        private static final BoxFactory INSTANCE = new BoxFactory();
    }

    public AbstractBox getBox(String key) {
        return map.get(key);
    }
}
\`\`\`

### 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F

**1\uFF0C\u4F18\u70B9**

- \u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD
- \u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001

**2\uFF0C\u7F3A\u70B9\uFF1A**

\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742

**3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A**

- \u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002
- \u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002
- \u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002

### 5.7.6 JDK \u6E90\u7801\u89E3\u6790

Integer \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A

\`\`\`java
public class Demo {
    public static void main(String[] args) {
        Integer i1 = 127;
        Integer i2 = 127;

        System.out.println("i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i1 == i2));

        Integer i3 = 128;
        Integer i4 = 128;

        System.out.println("i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i3 == i4));
    }
}
\`\`\`

\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A

<img src="/img/image-20200208212930857.png" style="zoom:80%;" />

\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class Demo {
    public static void main(String[] args) {
        Integer i1 = Integer.valueOf((int)127);
        Integer i2 Integer.valueOf((int)127);
        System.out.println((String)new StringBuilder().append((String)"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i1 == i2)).toString());
        Integer i3 = Integer.valueOf((int)128);
        Integer i4 = Integer.valueOf((int)128);
        System.out.println((String)new StringBuilder().append((String)"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i3 == i4)).toString());
    }
}
\`\`\`

\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F \`valueOf()\` \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF

\`\`\`java
public final class Integer extends Number implements Comparable<Integer> {

	public static Integer valueOf(int i) {
        if (i >= IntegerCache.low && i <= IntegerCache.high)
            return IntegerCache.cache[i + (-IntegerCache.low)];
        return new Integer(i);
    }

    private static class IntegerCache {
        static final int low = -128;
        static final int high;
        static final Integer cache[];

        static {
            int h = 127;
            String integerCacheHighPropValue =
                sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");
            if (integerCacheHighPropValue != null) {
                try {
                    int i = parseInt(integerCacheHighPropValue);
                    i = Math.max(i, 127);
                    // Maximum array size is Integer.MAX_VALUE
                    h = Math.min(i, Integer.MAX_VALUE - (-low) -1);
                } catch( NumberFormatException nfe) {
                }
            }
            high = h;
            cache = new Integer[(high - low) + 1];
            int j = low;
            for(int k = 0; k < cache.length; k++)
                cache[k] = new Integer(j++);
            // range [-128, 127] must be interned (JLS7 5.1.7)
            assert IntegerCache.high >= 127;
        }

        private IntegerCache() {}
    }
}
\`\`\`

\u53EF\u4EE5\u770B\u5230 \`Integer\` \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 \`-128 ~ 127\` \u4E4B\u95F4\u6570\u7684 \`Integer\` \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 \`valueOf\` \u65F6\u5982\u679C\u53C2\u6570\u5728 \`-128 ~ 127\` \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 \`Integer\` \u5BF9\u8C61\u3002

# 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F

\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002

\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002

\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A

- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F
- \u7B56\u7565\u6A21\u5F0F
- \u547D\u4EE4\u6A21\u5F0F
- \u804C\u8D23\u94FE\u6A21\u5F0F
- \u72B6\u6001\u6A21\u5F0F
- \u89C2\u5BDF\u8005\u6A21\u5F0F
- \u4E2D\u4ECB\u8005\u6A21\u5F0F
- \u8FED\u4EE3\u5668\u6A21\u5F0F
- \u8BBF\u95EE\u8005\u6A21\u5F0F
- \u5907\u5FD8\u5F55\u6A21\u5F0F
- \u89E3\u91CA\u5668\u6A21\u5F0F

\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002

## 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F

### 6.1.1 \u6982\u8FF0

\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002

\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002

**\u5B9A\u4E49\uFF1A**

\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002

### 6.1.2 \u7ED3\u6784

\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002

  - \u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002

  - \u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A

    - \u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002

    - \u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002

    - \u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002

      \u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002

- \u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002

### 6.1.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u7092\u83DC

\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public abstract class AbstractClass {

    public final void cookProcess() {
        //\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9
        this.pourOil();
        //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9
        this.heatOil();
        //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC
        this.pourVegetable();
        //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599
        this.pourSauce();
        //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092
        this.fry();
    }

    public void pourOil() {
        System.out.println("\u5012\u6CB9");
    }

    //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0
    public void heatOil() {
        System.out.println("\u70ED\u6CB9");
    }

    //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09
    public abstract void pourVegetable();

    //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837
    public abstract void pourSauce();


    //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0
    public void fry(){
        System.out.println("\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A");
    }
}

public class ConcreteClass_BaoCai extends AbstractClass {

    @Override
    public void pourVegetable() {
        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC");
    }

    @Override
    public void pourSauce() {
        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912");
    }
}

public class ConcreteClass_CaiXin extends AbstractClass {
    @Override
    public void pourVegetable() {
        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3");
    }

    @Override
    public void pourSauce() {
        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9");
    }
}

public class Client {
    public static void main(String[] args) {
        //\u7092\u624B\u6495\u5305\u83DC
        ConcreteClass_BaoCai baoCai = new ConcreteClass_BaoCai();
        baoCai.cookProcess();

        //\u7092\u849C\u84C9\u83DC\u5FC3
        ConcreteClass_CaiXin caiXin = new ConcreteClass_CaiXin();
        caiXin.cookProcess();
    }
}
\`\`\`

> \u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002

### 6.1.3 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027

  \u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002

- \u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236

  \u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002

**\u7F3A\u70B9\uFF1A**

- \u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002
- \u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002

### 6.1.4 \u9002\u7528\u573A\u666F

- \u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002
- \u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002

### 6.1.5 JDK \u6E90\u7801\u89E3\u6790

InputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A \`read()\` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A

\`\`\`java
public abstract class InputStream implements Closeable {
    //\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199
    public abstract int read() throws IOException;

    public int read(byte b[]) throws IOException {
        return read(b, 0, b.length);
    }

    public int read(byte b[], int off, int len) throws IOException {
        if (b == null) {
            throw new NullPointerException();
        } else if (off < 0 || len < 0 || len > b.length - off) {
            throw new IndexOutOfBoundsException();
        } else if (len == 0) {
            return 0;
        }

        int c = read(); //\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E
        if (c == -1) {
            return -1;
        }
        b[off] = (byte)c;

        int i = 1;
        try {
            for (; i < len ; i++) {
                c = read();
                if (c == -1) {
                    break;
                }
                b[off + i] = (byte)c;
            }
        } catch (IOException ee) {
        }
        return i;
    }
}
\`\`\`

\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 \`read()\` \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C \`read(byte b[])\` \u65B9\u6CD5\u8C03\u7528\u4E86 \`read(byte b[], int off, int len)\` \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002

\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 \`read()\` \u65B9\u6CD5\u3002

\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002

## 6.2 \u7B56\u7565\u6A21\u5F0F

### 6.2.1 \u6982\u8FF0

\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002

<img src="/img/image-20200210143039168.png" style="zoom:80%;" />

\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002

<img src="/img/image-20200210144457478.png" style="zoom:70%;" />

**\u5B9A\u4E49\uFF1A**

\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002

### 6.2.2 \u7ED3\u6784

\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A

- \u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002
- \u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002
- \u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002

### 6.2.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8

\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3

\`\`\`java
public interface Strategy {
    void show();
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8

\`\`\`java
//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A
public class StrategyA implements Strategy {

    public void show() {
        System.out.println("\u4E70\u4E00\u9001\u4E00");
    }
}

//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B
public class StrategyB implements Strategy {

    public void show() {
        System.out.println("\u6EE1200\u5143\u51CF50\u5143");
    }
}

//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C
public class StrategyC implements Strategy {

    public void show() {
        System.out.println("\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1");
    }
}
\`\`\`

\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458

\`\`\`java
public class SalesMan {
    //\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528
    private Strategy strategy;

    public SalesMan(Strategy strategy) {
        this.strategy = strategy;
    }

    //\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8
    public void salesManShow(){
        strategy.show();
    }
}
\`\`\`

### 6.2.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362

  \u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002

- \u6613\u4E8E\u6269\u5C55

  \u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C

- \u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002
- \u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002

### 6.2.5 \u4F7F\u7528\u573A\u666F

- \u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002
- \u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002
- \u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002
- \u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002
- \u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002

### 6.2.6 JDK \u6E90\u7801\u89E3\u6790

\`Comparator\` \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A \`sort()\` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A

\`\`\`java
public class Arrays{
    public static <T> void sort(T[] a, Comparator<? super T> c) {
        if (c == null) {
            sort(a);
        } else {
            if (LegacyMergeSort.userRequested)
                legacyMergeSort(a, c);
            else
                TimSort.sort(a, 0, a.length, c, null, 0, 0);
        }
    }
}
\`\`\`

Arrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002

\`\`\`java
public class demo {
    public static void main(String[] args) {

        Integer[] data = {12, 2, 3, 2, 4, 5, 1};
        // \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F
        Arrays.sort(data, new Comparator<Integer>() {
            public int compare(Integer o1, Integer o2) {
                return o2 - o1;
            }
        });
        System.out.println(Arrays.toString(data)); //[12, 5, 4, 3, 2, 2, 1]
    }
}
\`\`\`

\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 \`compare()\` \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 \`sort()\` \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
class TimSort<T> {
    static <T> void sort(T[] a, int lo, int hi, Comparator<? super T> c,
                         T[] work, int workBase, int workLen) {
        assert c != null && a != null && lo >= 0 && lo <= hi && hi <= a.length;

        int nRemaining  = hi - lo;
        if (nRemaining < 2)
            return;  // Arrays of size 0 and 1 are always sorted

        // If array is small, do a "mini-TimSort" with no merges
        if (nRemaining < MIN_MERGE) {
            int initRunLen = countRunAndMakeAscending(a, lo, hi, c);
            binarySort(a, lo, hi, lo + initRunLen, c);
            return;
        }
        ...
    }

    private static <T> int countRunAndMakeAscending(T[] a, int lo, int hi,Comparator<? super T> c) {
        assert lo < hi;
        int runHi = lo + 1;
        if (runHi == hi)
            return 1;

        // Find end of run, and reverse range if descending
        if (c.compare(a[runHi++], a[lo]) < 0) { // Descending
            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) < 0)
                runHi++;
            reverseRange(a, lo, runHi);
        } else {                              // Ascending
            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) >= 0)
                runHi++;
        }

        return runHi - lo;
    }
}
\`\`\`

\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 \`countRunAndMakeAscending()\` \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002

## 6.3 \u547D\u4EE4\u6A21\u5F0F

### 6.3.1 \u6982\u8FF0

\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002

<img src="/img/image-20200211130313251.png" style="zoom:60%;" />

**\u5B9A\u4E49\uFF1A**

\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002

### 6.3.2 \u7ED3\u6784

\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002
- \u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002
- \u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002
- \u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002

### 6.3.3 \u6848\u4F8B\u5B9E\u73B0

\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002

\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002

\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002

\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public interface Command {
    void execute();//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5
}

public class OrderCommand implements Command {

    //\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61
    private SeniorChef receiver;
    private Order order;

    public OrderCommand(SeniorChef receiver, Order order){
        this.receiver = receiver;
        this.order = order;
    }

    public void execute()  {
        System.out.println(order.getDiningTable() + "\u684C\u7684\u8BA2\u5355\uFF1A");
        Set<String> keys = order.getFoodDic().keySet();
        for (String key : keys) {
            receiver.makeFood(order.getFoodDic().get(key),key);
        }

        try {
            Thread.sleep(100);//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B
        } catch (InterruptedException e) {
            e.printStackTrace();
        }


        System.out.println(order.getDiningTable() + "\u684C\u7684\u996D\u5F04\u597D\u4E86");
    }
}

public class Order {
    // \u9910\u684C\u53F7\u7801
    private int diningTable;

    // \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570
    private Map<String, Integer> foodDic = new HashMap<String, Integer>();

    public int getDiningTable() {
        return diningTable;
    }

    public void setDiningTable(int diningTable) {
        this.diningTable = diningTable;
    }

    public Map<String, Integer> getFoodDic() {
        return foodDic;
    }

    public void setFoodDic(String name, int num) {
        foodDic.put(name,num);
    }
}

// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver
public class SeniorChef {

    public void makeFood(int num,String foodName) {
        System.out.println(num + "\u4EFD" + foodName);
    }
}

public class Waitor {

    private ArrayList<Command> commands;//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61

    public Waitor() {
        commands = new ArrayList();
    }

    public void setCommand(Command cmd){
        commands.add(cmd);
    }

    // \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C
    public void orderUp() {
        System.out.println("\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86.......");
        for (int i = 0; i < commands.size(); i++) {
            Command cmd = commands.get(i);
            if (cmd != null) {
                cmd.execute();
            }
        }
    }
}

public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA2\u4E2Aorder
        Order order1 = new Order();
        order1.setDiningTable(1);
        order1.getFoodDic().put("\u897F\u7EA2\u67FF\u9E21\u86CB\u9762",1);
        order1.getFoodDic().put("\u5C0F\u676F\u53EF\u4E50",2);

        Order order2 = new Order();
        order2.setDiningTable(3);
        order2.getFoodDic().put("\u5C16\u6912\u8089\u4E1D\u76D6\u996D",1);
        order2.getFoodDic().put("\u5C0F\u676F\u96EA\u78A7",1);

        //\u521B\u5EFA\u63A5\u6536\u8005
        SeniorChef receiver=new SeniorChef();
        //\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61
        OrderCommand cmd1 = new OrderCommand(receiver, order1);
        OrderCommand cmd2 = new OrderCommand(receiver, order2);
        //\u521B\u5EFA\u8C03\u7528\u8005 waitor
        Waitor invoker = new Waitor();
        invoker.setCommand(cmd1);
        invoker.setCommand(cmd2);

        //\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86
        invoker.orderUp();
    }
}
\`\`\`

### 6.3.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002
- \u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002
- \u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002
- \u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002
- \u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002

### 6.3.5 \u4F7F\u7528\u573A\u666F

- \u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002
- \u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002
- \u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002

### 6.3.6 JDK \u6E90\u7801\u89E3\u6790

Runable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5

\`\`\`java
//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)
public interface Runnable {
	public abstract void run();
}

//\u8C03\u7528\u8005
public class Thread implements Runnable {
    private Runnable target;

    public synchronized void start() {
        if (threadStatus != 0)
            throw new IllegalThreadStateException();

        group.add(this);

        boolean started = false;
        try {
            start0();
            started = true;
        } finally {
            try {
                if (!started) {
                    group.threadStartFailed(this);
                }
            } catch (Throwable ignore) {
            }
        }
    }

    private native void start0();
}
\`\`\`

\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002

\`\`\`java
/**
 * jdk Runnable \u547D\u4EE4\u6A21\u5F0F
 *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53
 */
public class TurnOffThread implements Runnable{
     private Receiver receiver;

     public TurnOffThread(Receiver receiver) {
     	this.receiver = receiver;
     }
     public void run() {
     	receiver.turnOFF();
     }
}
\`\`\`

\`\`\`java
/**
 * \u6D4B\u8BD5\u7C7B
 */
public class Demo {
     public static void main(String[] args) {
         Receiver receiver = new Receiver();
         TurnOffThread turnOffThread = new TurnOffThread(receiver);
         Thread thread = new Thread(turnOffThread);
         thread.start();
     }
}
\`\`\`

## 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F

### 6.4.1 \u6982\u8FF0

\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002

**\u5B9A\u4E49\uFF1A**

\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002

### 6.4.2 \u7ED3\u6784

\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:

- \u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002
- \u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002
- \u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002

### 6.4.3 \u6848\u4F8B\u5B9E\u73B0

\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u8BF7\u5047\u6761
public class LeaveRequest {
    private String name;//\u59D3\u540D
    private int num;//\u8BF7\u5047\u5929\u6570
    private String content;//\u8BF7\u5047\u5185\u5BB9

    public LeaveRequest(String name, int num, String content) {
        this.name = name;
        this.num = num;
        this.content = content;
    }

    public String getName() {
        return name;
    }

    public int getNum() {
        return num;
    }

    public String getContent() {
        return content;
    }
}

//\u5904\u7406\u8005\u62BD\u8C61\u7C7B
public abstract class Handler {
    protected final static int NUM_ONE = 1;
    protected final static int NUM_THREE = 3;
    protected final static int NUM_SEVEN = 7;

    //\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4
    private int numStart;
    private int numEnd;

    //\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC
    private Handler nextHandler;

    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876
    public Handler(int numStart) {
        this.numStart = numStart;
    }

    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4
    public Handler(int numStart, int numEnd) {
        this.numStart = numStart;
        this.numEnd = numEnd;
    }

    //\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC
    public void setNextHandler(Handler nextHandler){
        this.nextHandler = nextHandler;
    }

    //\u63D0\u4EA4\u8BF7\u5047\u6761
    public final void submit(LeaveRequest leave){
        if(0 == this.numStart){
            return;
        }

        //\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42
        if(leave.getNum() >= this.numStart){
            this.handleLeave(leave);

            //\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4
            if(null != this.nextHandler && leave.getNum() > numEnd){
                this.nextHandler.submit(leave);//\u7EE7\u7EED\u63D0\u4EA4
            } else {
                System.out.println("\u6D41\u7A0B\u7ED3\u675F");
            }
        }
    }

    //\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5
    protected abstract void handleLeave(LeaveRequest leave);
}

//\u5C0F\u7EC4\u957F
public class GroupLeader extends Handler {
    public GroupLeader() {
        //\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047
        super(Handler.NUM_ONE, Handler.NUM_THREE);
    }

    @Override
    protected void handleLeave(LeaveRequest leave) {
        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");
        System.out.println("\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002");
    }
}

//\u90E8\u95E8\u7ECF\u7406
public class Manager extends Handler {
    public Manager() {
        //\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047
        super(Handler.NUM_THREE, Handler.NUM_SEVEN);
    }

    @Override
    protected void handleLeave(LeaveRequest leave) {
        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");
        System.out.println("\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");
    }
}

//\u603B\u7ECF\u7406
public class GeneralManager extends Handler {
    public GeneralManager() {
        //\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047
        super(Handler.NUM_SEVEN);
    }

    @Override
    protected void handleLeave(LeaveRequest leave) {
        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");
        System.out.println("\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u8BF7\u5047\u6761\u6765\u4E00\u5F20
        LeaveRequest leave = new LeaveRequest("\u5C0F\u82B1",5,"\u8EAB\u4F53\u4E0D\u9002");

        //\u5404\u4F4D\u9886\u5BFC
        GroupLeader groupLeader = new GroupLeader();
        Manager manager = new Manager();
        GeneralManager generalManager = new GeneralManager();

        groupLeader.setNextHandler(manager);//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406
        manager.setNextHandler(generalManager);//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406
        //\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002

        //\u63D0\u4EA4\u7533\u8BF7
        groupLeader.submit(leave);
    }
}
\`\`\`

### 6.4.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6

  \u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002

- \u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027

  \u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002

- \u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027

  \u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002

- \u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5

  \u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002

- \u8D23\u4EFB\u5206\u62C5

  \u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002
- \u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002
- \u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002

### 6.4.5 \u6E90\u7801\u89E3\u6790

\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:

- \u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response

  \`\`\`java
  public interface Request{

  }

  public interface Response{

  }
  \`\`\`

- \u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter

  \`\`\`java
   public interface Filter {
   	public void doFilter(Request req,Response res,FilterChain c);
   }
  \`\`\`

- \u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668

  \`\`\`java
  public class FirstFilter implements Filter {
      @Override
      public void doFilter(Request request, Response response, FilterChain chain) {

          System.out.println("\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406");

          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response
          chain.doFilter(request, response);

          System.out.println("\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406");
      }
  }

  public class SecondFilter  implements Filter {
      @Override
      public void doFilter(Request request, Response response, FilterChain chain) {

          System.out.println("\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406");

          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response
          chain.doFilter(request, response);

          System.out.println("\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406");
      }
  }
  \`\`\`

- \u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain

  \`\`\`java
  public class FilterChain {

      private List<Filter> filters = new ArrayList<Filter>();

      private int index = 0;

      // \u94FE\u5F0F\u8C03\u7528
      public FilterChain addFilter(Filter filter) {
          this.filters.add(filter);
          return this;
      }

      public void doFilter(Request request, Response response) {
          if (index == filters.size()) {
              return;
          }
          Filter filter = filters.get(index);
          index++;
          filter.doFilter(request, response, this);
      }
  }
  \`\`\`

- \u6D4B\u8BD5\u7C7B

  \`\`\`java
  public class Client {
      public static void main(String[] args) {
          Request  req = null;
          Response res = null ;

          FilterChain filterChain = new FilterChain();
          filterChain.addFilter(new FirstFilter()).addFilter(new SecondFilter());
          filterChain.doFilter(req,res);
      }
  }
  \`\`\`

## 6.5 \u72B6\u6001\u6A21\u5F0F

### 6.5.1 \u6982\u8FF0

\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public interface ILift {
    //\u7535\u68AF\u76844\u4E2A\u72B6\u6001
    //\u5F00\u95E8\u72B6\u6001
    public final static int OPENING_STATE = 1;
    //\u5173\u95E8\u72B6\u6001
    public final static int CLOSING_STATE = 2;
    //\u8FD0\u884C\u72B6\u6001
    public final static int RUNNING_STATE = 3;
    //\u505C\u6B62\u72B6\u6001
    public final static int STOPPING_STATE = 4;

    //\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001
    public void setState(int state);

    //\u7535\u68AF\u7684\u52A8\u4F5C
    public void open();
    public void close();
    public void run();
    public void stop();
}

public class Lift implements ILift {
    private int state;

    @Override
    public void setState(int state) {
        this.state = state;
    }

    //\u6267\u884C\u5173\u95E8\u52A8\u4F5C
    @Override
    public void close() {
        switch (this.state) {
            case OPENING_STATE:
                System.out.println("\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002");//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B
                this.setState(CLOSING_STATE);//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86
                break;
            case CLOSING_STATE:
                //do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8
                break;
            case RUNNING_STATE:
                //do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8
                break;
            case STOPPING_STATE:
                //do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8
                break;
        }
    }

    //\u6267\u884C\u5F00\u95E8\u52A8\u4F5C
    @Override
    public void open() {
        switch (this.state) {
            case OPENING_STATE://\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86
                //do nothing
                break;
            case CLOSING_STATE://\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00:
                System.out.println("\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002");
                this.setState(OPENING_STATE);
                break;
            case RUNNING_STATE:
                //do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8
                break;
            case STOPPING_STATE:
                System.out.println("\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002");//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86
                this.setState(OPENING_STATE);
                break;
        }
    }

    //\u6267\u884C\u8FD0\u884C\u52A8\u4F5C
    @Override
    public void run() {
        switch (this.state) {
            case OPENING_STATE://\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70
                //do nothing
                break;
            case CLOSING_STATE://\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86
                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");
                this.setState(RUNNING_STATE);//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001
                break;
            case RUNNING_STATE:
                //do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86
                break;
            case STOPPING_STATE:
                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");
                this.setState(RUNNING_STATE);
                break;
        }
    }

    //\u6267\u884C\u505C\u6B62\u52A8\u4F5C
    @Override
    public void stop() {
        switch (this.state) {
            case OPENING_STATE: //\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)
                //do nothing
                break;
            case CLOSING_STATE://\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62
                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");
                this.setState(STOPPING_STATE);
                break;
            case RUNNING_STATE://\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86
                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");
                this.setState(STOPPING_STATE);
                break;
            case STOPPING_STATE:
                //do nothing
                break;
        }
    }
}

public class Client {
    public static void main(String[] args) {
        Lift lift = new Lift();
        lift.setState(ILift.STOPPING_STATE);//\u7535\u68AF\u662F\u505C\u6B62\u7684
        lift.open();//\u5F00\u95E8
        lift.close();//\u5173\u95E8
        lift.run();//\u8FD0\u884C
        lift.stop();//\u505C\u6B62
    }
}
\`\`\`

\u95EE\u9898\u5206\u6790\uFF1A

- \u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002
- \u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91

**\u5B9A\u4E49\uFF1A**

\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002

### 6.5.2 \u7ED3\u6784

\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002

- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002
- \u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002
- \u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002

### 6.5.3 \u6848\u4F8B\u5B9E\u73B0

\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u62BD\u8C61\u72B6\u6001\u7C7B
public abstract class LiftState {
    //\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316
    protected Context context;

    public void setContext(Context context) {
        this.context = context;
    }

    //\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C
    public abstract void open();

    //\u7535\u68AF\u5173\u95E8\u52A8\u4F5C
    public abstract void close();

    //\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C
    public abstract void run();

    //\u7535\u68AF\u505C\u6B62\u52A8\u4F5C
    public abstract void stop();
}

//\u5F00\u542F\u72B6\u6001
public class OpenningState extends LiftState {

    //\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD
    @Override
    public void open() {
        System.out.println("\u7535\u68AF\u95E8\u5F00\u542F...");
    }

    @Override
    public void close() {
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.closeingState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().close();
    }

    //\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A
    @Override
    public void run() {
        //do nothing
    }

    //\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86
    @Override
    public void stop() {
        //do nothing
    }
}

//\u8FD0\u884C\u72B6\u6001
public class RunningState extends LiftState {

    //\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684
    @Override
    public void open() {
        //do nothing
    }

    //\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86
    @Override
    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C
        //do nothing
    }

    //\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5
    @Override
    public void run() {
        System.out.println("\u7535\u68AF\u6B63\u5728\u8FD0\u884C...");
    }

    //\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86
    @Override
    public void stop() {
        super.context.setLiftState(Context.stoppingState);
        super.context.stop();
    }
}

//\u505C\u6B62\u72B6\u6001
public class StoppingState extends LiftState {

    //\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01
    @Override
    public void open() {
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.openningState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().open();
    }

    @Override
    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.closeingState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().close();
    }

    //\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88
    @Override
    public void run() {
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.runningState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().run();
    }

    //\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86
    @Override
    public void stop() {
        System.out.println("\u7535\u68AF\u505C\u6B62\u4E86...");
    }
}

//\u5173\u95ED\u72B6\u6001
public class ClosingState extends LiftState {

    @Override
    //\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C
    public void close() {
        System.out.println("\u7535\u68AF\u95E8\u5173\u95ED...");
    }

    //\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440
    @Override
    public void open() {
        super.context.setLiftState(Context.openningState);
        super.context.open();
    }


    //\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86
    @Override
    public void run() {
        super.context.setLiftState(Context.runningState);
        super.context.run();
    }

    //\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42
    @Override
    public void stop() {
        super.context.setLiftState(Context.stoppingState);
        super.context.stop();
    }
}

//\u73AF\u5883\u89D2\u8272
public class Context {
    //\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001
    public final static OpenningState openningState = new OpenningState();//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED
    public final static ClosingState closeingState = new ClosingState();//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8
    public final static RunningState runningState = new RunningState();//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62
    public final static StoppingState stoppingState = new StoppingState();//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C


    //\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001
    private LiftState liftState;

    public LiftState getLiftState() {
        return this.liftState;
    }

    public void setLiftState(LiftState liftState) {
        //\u5F53\u524D\u73AF\u5883\u6539\u53D8
        this.liftState = liftState;
        //\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D
        this.liftState.setContext(this);
    }

    public void open() {
        this.liftState.open();
    }

    public void close() {
        this.liftState.close();
    }

    public void run() {
        this.liftState.run();
    }

    public void stop() {
        this.liftState.stop();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Context context = new Context();
        context.setLiftState(new ClosingState());

        context.open();
        context.close();
        context.run();
        context.stop();
    }
}
\`\`\`

### 6.5.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002
- \u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002
- \u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002
- \u72B6\u6001\u6A21\u5F0F\u5BF9"\u5F00\u95ED\u539F\u5219"\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002

### 6.5.5 \u4F7F\u7528\u573A\u666F

- \u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002
- \u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002

## 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F

### 6.6.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002

### 6.6.2 \u7ED3\u6784

\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A

- Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002
- ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002
- Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002
- ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002

### 6.6.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7

\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5

\`\`\`java
public interface Observer {
    void update(String message);
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5

\`\`\`java
public class WeixinUser implements Observer {
    // \u5FAE\u4FE1\u7528\u6237\u540D
    private String name;

    public WeixinUser(String name) {
        this.name = name;
    }
    @Override
    public void update(String message) {
        System.out.println(name + "-" + message);
    }
}
\`\`\`

\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5

\`\`\`java
public interface Subject {
    //\u589E\u52A0\u8BA2\u9605\u8005
    public void attach(Observer observer);

    //\u5220\u9664\u8BA2\u9605\u8005
    public void detach(Observer observer);

    //\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F
    public void notify(String message);
}

\`\`\`

\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5

\`\`\`java
public class SubscriptionSubject implements Subject {
    //\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237
    private List<Observer> weixinUserlist = new ArrayList<Observer>();

    @Override
    public void attach(Observer observer) {
        weixinUserlist.add(observer);
    }

    @Override
    public void detach(Observer observer) {
        weixinUserlist.remove(observer);
    }

    @Override
    public void notify(String message) {
        for (Observer observer : weixinUserlist) {
            observer.update(message);
        }
    }
}
\`\`\`

\u5BA2\u6237\u7AEF\u7A0B\u5E8F

\`\`\`java
public class Client {
    public static void main(String[] args) {
        SubscriptionSubject mSubscriptionSubject=new SubscriptionSubject();
        //\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237
        WeixinUser user1=new WeixinUser("\u5B59\u609F\u7A7A");
        WeixinUser user2=new WeixinUser("\u732A\u609F\u80FD");
        WeixinUser user3=new WeixinUser("\u6C99\u609F\u51C0");
        //\u8BA2\u9605\u516C\u4F17\u53F7
        mSubscriptionSubject.attach(user1);
        mSubscriptionSubject.attach(user2);
        mSubscriptionSubject.attach(user3);
        //\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237
        mSubscriptionSubject.notify("\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86");
    }
}

\`\`\`

### 6.6.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002
- \u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6
- \u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83

### 6.6.5 \u4F7F\u7528\u573A\u666F

- \u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002
- \u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002

### 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0

\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002

**1\uFF0CObservable \u7C7B**

Observable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002

- void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002

- void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002

- void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002

**2\uFF0CObserver \u63A5\u53E3**

Observer \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002

\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077

\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B

\`\`\`java
public class Thief extends Observable {

    private String name;

    public Thief(String name) {
        this.name = name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void steal() {
        System.out.println("\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01");
        super.setChanged(); //changed  = true
        super.notifyObservers();
    }
}

\`\`\`

\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3

\`\`\`java
public class Policemen implements Observer {

    private String name;

    public Policemen(String name) {
        this.name = name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    @Override
    public void update(Observable o, Object arg) {
        System.out.println("\u8B66\u5BDF\uFF1A" + ((Thief) o).getName() + "\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01");
    }
}
\`\`\`

\u5BA2\u6237\u7AEF\u4EE3\u7801

\`\`\`java
public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61
        Thief t = new Thief("\u9694\u58C1\u8001\u738B");
        //\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61
        Policemen p = new Policemen("\u5C0F\u674E");
        //\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077
        t.addObserver(p);
        //\u5C0F\u5077\u5077\u4E1C\u897F
        t.steal();
    }
}
\`\`\`

## 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F

### 6.7.1 \u6982\u8FF0

\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002

\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002

<img src="/img/image-20200214110924010.png" style="zoom:60%;" />

**\u5B9A\u4E49\uFF1A**

\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002

### 6.7.2 \u7ED3\u6784

\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002

- \u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002
- \u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002
- \u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002

### 6.7.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u79DF\u623F

\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u62BD\u8C61\u4E2D\u4ECB\u8005
public abstract class Mediator {
    //\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5
    public abstract void constact(String message,Person person);
}

//\u62BD\u8C61\u540C\u4E8B\u7C7B
public abstract class Person {
    protected String name;
    protected Mediator mediator;

    public Person(String name,Mediator mediator){
        this.name = name;
        this.mediator = mediator;
    }
}

//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005
public class HouseOwner extends Person {

    public HouseOwner(String name, Mediator mediator) {
        super(name, mediator);
    }

    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB
    public void constact(String message){
        mediator.constact(message, this);
    }

    //\u83B7\u53D6\u4FE1\u606F
    public void getMessage(String message){
        System.out.println("\u623F\u4E3B" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);
    }
}

//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA
public class Tenant extends Person {
    public Tenant(String name, Mediator mediator) {
        super(name, mediator);
    }

    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB
    public void constact(String message){
        mediator.constact(message, this);
    }

    //\u83B7\u53D6\u4FE1\u606F
    public void getMessage(String message){
        System.out.println("\u79DF\u623F\u8005" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);
    }
}

//\u4E2D\u4ECB\u673A\u6784
public class MediatorStructure extends Mediator {
    //\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F
    private HouseOwner houseOwner;
    private Tenant tenant;

    public HouseOwner getHouseOwner() {
        return houseOwner;
    }

    public void setHouseOwner(HouseOwner houseOwner) {
        this.houseOwner = houseOwner;
    }

    public Tenant getTenant() {
        return tenant;
    }

    public void setTenant(Tenant tenant) {
        this.tenant = tenant;
    }

    public void constact(String message, Person person) {
        if (person == houseOwner) {          //\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F
            tenant.getMessage(message);
        } else {       //\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F
            houseOwner.getMessage(message);
        }
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784
        MediatorStructure mediator = new MediatorStructure();

        //\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF
        HouseOwner houseOwner = new HouseOwner("\u5F20\u4E09", mediator);
        Tenant tenant = new Tenant("\u674E\u56DB", mediator);

        //\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005
        mediator.setHouseOwner(houseOwner);
        mediator.setTenant(tenant);

        tenant.constact("\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50");
        houseOwner.constact("\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F");
    }
}
\`\`\`

### 6.7.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u677E\u6563\u8026\u5408

  \u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002

- \u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92

  \u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002

- \u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054

  \u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002

### 6.7.5 \u4F7F\u7528\u573A\u666F

- \u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002
- \u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002

## 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F

### 6.8.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002

### 6.8.2 \u7ED3\u6784

\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002

- \u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002
- \u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002
- \u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002

### 6.8.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A

<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5

\`\`\`java
public interface StudentIterator {
    boolean hasNext();
    Student next();
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5

\`\`\`java
public class StudentIteratorImpl implements StudentIterator {
    private List<Student> list;
    private int position = 0;

    public StudentIteratorImpl(List<Student> list) {
        this.list = list;
    }

    @Override
    public boolean hasNext() {
        return position < list.size();
    }

    @Override
    public Student next() {
        Student currentStudent = list.get(position);
        position ++;
        return currentStudent;
    }
}
\`\`\`

\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5

\`\`\`java
public interface StudentAggregate {
    void addStudent(Student student);

    void removeStudent(Student student);

    StudentIterator getStudentIterator();
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5

\`\`\`java
public class StudentAggregateImpl implements StudentAggregate {

    private List<Student> list = new ArrayList<Student>();  // \u5B66\u751F\u5217\u8868

    @Override
    public void addStudent(Student student) {
        this.list.add(student);
    }

    @Override
    public void removeStudent(Student student) {
        this.list.remove(student);
    }

    @Override
    public StudentIterator getStudentIterator() {
        return new StudentIteratorImpl(list);
    }
}
\`\`\`

### 6.8.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002
- \u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002
- \u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002

### 6.8.5 \u4F7F\u7528\u573A\u666F

- \u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002
- \u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002
- \u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002

### 6.8.6 JDK \u6E90\u7801\u89E3\u6790

\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002

\`\`\`java
List<String> list = new ArrayList<>();
Iterator<String> iterator = list.iterator(); //list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61
while (iterator.hasNext()) {
    System.out.println(iterator.next());
}
\`\`\`

\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E

- List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B
- ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B
- Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668
- list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 \`Iterator\` \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61

\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0

\`\`\`java
public class ArrayList<E> extends AbstractList<E>
        implements List<E>, RandomAccess, Cloneable, java.io.Serializable {

    public Iterator<E> iterator() {
        return new Itr();
    }

    private class Itr implements Iterator<E> {
        int cursor;       // \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15
        int lastRet = -1; // \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15
        int expectedModCount = modCount;

        Itr() {}

        //\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20
        public boolean hasNext() {
            return cursor != size;
        }

        //\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20
        public E next() {
            checkForComodification();
            int i = cursor;
            if (i >= size)
                throw new NoSuchElementException();
            Object[] elementData = ArrayList.this.elementData;
            if (i >= elementData.length)
                throw new ConcurrentModificationException();
            cursor = i + 1;
            return (E) elementData[lastRet = i];
        }
        ...
}
\`\`\`

\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 \`iterator\` \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 \`Iterator\` \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 \`Iterator\` \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002

> \u6CE8\u610F\uFF1A
>
> \u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0\`java.util.Iterable\`\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A \`java.util.Iterator\` \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002

## 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F

### 6.9.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002

### 6.9.2 \u7ED3\u6784

\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:

- \u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\`\uFF08Element\uFF09\`\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002
- \u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002
- \u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08\`accept\`\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002
- \u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002
- \u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08\`Element\`\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002

### 6.9.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF

\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002

- \u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA
- \u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA
- \u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B
- \u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B
- \u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6

\u7C7B\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png)

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3

\`\`\`java
public interface Person {
    void feed(Cat cat);

    void feed(Dog dog);
}
\`\`\`

\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 \`Person\`\u63A5\u53E3

\`\`\`java
public class Owner implements Person {

    @Override
    public void feed(Cat cat) {
        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u732B");
    }

    @Override
    public void feed(Dog dog) {
        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u72D7");
    }
}

public class Someone implements Person {
    @Override
    public void feed(Cat cat) {
        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u732B");
    }

    @Override
    public void feed(Dog dog) {
        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7");
    }
}
\`\`\`

\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269

\`\`\`java
public interface Animal {
    void accept(Person person);
}
\`\`\`

\u5B9A\u4E49\u5B9E\u73B0\`Animal\`\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09

\`\`\`java
public class Dog implements Animal {

    @Override
    public void accept(Person person) {
        person.feed(this);
        System.out.println("\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01");
    }
}

public class Cat implements Animal {

    @Override
    public void accept(Person person) {
        person.feed(this);
        System.out.println("\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01");
    }
}
\`\`\`

\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6

\`\`\`java
public class Home {
    private List<Animal> nodeList = new ArrayList<Animal>();

    public void action(Person person) {
        for (Animal node : nodeList) {
            node.accept(person);
        }
    }

    //\u6DFB\u52A0\u64CD\u4F5C
    public void add(Animal animal) {
        nodeList.add(animal);
    }
}

\`\`\`

\u6D4B\u8BD5\u7C7B

\`\`\`java
public class Client {
    public static void main(String[] args) {
        Home home = new Home();
        home.add(new Dog());
        home.add(new Cat());

        Owner owner = new Owner();
        home.action(owner);

        Someone someone = new Someone();
        home.action(someone);
    }
}
\`\`\`

### 6.9.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u6269\u5C55\u6027\u597D

  \u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002

- \u590D\u7528\u6027\u597D

  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002

- \u5206\u79BB\u65E0\u5173\u884C\u4E3A

  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE

  \u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002

- \u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219

  \u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002

### 6.9.5 \u4F7F\u7528\u573A\u666F

- \u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002

- \u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002

### 6.9.6 \u6269\u5C55

\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002

**1\uFF0C\u5206\u6D3E\uFF1A**

\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 \`Map map = new HashMap()\` \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F \`Map\` \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F \`HashMap\` \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002

**\u9759\u6001\u5206\u6D3E(Static Dispatch)** \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002

**\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)** \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002

**2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A**

\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002

\`\`\`java
public class Animal {
    public void execute() {
        System.out.println("Animal");
    }
}

public class Dog extends Animal {
    @Override
    public void execute() {
        System.out.println("dog");
    }
}

public class Cat extends Animal {
     @Override
    public void execute() {
        System.out.println("cat");
    }
}

public class Client {
   	public static void main(String[] args) {
        Animal a = new Dog();
        a.execute();

        Animal a1 = new Cat();
        a1.execute();
    }
}
\`\`\`

\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002

Java \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002

**3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A**

\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002

\`\`\`java
public class Animal {
}

public class Dog extends Animal {
}

public class Cat extends Animal {
}

public class Execute {
    public void execute(Animal a) {
        System.out.println("Animal");
    }

    public void execute(Dog d) {
        System.out.println("dog");
    }

    public void execute(Cat c) {
        System.out.println("cat");
    }
}

public class Client {
    public static void main(String[] args) {
        Animal a = new Animal();
        Animal a1 = new Dog();
        Animal a2 = new Cat();

        Execute exe = new Execute();
        exe.execute(a);
        exe.execute(a1);
        exe.execute(a2);
    }
}
\`\`\`

\u8FD0\u884C\u7ED3\u679C\uFF1A

<img src="/img/image-20200214215446638.png" style="zoom:70%;" />

\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F

**\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002**

**4\uFF0C\u53CC\u5206\u6D3E\uFF1A**

\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002

\`\`\`java
public class Animal {
    public void accept(Execute exe) {
        exe.execute(this);
    }
}

public class Dog extends Animal {
    public void accept(Execute exe) {
        exe.execute(this);
    }
}

public class Cat extends Animal {
    public void accept(Execute exe) {
        exe.execute(this);
    }
}

public class Execute {
    public void execute(Animal a) {
        System.out.println("animal");
    }

    public void execute(Dog d) {
        System.out.println("dog");
    }

    public void execute(Cat c) {
        System.out.println("cat");
    }
}

public class Client {
    public static void main(String[] args) {
        Animal a = new Animal();
        Animal d = new Dog();
        Animal c = new Cat();

        Execute exe = new Execute();
        a.accept(exe);
        d.accept(exe);
        c.accept(exe);
    }
}
\`\`\`

\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F\`\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E\`\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002

\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002

\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A

<img src="/img/image-20200426233931693.png" style="zoom:67%;" />

**\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002**

## 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F

### 6.10.1 \u6982\u8FF0

\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002

**\u5B9A\u4E49\uFF1A**

\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002

### 6.10.2 \u7ED3\u6784

\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A

- \u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002
- \u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002
- \u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002

> \u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A
>
> - **\u7A84\u63A5\u53E3**\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002
> - **\u5BBD\u63A5\u53E3**\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002

### 6.10.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS

\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002

\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A

- \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F
- \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F

#### 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F

\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u6E38\u620F\u89D2\u8272\u7C7B
public class GameRole {
    private int vit; //\u751F\u547D\u529B
    private int atk; //\u653B\u51FB\u529B
    private int def; //\u9632\u5FA1\u529B

    //\u521D\u59CB\u5316\u72B6\u6001
    public void initState() {
        this.vit = 100;
        this.atk = 100;
        this.def = 100;
    }

    //\u6218\u6597
    public void fight() {
        this.vit = 0;
        this.atk = 0;
        this.def = 0;
    }

    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001
    public RoleStateMemento saveState() {
        return new RoleStateMemento(vit, atk, def);
    }

    //\u56DE\u590D\u89D2\u8272\u72B6\u6001
    public void recoverState(RoleStateMemento roleStateMemento) {
        this.vit = roleStateMemento.getVit();
        this.atk = roleStateMemento.getAtk();
        this.def = roleStateMemento.getDef();
    }

    public void stateDisplay() {
        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);
        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);
        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);
    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }
}

//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)
public class RoleStateMemento {
    private int vit;
    private int atk;
    private int def;

    public RoleStateMemento(int vit, int atk, int def) {
        this.vit = vit;
        this.atk = atk;
        this.def = def;
    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }
}

//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B
public class RoleStateCaretaker {
    private RoleStateMemento roleStateMemento;

    public RoleStateMemento getRoleStateMemento() {
        return roleStateMemento;
    }

    public void setRoleStateMemento(RoleStateMemento roleStateMemento) {
        this.roleStateMemento = roleStateMemento;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        System.out.println("------------\u5927\u6218Boss\u524D------------");
        //\u5927\u6218Boss\u524D
        GameRole gameRole = new GameRole();
        gameRole.initState();
        gameRole.stateDisplay();

        //\u4FDD\u5B58\u8FDB\u5EA6
        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();
        roleStateCaretaker.setRoleStateMemento(gameRole.saveState());

        System.out.println("------------\u5927\u6218Boss\u540E------------");
        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD
        gameRole.fight();
        gameRole.stateDisplay();
        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");
        //\u6062\u590D\u4E4B\u524D\u72B6\u6001
        gameRole.recoverState(roleStateCaretaker.getRoleStateMemento());
        gameRole.stateDisplay();

    }
}
\`\`\`

> \u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002

#### 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F

\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06**\u5907\u5FD8\u5F55\u7C7B**\u8BBE\u8BA1\u6210**\u53D1\u8D77\u4EBA\u7C7B**\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002

\u5C06 \`RoleStateMemento\` \u8BBE\u4E3A \`GameRole\` \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 \`RoleStateMemento\` \u5BF9\u8C61\u5C01\u88C5\u5728 \`GameRole\` \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 \`Memento\` \u7ED9 \`RoleStateCaretaker\` \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 \`GameRole\` \u7C7B\u770B\u5230\u7684\u662F \`RoleStateMemento\` \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C\`RoleStateCaretaker\` \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 \`Memento\` \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u7A84\u63A5\u53E3\`Memento\`\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5

\`\`\`java
public interface Memento {
}
\`\`\`

\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B \`GameRole\`\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B \`RoleStateMemento\`\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09

\`\`\`java
/\u6E38\u620F\u89D2\u8272\u7C7B
public class GameRole {
    private int vit; //\u751F\u547D\u529B
    private int atk; //\u653B\u51FB\u529B
    private int def; //\u9632\u5FA1\u529B

    //\u521D\u59CB\u5316\u72B6\u6001
    public void initState() {
        this.vit = 100;
        this.atk = 100;
        this.def = 100;
    }

    //\u6218\u6597
    public void fight() {
        this.vit = 0;
        this.atk = 0;
        this.def = 0;
    }

    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001
    public Memento saveState() {
        return new RoleStateMemento(vit, atk, def);
    }

    //\u56DE\u590D\u89D2\u8272\u72B6\u6001
    public void recoverState(Memento memento) {
        RoleStateMemento roleStateMemento = (RoleStateMemento) memento;
        this.vit = roleStateMemento.getVit();
        this.atk = roleStateMemento.getAtk();
        this.def = roleStateMemento.getDef();
    }

    public void stateDisplay() {
        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);
        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);
        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);

    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }

    private class RoleStateMemento implements Memento {
        private int vit;
        private int atk;
        private int def;

        public RoleStateMemento(int vit, int atk, int def) {
            this.vit = vit;
            this.atk = atk;
            this.def = def;
        }

        public int getVit() {
            return vit;
        }

        public void setVit(int vit) {
            this.vit = vit;
        }

        public int getAtk() {
            return atk;
        }

        public void setAtk(int atk) {
            this.atk = atk;
        }

        public int getDef() {
            return def;
        }

        public void setDef(int def) {
            this.def = def;
        }
    }
}
\`\`\`

\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B \`RoleStateCaretaker\` \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 \`Memento\` \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9

\`\`\`java
//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B
public class RoleStateCaretaker {
    private Memento memento;

    public Memento getMemento() {
        return memento;
    }

    public void setMemento(Memento memento) {
        this.memento = memento;
    }
}
\`\`\`

\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B

\`\`\`java
public class Client {
    public static void main(String[] args) {
        System.out.println("------------\u5927\u6218Boss\u524D------------");
        //\u5927\u6218Boss\u524D
        GameRole gameRole = new GameRole();
        gameRole.initState();
        gameRole.stateDisplay();

        //\u4FDD\u5B58\u8FDB\u5EA6
        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();
        roleStateCaretaker.setMemento(gameRole.saveState());

        System.out.println("------------\u5927\u6218Boss\u540E------------");
        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD
        gameRole.fight();
        gameRole.stateDisplay();
        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");
        //\u6062\u590D\u4E4B\u524D\u72B6\u6001
        gameRole.recoverState(roleStateCaretaker.getMemento());
        gameRole.stateDisplay();
    }
}

\`\`\`

### 6.10.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002
- \u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002
- \u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002

### 6.10.5 \u4F7F\u7528\u573A\u666F

- \u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002

- \u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002

## 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F

### 6.11.1 \u6982\u8FF0

<img src="/img/image-20200215220322641.png" style="zoom:60%;" />

\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002

\`\`\`java
//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0
public static int add(int a,int b){
    return a + b;
}

//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0
public static int add(int a,int b,int c){
    return a + b + c;
}

//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0
public static int add(Integer ... arr) {
    int sum = 0;
    for (Integer i : arr) {
        sum += i;
    }
    return sum;
}
\`\`\`

\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002

\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002

**\u5B9A\u4E49\uFF1A**

> \u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002

\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002

\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F

**\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A**

\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002

\`\`\`
expression ::= value | plus | minus
plus ::= expression \u2018+\u2019 expression
minus ::= expression \u2018-\u2019 expression
value ::= integer
\`\`\`

> \u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002

\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A

\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002

**\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A**

\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002

\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002

<img src="/img/image-20200215225227616.png" style="zoom:50%;" />

### 6.11.2 \u7ED3\u6784

\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002

- \u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002

- \u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002
- \u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002
- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002
- \u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002

### 6.11.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6

<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u62BD\u8C61\u89D2\u8272AbstractExpression
public abstract class AbstractExpression {
    public abstract int interpret(Context context);
}

//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272
public class Value extends AbstractExpression {
    private int value;

    public Value(int value) {
        this.value = value;
    }

    @Override
    public int interpret(Context context) {
        return value;
    }

    @Override
    public String toString() {
        return new Integer(value).toString();
    }
}

//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F
public class Plus extends AbstractExpression {
    private AbstractExpression left;
    private AbstractExpression right;

    public Plus(AbstractExpression left, AbstractExpression right) {
        this.left = left;
        this.right = right;
    }

    @Override
    public int interpret(Context context) {
        return left.interpret(context) + right.interpret(context);
    }

    @Override
    public String toString() {
        return "(" + left.toString() + " + " + right.toString() + ")";
    }
}

///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F
public class Minus extends AbstractExpression {
    private AbstractExpression left;
    private AbstractExpression right;

    public Minus(AbstractExpression left, AbstractExpression right) {
        this.left = left;
        this.right = right;
    }

    @Override
    public int interpret(Context context) {
        return left.interpret(context) - right.interpret(context);
    }

    @Override
    public String toString() {
        return "(" + left.toString() + " - " + right.toString() + ")";
    }
}

//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F
public class Variable extends AbstractExpression {
    private String name;

    public Variable(String name) {
        this.name = name;
    }

    @Override
    public int interpret(Context ctx) {
        return ctx.getValue(this);
    }

    @Override
    public String toString() {
        return name;
    }
}

//\u73AF\u5883\u7C7B
public class Context {
    private Map<Variable, Integer> map = new HashMap<Variable, Integer>();

    public void assign(Variable var, Integer value) {
        map.put(var, value);
    }

    public int getValue(Variable var) {
        Integer value = map.get(var);
        return value;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Context context = new Context();

        Variable a = new Variable("a");
        Variable b = new Variable("b");
        Variable c = new Variable("c");
        Variable d = new Variable("d");
        Variable e = new Variable("e");
        //Value v = new Value(1);

        context.assign(a, 1);
        context.assign(b, 2);
        context.assign(c, 3);
        context.assign(d, 4);
        context.assign(e, 5);

        AbstractExpression expression = new Minus(new Plus(new Plus(new Plus(a, b), c), d), e);

        System.out.println(expression + "= " + expression.interpret(context));
    }
}
\`\`\`

### 6.11.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002

  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002

- \u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002

  \u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002

- \u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002

  \u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 "\u5F00\u95ED\u539F\u5219"\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002

  \u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002

* \u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002

  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002

### 6.11.5 \u4F7F\u7528\u573A\u666F

- \u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002

- \u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002

- \u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002

# 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6

## 7.1 spring \u4F7F\u7528\u56DE\u987E

\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002

- \u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B

  \`\`\`java
  public interface UserDao {
      public void add();
  }

  public class UserDaoImpl implements UserDao {

      public void add() {
          System.out.println("userDaoImpl ....");
      }
  }
  \`\`\`

- \u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B

  \`\`\`java
  public interface UserService {
      public void add();
  }

  public class UserServiceImpl implements UserService {

      private UserDao userDao;

      public void setUserDao(UserDao userDao) {
          this.userDao = userDao;
      }

      public void add() {
          System.out.println("userServiceImpl ...");
          userDao.add();
      }
  }
  \`\`\`

- \u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42

  \`\`\`java
  public class UserController {
      public static void main(String[] args) {
          //\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61
          ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");
          //\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61
          UserService userService = applicationContext.getBean("userService", UserService.class);
          //\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5
          userService.add();
      }
  }
  \`\`\`

- \u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6

  \`\`\`java
  <?xml version="1.0" encoding="UTF-8"?>
  <beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://www.springframework.org/schema/beans"
         xmlns:context="http://www.springframework.org/schema/context"
         xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans.xsd
          http://www.springframework.org/schema/context
          http://www.springframework.org/schema/context/spring-context.xsd">

      <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">
          <property name="userDao" ref="userDao"></property>
      </bean>

      <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>

  </beans>
  \`\`\`

  \u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A

  <img src="/img/image-20200429165544151.png" style="zoom:60%;" />

\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A

- userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002
- \u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002
- UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002

\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09

## 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784

Spring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:

\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A

<img src="/img/image-20200429111324770.png" style="zoom:40%;" />

\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002

- spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002
- spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002
- spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002
- spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002
- spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002

### 7.1.1 bean \u6982\u8FF0

Spring \u5C31\u662F\u9762\u5411 \`Bean\` \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002

spring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A

\`\`\`xml
<bean id="userService" class="com.itheima.service.impl.UserServiceImpl">
    <property name="userDao" ref="userDao"></property>
</bean>
<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>
\`\`\`

\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F

- spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002
- bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002

## 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790

### 7.3.1 BeanFactory \u89E3\u6790

Spring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002

<img src="/img/image-20200429185050396.png" style="zoom:60%;" />

\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002

\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F

\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C

- ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002
- HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean
- AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002

\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A

\`\`\`java
public interface BeanFactory {

	String FACTORY_BEAN_PREFIX = "&";

	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61
	Object getBean(String name) throws BeansException;
	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86
	<T> T getBean(String name, Class<T> requiredType) throws BeansException;
	Object getBean(String name, Object... args) throws BeansException;
	<T> T getBean(Class<T> requiredType) throws BeansException;
	<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;

	<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);
	<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);

	//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61
	boolean containsBean(String name);
	//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B
	boolean isSingleton(String name) throws NoSuchBeanDefinitionException;
	boolean isPrototype(String name) throws NoSuchBeanDefinitionException;
	boolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;
	boolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;
	@Nullable
	Class<?> getType(String name) throws NoSuchBeanDefinitionException;
	String[] getAliases(String name);
}
\`\`\`

\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002

BeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002

<img src="/img/image-20200430220155371.png" style="zoom:60%;" />

\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A

- ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002
- FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002
- AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002

### 7.3.2 BeanDefinition \u89E3\u6790

Spring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6

\`\`\`xml
<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>

bean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A
	scope\u3001init-method\u3001destory-method\u7B49\u3002
\`\`\`

\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002

<img src="/img/image-20200429204239868.png" style="zoom:60%;" />

### 7.3.3 BeanDefinitionReader \u89E3\u6790

Bean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002

<img src="/img/image-20200429204700956.png" style="zoom:60%;" />

\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A

\`\`\`java
public interface BeanDefinitionReader {

	//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61
	BeanDefinitionRegistry getRegistry();

	@Nullable
	ResourceLoader getResourceLoader();

	@Nullable
	ClassLoader getBeanClassLoader();

	BeanNameGenerator getBeanNameGenerator();

	/*
		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D
	*/
	int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException;
	int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException;
	int loadBeanDefinitions(String location) throws BeanDefinitionStoreException;
	int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException;
}
\`\`\`

### 7.3.4 BeanDefinitionRegistry \u89E3\u6790

BeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002

\`\`\`java
public interface BeanDefinitionRegistry extends AliasRegistry {

	//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean
	void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)
			throws BeanDefinitionStoreException;

	//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean
	void removeBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;

	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean
	BeanDefinition getBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;

	//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean
	boolean containsBeanDefinition(String beanName);

	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0
	String[] getBeanDefinitionNames();

	int getBeanDefinitionCount();
	boolean isBeanNameInUse(String beanName);
}
\`\`\`

\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A

<img src="/img/image-20200429211132185.png" style="zoom:60%;" />

\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A

- DefaultListableBeanFactory

  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean

  \`\`\`java
  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(256);
  \`\`\`

- SimpleBeanDefinitionRegistry

  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean

  \`\`\`java
  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(64);
  \`\`\`

### 7.3.5 \u521B\u5EFA\u5BB9\u5668

ClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002

## 7.4 \u81EA\u5B9A\u4E49 SpringIOC

\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002

\`\`\`xml
<?xml version="1.0" encoding="UTF-8"?>
<beans>
    <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">
        <property name="userDao" ref="userDao"></property>
    </bean>
    <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>
</beans>
\`\`\`

### 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B

#### 7.4.1.1 PropertyValue \u7C7B

\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002

\`\`\`java
public class PropertyValue {

  private String name;
  private String ref;
  private String value;

  public PropertyValue() {
  }

  public PropertyValue(String name, String ref,String value) {
    this.name = name;
    this.ref = ref;
    this.value = value;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getRef() {
    return ref;
  }

  public void setRef(String ref) {
    this.ref = ref;
  }

  public String getValue() {
    return value;
  }

  public void setValue(String value) {
    this.value = value;
  }
}
\`\`\`

#### 7.4.1.2 MutablePropertyValues \u7C7B

\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002

\`\`\`java
public class MutablePropertyValues implements Iterable<PropertyValue> {

    private final List<PropertyValue> propertyValueList;

    public MutablePropertyValues() {
        this.propertyValueList = new ArrayList<PropertyValue>();
    }

    public MutablePropertyValues(List<PropertyValue> propertyValueList) {
        this.propertyValueList = (propertyValueList != null ? propertyValueList : new ArrayList<PropertyValue>());
    }

    public PropertyValue[] getPropertyValues() {
        return this.propertyValueList.toArray(new PropertyValue[0]);
    }

    public PropertyValue getPropertyValue(String propertyName) {
        for (PropertyValue pv : this.propertyValueList) {
            if (pv.getName().equals(propertyName)) {
                return pv;
            }
        }
        return null;
    }

    @Override
    public Iterator<PropertyValue> iterator() {
        return propertyValueList.iterator();
    }

    public boolean isEmpty() {
        return this.propertyValueList.isEmpty();
    }

    public MutablePropertyValues addPropertyValue(PropertyValue pv) {
        for (int i = 0; i < this.propertyValueList.size(); i++) {
            PropertyValue currentPv = this.propertyValueList.get(i);
            if (currentPv.getName().equals(pv.getName())) {
                this.propertyValueList.set(i, new PropertyValue(pv.getName(),pv.getRef(), pv.getValue()));
                return this;
            }
        }
        this.propertyValueList.add(pv);
        return this;
    }

    public boolean contains(String propertyName) {
        return getPropertyValue(propertyName) != null;
    }
}
\`\`\`

#### 7.4.1.3 BeanDefinition \u7C7B

BeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002

\`\`\`java
public class BeanDefinition {
    private String id;
    private String className;

    private MutablePropertyValues propertyValues;

    public BeanDefinition() {
        propertyValues = new MutablePropertyValues();
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getClassName() {
        return className;
    }

    public void setClassName(String className) {
        this.className = className;
    }

    public void setPropertyValues(MutablePropertyValues propertyValues) {
        this.propertyValues = propertyValues;
    }

    public MutablePropertyValues getPropertyValues() {
        return propertyValues;
    }
}
\`\`\`

### 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B

#### 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3

BeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A

- \u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D
- \u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61
- \u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61
- \u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61
- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570
- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0

\`\`\`java
public interface BeanDefinitionRegistry {

    //\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D
    void registerBeanDefinition(String beanName, BeanDefinition beanDefinition);

    //\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61
    void removeBeanDefinition(String beanName) throws Exception;

    //\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61
    BeanDefinition getBeanDefinition(String beanName) throws Exception;

    boolean containsBeanDefinition(String beanName);

    int getBeanDefinitionCount();

    String[] getBeanDefinitionNames();
}
\`\`\`

#### 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B

\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002

\`\`\`java
public class SimpleBeanDefinitionRegistry implements BeanDefinitionRegistry {

    private Map<String, BeanDefinition> beanDefinitionMap = new HashMap<String, BeanDefinition>();

    @Override
    public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) {
        beanDefinitionMap.put(beanName,beanDefinition);
    }

    @Override
    public void removeBeanDefinition(String beanName) throws Exception {
        beanDefinitionMap.remove(beanName);
    }

    @Override
    public BeanDefinition getBeanDefinition(String beanName) throws Exception {
        return beanDefinitionMap.get(beanName);
    }

    @Override
    public boolean containsBeanDefinition(String beanName) {
        return beanDefinitionMap.containsKey(beanName);
    }

    @Override
    public int getBeanDefinitionCount() {
        return beanDefinitionMap.size();
    }

    @Override
    public String[] getBeanDefinitionNames() {
        return beanDefinitionMap.keySet().toArray(new String[1]);
    }
}
\`\`\`

### 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B

#### 7.4.3.1 BeanDefinitionReader \u63A5\u53E3

BeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A

- \u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002
- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002

\`\`\`java
public interface BeanDefinitionReader {

	//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61
    BeanDefinitionRegistry getRegistry();
	//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C
    void loadBeanDefinitions(String configLocation) throws Exception;
}
\`\`\`

#### 7.4.3.2 XmlBeanDefinitionReader \u7C7B

XmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002

\`\`\`java
public class XmlBeanDefinitionReader implements BeanDefinitionReader {

    private BeanDefinitionRegistry registry;

    public XmlBeanDefinitionReader() {
        this.registry = new SimpleBeanDefinitionRegistry();
    }

    @Override
    public BeanDefinitionRegistry getRegistry() {
        return registry;
    }

    @Override
    public void loadBeanDefinitions(String configLocation) throws Exception {

        InputStream is = this.getClass().getClassLoader().getResourceAsStream(configLocation);
        SAXReader reader = new SAXReader();
        Document document = reader.read(is);
        Element rootElement = document.getRootElement();
        //\u89E3\u6790bean\u6807\u7B7E
        parseBean(rootElement);
    }

    private void parseBean(Element rootElement) {

        List<Element> elements = rootElement.elements();
        for (Element element : elements) {
            String id = element.attributeValue("id");
            String className = element.attributeValue("class");
            BeanDefinition beanDefinition = new BeanDefinition();
            beanDefinition.setId(id);
            beanDefinition.setClassName(className);
            List<Element> list = element.elements("property");
            MutablePropertyValues mutablePropertyValues = new MutablePropertyValues();
            for (Element element1 : list) {
                String name = element1.attributeValue("name");
                String ref = element1.attributeValue("ref");
                String value = element1.attributeValue("value");
                PropertyValue propertyValue = new PropertyValue(name,ref,value);
                mutablePropertyValues.addPropertyValue(propertyValue);
            }
            beanDefinition.setPropertyValues(mutablePropertyValues);

            registry.registerBeanDefinition(id,beanDefinition);
        }
    }
}
\`\`\`

### 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B

#### 7.4.4.1 BeanFactory \u63A5\u53E3

\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002

\`\`\`java
public interface BeanFactory {
	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61
    Object getBean(String name) throws Exception;
	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362
    <T> T getBean(String name, Class<? extends T> clazz) throws Exception;
}
\`\`\`

#### 7.4.4.2 ApplicationContext \u63A5\u53E3

\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 \`refresh()\` \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A

- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002
- \u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002

\`\`\`java
public interface ApplicationContext extends BeanFactory {
	//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA
    void refresh() throws IllegalStateException, Exception;
}
\`\`\`

#### 7.4.4.3 AbstractApplicationContext \u7C7B

- \u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002

- \u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002

  BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002

\`\`\`java
public abstract class AbstractApplicationContext implements ApplicationContext {

    protected BeanDefinitionReader beanDefinitionReader;
    //\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61
    protected Map<String, Object> singletonObjects = new HashMap<String, Object>();

    //\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84
    protected String configLocation;

    public void refresh() throws IllegalStateException, Exception {

        //\u52A0\u8F7DBeanDefinition
        beanDefinitionReader.loadBeanDefinitions(configLocation);

        //\u521D\u59CB\u5316bean
        finishBeanInitialization();
    }

    //bean\u7684\u521D\u59CB\u5316
    private void finishBeanInitialization() throws Exception {
        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();
        String[] beanNames = registry.getBeanDefinitionNames();

        for (String beanName : beanNames) {
            BeanDefinition beanDefinition = registry.getBeanDefinition(beanName);
            getBean(beanName);
        }
    }
}
\`\`\`

> \u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002

#### 7.4.4.4 ClassPathXmlApplicationContext \u7C7B

\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A

- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002
- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002
- \u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002

\`\`\`java
public class ClassPathXmlApplicationContext extends AbstractApplicationContext{

    public ClassPathXmlApplicationContext(String configLocation) {
        this.configLocation = configLocation;
        //\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61
        beanDefinitionReader = new XmlBeanDefinitionReader();
        try {
            this.refresh();
        } catch (Exception e) {
        }
    }

    //\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61
    @Override
    public Object getBean(String name) throws Exception {

        //return singletonObjects.get(name);
        Object obj = singletonObjects.get(name);
        if(obj != null) {
            return obj;
        }

        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();
        BeanDefinition beanDefinition = registry.getBeanDefinition(name);
        if(beanDefinition == null) {
            return null;
        }
        String className = beanDefinition.getClassName();
        Class<?> clazz = Class.forName(className);
        Object beanObj = clazz.newInstance();
        MutablePropertyValues propertyValues = beanDefinition.getPropertyValues();
        for (PropertyValue propertyValue : propertyValues) {
            String propertyName = propertyValue.getName();
            String value = propertyValue.getValue();
            String ref = propertyValue.getRef();
            if(ref != null && !"".equals(ref)) {

                Object bean = getBean(ref);
                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);
                Method[] methods = clazz.getMethods();
                for (Method method : methods) {
                    if(method.getName().equals(methodName)) {
                        method.invoke(beanObj,bean);
                    }
                }
            }

            if(value != null && !"".equals(value)) {
                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);
                Method method = clazz.getMethod(methodName, String.class);
                method.invoke(beanObj,value);
            }
        }
        singletonObjects.put(name,beanObj);
        return beanObj;
    }

    @Override
    public <T> T getBean(String name, Class<? extends T> clazz) throws Exception {

        Object bean = getBean(name);
        if(bean != null) {
            return clazz.cast(bean);
        }
        return null;
    }
}
\`\`\`

### 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3

#### 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F

- \u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002
- \u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002
- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002
- \u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002

spring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002

#### 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219

#### 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165

spring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A

- \u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002
- \u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002
- \u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002
`,contentRendered:`<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<!-- more -->
<h1 id="_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" aria-hidden="true">#</a> 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0</h1>
<h2 id="_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" aria-hidden="true">#</a> 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F</h2>
<p>&quot;\u8BBE\u8BA1\u6A21\u5F0F&quot;\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002</p>
<p>1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB<code v-pre>\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09</code>\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002</p>
<p>1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002</p>
<h2 id="_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" aria-hidden="true">#</a> 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5</h2>
<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<h2 id="_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" aria-hidden="true">#</a> 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027</h2>
<p>\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002</p>
<p>\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002</p>
<ul>
<li>\u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002</li>
<li>\u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002</li>
<li>\u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002</li>
</ul>
<h2 id="_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" aria-hidden="true">#</a> 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B</h2>
<ul>
<li>
<p><strong>\u521B\u5EFA\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u7ED3\u6784\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u884C\u4E3A\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
</li>
</ul>
<h1 id="_2-uml-\u56FE" tabindex="-1"><a class="header-anchor" href="#_2-uml-\u56FE" aria-hidden="true">#</a> 2\uFF0CUML \u56FE</h1>
<p>\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002</p>
<p>UML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002</p>
<h2 id="_2-1-\u7C7B\u56FE\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7C7B\u56FE\u6982\u8FF0" aria-hidden="true">#</a> 2.1 \u7C7B\u56FE\u6982\u8FF0</h2>
<p>\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002</p>
<h2 id="_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" aria-hidden="true">#</a> 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528</h2>
<ul>
<li>\u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B</li>
<li>\u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002</li>
</ul>
<h2 id="_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" aria-hidden="true">#</a> 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5</h2>
<h3 id="_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F</h3>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002</p>
<p><img src="\\img\\Employee.jpg" alt=""></p>
<p>\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>+\uFF1A\u8868\u793A public</p>
</li>
<li>
<p>-\uFF1A\u8868\u793A private</p>
</li>
<li>
<p>#\uFF1A\u8868\u793A protected</p>
</li>
</ul>
<p>\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]</strong></p>
<p>\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]</strong></p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684</p>
<p>\u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762</p>
</blockquote>
<p><strong>\u4E3E\u4E2A\u6817\u5B50\uFF1A</strong></p>
<p><img src="\\img\\demo.png" alt=""></p>
<p>\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A</p>
<ul>
<li>method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002</li>
<li>method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002</li>
<li>method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002</li>
</ul>
<h3 id="_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F</h3>
<h4 id="_2-3-2-1-\u5173\u8054\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-1-\u5173\u8054\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.1 \u5173\u8054\u5173\u7CFB</h4>
<p>\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002</p>
<p>\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002</p>
<p><strong>1\uFF0C\u5355\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_address.png" alt=""></p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002</p>
<p><strong>2\uFF0C\u53CC\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_product.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List&lt;Product&gt;\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002</p>
<p><strong>3\uFF0C\u81EA\u5173\u8054</strong></p>
<p><img src="\\img\\node.png" alt=""></p>
<p>\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002</p>
<h4 id="_2-3-2-2-\u805A\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-2-\u805A\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.2 \u805A\u5408\u5173\u7CFB</h4>
<p>\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002</p>
<p>\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173422328.png" alt=""></p>
<h4 id="_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.3 \u7EC4\u5408\u5173\u7CFB</h4>
<p>\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002</p>
<p>\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173455149.png" alt=""></p>
<h4 id="_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB</h4>
<p>\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A</p>
<p><img src="\\img\\image-20191229173518926.png" alt=""></p>
<h4 id="_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.5 \u7EE7\u627F\u5173\u7CFB</h4>
<p>\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p>
<p><img src="\\img\\image-20191229173539838.png" alt=""></p>
<h4 id="_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB</h4>
<p>\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002</p>
<p><img src="\\img\\image-20191229173554296.png" alt=""></p>
<h1 id="_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219</h1>
<p>\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002</p>
<h2 id="_3-1-\u5F00\u95ED\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-1-\u5F00\u95ED\u539F\u5219" aria-hidden="true">#</a> 3.1 \u5F00\u95ED\u539F\u5219</h2>
<p><strong>\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED</strong>\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002</p>
<p>\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002</p>
<p>\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002</p>
<p>\u4E0B\u9762\u4EE5 <code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002</p>
<p>\u3010\u4F8B\u3011<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002</p>
<p>\u5206\u6790\uFF1A<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002</p>
<p><img src="\\img\\open-close.png" alt=""></p>
<h2 id="_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" aria-hidden="true">#</a> 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219</h2>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002</p>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002</p>
<p>\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50</p>
<p>\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002</p>
<p><img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> length<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> width<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A</strong></p>
<p>\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RectangleDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Rectangle</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"============"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Rectangle</span> rectangle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle1<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002
\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3</p>
<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />
<h2 id="_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" aria-hidden="true">#</a> 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219</h2>
<p>\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111</p>
<p>\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XiJieHardDisk</span> <span class="token keyword">implements</span> <span class="token class-name">HardDisk</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"\u6570\u636E"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntelCpu</span> <span class="token keyword">implements</span> <span class="token class-name">Cpu</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528Intel\u5904\u7406\u5668"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KingstonMemory</span> <span class="token keyword">implements</span> <span class="token class-name">Memory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">IntelCpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">KingstonMemory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XiJieHardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> hardDisk<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A</strong></p>
<p>\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestComputer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XiJieHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IntelCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KingstonMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        computer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002</p>
<p>\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A</p>
<p>\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />
<p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">Cpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Memory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">Memory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002</p>
<h2 id="_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" aria-hidden="true">#</a> 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219</h2>
<p>\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B</p>
<p>\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A<code v-pre>\u9ED1\u9A6C</code>\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png" alt=""></p>
<p>\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AntiTheft</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeiMaSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span><span class="token punctuation">,</span><span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u6C34"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" tabindex="-1"><a class="header-anchor" href="#_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" aria-hidden="true">#</a> 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219</h2>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002</p>
<p>\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002</p>
<p>\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002</p>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219</p>
<p>\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B</p>
<p>\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u660E\u661F\u7C7B\uFF08Star\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fans</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Fans</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Agent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Star</span> star<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Fans</span> fans<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Company</span> company<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token class-name">Star</span> star<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>star <span class="token operator">=</span> star<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFans</span><span class="token punctuation">(</span><span class="token class-name">Fans</span> fans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fans <span class="token operator">=</span> fans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompany</span><span class="token punctuation">(</span><span class="token class-name">Company</span> company<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">meeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fans<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u89C1\u9762\u4E86\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>company<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u6D3D\u6DE1\u4E1A\u52A1\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" aria-hidden="true">#</a> 3.6 \u5408\u6210\u590D\u7528\u539F\u5219</h2>
<p>\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002</p>
<p>\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002</p>
<p>\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A</p>
<ol>
<li>\u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002</li>
<li>\u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002</li>
</ol>
<p>\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A</p>
<ol>
<li>\u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002</li>
<li>\u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002</li>
</ol>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F</p>
<p>\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />
<h1 id="_4-\u521B\u5EFA\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-\u521B\u5EFA\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F</h1>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002</p>
<p>\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002</p>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u6A21\u5F0F</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F</li>
<li>\u539F\u578B\u6A21\u5F0F</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F</li>
</ul>
<h2 id="_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</h2>
<p>\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002</p>
<p>\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<h3 id="_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" aria-hidden="true">#</a> 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784</h3>
<p>\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B</li>
<li>\u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B</li>
</ul>
<h3 id="_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0</h3>
<blockquote>
<p>\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A</p>
<p>\u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA</p>
<p>\u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA</p>
</blockquote>
<ol>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u997F\u6C49\u5F0F
 *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6076\u6C49\u5F0F
 *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u4E0D\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09</p>
<p>\u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E <code v-pre>getInstance()</code> \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002</p>
<p>\u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 <code v-pre>volatile</code> \u5173\u952E\u5B57, <code v-pre>volatile</code> \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u6DFB\u52A0 <code v-pre>volatile</code> \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09</p>
<p>\u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB <code v-pre>static</code> \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder</p>
<p>\u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002</p>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u679A\u4E3E\u65B9\u5F0F</p>
<p>\u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u679A\u4E3E\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002</p>
</li>
</ol>
<h3 id="_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" aria-hidden="true">#</a> 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898</h3>
<h4 id="_4-1-3-1-\u95EE\u9898\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_4-1-3-1-\u95EE\u9898\u6F14\u793A" aria-hidden="true">#</a> 4.1.3.1 \u95EE\u9898\u6F14\u793A</h4>
<p>\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002</p>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61</span>
        <span class="token comment">//writeObject2File();</span>
        <span class="token comment">//\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeObject2File</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
</blockquote>
</li>
<li>
<p>\u53CD\u5C04</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61</span>
        <span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5</span>
        constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</p>
</blockquote>
</li>
</ul>
<blockquote>
<div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002
</blockquote>
<h4 id="_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" aria-hidden="true">#</a> 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3</h4>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<p>\u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0<code v-pre>readResolve()</code>\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6E90\u7801\u89E3\u6790\uFF1A</strong></p>
<p>ObjectInputStream \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// if nested read, passHandle contains handle of enclosing object</span>
    <span class="token keyword">int</span> outerHandle <span class="token operator">=</span> passHandle<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>tc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			<span class="token keyword">case</span> <span class="token constant">TC_OBJECT</span><span class="token operator">:</span>
				<span class="token keyword">return</span> <span class="token function">checkResolve</span><span class="token punctuation">(</span><span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span>unshared<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        depth<span class="token operator">--</span><span class="token punctuation">;</span>
        bin<span class="token punctuation">.</span><span class="token function">setBlockDataMode</span><span class="token punctuation">(</span>oldMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C</span>
    obj <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">isInstantiable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> desc<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> handles<span class="token punctuation">.</span><span class="token function">lookupException</span><span class="token punctuation">(</span>passHandle<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> desc<span class="token punctuation">.</span><span class="token function">hasReadResolveMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF</span>
    	<span class="token comment">// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002</span>
    	<span class="token class-name">Object</span> rep <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">invokeReadResolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*
           \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801
        */</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E:</div>
<p>\u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h3 id="_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" aria-hidden="true">#</a> 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B</h3>
<p>Runtime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
<ol>
<li>
<p>\u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> currentRuntime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Returns the runtime object associated with the current Java application.
     * Most of the methods of class <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> are instance
     * methods and must be invoked with respect to the current runtime object.
     *
     * <span class="token keyword">@return</span>  the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> object associated with the current
     *          Java application.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> <span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> currentRuntime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/** Don't let anyone else instantiate this class */</span>
    <span class="token keyword">private</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002</p>
</li>
<li>
<p>\u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuntimeDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61</span>
        <span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61</span>
        <span class="token class-name">Process</span> process <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">"ipconfig"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ol>
<h2 id="_4-2-\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2 \u5DE5\u5382\u6A21\u5F0F</h2>
<h3 id="_4-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.2.1 \u6982\u8FF0</h3>
<p>\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002</p>
<p>\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002</p>
<p>\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />
<p>\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A<strong>\u89E3\u8026</strong>\u3002</p>
<p>\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528</p>
<ul>
<li>\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</li>
</ul>
<h3 id="_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002</p>
<h4 id="_4-2-2-1-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-2-1-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.2.1 \u7ED3\u6784</h4>
<p>\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B</li>
<li>\u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002</li>
</ul>
<h4 id="_4-2-2-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-2-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.2.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002</p>
<p>\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002</p>
<h4 id="_4-2-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.2.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
<h4 id="_4-2-2-3-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-2-3-\u6269\u5C55" aria-hidden="true">#</a> 4.2.2.3 \u6269\u5C55</h4>
<p><strong>\u9759\u6001\u5DE5\u5382</strong></p>
<p>\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</h3>
<p>\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002</p>
<h4 id="_4-2-3-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-3-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.3.1 \u6982\u5FF5</h4>
<p>\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002</p>
<h4 id="_4-2-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.3.2 \u7ED3\u6784</h4>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002</li>
</ul>
<h4 id="_4-2-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.3.3 \u5B9E\u73B0</h4>
<p>\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5496\u5561\u5E97\u7C7B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002</p>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002</p>
<h4 id="_4-2-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.3.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B</li>
<li>\u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002</li>
</ul>
<h3 id="_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002</p>
<p>\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002</p>
<p>\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002</p>
<img src="/img/image-20200401214509176.png" style="zoom:67%;" />
<img src="/img/image-20200401222951963.png" style="zoom:67%;" />
<h4 id="_4-2-4-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-4-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.4.1 \u6982\u5FF5</h4>
<p>\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002</p>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</p>
<h4 id="_4-2-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.4.2 \u7ED3\u6784</h4>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002</li>
</ul>
<h4 id="_4-2-4-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.4.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MatchaMousse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tiramisu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002</p>
<h4 id="_4-2-4-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-4-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.4.3 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002</p>
<h4 id="_4-2-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.2.4.4 \u4F7F\u7528\u573A\u666F</h4>
<ul>
<li>
<p>\u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002</p>
</li>
</ul>
<p>\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002</p>
<h3 id="_4-2-5-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-5-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.2.5 \u6A21\u5F0F\u6269\u5C55</h3>
<p><strong>\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408</strong></p>
<p>\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002</p>
<p>\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6</p>
<p>\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties</p>
<div class="language-properties ext-properties line-numbers-mode"><pre v-pre class="language-properties"><code><span class="token key attr-name">american</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.AmericanCoffee</span>
<span class="token key attr-name">latte</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.LatteCoffee</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"bean.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09</span>
                <span class="token class-name">String</span> className <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61</span>
                <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Coffee</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002</p>
<h3 id="_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" aria-hidden="true">#</a> 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5</h3>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EE4\u72D0\u51B2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u98CE\u6E05\u626C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EFB\u6211\u884C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> ele <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A</p>
<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />
<p>Collection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<blockquote>
<p>\u53E6\uFF1A</p>
<p>\u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
<p>\u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
</blockquote>
<h2 id="_4-3-\u539F\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-3-\u539F\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 4.3 \u539F\u578B\u6A21\u5F0F</h2>
<h3 id="_4-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.3.1 \u6982\u8FF0</h3>
<p>\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002</p>
<h3 id="_4-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.3.2 \u7ED3\u6784</h3>
<p>\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002</li>
<li>\u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002</li>
</ul>
<p>\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u539F\u578B\u6A21\u5F0F.png" alt=""></p>
<h3 id="_4-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.3.3 \u5B9E\u73B0</h3>
<p>\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002</p>
<blockquote>
<p>\u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002</p>
<p>\u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002</p>
</blockquote>
<p>Java \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 <code v-pre>clone()</code> \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Realizetype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Realizetype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Realizetype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Realizetype</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Realizetype</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r1 <span class="token operator">==</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-4-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-3-4-\u6848\u4F8B" aria-hidden="true">#</a> 4.3.4 \u6848\u4F8B</h3>
<p><strong>\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6</strong></p>
<p>\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB</span>
        c2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002</li>
<li>\u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</li>
</ul>
<h3 id="_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" tabindex="-1"><a class="header-anchor" href="#_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" aria-hidden="true">#</a> 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09</h3>
<p>\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Student</span> stu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStu</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stu <span class="token operator">=</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B66\u751F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />
<div color="red">\u8BF4\u660E\uFF1A</div>
<p>\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />
<blockquote>
<p>\u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002</p>
</blockquote>
<h2 id="_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F</h2>
<h3 id="_4-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.4.1 \u6982\u8FF0</h3>
<p>\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002</p>
<img src="/img/image-20200413225341516.png" style="zoom:60%;" />
<ul>
<li>\u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002</li>
<li>\u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002</li>
</ul>
<h3 id="_4-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.4.2 \u7ED3\u6784</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002</p>
</li>
<li>
<p>\u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002</p>
</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<h3 id="_4-4-3-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-4-3-\u5B9E\u4F8B" aria-hidden="true">#</a> 4.4.3 \u5B9E\u4F8B</h3>
<p><strong>\u521B\u5EFA\u5171\u4EAB\u5355\u8F66</strong></p>
<p>\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002</p>
<p>\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u81EA\u884C\u8F66\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bike</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> frame<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> seat<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token class-name">String</span> frame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frame <span class="token operator">=</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> seat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seat <span class="token operator">=</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6469\u62DC\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobikeBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u94DD\u5408\u91D1\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u771F\u76AE\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ofo\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OfoBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u78B3\u7EA4\u7EF4\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u6A61\u80F6\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6307\u6325\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Builder</span> mBuilder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder <span class="token operator">=</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mBuilder<span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MobikeBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bike</span> bike <span class="token operator">=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F\uFF1A</strong></p>
<p>\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>BuildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u8BF4\u660E\uFF1A</strong></p>
<p>\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002</p>
<h3 id="_4-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002</li>
<li>\u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002</li>
<li>\u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002</p>
<h3 id="_4-4-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-4-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.4.5 \u4F7F\u7528\u573A\u666F</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002</p>
<ul>
<li>\u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002</li>
<li>\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002</li>
</ul>
<h3 id="_4-4-6-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-4-6-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.4.6 \u6A21\u5F0F\u6269\u5C55</h3>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002</p>
<p>\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">,</span> <span class="token class-name">String</span> screen<span class="token punctuation">,</span> <span class="token class-name">String</span> memory<span class="token punctuation">,</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setScreen</span><span class="token punctuation">(</span><span class="token class-name">String</span> screen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">String</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMainboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u6784\u5EFAPhone\u5BF9\u8C61</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">,</span><span class="token string">"\u4E09\u661F\u5C4F\u5E55"</span><span class="token punctuation">,</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">,</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002</p>
<p>\u91CD\u6784\u540E\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu <span class="token operator">=</span> builder<span class="token punctuation">.</span>cpu<span class="token punctuation">;</span>
        screen <span class="token operator">=</span> builder<span class="token punctuation">.</span>screen<span class="token punctuation">;</span>
        memory <span class="token operator">=</span> builder<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
        mainboard <span class="token operator">=</span> builder<span class="token punctuation">.</span>mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cpu <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            screen <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            memory <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mainboard <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">cpu</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">screen</span><span class="token punctuation">(</span><span class="token string">"\u4E09\u661F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</p>
<h2 id="_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" aria-hidden="true">#</a> 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4</h2>
<h3 id="_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002</p>
<p>\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002</p>
<h3 id="_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002</p>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002</p>
<p>\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002</p>
<h1 id="_5-\u7ED3\u6784\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-\u7ED3\u6784\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F</h1>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002</p>
<p>\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F</li>
<li>\u9002\u914D\u5668\u6A21\u5F0F</li>
<li>\u88C5\u9970\u8005\u6A21\u5F0F</li>
<li>\u6865\u63A5\u6A21\u5F0F</li>
<li>\u5916\u89C2\u6A21\u5F0F</li>
<li>\u7EC4\u5408\u6A21\u5F0F</li>
<li>\u4EAB\u5143\u6A21\u5F0F</li>
</ul>
<h2 id="_5-1-\u4EE3\u7406\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-1-\u4EE3\u7406\u6A21\u5F0F" aria-hidden="true">#</a> 5.1 \u4EE3\u7406\u6A21\u5F0F</h2>
<h3 id="_5-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.1.1 \u6982\u8FF0</h3>
<p>\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002</p>
<p>Java \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002</p>
<h3 id="_5-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.1.2 \u7ED3\u6784</h3>
<p>\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002</li>
<li>\u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002</li>
</ul>
<h3 id="_5-1-3-\u9759\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-3-\u9759\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.3 \u9759\u6001\u4EE3\u7406</h3>
<p>\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002</p>
<p>\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968</p>
<p>\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u552E\u70B9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        station<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProxyPoint</span> pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pp<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002</p>
<h3 id="_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.4 JDK \u52A8\u6001\u4EE3\u7406</h3>
<p>\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002</p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token comment">/*
            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF
                Class&lt;?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3
                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F
         */</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">/*
                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61
                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B
                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570
                     */</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//\u6267\u884C\u771F\u5B9E\u5BF9\u8C61</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>
<ul>
<li>
<p>ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F</p>
<p>ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>jdk<span class="token punctuation">.</span></span><span class="token class-name">SellTickets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">UndeclaredThrowableException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m0<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            m1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"equals"</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"toString"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m0 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"hashCode"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> noSuchMethodException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchMethodError</span><span class="token punctuation">(</span>noSuchMethodException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> classNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoClassDefFoundError</span><span class="token punctuation">(</span>classNotFoundException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m0<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002</li>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002</li>
</ul>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F</p>
<p>\u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">;</span>

	<span class="token keyword">protected</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<p>\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A</p>
<pre><code>1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5
2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5
3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5
4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5
</code></pre>
<h3 id="_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406</h3>
<p>\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002</p>
<p>\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002</p>
<p>CGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002</p>
<p>CGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706B\u8F66\u7AD9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
            o \uFF1A \u4EE3\u7406\u5BF9\u8C61
            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B
            args \uFF1A \u5B9E\u9645\u53C2\u6570
            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrainStation</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" aria-hidden="true">#</a> 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4</h3>
<ul>
<li>
<p>jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406</p>
<p>\u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002</p>
<p>\u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002</p>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406</p>
<p>\u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002</p>
<p>\u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898</p>
</li>
</ul>
<h3 id="_5-1-7-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-1-7-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 5.1.7 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B</li>
<li>\u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B</li>
<li>\u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B</li>
</ul>
<h3 id="_5-1-8-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-1-8-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.1.8 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406</p>
<p>\u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002</p>
</li>
<li>
<p>\u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406</p>
<p>\u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002</p>
</li>
<li>
<p>\u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406</p>
<p>\u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002</p>
</li>
</ul>
<h2 id="_5-2-\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2 \u9002\u914D\u5668\u6A21\u5F0F</h2>
<h3 id="_5-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.2.1 \u6982\u8FF0</h3>
<p>\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<p><img src="\\img\\\u8F6C\u63A5\u5934.png" alt=""></p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002</p>
<p>\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002</p>
<h3 id="_5-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.2.2 \u7ED3\u6784</h3>
<p>\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002</li>
</ul>
<h3 id="_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//SD\u5361\u7684\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6SD\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165SD\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//SD\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">"sd card read a msg :hello word SD"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sd card write msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u8111\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sdCard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">"sd card null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6TF\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165TF\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token string">"tf card read msg : hello word tf card"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tf card write a msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002</p>
<h3 id="_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>  <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TFCard</span> tfCard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCard</span> tfCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCard <span class="token operator">=</span> tfCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tfCard<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tfCard<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TFCard</span> tfCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TFCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span>tfCard<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002</p>
</blockquote>
<h3 id="_5-2-5-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-2-5-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 5.2.5 \u5E94\u7528\u573A\u666F</h3>
<ul>
<li>\u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002</li>
<li>\u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002</li>
</ul>
<h3 id="_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Reader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002</p>
<p>InputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002</li>
<li>StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002</li>
</ul>
<div color="red">\u7ED3\u8BBA\uFF1A</div>
<p>\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<h2 id="_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 5.3 \u88C5\u9970\u8005\u6A21\u5F0F</h2>
<h3 id="_5-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.3.1 \u6982\u8FF0</h3>
<p>\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002</p>
<p>\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />
<p>\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A</p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u4E0D\u597D</p>
<p>\u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002</p>
</li>
<li>
<p>\u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B</p>
</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002</p>
<h3 id="_5-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.3.2 \u7ED3\u6784</h3>
<p>\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002</li>
<li>\u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002</li>
<li>\u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002</li>
</ul>
<h3 id="_5-3-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-3-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.3.3 \u6848\u4F8B</h3>
<p>\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5FEB\u9910\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u83B7\u53D6\u4EF7\u683C</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u996D</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedRice</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u996D"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u9762</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedNoodles</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u9762"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u914D\u6599\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Garnish</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFastFood</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Garnish</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">,</span> <span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u9E21\u86CB\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Egg</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"\u9E21\u86CB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u57F9\u6839\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bacon</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"\u57F9\u6839"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span>food1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food1<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food1<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762</span>
        <span class="token class-name">FastFood</span> food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span>food2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food2<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food2<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002</p>
</li>
</ul>
<h3 id="_5-3-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-3-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.3.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002</p>
<p>\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A</p>
<ul>
<li>\u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B</li>
<li>\u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09</li>
</ul>
</li>
<li>
<p>\u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002</p>
</li>
<li>
<p>\u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002</p>
</li>
</ul>
<h3 id="_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.3.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>IO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002</p>
<p>\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFABufferedWriter\u5BF9\u8C61</span>
        <span class="token comment">//\u521B\u5EFAFileWriter\u5BF9\u8C61</span>
        <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5199\u6570\u636E</span>
        bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello Buffered"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A</p>
<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />
<blockquote>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002</p>
</blockquote>
<h3 id="_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" aria-hidden="true">#</a> 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B</h3>
<p>\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A</p>
<ul>
<li>\u76F8\u540C\u70B9\uFF1A
<ul>
<li>\u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3</li>
<li>\u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61</li>
<li>\u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5</li>
</ul>
</li>
<li>\u4E0D\u540C\u70B9\uFF1A
<ul>
<li>\u76EE\u7684\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61
\u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
<li>\u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012
\u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
</ul>
</li>
</ul>
<h2 id="_5-4-\u6865\u63A5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-4-\u6865\u63A5\u6A21\u5F0F" aria-hidden="true">#</a> 5.4 \u6865\u63A5\u6A21\u5F0F</h2>
<h3 id="_5-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.4.1 \u6982\u8FF0</h3>
<p>\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A</p>
<p><img src="\\img\\image-20200207194617620.png" alt=""></p>
<p>\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002</p>
<p>\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002</p>
<h3 id="_5-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.4.2 \u7ED3\u6784</h3>
<p>\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002</li>
<li>\u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002</li>
<li>\u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002</li>
</ul>
<h3 id="_5-4-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-4-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.4.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668</p>
<p>\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89C6\u9891\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//avi\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AVIFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"avi\u89C6\u9891\u6587\u4EF6\uFF1A"</span><span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//rmvb\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">REVBBFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"rmvb\u6587\u4EF6\uFF1A"</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OperatingSystemVersion</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoFile <span class="token operator">=</span> videoFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Windows\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Windows</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//mac\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mac</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Mac</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OperatingSystem</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AVIFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"\u6218\u72FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002</p>
<p>\u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E</p>
</li>
</ul>
<h3 id="_5-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.4.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002</li>
</ul>
<h2 id="_5-5-\u5916\u89C2\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-5-\u5916\u89C2\u6A21\u5F0F" aria-hidden="true">#</a> 5.5 \u5916\u89C2\u6A21\u5F0F</h2>
<h3 id="_5-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.5.1 \u6982\u8FF0</h3>
<p>\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002</p>
<p>\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528</p>
<p><img src="\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg" alt=""></p>
<h3 id="_5-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.5.2 \u7ED3\u6784</h3>
<p>\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002</li>
<li>\u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002</li>
</ul>
<h3 id="_5-5-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-5-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.5.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236</p>
<p>\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u89C6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u63A7\u5236\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirCondition</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u667A\u80FD\u97F3\u7BB1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAppliancesFacade</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Light</span> light<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">TV</span> tv<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AirCondition</span> airCondition<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8D77\u5E8A\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7761\u89C9\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61</span>
        <span class="token class-name">SmartAppliancesFacade</span> facade <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002</li>
<li>\u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6</li>
</ul>
<h3 id="_5-5-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-5-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.5.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</li>
<li>\u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002</li>
<li>\u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002</li>
</ul>
<h3 id="_5-5-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-5-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.5.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<img src="/img/image-20200207234545691.png" style="zoom:60%;" />
<p>RequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />
<p><strong>\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F</strong></p>
<p>\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002</p>
<h2 id="_5-6-\u7EC4\u5408\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-6-\u7EC4\u5408\u6A21\u5F0F" aria-hidden="true">#</a> 5.6 \u7EC4\u5408\u6A21\u5F0F</h2>
<h3 id="_5-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.6.1 \u6982\u8FF0</h3>
<img src="/img/image-20200208180417291.png" style="zoom:60%;" />
<p>\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002</p>
<h3 id="_5-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.6.2 \u7ED3\u6784</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002</li>
<li>\u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002</li>
<li>\u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002</li>
</ul>
<h3 id="_5-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355</p>
<p>\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002</p>
<img src="/img/image-20200208182322313.png" style="zoom:80%;" />
<p>\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5B9E\u73B0\uFF1A</strong></p>
<p>\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>

    <span class="token comment">//\u6DFB\u52A0\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u79FB\u9664\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u83DC\u5355\u540D\u79F0</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span> menuComponentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        menuComponentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> menuComponentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent <span class="token operator">:</span> menuComponentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            menuComponent<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Menu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuItem</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002</p>
<h3 id="_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" aria-hidden="true">#</a> 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B</h3>
<p>\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002</p>
<ul>
<li>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D <code v-pre>MenuComponent</code> \u58F0\u660E\u4E86 <code v-pre>add</code>\u3001<code v-pre>remove</code> \u3001<code v-pre>getChild</code> \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09</p>
</li>
<li>
<p>\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 <code v-pre>Menu</code> \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />
</li>
</ul>
<h3 id="_5-6-5-\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-6-5-\u4F18\u70B9" aria-hidden="true">#</a> 5.6.5 \u4F18\u70B9</h3>
<ul>
<li>\u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002</li>
<li>\u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002</li>
<li>\u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</li>
<li>\u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002</li>
</ul>
<h3 id="_5-6-6-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-6-6-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.6.6 \u4F7F\u7528\u573A\u666F</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002</p>
<h2 id="_5-7-\u4EAB\u5143\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-7-\u4EAB\u5143\u6A21\u5F0F" aria-hidden="true">#</a> 5.7 \u4EAB\u5143\u6A21\u5F0F</h2>
<h3 id="_5-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.7.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002</p>
<h3 id="_5-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.7.2 \u7ED3\u6784</h3>
<p>\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A</p>
<ol>
<li>\u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002</li>
<li>\u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002</li>
</ol>
<p>\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002</li>
<li>\u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
<li>\u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002</li>
<li>\u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
</ul>
<h3 id="_5-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757</p>
<p>\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002</p>
<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />
<p><strong>\u5148\u6765\u770B\u7C7B\u56FE\uFF1A</strong></p>
<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5982\u4E0B\uFF1A</strong></p>
<p>\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u65B9\u5757\u5F62\u72B6\uFF1A"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" \u989C\u8272\uFF1A"</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"I"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"L"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"O"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span> map<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> iBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> lBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> oBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"I"</span><span class="token punctuation">,</span> iBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"L"</span><span class="token punctuation">,</span> lBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"O"</span><span class="token punctuation">,</span> oBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F</h3>
<p><strong>1\uFF0C\u4F18\u70B9</strong></p>
<ul>
<li>\u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD</li>
<li>\u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742</p>
<p><strong>3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A</strong></p>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002</li>
<li>\u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002</li>
<li>\u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002</li>
</ul>
<h3 id="_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.7.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Integer \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200208212930857.png" style="zoom:80%;" />
<p>\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F <code v-pre>valueOf()</code> \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Integer</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">static</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>
                sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span><span class="token constant">VM</span><span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">"java.lang.Integer.IntegerCache.high"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>
                    h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            high <span class="token operator">=</span> h<span class="token punctuation">;</span>
            cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
                cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>
            <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">>=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230 <code v-pre>Integer</code> \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u6570\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 <code v-pre>valueOf</code> \u65F6\u5982\u679C\u53C2\u6570\u5728 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\u3002</p>
<h1 id="_6-\u884C\u4E3A\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-\u884C\u4E3A\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F</h1>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u7B56\u7565\u6A21\u5F0F</li>
<li>\u547D\u4EE4\u6A21\u5F0F</li>
<li>\u804C\u8D23\u94FE\u6A21\u5F0F</li>
<li>\u72B6\u6001\u6A21\u5F0F</li>
<li>\u89C2\u5BDF\u8005\u6A21\u5F0F</li>
<li>\u4E2D\u4ECB\u8005\u6A21\u5F0F</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F</li>
<li>\u8BBF\u95EE\u8005\u6A21\u5F0F</li>
<li>\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u89E3\u91CA\u5668\u6A21\u5F0F</li>
</ul>
<p>\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
<h2 id="_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</h2>
<h3 id="_6-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.1.1 \u6982\u8FF0</h3>
<p>\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002</p>
<p>\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002</p>
<h3 id="_6-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.1.2 \u7ED3\u6784</h3>
<p>\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002</p>
<ul>
<li>
<p>\u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002</p>
</li>
<li>
<p>\u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002</p>
<p>\u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>\u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002</p>
</li>
</ul>
<h3 id="_6-1-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.1.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7092\u83DC</p>
<p>\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5012\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u70ED\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_BaoCai</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7092\u624B\u6495\u5305\u83DC</span>
        <span class="token class-name">ConcreteClass_BaoCai</span> baoCai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u7092\u849C\u84C9\u83DC\u5FC3</span>
        <span class="token class-name">ConcreteClass_CaiXin</span> caiXin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_CaiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        caiXin<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002</p>
</blockquote>
<h3 id="_6-1-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.1.3 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027</p>
<p>\u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236</p>
<p>\u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002</li>
<li>\u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002</li>
</ul>
<h3 id="_6-1-4-\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-1-4-\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> 6.1.4 \u9002\u7528\u573A\u666F</h3>
<ul>
<li>\u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002</li>
<li>\u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002</li>
</ul>
<h3 id="_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.1.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>InputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A <code v-pre>read()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">></span> b<span class="token punctuation">.</span>length <span class="token operator">-</span> off<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        b<span class="token punctuation">[</span>off<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>

        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                b<span class="token punctuation">[</span>off <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C <code v-pre>read(byte b[])</code> \u65B9\u6CD5\u8C03\u7528\u4E86 <code v-pre>read(byte b[], int off, int len)</code> \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002</p>
<p>\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u3002</p>
<p>\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
<h2 id="_6-2-\u7B56\u7565\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-2-\u7B56\u7565\u6A21\u5F0F" aria-hidden="true">#</a> 6.2 \u7B56\u7565\u6A21\u5F0F</h2>
<h3 id="_6-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.2.1 \u6982\u8FF0</h3>
<p>\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002</p>
<img src="/img/image-20200210143039168.png" style="zoom:80%;" />
<p>\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002</p>
<img src="/img/image-20200210144457478.png" style="zoom:70%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002</p>
<h3 id="_6-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.2.2 \u7ED3\u6784</h3>
<p>\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002</li>
<li>\u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002</li>
<li>\u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-2-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-2-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.2.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8</p>
<p>\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E70\u4E00\u9001\u4E00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE1200\u5143\u51CF50\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyC</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528</span>
    <span class="token keyword">private</span> <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.2.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362</p>
<p>\u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002</p>
</li>
<li>
<p>\u6613\u4E8E\u6269\u5C55</p>
<p>\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C</p>
</li>
<li>
<p>\u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002</li>
<li>\u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002</li>
</ul>
<h3 id="_6-2-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-2-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.2.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002</li>
<li>\u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002</li>
<li>\u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002</li>
<li>\u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002</li>
<li>\u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p><code v-pre>Comparator</code> \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LegacyMergeSort</span><span class="token punctuation">.</span>userRequested<span class="token punctuation">)</span>
                <span class="token function">legacyMergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token class-name">TimSort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Arrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> demo <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[12, 5, 4, 3, 2, 2, 1]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 <code v-pre>compare()</code> \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TimSort</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">,</span>
                         <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> work<span class="token punctuation">,</span> <span class="token keyword">int</span> workBase<span class="token punctuation">,</span> <span class="token keyword">int</span> workLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> c <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&lt;=</span> hi <span class="token operator">&amp;&amp;</span> hi <span class="token operator">&lt;=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token keyword">int</span> nRemaining  <span class="token operator">=</span> hi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// Arrays of size 0 and 1 are always sorted</span>

        <span class="token comment">// If array is small, do a "mini-TimSort" with no merges</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token constant">MIN_MERGE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> initRunLen <span class="token operator">=</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">binarySort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> lo <span class="token operator">+</span> initRunLen<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">int</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> lo <span class="token operator">&lt;</span> hi<span class="token punctuation">;</span>
        <span class="token keyword">int</span> runHi <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>runHi <span class="token operator">==</span> hi<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">// Find end of run, and reverse range if descending</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Descending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">reverseRange</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> runHi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                              <span class="token comment">// Ascending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> runHi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 <code v-pre>countRunAndMakeAscending()</code> \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002</p>
<h2 id="_6-3-\u547D\u4EE4\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-3-\u547D\u4EE4\u6A21\u5F0F" aria-hidden="true">#</a> 6.3 \u547D\u4EE4\u6A21\u5F0F</h2>
<h3 id="_6-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.3.1 \u6982\u8FF0</h3>
<p>\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002</p>
<img src="/img/image-20200211130313251.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002</p>
<h3 id="_6-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.3.2 \u7ED3\u6784</h3>
<p>\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002</li>
<li>\u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002</li>
<li>\u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002</li>
</ul>
<h3 id="_6-3-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-3-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.3.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002</p>
<p>\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002</p>
<p>\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Order</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u8BA2\u5355\uFF1A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            receiver<span class="token punctuation">.</span><span class="token function">makeFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u996D\u5F04\u597D\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9910\u684C\u53F7\u7801</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> diningTable<span class="token punctuation">;</span>

    <span class="token comment">// \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> foodDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> diningTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>diningTable <span class="token operator">=</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> foodDic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoodDic</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        foodDic<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeniorChef</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">"\u4EFD"</span> <span class="token operator">+</span> foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">></span></span> commands<span class="token punctuation">;</span><span class="token comment">//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61</span>

    <span class="token keyword">public</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86......."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Command</span> cmd <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmd<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA2\u4E2Aorder</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u897F\u7EA2\u67FF\u9E21\u86CB\u9762"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u53EF\u4E50"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C16\u6912\u8089\u4E1D\u76D6\u996D"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u96EA\u78A7"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u63A5\u6536\u8005</span>
        <span class="token class-name">SeniorChef</span> receiver<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SeniorChef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61</span>
        <span class="token class-name">OrderCommand</span> cmd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OrderCommand</span> cmd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8C03\u7528\u8005 waitor</span>
        <span class="token class-name">Waitor</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86</span>
        invoker<span class="token punctuation">.</span><span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.3.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002</li>
<li>\u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002</li>
<li>\u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002</li>
<li>\u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002</li>
<li>\u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002</li>
</ul>
<h3 id="_6-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002</li>
</ul>
<h3 id="_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.3.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Runable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8C03\u7528\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Runnable</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> started <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            started <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>started<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    group<span class="token punctuation">.</span><span class="token function">threadStartFailed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * jdk Runnable \u547D\u4EE4\u6A21\u5F0F
 *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TurnOffThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>

     <span class="token keyword">public</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	receiver<span class="token punctuation">.</span><span class="token function">turnOFF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5\u7C7B
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">TurnOffThread</span> turnOffThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>turnOffThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" aria-hidden="true">#</a> 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F</h2>
<h3 id="_6-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.4.1 \u6982\u8FF0</h3>
<p>\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002</p>
<h3 id="_6-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.4.2 \u7ED3\u6784</h3>
<p>\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002</li>
<li>\u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002</li>
<li>\u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002</li>
</ul>
<h3 id="_6-4-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-4-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.4.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u8BF7\u5047\u6761</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeaveRequest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//\u59D3\u540D</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5929\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5185\u5BB9</span>

    <span class="token keyword">public</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5904\u7406\u8005\u62BD\u8C61\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">NUM_ONE</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">NUM_THREE</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">NUM_SEVEN</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numStart<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">;</span>

    <span class="token comment">//\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">,</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u63D0\u4EA4\u8BF7\u5047\u6761</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLeave</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> numEnd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7EE7\u7EED\u63D0\u4EA4</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6D41\u7A0B\u7ED3\u675F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5C0F\u7EC4\u957F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_ONE</span><span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_THREE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u90E8\u95E8\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_THREE</span><span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_SEVEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u603B\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_SEVEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u8BF7\u5047\u6761\u6765\u4E00\u5F20</span>
        <span class="token class-name">LeaveRequest</span> leave <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u82B1"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"\u8EAB\u4F53\u4E0D\u9002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5404\u4F4D\u9886\u5BFC</span>
        <span class="token class-name">GroupLeader</span> groupLeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeneralManager</span> generalManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        groupLeader<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406</span>
        manager<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406</span>
        <span class="token comment">//\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002</span>

        <span class="token comment">//\u63D0\u4EA4\u7533\u8BF7</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6</p>
<p>\u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027</p>
<p>\u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027</p>
<p>\u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5</p>
<p>\u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u5206\u62C5</p>
<p>\u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002</li>
<li>\u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002</li>
<li>\u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-4-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-4-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.4.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:</p>
<ul>
<li>
<p>\u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Request</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Response</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">,</span><span class="token class-name">Response</span> res<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondFilter</span>  <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterChain</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// \u94FE\u5F0F\u8C03\u7528</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterChain</span> <span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token class-name">Filter</span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> filters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Filter</span> filter <span class="token operator">=</span> filters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        index<span class="token operator">++</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Request</span>  req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Response</span> res <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span>

        <span class="token class-name">FilterChain</span> filterChain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FirstFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecondFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h2 id="_6-5-\u72B6\u6001\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-5-\u72B6\u6001\u6A21\u5F0F" aria-hidden="true">#</a> 6.5 \u72B6\u6001\u6A21\u5F0F</h2>
<h3 id="_6-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.5.1 \u6982\u8FF0</h3>
<p>\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7535\u68AF\u76844\u4E2A\u72B6\u6001</span>
    <span class="token comment">//\u5F00\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">OPENING_STATE</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5173\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">CLOSING_STATE</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">RUNNING_STATE</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">STOPPING_STATE</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lift</span> <span class="token keyword">implements</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">CLOSING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">OPENING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">OPENING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">RUNNING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">RUNNING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span> <span class="token comment">//\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">STOPPING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">STOPPING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lift</span> lift <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lift<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">ILift</span><span class="token punctuation">.</span><span class="token constant">STOPPING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u662F\u505C\u6B62\u7684</span>
        lift<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C</span>
        lift<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u95EE\u9898\u5206\u6790\uFF1A</p>
<ul>
<li>\u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002</li>
<li>\u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002</p>
<h3 id="_6-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.5.2 \u7ED3\u6784</h3>
<p>\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002</li>
<li>\u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
<li>\u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-5-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-5-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.5.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u72B6\u6001\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316</span>
    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5F00\u542F\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u542F..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u6B63\u5728\u8FD0\u884C..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoppingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5173\u95ED\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClosingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5173\u95ED..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">OpenningState</span> openningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">ClosingState</span> closeingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">RunningState</span> runningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">StoppingState</span> stoppingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C</span>


    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LiftState</span> <span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F53\u524D\u73AF\u5883\u6539\u53D8</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState <span class="token operator">=</span> liftState<span class="token punctuation">;</span>
        <span class="token comment">//\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-5-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.5.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002</li>
<li>\u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u5BF9&quot;\u5F00\u95ED\u539F\u5219&quot;\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002</li>
</ul>
<h3 id="_6-5-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-5-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.5.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002</li>
<li>\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002</li>
</ul>
<h2 id="_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F</h2>
<h3 id="_6-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.6.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002</p>
<h3 id="_6-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.6.2 \u7ED3\u6784</h3>
<p>\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002</li>
<li>ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002</li>
<li>Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002</li>
<li>ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002</li>
</ul>
<h3 id="_6-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7</p>
<p>\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5FAE\u4FE1\u7528\u6237\u540D</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u589E\u52A0\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5220\u9664\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span> weixinUserlist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> weixinUserlist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u7A0B\u5E8F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SubscriptionSubject</span> mSubscriptionSubject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237</span>
        <span class="token class-name">WeixinUser</span> user1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u5B59\u609F\u7A7A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u732A\u609F\u80FD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u6C99\u609F\u51C0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA2\u9605\u516C\u4F17\u53F7</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-6-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.6.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002</li>
<li>\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6</li>
<li>\u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83</li>
</ul>
<h3 id="_6-6-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-6-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.6.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002</li>
<li>\u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002</li>
</ul>
<h3 id="_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0</h3>
<p>\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002</p>
<p><strong>1\uFF0CObservable \u7C7B</strong></p>
<p>Observable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002</p>
<ul>
<li>
<p>void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002</p>
</li>
<li>
<p>void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002</p>
</li>
<li>
<p>void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002</p>
</li>
</ul>
<p><strong>2\uFF0CObserver \u63A5\u53E3</strong></p>
<p>Observer \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002</p>
<p>\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077</p>
<p>\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thief</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//changed  = true</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Policemen</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8B66\u5BDF\uFF1A"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thief</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u4EE3\u7801</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61</span>
        <span class="token class-name">Thief</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token string">"\u9694\u58C1\u8001\u738B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61</span>
        <span class="token class-name">Policemen</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u674E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077</span>
        t<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C0F\u5077\u5077\u4E1C\u897F</span>
        t<span class="token punctuation">.</span><span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F</h2>
<h3 id="_6-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.7.1 \u6982\u8FF0</h3>
<p>\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002</p>
<p>\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002</p>
<img src="/img/image-20200214110924010.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002</p>
<h3 id="_6-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.7.2 \u7ED3\u6784</h3>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002</p>
</li>
</ul>
<h3 id="_6-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u79DF\u623F</p>
<p>\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u4E2D\u4ECB\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u62BD\u8C61\u540C\u4E8B\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HouseOwner</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u623F\u4E3B"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tenant</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u79DF\u623F\u8005"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E2D\u4ECB\u673A\u6784</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorStructure</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F</span>
    <span class="token keyword">private</span> <span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tenant</span> tenant<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span> <span class="token function">getHouseOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHouseOwner</span><span class="token punctuation">(</span><span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>houseOwner <span class="token operator">=</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Tenant</span> <span class="token function">getTenant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTenant</span><span class="token punctuation">(</span><span class="token class-name">Tenant</span> tenant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">==</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">//\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F</span>
            tenant<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>       <span class="token comment">//\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F</span>
            houseOwner<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784</span>
        <span class="token class-name">MediatorStructure</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediatorStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF</span>
        <span class="token class-name">HouseOwner</span> houseOwner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Tenant</span> tenant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005</span>
        mediator<span class="token punctuation">.</span><span class="token function">setHouseOwner</span><span class="token punctuation">(</span>houseOwner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setTenant</span><span class="token punctuation">(</span>tenant<span class="token punctuation">)</span><span class="token punctuation">;</span>

        tenant<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        houseOwner<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-7-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-7-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.7.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u677E\u6563\u8026\u5408</p>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002</p>
</li>
<li>
<p>\u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92</p>
<p>\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002</p>
</li>
<li>
<p>\u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054</p>
<p>\u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<h3 id="_6-7-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-7-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.7.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002</li>
<li>\u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002</li>
</ul>
<h2 id="_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F</h2>
<h3 id="_6-8-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-8-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.8.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002</p>
<h3 id="_6-8-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-8-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.8.2 \u7ED3\u6784</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002</p>
</li>
</ul>
<h3 id="_6-8-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-8-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.8.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentIteratorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> currentStudent <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> currentStudent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u5B66\u751F\u5217\u8868</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-8-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-8-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.8.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002</li>
<li>\u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002</li>
<li>\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002</p>
<h3 id="_6-8-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-8-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.8.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002</li>
<li>\u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002</li>
<li>\u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002</li>
</ul>
<h3 id="_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.8.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E</p>
<ul>
<li>List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B</li>
<li>ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B</li>
<li>Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668</li>
<li>list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61</li>
</ul>
<p>\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>       <span class="token comment">// \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>

        <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token comment">//\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> size<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 <code v-pre>iterator</code> \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 <code v-pre>Iterator</code> \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0<code v-pre>java.util.Iterable</code>\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A <code v-pre>java.util.Iterator</code> \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002</p>
</blockquote>
<h2 id="_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F</h2>
<h3 id="_6-9-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-9-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.9.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002</p>
<h3 id="_6-9-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-9-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.9.2 \u7ED3\u6784</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20<code v-pre>\uFF08Element\uFF09</code>\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002</li>
<li>\u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08<code v-pre>accept</code>\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
<li>\u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002</li>
<li>\u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08<code v-pre>Element</code>\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
</ul>
<h3 id="_6-9-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-9-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.9.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF</p>
<p>\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002</p>
<ul>
<li>\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA</li>
<li>\u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B</li>
<li>\u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B</li>
<li>\u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 <code v-pre>Person</code>\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5B9E\u73B0<code v-pre>Animal</code>\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span> node <span class="token operator">:</span> nodeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6DFB\u52A0\u64CD\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Home</span> home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Someone</span> someone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-9-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-9-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.9.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u597D</p>
<p>\u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u590D\u7528\u6027\u597D</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002</p>
</li>
<li>
<p>\u5206\u79BB\u65E0\u5173\u884C\u4E3A</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE</p>
<p>\u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
<li>
<p>\u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219</p>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002</p>
</li>
</ul>
<h3 id="_6-9-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-9-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.9.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002</p>
</li>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002</p>
</li>
</ul>
<h3 id="_6-9-6-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_6-9-6-\u6269\u5C55" aria-hidden="true">#</a> 6.9.6 \u6269\u5C55</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002</p>
<p><strong>1\uFF0C\u5206\u6D3E\uFF1A</strong></p>
<p>\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 <code v-pre>Map map = new HashMap()</code> \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F <code v-pre>Map</code> \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F <code v-pre>HashMap</code> \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u9759\u6001\u5206\u6D3E(Static Dispatch)</strong> \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)</strong> \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
   	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002</p>
<p>Java \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002</p>
<p><strong>3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p>
<img src="/img/image-20200214215446638.png" style="zoom:70%;" />
<p>\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F</p>
<p><strong>\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002</strong></p>
<p><strong>4\uFF0C\u53CC\u5206\u6D3E\uFF1A</strong></p>
<p>\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F<code v-pre>\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E</code>\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002</p>
<p>\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200426233931693.png" style="zoom:67%;" />
<p><strong>\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002</strong></p>
<h2 id="_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F</h2>
<h3 id="_6-10-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-10-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.10.1 \u6982\u8FF0</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002</p>
<h3 id="_6-10-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-10-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.10.2 \u7ED3\u6784</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002</li>
<li>\u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002</li>
<li>\u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002</li>
</ul>
<blockquote>
<p>\u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A</p>
<ul>
<li><strong>\u7A84\u63A5\u53E3</strong>\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002</li>
<li><strong>\u5BBD\u63A5\u53E3</strong>\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002</li>
</ul>
</blockquote>
<h3 id="_6-10-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-10-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.10.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS</p>
<p>\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002</p>
<p>\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A</p>
<ul>
<li>\u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
</ul>
<h4 id="_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u6E38\u620F\u89D2\u8272\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002</p>
</blockquote>
<h4 id="_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06<strong>\u5907\u5FD8\u5F55\u7C7B</strong>\u8BBE\u8BA1\u6210<strong>\u53D1\u8D77\u4EBA\u7C7B</strong>\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002</p>
<p>\u5C06 <code v-pre>RoleStateMemento</code> \u8BBE\u4E3A <code v-pre>GameRole</code> \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 <code v-pre>RoleStateMemento</code> \u5BF9\u8C61\u5C01\u88C5\u5728 <code v-pre>GameRole</code> \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u7ED9 <code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 <code v-pre>GameRole</code> \u7C7B\u770B\u5230\u7684\u662F <code v-pre>RoleStateMemento</code> \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C<code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7A84\u63A5\u53E3<code v-pre>Memento</code>\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B <code v-pre>GameRole</code>\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B <code v-pre>RoleStateMemento</code>\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">/</span>\u6E38\u620F\u89D2\u8272\u7C7B
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token keyword">implements</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B <code v-pre>RoleStateCaretaker</code> \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 <code v-pre>Memento</code> \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-10-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-10-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.10.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002</li>
<li>\u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002</li>
<li>\u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002</li>
</ul>
<h3 id="_6-10-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-10-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.10.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h2 id="_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F</h2>
<h3 id="_6-11-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-11-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.11.1 \u6982\u8FF0</h3>
<img src="/img/image-20200215220322641.png" style="zoom:60%;" />
<p>\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> i <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002</p>
<p>\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<blockquote>
<p>\u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002</p>
</blockquote>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002</p>
<p>\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F</p>
<p><strong>\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A</strong></p>
<p>\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>expression ::= value | plus | minus
plus ::= expression \u2018+\u2019 expression
minus ::= expression \u2018-\u2019 expression
value ::= integer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002</p>
</blockquote>
<p>\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A</p>
<p>\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002</p>
<p><strong>\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A</strong></p>
<p>\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002</p>
<p>\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002</p>
<img src="/img/image-20200215225227616.png" style="zoom:50%;" />
<h3 id="_6-11-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-11-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.11.2 \u7ED3\u6784</h3>
<p>\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>
<p>\u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002</p>
</li>
<li>
<p>\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002</p>
</li>
<li>
<p>\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002</p>
</li>
<li>
<p>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002</p>
</li>
<li>
<p>\u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002</p>
</li>
</ul>
<h3 id="_6-11-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-11-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.11.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6</p>
<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u89D2\u8272AbstractExpression</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" + "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" - "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Variable</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Variable</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Value v = new Value(1);</span>

        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AbstractExpression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>expression <span class="token operator">+</span> <span class="token string">"= "</span> <span class="token operator">+</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-11-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-11-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.11.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002</p>
<p>\u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002</p>
</li>
<li>
<p>\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002</p>
<p>\u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 &quot;\u5F00\u95ED\u539F\u5219&quot;\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002</p>
</li>
</ul>
<ul>
<li>
<p>\u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
</li>
</ul>
<h3 id="_6-11-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-11-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.11.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002</p>
</li>
</ul>
<h1 id="_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" tabindex="-1"><a class="header-anchor" href="#_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" aria-hidden="true">#</a> 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6</h1>
<h2 id="_7-1-spring-\u4F7F\u7528\u56DE\u987E" tabindex="-1"><a class="header-anchor" href="#_7-1-spring-\u4F7F\u7528\u56DE\u987E" aria-hidden="true">#</a> 7.1 spring \u4F7F\u7528\u56DE\u987E</h2>
<p>\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002</p>
<ul>
<li>
<p>\u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userDaoImpl ...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userServiceImpl ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61</span>
        <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5</span>
        userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">></span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.service.impl.UserServiceImpl"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"userDao"</span> ref<span class="token operator">=</span><span class="token string">"userDao"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userDao"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.dao.impl.UserDaoImpl"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429165544151.png" style="zoom:60%;" />
</li>
</ul>
<p>\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>\u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002</li>
<li>UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002</li>
</ul>
<p>\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09</p>
<h2 id="_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" aria-hidden="true">#</a> 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784</h2>
<p>Spring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:</p>
<p>\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A</p>
<img src="/img/image-20200429111324770.png" style="zoom:40%;" />
<p>\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002</p>
<ul>
<li>spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002</li>
<li>spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002</li>
<li>spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002</li>
<li>spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002</li>
<li>spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002</li>
</ul>
<h3 id="_7-1-1-bean-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_7-1-1-bean-\u6982\u8FF0" aria-hidden="true">#</a> 7.1.1 bean \u6982\u8FF0</h3>
<p>Spring \u5C31\u662F\u9762\u5411 <code v-pre>Bean</code> \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</p>
<p>spring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F</p>
<ul>
<li>spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002</li>
</ul>
<h2 id="_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" aria-hidden="true">#</a> 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790</h2>
<h3 id="_7-3-1-beanfactory-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-1-beanfactory-\u89E3\u6790" aria-hidden="true">#</a> 7.3.1 BeanFactory \u89E3\u6790</h3>
<p>Spring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429185050396.png" style="zoom:60%;" />
<p>\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002</p>
<p>\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F</p>
<p>\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C</p>
<ul>
<li>ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002</li>
<li>HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean</li>
<li>AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002</li>
</ul>
<p>\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> <span class="token constant">FACTORY_BEAN_PREFIX</span> <span class="token operator">=</span> <span class="token string">"&amp;"</span><span class="token punctuation">;</span>

	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>

	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">ResolvableType</span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B</span>
	<span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isPrototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">ResolvableType</span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAliases</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002</p>
<p>BeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002</p>
<img src="/img/image-20200430220155371.png" style="zoom:60%;" />
<p>\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A</p>
<ul>
<li>ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002</li>
</ul>
<h3 id="_7-3-2-beandefinition-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-2-beandefinition-\u89E3\u6790" aria-hidden="true">#</a> 7.3.2 BeanDefinition \u89E3\u6790</h3>
<p>Spring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>

bean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A
	scope\u3001init-method\u3001destory-method\u7B49\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204239868.png" style="zoom:60%;" />
<h3 id="_7-3-3-beandefinitionreader-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-3-beandefinitionreader-\u89E3\u6790" aria-hidden="true">#</a> 7.3.3 BeanDefinitionReader \u89E3\u6790</h3>
<p>Bean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204700956.png" style="zoom:60%;" />
<p>\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61</span>
	<span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ResourceLoader</span> <span class="token function">getResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ClassLoader</span> <span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">BeanNameGenerator</span> <span class="token function">getBeanNameGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*
		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D
	*/</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span> resource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> resources<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> locations<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-4-beandefinitionregistry-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-4-beandefinitionregistry-\u89E3\u6790" aria-hidden="true">#</a> 7.3.4 BeanDefinitionRegistry \u89E3\u6790</h3>
<p>BeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token keyword">extends</span> <span class="token class-name">AliasRegistry</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean</span>
	<span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429211132185.png" style="zoom:60%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A</p>
<ul>
<li>
<p>DefaultListableBeanFactory</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
<li>
<p>SimpleBeanDefinitionRegistry</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
</ul>
<h3 id="_7-3-5-\u521B\u5EFA\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_7-3-5-\u521B\u5EFA\u5BB9\u5668" aria-hidden="true">#</a> 7.3.5 \u521B\u5EFA\u5BB9\u5668</h3>
<p>ClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002</p>
<h2 id="_7-4-\u81EA\u5B9A\u4E49-springioc" tabindex="-1"><a class="header-anchor" href="#_7-4-\u81EA\u5B9A\u4E49-springioc" aria-hidden="true">#</a> 7.4 \u81EA\u5B9A\u4E49 SpringIOC</h2>
<p>\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" aria-hidden="true">#</a> 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B</h3>
<h4 id="_7-4-1-1-propertyvalue-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-propertyvalue-\u7C7B" aria-hidden="true">#</a> 7.4.1.1 PropertyValue \u7C7B</h4>
<p>\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyValue</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ref<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> ref<span class="token punctuation">,</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRef</span><span class="token punctuation">(</span><span class="token class-name">String</span> ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-2-mutablepropertyvalues-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-2-mutablepropertyvalues-\u7C7B" aria-hidden="true">#</a> 7.4.1.2 MutablePropertyValues \u7C7B</h4>
<p>\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MutablePropertyValues</span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token punctuation">(</span>propertyValueList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> propertyValueList <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> pv<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValueList<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PropertyValue</span> currentPv <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pv<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pv<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-3-beandefinition-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-3-beandefinition-\u7C7B" aria-hidden="true">#</a> 7.4.1.3 BeanDefinition \u7C7B</h4>
<p>BeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDefinition</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> className<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValues <span class="token operator">=</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3</h4>
<p>BeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</li>
<li>\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61</li>
<li>\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</span>
    <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61</span>
    <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token comment">//\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-2-2-simplebeandefinitionregistry-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-2-simplebeandefinitionregistry-\u7C7B" aria-hidden="true">#</a> 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B</h4>
<p>\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-3-1-beandefinitionreader-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-3-1-beandefinitionreader-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.3.1 BeanDefinitionReader \u63A5\u53E3</h4>
<p>BeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A</p>
<ul>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002</li>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C</span>
    <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-3-2-xmlbeandefinitionreader-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-2-xmlbeandefinitionreader-\u7C7B" aria-hidden="true">#</a> 7.4.3.2 XmlBeanDefinitionReader \u7C7B</h4>
<p>XmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlBeanDefinitionReader</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SAXReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u89E3\u6790bean\u6807\u7B7E</span>
        <span class="token function">parseBean</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseBean</span><span class="token punctuation">(</span><span class="token class-name">Element</span> rootElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">"property"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MutablePropertyValues</span> mutablePropertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element1 <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> ref <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"ref"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>ref<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                mutablePropertyValues<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setPropertyValues</span><span class="token punctuation">(</span>mutablePropertyValues<span class="token punctuation">)</span><span class="token punctuation">;</span>

            registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-4-1-beanfactory-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-1-beanfactory-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.1 BeanFactory \u63A5\u53E3</h4>
<p>\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-2-applicationcontext-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-2-applicationcontext-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.2 ApplicationContext \u63A5\u53E3</h4>
<p>\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 <code v-pre>refresh()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A</p>
<ul>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002</li>
<li>\u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA</span>
    <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-3-abstractapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-3-abstractapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.3 AbstractApplicationContext \u7C7B</h4>
<ul>
<li>
<p>\u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002</p>
</li>
<li>
<p>\u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
<p>BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002</p>
</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">BeanDefinitionReader</span> beanDefinitionReader<span class="token punctuation">;</span>
    <span class="token comment">//\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61</span>
    <span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> configLocation<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//\u52A0\u8F7DBeanDefinition</span>
        beanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521D\u59CB\u5316bean</span>
        <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//bean\u7684\u521D\u59CB\u5316</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanNames <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002</p>
</blockquote>
<h4 id="_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.4 ClassPathXmlApplicationContext \u7C7B</h4>
<p>\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002</li>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002</li>
<li>\u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathXmlApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configLocation <span class="token operator">=</span> configLocation<span class="token punctuation">;</span>
        <span class="token comment">//\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61</span>
        beanDefinitionReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//return singletonObjects.get(name);</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> singletonObjects<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>beanDefinition <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> beanObj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MutablePropertyValues</span> propertyValues <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> propertyName <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> ref <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>ref <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        singletonObjects<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>beanObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> beanObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bean <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" aria-hidden="true">#</a> 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3</h3>
<h4 id="_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F</h4>
<ul>
<li>\u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002</li>
<li>\u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002</li>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002</li>
</ul>
<p>spring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002</p>
<h4 id="_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219</h4>
<h4 id="_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" tabindex="-1"><a class="header-anchor" href="#_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" aria-hidden="true">#</a> 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165</h4>
<p>spring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A</p>
<ul>
<li>\u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002</li>
<li>\u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002</li>
<li>\u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002</li>
</ul>
`,date:"2022-08-19",deps:[],links:[],pathInferred:"/posts/design-pattern/",pathLocale:"/",permalink:null,routeMeta:{title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"},sfcBlocks:[],slug:"README",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/design-pattern/README.md",filePathRelative:"posts/design-pattern/README.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/design-pattern/index.html.vue",componentFilePathRelative:"pages/posts/design-pattern/index.html.vue",componentFileChunkName:"v-db9b3b8e",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/design-pattern/index.html.js",dataFilePathRelative:"pages/posts/design-pattern/index.html.js",dataFileChunkName:"v-db9b3b8e",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/design-pattern/index.html",htmlFilePathRelative:"posts/design-pattern/index.html"},title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"},["/posts/design-pattern/index.html","/posts/design-pattern/README.md"]],["v-cc63cd18","/posts/other/algoliaSearch.html",{_blog:{data:{key:"v-cc63cd18",path:"/posts/other/algoliaSearch.html",title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",date:"2022-07-22T09:07:35.000Z",description:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",tag:["Algolia"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210908451.jpg",sticky:3,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/algoliaSearch.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:description",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Algolia"}],["meta",{property:"article:published_time",content:"2022-07-22T09:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?",slug:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u5982\u4F55\u4F7F\u7528 Algolia?",slug:"\u5982\u4F55\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u6570\u636E\u722C\u53D6",slug:"\u6570\u636E\u722C\u53D6",children:[]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/algoliaSearch.md",readingTime:{minutes:6.14,words:1841},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/algoliaSearch.html`},key:"v-cc63cd18",path:"/posts/other/algoliaSearch.html",title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",date:"2022-07-22T09:07:35.000Z",description:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",tag:["Algolia"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210908451.jpg",sticky:3,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/algoliaSearch.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:description",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Algolia"}],["meta",{property:"article:published_time",content:"2022-07-22T09:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?",slug:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u5982\u4F55\u4F7F\u7528 Algolia?",slug:"\u5982\u4F55\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u6570\u636E\u722C\u53D6",slug:"\u6570\u636E\u722C\u53D6",children:[]}],content:`---
title: VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22
date: 2022-07-22 9:07:35
description: VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22
tag:
  - Algolia
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210908451.jpg
sticky: 3
---

&emsp;Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002

<!-- more -->

:::tip
1 Algolia \u7BA1\u7406\u540E\u53F0\u5730\u5740\uFF1A  
<https://www.algolia.com/apps/09V7PWK61N/explorer/browse/anyfork?searchMode=search>  
2 Algolia \u722C\u866B\u540E\u53F0\u5730\u5740\uFF1A  
<https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview>  
3 Algolia GitHub \u5730\u5740:  
<https://github.com/algolia/docsearch>
:::

## \u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?

- 1\u3001\u7531\u4E8E VuePress \u7684\u5185\u7F6E\u641C\u7D22\u53EA\u4F1A\u4E3A\u9875\u9762\u7684\u6807\u9898\u3001h2 \u3001 h3 \u4EE5\u53CA tags \u6784\u5EFA\u641C\u7D22\u7D22\u5F15\u3002\u5982\u679C\u4F60\u9700\u8981\u5168\u6587\u641C\u7D22\uFF0C\u5185\u7F6E\u641C\u7D22\u65E0\u6CD5\u5B9E\u73B0\uFF0C\u53EF\u5219\u4EE5\u4F7F\u7528 Algolia \u641C\u7D22\u3002
- 2\u3001\u4F7F\u7528 Algolia \u641C\u7D22\u6700\u5927\u7684\u597D\u5904\u5C31\u662F\u65B9\u4FBF\uFF0C\u5B83\u4F1A\u81EA\u52A8\u722C\u53D6\u7F51\u7AD9\u7684\u9875\u9762\u5185\u5BB9\u5E76\u6784\u5EFA\u7D22\u5F15\uFF0C\u4F60\u53EA\u7528\u7533\u8BF7\u4E00\u4E2A Algolia \u670D\u52A1\uFF0C\u5728\u7F51\u7AD9\u4E0A\u6DFB\u52A0\u4E00\u4E9B\u4EE3\u7801\uFF0C\u5C31\u50CF\u6DFB\u52A0\u7EDF\u8BA1\u4EE3\u7801\u4E00\u6837\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5B9E\u73B0\u4E00\u4E2A\u5168\u6587\u641C\u7D22\u529F\u80FD\uFF0C\u64CD\u4F5C\u7B80\u5355\u8FD8\u65B9\u4FBF\uFF0C\u5BB9\u9519\u7387\u5F88\u9AD8\u3002
- 3\u3001\u4F7F\u7528\u8303\u56F4\u5E7F\uFF0C\u76EE\u524D\u5F88\u591A\u5E94\u7528\u7684\u5B98\u65B9\u6587\u6863(\u4F8B\u5982\uFF1Avue.js,vite,vuepress \u7B49)\u5747\u4F7F\u7528 Algolia \u8FDB\u884C\u5168\u6587\u641C\u7D22\uFF0C\u800C\u4E14\u652F\u6301\u591A\u79CD Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u81EA\u52A8\u548C\u624B\u52A8\u722C\u53D6\u7D22\u5F15\u3002\u5C55\u793A\u6548\u679C\u5982\u4E0B:![\u914D\u7F6E\u9875\u9762](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210920996.png)

## \u5982\u4F55\u4F7F\u7528 Algolia?

- 1\u3001**\u641C\u7D22\u670D\u52A1\u7533\u8BF7**

  - 1\u3001\u7533\u8BF7\u5730\u5740\uFF1A<https://docsearch.algolia.com/apply/>
  - 2\u3001\u586B\u5199\u5E94\u7528 Algolia \u641C\u7D22\u670D\u52A1\u7684\u7AD9\u70B9\u5730\u5740\uFF0C\u80FD\u591F\u5BF9\u5916\u8BBF\u95EE\u3002
  - 3\u3001\u586B\u5199\u4E2A\u4EBA\u90AE\u7BB1\uFF0C\u7533\u8BF7\u901A\u8FC7\u540E\u4F1A\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u5305\u542B\u5F00\u901A\u7684\u5E94\u7528\u4FE1\u606F\u4EE5\u53CA\u8FDB\u884C\u540E\u7EED\u5176\u4ED6\u64CD\u4F5C\u7684\u8BF4\u660E\u3002
  - 4\u3001\u586B\u5199\u516C\u5F00\u7684\u4ED3\u5E93\u5730\u5740\uFF0C\u6B64\u4ED3\u5E93\u5B58\u653E\u7AD9\u70B9\u6E90\u7801\u3002

  \u586B\u5B8C\u4E4B\u540E\u4E00\u5468\u4E4B\u5185\uFF0C\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u6309\u7167\u90AE\u4EF6\u5185\u5BB9\u8FDB\u884C\u64CD\u4F5C\u3002\u8BB0\u4F4F\u4E00\u5B9A\u8981\u56DE\u590D\u90AE\u4EF6\uFF0C\u544A\u8BC9\u81EA\u5DF1\u5C31\u662F\u7F51\u7AD9\u7684\u7EF4\u62A4\u8005\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4FEE\u6539\u4EE3\u7801\uFF0C\u5426\u5219\u8D85\u8FC7\u65F6\u95F4\u4E0D\u56DE\u590D\uFF0C\u7533\u8BF7\u7684\u5E94\u7528\u4F1A\u88AB\u81EA\u52A8\u9500\u6BC1\u3002

- 2\u3001**\u4EE3\u7801\u914D\u7F6E**

  - 1\u3001\u5982\u679C\u4F60\u7528\u7684\u662F\`VuePress 1.x\` \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0CVuePress \u76F4\u63A5\u63D0\u4F9B\u4E86 themeConfig.algolia \u9009\u9879\u6765\u7528 Algolia \u641C\u7D22\u66FF\u6362\u5185\u7F6E\u7684\u641C\u7D22\u6846\uFF0C\u4F60\u53EA\u7528\u5982\u6B64\u7B80\u5355\u7684\u914D\u7F6E\u5373\u53EF\u5B9E\u73B0\u5168\u6587\u641C\u7D22\u3002

  \`\`\`js
  // .vuepress/config.js
  module.exports = {
    themeConfig: {
      algolia: {
        apiKey: '<API_KEY>',
        indexName: '<INDEX_NAME>'
        // \u5982\u679C Algolia \u6CA1\u6709\u4E3A\u4F60\u63D0\u4F9B \`appId\` \uFF0C\u4F7F\u7528 \`BH4D9OD16A\` \u6216\u8005\u79FB\u9664\u8BE5\u914D\u7F6E\u9879
        appId: '<APP_ID>',
      }
    }
  }

  \`\`\`

  - 2\u3001\u5982\u679C\u4F60\u7528\u7684\u662F\`VuePress 2.x\` \u7684\u9ED8\u8BA4\u4E3B\u9898\u6216\u8005\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u53EF\u4EE5\u901A\u8FC7\`DocSearch\`\u63D2\u4EF6\u8FDB\u884C\u914D\u7F6E\uFF0C\u63D2\u4EF6\u914D\u7F6E\u5B8C\u6BD5\u4EE5\u540E\uFF0C\u5728\`Navbar\`\u4E2D\u81EA\u52A8\u751F\u6210\u641C\u7D22\u6846\u3002\`DocSearch\`\u63D2\u4EF6\u914D\u7F6E\u5982\u4E0B\u3002

  \`\`\`js
  // .vuepress/config.js
  import { docsearchPlugin } from '@vuepress/plugin-docsearch'
  module.exports = {
    plugins: [
      //docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html
      docsearchPlugin({
        apiKey: 'e3224f6a8f05632af9c14c97******b54',
        indexName: 'anyfork',
        appId: '09V****WK61N',
        placeholder: '\u641C\u7D22\u6587\u6863',
        locales: {
          '/': {
            placeholder: '\u641C\u7D22\u6587\u6863',
            translations: {
              button: {
                buttonText: '\u641C\u7D22\u6587\u6863'
              }
            }
          }
        }
      })
    ]
  }
  \`\`\`

  - 3\u3001\u5982\u679C\u4F60\u7528\u7684\u4E0D\u662F VuePress \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u5C31\u6BD4\u5982\u6211\u7528\u7684\u662F\`vuepress-theme-reco 1.x\`\uFF0C\u5B83\u7684\u641C\u7D22\u680F\u662F\u81EA\u5DF1\u5B9E\u73B0\u7684\uFF0C\u6240\u4EE5\u6DFB\u52A0\u4E0A\u8FF0\u7684\u914D\u7F6E\u662F\u4E0D\u4F1A\u6709\u6548\u679C\u7684(1.6.10 \u7248\u672C\u4E2D\u81EA\u5B9A\u4E49\u7684\`AlgoliaSearchBox.vue\`\u7EC4\u4EF6\u5B58\u5728\u5F88\u591A bug)\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u9700\u8981\u9075\u7167\u90AE\u4EF6\u4E2D\u7684\u65B9\u6CD5\uFF0C\u624B\u52A8\u6DFB\u52A0 CSS \u548C JavaScript \u6587\u4EF6\u3002\u5982\u679C\u4F60\u76F4\u63A5\u5F15\u5165 vuepress-theme-reco 1.x \u5305\uFF0C\u4F7F\u7528\u6309\u7167\u4E0B\u9762\u6B65\u9AA4\u8FDB\u884C\u914D\u7F6E\uFF1A

  1 \u6211\u4EEC\u9700\u8981\u5148\u4FEE\u6539\u4E0B config.js:

  \`\`\`js
  module.exports = {
    head: [
      ['link', { href: 'https://cdn.jsdelivr.net/npm/@docsearch/css@3', rel: 'stylesheet' }],
      ['script', { language: 'javascript', type: 'text/javascript', src: 'https://cdn.jsdelivr.net/npm/@docsearch/js@3' }]
    ]
  }
  \`\`\`

  2 \u7136\u540E\u4FEE\u6539.vuepress/enhanceApp.js \u6587\u4EF6\uFF1A

  \`\`\`js
  export default ({ router, Vue, isServer }) => {
    Vue.mixin({
      mounted() {
        // \u4E0D\u52A0 setTimeout \u4F1A\u6709\u62A5\u9519\uFF0C\u4F46\u4E0D\u5F71\u54CD\u6548\u679C
        setTimeout(() => {
          try {
            docsearch({
              appId: '43GX903BPS',
              apiKey: 'feff649032d8034cf2a636ef55d96054',
              indexName: 'ts-yayujs',
              container: '.search-box',
              debug: false
            })
          } catch (e) {
            console.log(e)
          }
        }, 100)
      }
    })
  }
  \`\`\`

\u5982\u679C\u4F60\u662F\u5C06 vuepress-theme-reco 1.x \u4E3B\u9898\u8FDB\u884C\u672C\u5730\u5316\u9B54\u6539\uFF0C\u4E3B\u9898\u4E2D\`Alglia\`\u914D\u7F6E\u4E0D\u53D8\uFF0C\u53EF\u4EE5\u5BF9\u81EA\u5B9A\u4E49\u7EC4\u4EF6\`AlgoliaSearchBox.vue\`\u4FEE\u6539\u5982\u4E0B\uFF1A

\`\`\`vue
<template>
  <div id="algolia-search-input" class="search-box"></div>
</template>
<script>
import { defineComponent, ref, onMounted } from 'vue'
import { RecoIcon } from '@vuepress-reco/core/lib/components'
import { useInstance } from '@theme/helpers/composable'
export default defineComponent({
  props: ['options'],
  setup(props, ctx) {
    const initialize = (userOptions) => {
      const { algoliaOptions = {} } = userOptions
      docsearch(
        Object.assign({}, userOptions, {
          container: '#algolia-search-input',
          algoliaOptions: algoliaOptions
        })
      )
    }
    onMounted(() => {
      initialize(props.options)
    })
  }
})
<\/script>
<style>
.search-box .DocSearch.DocSearch-Button {
  cursor: text;
  height: 2rem;
  color: #5b5b5b;
  border: 1px solid var(--border-color);
  border-radius: 2rem;
  font-size: 0.9rem;
  padding: 0 0.5rem 0 0rem;
  outline: none;
  transition: all 0.2s ease;
  background: transparent;
  background-size: 1rem;
  margin: 0px;
}

.search-box .DocSearch-Button-Container {
  margin-left: 0.4rem;
}

.search-box .DocSearch-Button .DocSearch-Search-Icon {
  width: 15px;
  height: 15px;
  position: relative;
  top: 0.1rem;
}

.search-box .DocSearch-Button-Placeholder {
  font-size: 0.8rem;
}

.search-box .DocSearch-Button-Keys {
  display: flex;
  right: 0.1rem;
}

.search-box .DocSearch-Button-Key {
  font-size: 12px;
  line-height: 15px;
  width: 15px;
  height: 15px;
}
</style>
\`\`\`

\u6CE8\u610F\u5176\u4E2D\u7684 container\uFF0C\u53C2\u8003 [docsearch](https://github.com/algolia/docsearch) \u7684\u5B98\u65B9\u4ED3\u5E93\uFF0C\u8FD9\u91CC\u63D0\u4F9B\u7684\u4E0D\u662F input \u8F93\u5165\u6846\u7684\u9009\u62E9\u5668\uFF0C\u800C\u662F\u4E00\u4E2A\u6302\u8F7D\u8282\u70B9\uFF0C\u6BD4\u5982 div \u7684\u9009\u62E9\u5668\u3002\u5982\u679C\u6837\u5F0F\u81EA\u5DF1\u4E0D\u559C\u6B22\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\`vuepress/styles/index.styl\`\u8986\u76D6\u76EE\u524D\u7684\u6837\u5F0F\u3002\u6700\u7EC8\u6548\u679C\u5982\u4E0B\uFF1A![\u6700\u7EC8\u6548\u679C](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211001028.png)

## \u6570\u636E\u722C\u53D6

- 1\u3001\u914D\u7F6E\u5B8C\u6BD5\u540E\u5C06\u7F51\u7AD9\u8FDB\u884C\u91CD\u65B0\u90E8\u7F72\uFF0C\u67E5\u770B\`Algolia\`\u5168\u5C40\u641C\u7D22\u662F\u5426\u6709\u6570\u636E\u3002
- 2\u3001\u5982\u679C\u4F60\u641C\u4EFB\u4F55\u6570\u636E\uFF0C\u90FD\u663E\u793A\u641C\u7D22\u4E0D\u5230\u6570\u636E\uFF0C\u90A3\u5F88\u53EF\u80FD\u662F\u722C\u53D6\u7684\u6570\u636E\u6709\u95EE\u9898\uFF0C\u6211\u4EEC\u767B\u9646 <https://www.algolia.com/> \u6253\u5F00\u7BA1\u7406\u540E\u53F0\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u91CC\u7684 Search\uFF0C\u67E5\u770B\u5BF9\u5E94\u7684 indexName \u6570\u636E\uFF0C\u5982\u679C Browse \u8FD9\u91CC\u6CA1\u6709\u663E\u793A\u6570\u636E\uFF0C\u90A3\u8BF4\u660E\u722C\u53D6\u7684\u6570\u636E\u53EF\u80FD\u6709\u95EE\u9898\uFF0C\u5BFC\u81F4\u6CA1\u6709\u751F\u6210\u5BF9\u5E94\u7684 Records\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211111162.png)
  \u5982\u679C\u6CA1\u6709\u6570\u636E\uFF0C\u90A3\u6211\u4EEC\u5C31\u67E5\u4E0B\u722C\u53D6\u7684\u903B\u8F91\uFF0C\u6253\u5F00\u722C\u866B\u540E\u53F0\uFF1A<https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview>\uFF0C\u70B9\u51FB\u5BF9\u5E94 indexName \u8FDB\u5165\u540E\u53F0\uFF1A
  ![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211115127.png)\u5982\u679C\u663E\u793A\u6210\u529F\u722C\u53D6\uFF0C\u4E5F\u6709 Monitoring Success \u7684\u6570\u636E\uFF0C\u4F46 Records \u4E3A 0\uFF0C\u90A3\u5927\u6982\u662F\u722C\u866B\u63D0\u53D6\u6570\u636E\u7684\u903B\u8F91\u6709\u95EE\u9898\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u4E2D\u7684 Editor\uFF0C\u67E5\u770B\u5177\u4F53\u7684\u722C\u866B\u903B\u8F91\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211119981.png)\u50CF pathsToMatch \u8FD9\u91CC\u5982\u679C\u662F'<https://anyfork.github.io/blog-docs/docs/>**'\uFF0C\u4F46\u4F60\u7684\u7F51\u5740\u90FD\u662F [https://anyfork.github.io/blog-docs/\\*\\*](https://anyfork.github.io/blog-docs/**)\u5F00\u5934\u7684\uFF0C\u90A3\u8FD9\u91CC\u5927\u6982\u5C31\u662F\u4F1A\u63D0\u53D6\u9519\u8BEF\uFF0C\u4FEE\u6539\u4E00\u4E0B\uFF0C\u7136\u540E\u70B9\u51FB\u53F3\u4FA7\u7684\u6570\u636E\u8FDB\u884C\u6D4B\u8BD5\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211126112.png)\u5982\u679C\u80FD\u50CF\u8FD9\u6837\u63D0\u53D6\u5230\u6570\u636E\uFF0C\u5C31\u8BF4\u660E\u6CA1\u6709\u4EC0\u4E48\u95EE\u9898\u4E86\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Save\uFF0C\u7136\u540E\u5207\u6362\u56DE Overview\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Restart crawling\uFF0C\u6211\u4EEC\u91CD\u65B0\u722C\u53D6\u4E00\u4E0B\u6570\u636E\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211128410.png)\u9664\u4E86\u624B\u52A8\u8FDB\u884C\u722C\u53D6\u4E4B\u5916\uFF0C\`Algolia\`\u722C\u866B\u540E\u53F0\u4F1A\u5B9A\u65F6\u722C\u53D6\u6570\u636E\u3002\u81F3\u6B64\uFF0C VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22\u5C31\u914D\u7F6E\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u5F00\u59CB\u5427\uFF01

**\u53C2\u8003\u6587\u7AE0**\uFF1A<https://blog.csdn.net/weixin_55475226/article/details/123363042>
`,contentRendered:`<p>\u2003Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
<!-- more -->
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1 Algolia \u7BA1\u7406\u540E\u53F0\u5730\u5740\uFF1A<br>
<a href="https://www.algolia.com/apps/09V7PWK61N/explorer/browse/anyfork?searchMode=search" target="_blank" rel="noopener noreferrer">https://www.algolia.com/apps/09V7PWK61N/explorer/browse/anyfork?searchMode=search<ExternalLinkIcon/></a><br>
2 Algolia \u722C\u866B\u540E\u53F0\u5730\u5740\uFF1A<br>
<a href="https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview" target="_blank" rel="noopener noreferrer">https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview<ExternalLinkIcon/></a><br>
3 Algolia GitHub \u5730\u5740:<br>
<a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer">https://github.com/algolia/docsearch<ExternalLinkIcon/></a></p>
</div>
<h2 id="\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?</h2>
<ul>
<li>1\u3001\u7531\u4E8E VuePress \u7684\u5185\u7F6E\u641C\u7D22\u53EA\u4F1A\u4E3A\u9875\u9762\u7684\u6807\u9898\u3001h2 \u3001 h3 \u4EE5\u53CA tags \u6784\u5EFA\u641C\u7D22\u7D22\u5F15\u3002\u5982\u679C\u4F60\u9700\u8981\u5168\u6587\u641C\u7D22\uFF0C\u5185\u7F6E\u641C\u7D22\u65E0\u6CD5\u5B9E\u73B0\uFF0C\u53EF\u5219\u4EE5\u4F7F\u7528 Algolia \u641C\u7D22\u3002</li>
<li>2\u3001\u4F7F\u7528 Algolia \u641C\u7D22\u6700\u5927\u7684\u597D\u5904\u5C31\u662F\u65B9\u4FBF\uFF0C\u5B83\u4F1A\u81EA\u52A8\u722C\u53D6\u7F51\u7AD9\u7684\u9875\u9762\u5185\u5BB9\u5E76\u6784\u5EFA\u7D22\u5F15\uFF0C\u4F60\u53EA\u7528\u7533\u8BF7\u4E00\u4E2A Algolia \u670D\u52A1\uFF0C\u5728\u7F51\u7AD9\u4E0A\u6DFB\u52A0\u4E00\u4E9B\u4EE3\u7801\uFF0C\u5C31\u50CF\u6DFB\u52A0\u7EDF\u8BA1\u4EE3\u7801\u4E00\u6837\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5B9E\u73B0\u4E00\u4E2A\u5168\u6587\u641C\u7D22\u529F\u80FD\uFF0C\u64CD\u4F5C\u7B80\u5355\u8FD8\u65B9\u4FBF\uFF0C\u5BB9\u9519\u7387\u5F88\u9AD8\u3002</li>
<li>3\u3001\u4F7F\u7528\u8303\u56F4\u5E7F\uFF0C\u76EE\u524D\u5F88\u591A\u5E94\u7528\u7684\u5B98\u65B9\u6587\u6863(\u4F8B\u5982\uFF1Avue.js,vite,vuepress \u7B49)\u5747\u4F7F\u7528 Algolia \u8FDB\u884C\u5168\u6587\u641C\u7D22\uFF0C\u800C\u4E14\u652F\u6301\u591A\u79CD Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u81EA\u52A8\u548C\u624B\u52A8\u722C\u53D6\u7D22\u5F15\u3002\u5C55\u793A\u6548\u679C\u5982\u4E0B:<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210920996.png" alt="\u914D\u7F6E\u9875\u9762"></li>
</ul>
<h2 id="\u5982\u4F55\u4F7F\u7528-algolia" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u4F7F\u7528-algolia" aria-hidden="true">#</a> \u5982\u4F55\u4F7F\u7528 Algolia?</h2>
<ul>
<li>
<p>1\u3001<strong>\u641C\u7D22\u670D\u52A1\u7533\u8BF7</strong></p>
<ul>
<li>1\u3001\u7533\u8BF7\u5730\u5740\uFF1A<a href="https://docsearch.algolia.com/apply/" target="_blank" rel="noopener noreferrer">https://docsearch.algolia.com/apply/<ExternalLinkIcon/></a></li>
<li>2\u3001\u586B\u5199\u5E94\u7528 Algolia \u641C\u7D22\u670D\u52A1\u7684\u7AD9\u70B9\u5730\u5740\uFF0C\u80FD\u591F\u5BF9\u5916\u8BBF\u95EE\u3002</li>
<li>3\u3001\u586B\u5199\u4E2A\u4EBA\u90AE\u7BB1\uFF0C\u7533\u8BF7\u901A\u8FC7\u540E\u4F1A\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u5305\u542B\u5F00\u901A\u7684\u5E94\u7528\u4FE1\u606F\u4EE5\u53CA\u8FDB\u884C\u540E\u7EED\u5176\u4ED6\u64CD\u4F5C\u7684\u8BF4\u660E\u3002</li>
<li>4\u3001\u586B\u5199\u516C\u5F00\u7684\u4ED3\u5E93\u5730\u5740\uFF0C\u6B64\u4ED3\u5E93\u5B58\u653E\u7AD9\u70B9\u6E90\u7801\u3002</li>
</ul>
<p>\u586B\u5B8C\u4E4B\u540E\u4E00\u5468\u4E4B\u5185\uFF0C\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u6309\u7167\u90AE\u4EF6\u5185\u5BB9\u8FDB\u884C\u64CD\u4F5C\u3002\u8BB0\u4F4F\u4E00\u5B9A\u8981\u56DE\u590D\u90AE\u4EF6\uFF0C\u544A\u8BC9\u81EA\u5DF1\u5C31\u662F\u7F51\u7AD9\u7684\u7EF4\u62A4\u8005\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4FEE\u6539\u4EE3\u7801\uFF0C\u5426\u5219\u8D85\u8FC7\u65F6\u95F4\u4E0D\u56DE\u590D\uFF0C\u7533\u8BF7\u7684\u5E94\u7528\u4F1A\u88AB\u81EA\u52A8\u9500\u6BC1\u3002</p>
</li>
<li>
<p>2\u3001<strong>\u4EE3\u7801\u914D\u7F6E</strong></p>
<ul>
<li>1\u3001\u5982\u679C\u4F60\u7528\u7684\u662F<code v-pre>VuePress 1.x</code> \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0CVuePress \u76F4\u63A5\u63D0\u4F9B\u4E86 themeConfig.algolia \u9009\u9879\u6765\u7528 Algolia \u641C\u7D22\u66FF\u6362\u5185\u7F6E\u7684\u641C\u7D22\u6846\uFF0C\u4F60\u53EA\u7528\u5982\u6B64\u7B80\u5355\u7684\u914D\u7F6E\u5373\u53EF\u5B9E\u73B0\u5168\u6587\u641C\u7D22\u3002</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">themeConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">algolia</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'&lt;API_KEY>'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'&lt;INDEX_NAME>'</span>
      <span class="token comment">// \u5982\u679C Algolia \u6CA1\u6709\u4E3A\u4F60\u63D0\u4F9B \`appId\` \uFF0C\u4F7F\u7528 \`BH4D9OD16A\` \u6216\u8005\u79FB\u9664\u8BE5\u914D\u7F6E\u9879</span>
      <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'&lt;APP_ID>'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>2\u3001\u5982\u679C\u4F60\u7528\u7684\u662F<code v-pre>VuePress 2.x</code> \u7684\u9ED8\u8BA4\u4E3B\u9898\u6216\u8005\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u53EF\u4EE5\u901A\u8FC7<code v-pre>DocSearch</code>\u63D2\u4EF6\u8FDB\u884C\u914D\u7F6E\uFF0C\u63D2\u4EF6\u914D\u7F6E\u5B8C\u6BD5\u4EE5\u540E\uFF0C\u5728<code v-pre>Navbar</code>\u4E2D\u81EA\u52A8\u751F\u6210\u641C\u7D22\u6846\u3002<code v-pre>DocSearch</code>\u63D2\u4EF6\u914D\u7F6E\u5982\u4E0B\u3002</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> docsearchPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-docsearch'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html</span>
    <span class="token function">docsearchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'e3224f6a8f05632af9c14c97******b54'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'anyfork'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'09V****WK61N'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">translations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">buttonText</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>3\u3001\u5982\u679C\u4F60\u7528\u7684\u4E0D\u662F VuePress \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u5C31\u6BD4\u5982\u6211\u7528\u7684\u662F<code v-pre>vuepress-theme-reco 1.x</code>\uFF0C\u5B83\u7684\u641C\u7D22\u680F\u662F\u81EA\u5DF1\u5B9E\u73B0\u7684\uFF0C\u6240\u4EE5\u6DFB\u52A0\u4E0A\u8FF0\u7684\u914D\u7F6E\u662F\u4E0D\u4F1A\u6709\u6548\u679C\u7684(1.6.10 \u7248\u672C\u4E2D\u81EA\u5B9A\u4E49\u7684<code v-pre>AlgoliaSearchBox.vue</code>\u7EC4\u4EF6\u5B58\u5728\u5F88\u591A bug)\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u9700\u8981\u9075\u7167\u90AE\u4EF6\u4E2D\u7684\u65B9\u6CD5\uFF0C\u624B\u52A8\u6DFB\u52A0 CSS \u548C JavaScript \u6587\u4EF6\u3002\u5982\u679C\u4F60\u76F4\u63A5\u5F15\u5165 vuepress-theme-reco 1.x \u5305\uFF0C\u4F7F\u7528\u6309\u7167\u4E0B\u9762\u6B65\u9AA4\u8FDB\u884C\u914D\u7F6E\uFF1A</li>
</ul>
<p>1 \u6211\u4EEC\u9700\u8981\u5148\u4FEE\u6539\u4E0B config.js:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'https://cdn.jsdelivr.net/npm/@docsearch/css@3'</span><span class="token punctuation">,</span> <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">'stylesheet'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">'script'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'javascript'</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text/javascript'</span><span class="token punctuation">,</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://cdn.jsdelivr.net/npm/@docsearch/js@3'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2 \u7136\u540E\u4FEE\u6539.vuepress/enhanceApp.js \u6587\u4EF6\uFF1A</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> router<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> isServer <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u4E0D\u52A0 setTimeout \u4F1A\u6709\u62A5\u9519\uFF0C\u4F46\u4E0D\u5F71\u54CD\u6548\u679C</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token function">docsearch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'43GX903BPS'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'feff649032d8034cf2a636ef55d96054'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'ts-yayujs'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">'.search-box'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">debug</span><span class="token operator">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<p>\u5982\u679C\u4F60\u662F\u5C06 vuepress-theme-reco 1.x \u4E3B\u9898\u8FDB\u884C\u672C\u5730\u5316\u9B54\u6539\uFF0C\u4E3B\u9898\u4E2D<code v-pre>Alglia</code>\u914D\u7F6E\u4E0D\u53D8\uFF0C\u53EF\u4EE5\u5BF9\u81EA\u5B9A\u4E49\u7EC4\u4EF6<code v-pre>AlgoliaSearchBox.vue</code>\u4FEE\u6539\u5982\u4E0B\uFF1A</p>
<div class="language-vue ext-vue line-numbers-mode"><pre v-pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>algolia-search-input<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RecoIcon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress-reco/core/lib/components'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@theme/helpers/composable'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'options'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">initialize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">userOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> algoliaOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> userOptions
      <span class="token function">docsearch</span><span class="token punctuation">(</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> userOptions<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">'#algolia-search-input'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">algoliaOptions</span><span class="token operator">:</span> algoliaOptions
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">initialize</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>options<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.search-box .DocSearch.DocSearch-Button</span> <span class="token punctuation">{</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #5b5b5b<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--border-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.9rem<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 0.5rem 0 0rem<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.2s ease<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Container</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button .DocSearch-Search-Icon</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0.1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Placeholder</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.8rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Keys</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0.1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Key</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\u5176\u4E2D\u7684 container\uFF0C\u53C2\u8003 <a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer">docsearch<ExternalLinkIcon/></a> \u7684\u5B98\u65B9\u4ED3\u5E93\uFF0C\u8FD9\u91CC\u63D0\u4F9B\u7684\u4E0D\u662F input \u8F93\u5165\u6846\u7684\u9009\u62E9\u5668\uFF0C\u800C\u662F\u4E00\u4E2A\u6302\u8F7D\u8282\u70B9\uFF0C\u6BD4\u5982 div \u7684\u9009\u62E9\u5668\u3002\u5982\u679C\u6837\u5F0F\u81EA\u5DF1\u4E0D\u559C\u6B22\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539<code v-pre>vuepress/styles/index.styl</code>\u8986\u76D6\u76EE\u524D\u7684\u6837\u5F0F\u3002\u6700\u7EC8\u6548\u679C\u5982\u4E0B\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211001028.png" alt="\u6700\u7EC8\u6548\u679C"></p>
<h2 id="\u6570\u636E\u722C\u53D6" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u722C\u53D6" aria-hidden="true">#</a> \u6570\u636E\u722C\u53D6</h2>
<ul>
<li>1\u3001\u914D\u7F6E\u5B8C\u6BD5\u540E\u5C06\u7F51\u7AD9\u8FDB\u884C\u91CD\u65B0\u90E8\u7F72\uFF0C\u67E5\u770B<code v-pre>Algolia</code>\u5168\u5C40\u641C\u7D22\u662F\u5426\u6709\u6570\u636E\u3002</li>
<li>2\u3001\u5982\u679C\u4F60\u641C\u4EFB\u4F55\u6570\u636E\uFF0C\u90FD\u663E\u793A\u641C\u7D22\u4E0D\u5230\u6570\u636E\uFF0C\u90A3\u5F88\u53EF\u80FD\u662F\u722C\u53D6\u7684\u6570\u636E\u6709\u95EE\u9898\uFF0C\u6211\u4EEC\u767B\u9646 <a href="https://www.algolia.com/" target="_blank" rel="noopener noreferrer">https://www.algolia.com/<ExternalLinkIcon/></a> \u6253\u5F00\u7BA1\u7406\u540E\u53F0\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u91CC\u7684 Search\uFF0C\u67E5\u770B\u5BF9\u5E94\u7684 indexName \u6570\u636E\uFF0C\u5982\u679C Browse \u8FD9\u91CC\u6CA1\u6709\u663E\u793A\u6570\u636E\uFF0C\u90A3\u8BF4\u660E\u722C\u53D6\u7684\u6570\u636E\u53EF\u80FD\u6709\u95EE\u9898\uFF0C\u5BFC\u81F4\u6CA1\u6709\u751F\u6210\u5BF9\u5E94\u7684 Records\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211111162.png" alt="\u56FE\u793A">
\u5982\u679C\u6CA1\u6709\u6570\u636E\uFF0C\u90A3\u6211\u4EEC\u5C31\u67E5\u4E0B\u722C\u53D6\u7684\u903B\u8F91\uFF0C\u6253\u5F00\u722C\u866B\u540E\u53F0\uFF1A<a href="https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview" target="_blank" rel="noopener noreferrer">https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview<ExternalLinkIcon/></a>\uFF0C\u70B9\u51FB\u5BF9\u5E94 indexName \u8FDB\u5165\u540E\u53F0\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211115127.png" alt="\u56FE\u793A">\u5982\u679C\u663E\u793A\u6210\u529F\u722C\u53D6\uFF0C\u4E5F\u6709 Monitoring Success \u7684\u6570\u636E\uFF0C\u4F46 Records \u4E3A 0\uFF0C\u90A3\u5927\u6982\u662F\u722C\u866B\u63D0\u53D6\u6570\u636E\u7684\u903B\u8F91\u6709\u95EE\u9898\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u4E2D\u7684 Editor\uFF0C\u67E5\u770B\u5177\u4F53\u7684\u722C\u866B\u903B\u8F91\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211119981.png" alt="\u56FE\u793A">\u50CF pathsToMatch \u8FD9\u91CC\u5982\u679C\u662F'<a href="https://anyfork.github.io/blog-docs/docs/" target="_blank" rel="noopener noreferrer">https://anyfork.github.io/blog-docs/docs/<ExternalLinkIcon/></a>**'\uFF0C\u4F46\u4F60\u7684\u7F51\u5740\u90FD\u662F <a href="https://anyfork.github.io/blog-docs/**" target="_blank" rel="noopener noreferrer">https://anyfork.github.io/blog-docs/**<ExternalLinkIcon/></a>\u5F00\u5934\u7684\uFF0C\u90A3\u8FD9\u91CC\u5927\u6982\u5C31\u662F\u4F1A\u63D0\u53D6\u9519\u8BEF\uFF0C\u4FEE\u6539\u4E00\u4E0B\uFF0C\u7136\u540E\u70B9\u51FB\u53F3\u4FA7\u7684\u6570\u636E\u8FDB\u884C\u6D4B\u8BD5\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211126112.png" alt="\u56FE\u793A">\u5982\u679C\u80FD\u50CF\u8FD9\u6837\u63D0\u53D6\u5230\u6570\u636E\uFF0C\u5C31\u8BF4\u660E\u6CA1\u6709\u4EC0\u4E48\u95EE\u9898\u4E86\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Save\uFF0C\u7136\u540E\u5207\u6362\u56DE Overview\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Restart crawling\uFF0C\u6211\u4EEC\u91CD\u65B0\u722C\u53D6\u4E00\u4E0B\u6570\u636E\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211128410.png" alt="\u56FE\u793A">\u9664\u4E86\u624B\u52A8\u8FDB\u884C\u722C\u53D6\u4E4B\u5916\uFF0C<code v-pre>Algolia</code>\u722C\u866B\u540E\u53F0\u4F1A\u5B9A\u65F6\u722C\u53D6\u6570\u636E\u3002\u81F3\u6B64\uFF0C VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22\u5C31\u914D\u7F6E\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u5F00\u59CB\u5427\uFF01</li>
</ul>
<p><strong>\u53C2\u8003\u6587\u7AE0</strong>\uFF1A<a href="https://blog.csdn.net/weixin_55475226/article/details/123363042" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_55475226/article/details/123363042<ExternalLinkIcon/></a></p>
`,date:"2022-07-22",deps:[],links:[],pathInferred:"/posts/other/algoliaSearch.html",pathLocale:"/",permalink:null,routeMeta:{title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"},sfcBlocks:[],slug:"algoliaSearch",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/algoliaSearch.md",filePathRelative:"posts/other/algoliaSearch.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/algoliaSearch.html.vue",componentFilePathRelative:"pages/posts/other/algoliaSearch.html.vue",componentFileChunkName:"v-cc63cd18",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/algoliaSearch.html.js",dataFilePathRelative:"pages/posts/other/algoliaSearch.html.js",dataFileChunkName:"v-cc63cd18",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/algoliaSearch.html",htmlFilePathRelative:"posts/other/algoliaSearch.html"},title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"},["/posts/other/algoliaSearch","/posts/other/algoliaSearch.md"]],["v-65bd7028","/posts/other/blogDocs.html",{_blog:{data:{key:"v-65bd7028",path:"/posts/other/blogDocs.html",title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",date:"2022-08-23T15:30:27.000Z",description:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002",lang:"zh-CN",tag:["\u535A\u5BA2"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208231513291.png",sidebar:"auto",sticky:1,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/blogDocs.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"}],["meta",{property:"og:description",content:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u535A\u5BA2"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86<code v-pre>vuepress@2.x</code>\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u4E00 \u521D\u59CB\u5316\u9879\u76EE",slug:"\u4E00-\u521D\u59CB\u5316\u9879\u76EE",children:[{level:3,title:"1 \u73AF\u5883\u4F9D\u8D56",slug:"_1-\u73AF\u5883\u4F9D\u8D56",children:[]},{level:3,title:"2 \u5FEB\u901F\u5F00\u59CB",slug:"_2-\u5FEB\u901F\u5F00\u59CB",children:[]},{level:3,title:"3 \u9879\u76EE\u542F\u52A8",slug:"_3-\u9879\u76EE\u542F\u52A8",children:[]}]},{level:2,title:"\u4E8C \u529F\u80FD\u914D\u7F6E",slug:"\u4E8C-\u529F\u80FD\u914D\u7F6E",children:[{level:3,title:"1 \u5E03\u5C40\u63D2\u69FD",slug:"_1-\u5E03\u5C40\u63D2\u69FD",children:[]},{level:3,title:"2 \u7EC4\u4EF6\u66FF\u6362",slug:"_2-\u7EC4\u4EF6\u66FF\u6362",children:[]},{level:3,title:"3 \u535A\u5BA2\u63D2\u4EF6",slug:"_3-\u535A\u5BA2\u63D2\u4EF6",children:[]},{level:3,title:"4 \u81EA\u5B9A\u4E49\u5BB9\u5668",slug:"_4-\u81EA\u5B9A\u4E49\u5BB9\u5668",children:[]}]},{level:2,title:"\u4E09 \u63D2\u4EF6\u5B89\u88C5",slug:"\u4E09-\u63D2\u4EF6\u5B89\u88C5",children:[{level:3,title:"1 PWA \u63D2\u4EF6",slug:"_1-pwa-\u63D2\u4EF6",children:[]},{level:3,title:"2 DocSearch \u63D2\u4EF6",slug:"_2-docsearch-\u63D2\u4EF6",children:[]},{level:3,title:"3 ReadingTime \u63D2\u4EF6",slug:"_3-readingtime-\u63D2\u4EF6",children:[]},{level:3,title:"4 SEO \u63D2\u4EF6",slug:"_4-seo-\u63D2\u4EF6",children:[]},{level:3,title:"5 SiteMap \u63D2\u4EF6",slug:"_5-sitemap-\u63D2\u4EF6",children:[]},{level:3,title:"6 Copyright \u63D2\u4EF6",slug:"_6-copyright-\u63D2\u4EF6",children:[]},{level:3,title:"7 CopyCode \u63D2\u4EF6",slug:"_7-copycode-\u63D2\u4EF6",children:[]},{level:3,title:"8 Waline \u8BC4\u8BBA\u63D2\u4EF6",slug:"_8-waline-\u8BC4\u8BBA\u63D2\u4EF6",children:[]},{level:3,title:"9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",slug:"_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",children:[]},{level:3,title:"10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",slug:"_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",children:[]},{level:3,title:"11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",slug:"_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",slug:"_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"13 \u770B\u677F\u5A18\u63D2\u4EF6",slug:"_13-\u770B\u677F\u5A18\u63D2\u4EF6",children:[]},{level:3,title:"14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",slug:"_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",children:[]},{level:3,title:"15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6",slug:"_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6",children:[]}]},{level:2,title:"\u56DB \u9879\u76EE\u90E8\u7F72",slug:"\u56DB-\u9879\u76EE\u90E8\u7F72",children:[{level:3,title:"1 nginx \u670D\u52A1\u5668\u90E8\u7F72",slug:"_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72",children:[]},{level:3,title:"2 \u90E8\u7F72\u5728Github Pages\u548CGitee Pages",slug:"_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages",children:[]}]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/blogDocs.md",readingTime:{minutes:28.12,words:8437},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/blogDocs.html`},key:"v-65bd7028",path:"/posts/other/blogDocs.html",title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",date:"2022-08-23T15:30:27.000Z",description:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002",lang:"zh-CN",tag:["\u535A\u5BA2"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208231513291.png",sidebar:"auto",sticky:1,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/blogDocs.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"}],["meta",{property:"og:description",content:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u535A\u5BA2"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86<code v-pre>vuepress@2.x</code>\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u4E00 \u521D\u59CB\u5316\u9879\u76EE",slug:"\u4E00-\u521D\u59CB\u5316\u9879\u76EE",children:[{level:3,title:"1 \u73AF\u5883\u4F9D\u8D56",slug:"_1-\u73AF\u5883\u4F9D\u8D56",children:[]},{level:3,title:"2 \u5FEB\u901F\u5F00\u59CB",slug:"_2-\u5FEB\u901F\u5F00\u59CB",children:[]},{level:3,title:"3 \u9879\u76EE\u542F\u52A8",slug:"_3-\u9879\u76EE\u542F\u52A8",children:[]}]},{level:2,title:"\u4E8C \u529F\u80FD\u914D\u7F6E",slug:"\u4E8C-\u529F\u80FD\u914D\u7F6E",children:[{level:3,title:"1 \u5E03\u5C40\u63D2\u69FD",slug:"_1-\u5E03\u5C40\u63D2\u69FD",children:[]},{level:3,title:"2 \u7EC4\u4EF6\u66FF\u6362",slug:"_2-\u7EC4\u4EF6\u66FF\u6362",children:[]},{level:3,title:"3 \u535A\u5BA2\u63D2\u4EF6",slug:"_3-\u535A\u5BA2\u63D2\u4EF6",children:[]},{level:3,title:"4 \u81EA\u5B9A\u4E49\u5BB9\u5668",slug:"_4-\u81EA\u5B9A\u4E49\u5BB9\u5668",children:[]}]},{level:2,title:"\u4E09 \u63D2\u4EF6\u5B89\u88C5",slug:"\u4E09-\u63D2\u4EF6\u5B89\u88C5",children:[{level:3,title:"1 PWA \u63D2\u4EF6",slug:"_1-pwa-\u63D2\u4EF6",children:[]},{level:3,title:"2 DocSearch \u63D2\u4EF6",slug:"_2-docsearch-\u63D2\u4EF6",children:[]},{level:3,title:"3 ReadingTime \u63D2\u4EF6",slug:"_3-readingtime-\u63D2\u4EF6",children:[]},{level:3,title:"4 SEO \u63D2\u4EF6",slug:"_4-seo-\u63D2\u4EF6",children:[]},{level:3,title:"5 SiteMap \u63D2\u4EF6",slug:"_5-sitemap-\u63D2\u4EF6",children:[]},{level:3,title:"6 Copyright \u63D2\u4EF6",slug:"_6-copyright-\u63D2\u4EF6",children:[]},{level:3,title:"7 CopyCode \u63D2\u4EF6",slug:"_7-copycode-\u63D2\u4EF6",children:[]},{level:3,title:"8 Waline \u8BC4\u8BBA\u63D2\u4EF6",slug:"_8-waline-\u8BC4\u8BBA\u63D2\u4EF6",children:[]},{level:3,title:"9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",slug:"_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",children:[]},{level:3,title:"10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",slug:"_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",children:[]},{level:3,title:"11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",slug:"_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",slug:"_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"13 \u770B\u677F\u5A18\u63D2\u4EF6",slug:"_13-\u770B\u677F\u5A18\u63D2\u4EF6",children:[]},{level:3,title:"14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",slug:"_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",children:[]},{level:3,title:"15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6",slug:"_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6",children:[]}]},{level:2,title:"\u56DB \u9879\u76EE\u90E8\u7F72",slug:"\u56DB-\u9879\u76EE\u90E8\u7F72",children:[{level:3,title:"1 nginx \u670D\u52A1\u5668\u90E8\u7F72",slug:"_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72",children:[]},{level:3,title:"2 \u90E8\u7F72\u5728Github Pages\u548CGitee Pages",slug:"_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages",children:[]}]}],content:`---
title: VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863
date: 2022-8-23 15:30:27
description: \u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002
lang: zh-CN
tag:
  - \u535A\u5BA2
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208231513291.png
sidebar: 'auto'
sticky: 1
---

&emsp;\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86\`vuepress@2.x\`\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}

<!-- more -->

:::tip
1\u3001\u535A\u4E3B\u4EE5\u524D\u4E5F\u7528\`vuepress-theme-reco@1.x\`\u4E3B\u9898\u642D\u5EFA\u4E86\u4E00\u4E2A\u535A\u5BA2\uFF0C\u6BD4\u8F83\u559C\u6B22vuepress-theme-reco@1.x\u98CE\u683C\uFF0C\u7531\u4E8E\`vuepress-theme-reco@1.x\`\u91C7\u7528\u7684\u6280\u672F\u90FD\u76F8\u5BF9\u76EE\u524D\u6BD4\u8F83\u843D\u540E\uFF0C\u540E\u6765\u4FBF\u7528\`vuepress 2.X\`\u5F00\u53D1\u4E86\u73B0\u5728\u7684\u535A\u5BA2\uFF0C\u6574\u4F53\u9875\u9762\u98CE\u683C\u548C\u6837\u5F0F\u548C\u539F\u6765\u7684\u4E00\u6A21\u4E00\u6837\uFF0C\u4F46\u4E3B\u9898\u8FD8\u662F\u7EE7\u627F\u4E86\`vuepress 2.X\`\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u589E\u52A0\u4E86\u535A\u5BA2,\u5206\u7C7B\uFF0C\u6807\u7B7E\u529F\u80FD\u548C\u5176\u4ED6\u9996\u9875\u7279\u6548\u63D2\u4EF6\u3002

2\u3001\u535A\u5BA2\u5730\u5740\uFF1A<https://anyfork.github.io/blog-docs/>\u6216<https://anyfork.gitee.io/blog-docs/>
:::

## \u4E00 \u521D\u59CB\u5316\u9879\u76EE

### 1 \u73AF\u5883\u4F9D\u8D56

- [Node.js v14+](https://nodejs.org/)\uFF0C\u6700\u4F4E\u4F7F\u7528\`Node 14+\`\u7248\u672C\uFF0C\u5EFA\u8BAE\u4F7F\u7528\`Node 14.16.0\`\u7248\u672C

::: warning

- \u4F7F\u7528 [pnpm](https://pnpm.io/zh/) \u65F6\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u5B89\u88C5 vue \u548C @vuepress/client \u4F5C\u4E3A peer-dependencies \uFF0C\u5373 pnpm add -D vue @vuepress/client@next \u3002
- \u4F7F\u7528 [yarn 2](https://yarnpkg.com/) \u65F6\uFF0C\u4F60\u9700\u8981\u5728 [.yarnrc.yml](https://yarnpkg.com/configuration/yarnrc#nodeLinker) \u6587\u4EF6\u4E2D\u8BBE\u7F6E nodeLinker: 'node-modules'

:::

### 2 \u5FEB\u901F\u5F00\u59CB

- \u521B\u5EFA\u9879\u76EE\u76EE\u5F55

\`\`\`sh
# \u521B\u5EFA\u9879\u76EE\u76EE\u5F55
mkdir blog-docs
# \u8FDB\u5165\u9879\u76EE\u76EE\u5F55
cd blog-docs
\`\`\`

- \u521D\u59CB\u5316\u9879\u76EE

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
git init
yarn init
\`\`\`

  </CodeGroupItem>

  <CodeGroupItem title="npm" active>

\`\`\`bash:
git init
npm init
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u4F9D\u8D56\u5B89\u88C5

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress@next
\`\`\`

  </CodeGroupItem>

  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm install -D vuepress@next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u5728\`package.json\`\u589E\u52A0\u4E2D\u6DFB\u52A0\u4E00\u4E9B scripts

\`\`\`sh
{
  "scripts": {
    "dev": "vuepress dev docs",
    "build": "vuepress build docs"
  }
}
\`\`\`

- \u5C06\u9ED8\u8BA4\u7684\u4E34\u65F6\u76EE\u5F55\u548C\u7F13\u5B58\u76EE\u5F55\u6DFB\u52A0\u5230\`.gitignore\`\u6587\u4EF6\u4E2D

\`\`\`sh
echo 'node_modules' >> .gitignore
echo '.temp' >> .gitignore
echo '.cache' >> .gitignore
echo '.history' >> .gitignore
\`\`\`

- \u521B\u5EFA\u6587\u6863\u76EE\u5F55

\`\`\`sh
mkdir docs
echo '# Hello VuePress' > docs/README.md
\`\`\`

### 3 \u9879\u76EE\u542F\u52A8

\u7528 vscode \u6253\u5F00\u9879\u76EE\uFF0C\u65B0\u5EFA\u7EC8\u7AEF\uFF0C\u6267\u884C\u542F\u52A8\u811A\u672C\u547D\u4EE4

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn dev
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm run docs:dev
\`\`\`

  </CodeGroupItem>
</CodeGroup>

\u8BE6\u7EC6\u7684\u521B\u5EFA\u8FC7\u7A0B\u8BF7\u53C2\u8003[vuepress \u5B98\u7F51\u5FEB\u901F\u4E0A\u624B](https://v2.vuepress.vuejs.org/zh/guide/getting-started.html)\uFF0C\u81F3\u6B64\u9879\u76EE\u642D\u5EFA\u57FA\u7840\u5C31\u8C03\u6574\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u5C31\u53EF\u4EE5\u5F00\u5F00\u5FC3\u5FC3\u7684\u5199\`markdown\`\u6587\u4EF6\u4E86\u3002

## \u4E8C \u529F\u80FD\u914D\u7F6E

&emsp;\`vuepress 2.x\`\u9ED8\u8BA4\u4E3B\u9898\u96C6\u6210\u4E86\u5927\u90E8\u5206\u529F\u80FD\uFF0C\u57FA\u672C\u80FD\u591F\u6EE1\u8DB3\u6211\u4EEC\u7F16\u5199\`markdown\`\u7684\u9700\u6C42\uFF0C\u4F46\u5B98\u65B9\u4E3B\u9898\u4E3B\u8981\u4EE5\u6587\u6863\u4E3A\u4E3B\uFF0C\u5BF9\u4E8E\u535A\u5BA2\u529F\u80FD\u7684\u62D3\u5C55\u9700\u8981\u81EA\u5DF1\u5F00\u53D1\u3002\u9ED8\u8BA4\u4E3B\u9898\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\`\u7EE7\u627F\u7684\u65B9\u5F0F\`\u6765\u62D3\u5C55\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51[\u4E3B\u9898\u62D3\u5C55](https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html)\u3002

&emsp;\u535A\u4E3B\u91C7\u7528\u4E86\u9ED8\u8BA4\u4E3B\u9898\u9884\u8BBE\u7684\`\u5E03\u5C40\u63D2\u69FD\`\u548C\`\u7EC4\u4EF6\u66FF\u6362\`2 \u79CD\u65B9\u5F0F\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898(\u5373:\u672C\u5730\u4E3B\u9898\u5F00\u53D1)\u3002\`\u7EC4\u4EF6\u66FF\u6362\`\u4E3B\u8981\u4F53\u73B0\u5728\u535A\u5BA2\u9996\u9875\u5E03\u5C40\uFF0C\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74\u5E03\u5C40\u7B49\uFF0C\`\u5E03\u5C40\u63D2\u69FD\`\u4E3B\u8981\u6D89\u53CA\u8BE6\u60C5\u9875\u9876\u90E8\u5206\u7C7B\u548C\u5E95\u90E8\u8BC4\u8BBA\u7B49\u3002\u540C\u65F6\u901A\u8FC7\`vuepress-plugin-blog2\`\u63D2\u4EF6\u62D3\u5C55\u4E86\u535A\u5BA2\u529F\u80FD(\u6587\u7AE0\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74)\uFF0C\`vuepress-plugin-blog2\`<Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u8BBE\u8BA1\u6BD4\u8F83\u7075\u6D3B\uFF0C\u53EF\u4EE5\u6839\u636E\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u5B9A\u5236\uFF0C\u4E0D\u9650\u4E8E\u5206\u7C7B\u548C\u6807\u7B7E\u7B49\u529F\u80FD\uFF0C\u53EF\u4EE5\u81EA\u884C\u62D3\u5C55\u3002

### 1 \u5E03\u5C40\u63D2\u69FD

::: tip
1\u3001\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E 11 \u4E2A\u5E03\u5C40\u63D2\u69FD\uFF0C\u5206\u522B\u4E3A\uFF1A\`navbar\`,\`navbar-before\`,\`navbar-after\`,\`sidebar\`,\`sidebar-top\`,\`sidebar-bottom\`,\`page\`,\`page-top\`,\`page-bottom\`,\`page-content-top\`,\`page-content-bottom\`,\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51[\u5E03\u5C40\u63D2\u69FD](https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html#%E5%B8%83%E5%B1%80%E6%8F%92%E6%A7%BD)

2\u3001\u535A\u5BA2\u4E2D\u7528\u5230\u4E86 2 \u4E2A\u63D2\u69FD\`page-top\`\u548C\`page-bottom\`\u3002\u524D\u8005\u7528\u4E8E\u62D3\u5C55\u6587\u7AE0\u9875\u9762\u6807\u9898\u4E0B\u9762\u6587\u7AE0\u4F5C\u8005\uFF0C\u6587\u7AE0\u5206\u7C7B\uFF0C\u6587\u7AE0\u6807\u7B7E\uFF0C\u5B57\u6570\u7EDF\u8BA1\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\u7B49\u4FE1\u606F\uFF0C\u540E\u8005\u4E3B\u8981\u5D4C\u5957\`giscus\`\u8BC4\u8BBA\u7EC4\u4EF6\`<CommentService />\`,\u5B9E\u73B0\u6587\u7AE0\u8BC4\u8BBA\u529F\u80FD\u3002
:::

- \u914D\u7F6E\u65B9\u6CD5

  1\u3001\u521B\u5EFA\u81EA\u5B9A\u4E49\u5E03\u5C40\u7EC4\u4EF6\`.vuepress/theme/layouts/layout.vue\`

  ::: normal-demo layout \u914D\u7F6E

  \`\`\`js
  <template>
    <ParentLayout>
      <template #page-top>
        <div class="title w-[var(--content-width)] my-0 mx-auto">
          <div class="flex items-center justify-between">
            <h1>{{ page.title }}</h1>
            <Icon icon="RollbackOutlined" text="\u8FD4\u56DE" @click="$router.go(-1)" class="cursor-pointer"></Icon>
          </div>
          <BlogItemInfo :page="page"></BlogItemInfo>
        </div>
      </template>
      <template #page-bottom>
        <CommentService />
      </template>
    </ParentLayout>
  </template>
  <script setup lang="ts">
  import ParentLayout from '@vuepress/theme-default/lib/client/layouts/Layout.vue'
  import BlogItemInfo from '../components/Blog/BlogItemInfo.vue'
  import { usePageData } from '@vuepress/client'
  const page = usePageData()
  <\/script>

  \`\`\`

  :::

  2\u3001\u521B\u5EFA\u4F60\u7684\u672C\u5730\u4E3B\u9898\`.vuepress/theme/index.ts\`\uFF0C\u5E76\u8986\u76D6\u9ED8\u8BA4\u4E3B\u9898\u5E03\u5C40\u3002

  ::: normal-demo index.ts \u914D\u7F6E

  \`\`\`ts
  import type { Theme } from '@vuepress/core'
  import { defaultTheme } from '@vuepress/theme-default'
  import { path } from '@vuepress/utils'
  import { AnyForkThemeOptions } from './types/theme'

  export const AnyForkTheme = (options: AnyForkThemeOptions): Theme => {
    return {
      name: 'vuepress-theme-AnyFork',
      extends: defaultTheme(options),
      alias: {
        '@theme/Home.vue': path.resolve(__dirname, './components/Home.vue'),
        '@theme/NavbarItems.vue': path.resolve(__dirname, './components/NavbarItems.vue'),
        '@theme/HomeFooter.vue': path.resolve(__dirname, './components/HomeFooter.vue')
      },
      layouts: {
        Layout: path.resolve(__dirname, './layouts/Layout.vue'),
        Category: path.resolve(__dirname, './layouts/Category.vue'),
        Tag: path.resolve(__dirname, './layouts/Tag.vue'),
        Timeline: path.resolve(__dirname, './layouts/Timeline.vue'),
        404: path.resolve(__dirname, './layouts/404.vue')
      }
    }
  }
  \`\`\`

  :::

### 2 \u7EC4\u4EF6\u66FF\u6362

::: tip
1\u3001\u5E03\u5C40\u63D2\u69FD\u5341\u5206\u5B9E\u7528\uFF0C\u4F46\u6709\u65F6\u5019\u4F60\u53EF\u80FD\u4F1A\u89C9\u5F97\u5B83\u4E0D\u591F\u7075\u6D3B\u3002\u9ED8\u8BA4\u4E3B\u9898\u540C\u6837\u63D0\u4F9B\u4E86\u66FF\u6362\u5355\u4E2A\u7EC4\u4EF6\u7684\u80FD\u529B\u3002

2\u3001\u9ED8\u8BA4\u4E3B\u9898\u5C06\u6240\u6709 \u975E\u5168\u5C40\u7684\u7EC4\u4EF6 \u90FD\u6CE8\u518C\u4E86\u4E00\u4E2A\u5E26 @theme \u524D\u7F00\u7684 alias \u3002\u4F8B\u5982\uFF0CHomeFooter.vue \u7684\u522B\u540D\u662F @theme/HomeFooter.vue \u3002
:::

- \u914D\u7F6E\u65B9\u6CD5

  1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u7EC4\u4EF6\u76EE\u5F55\`.vuepress/theme/components\`\u4E0B\u521B\u5EFA\u81EA\u5DF1\u9700\u8981\u8986\u76D6\u7684\u7EC4\u4EF6\u3002

  2\u3001\u5728\u914D\u7F6E\u6587\u4EF6\`.vuepress/theme/index.ts\`\u4E2D\u8FDB\u884C\u7EC4\u4EF6\u8986\u76D6

  ::: normal-demo index.ts \u914D\u7F6E

  \`\`\`ts
  import type { Theme } from '@vuepress/core'
  import { defaultTheme } from '@vuepress/theme-default'
  import { path } from '@vuepress/utils'
  import { AnyForkThemeOptions } from './types/theme'

  export const AnyForkTheme = (options: AnyForkThemeOptions): Theme => {
    return {
      name: 'vuepress-theme-AnyFork',
      extends: defaultTheme(options),
      alias: {
        '@theme/Home.vue': path.resolve(__dirname, './components/Home.vue'),
        '@theme/NavbarItems.vue': path.resolve(__dirname, './components/NavbarItems.vue'),
        '@theme/HomeFooter.vue': path.resolve(__dirname, './components/HomeFooter.vue')
      },
      layouts: {
        Layout: path.resolve(__dirname, './layouts/Layout.vue'),
        Category: path.resolve(__dirname, './layouts/Category.vue'),
        Tag: path.resolve(__dirname, './layouts/Tag.vue'),
        Timeline: path.resolve(__dirname, './layouts/Timeline.vue'),
        404: path.resolve(__dirname, './layouts/404.vue')
      }
    }
  }
  \`\`\`

  :::

### 3 \u535A\u5BA2\u63D2\u4EF6

&emsp;\u535A\u5BA2\u63D2\u4EF6\u4F7F\u7528\u7684\u662F\u7B2C\u4E09\u65B9[vuepress-plugin-blog2](https://vuepress-theme-hope.github.io/v2/blog/zh/)<Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u63D2\u4EF6\u3002\u6B64\u63D2\u4EF6\u548C\u666E\u901A\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u4E00\u6837\uFF0C\u6839\u636E[\u5B98\u7F51\u914D\u7F6E](https://vuepress-theme-hope.github.io/v2/blog/zh/config.html)\u5373\u53EF\u3002

::: warning
\`vuepress-plugin-blog2\`\u535A\u5BA2\u63D2\u4EF6\u4E3B\u8981\u7528\u6237\u6269\u5C55\u535A\u5BA2\u529F\u80FD\uFF0C\u672A\u5B9E\u73B0\u5206\u9875\u529F\u80FD\uFF0C\u9700\u8981\u81EA\u884C\u5B9E\u73B0\u5206\u9875\u529F\u80FD\u3002
:::

- \u9879\u76EE\u914D\u7F6E

  \`\`\`ts
   //\u535A\u5BA2\u63D2\u4EF6,https://vuepress-theme-hope.github.io/v2/blog/zh/guide.html
    blogPlugin({
        // \u9875\u9762\u8FC7\u6EE4\u5668\uFF0C\u6B64\u51FD\u6570\u7528\u4E8E\u9274\u522B\u9875\u9762\u662F\u5426\u4F5C\u4E3A\u6587\u7AE0\u3002
        filter: ({ filePathRelative }) => filePathRelative ? filePathRelative?.startsWith("posts/") : false,
        // \u83B7\u53D6\u6587\u7AE0\u4FE1\u606F\u7684\u51FD\u6570\u3002
        getInfo: (page) => ({
            ...page
        }),
        category: [
            {
                key: "category",
                getter: (page) => <string[]>page.frontmatter.category || [],
                layout: "Category",
                itemLayout: "Category",
                frontmatter: () => ({ title: "Categories", sidebar: false }),
                itemFrontmatter: (name) => ({
                    title: \`Category \${name}\`,
                    sidebar: false,
                }),
            },
            {
                key: "tag",
                getter: (page) => <string[]>page.frontmatter.tag || [],
                layout: "Tag",
                itemLayout: "Tag",
                frontmatter: () => ({ title: "Tags", sidebar: false }),
                itemFrontmatter: (name) => ({
                    title: \`Tag \${name}\`,
                    sidebar: false,
                }),
            },
        ],

        type: [
            {
                key: "article",
                //\u9700\u8981\u8FC7\u6EE4\u7684\u6761\u4EF6
                filter: (page) => !page.frontmatter.archive,
                path: "/article/",
                layout: "Layout",
                frontmatter: () => ({ title: "Articles", sidebar: false }),
                // sort pages with time and sticky
                sorter: (pageA, pageB) => {
                    if (pageA.frontmatter.sticky && pageB.frontmatter.sticky)
                        return pageA.frontmatter.sticky as number - (pageB.frontmatter.sticky as number);
                    if (pageA.frontmatter.sticky && !pageB.frontmatter.sticky)
                        return -1;
                    if (!pageA.frontmatter.sticky && pageB.frontmatter.sticky) return 1;
                    if (!pageB.frontmatter.date) return 1;
                    if (!pageA.frontmatter.date) return -1;
                    return (
                        new Date(pageB.frontmatter.date).getTime() - new Date(pageA.frontmatter.date).getTime()
                    );
                },
            },
            {
                key: "timeline",
                // only article with date should be added to timeline
                filter: (page) => page.frontmatter.date ? true : false,
                // sort pages with time
                sorter: (pageA, pageB) => new Date(pageB.frontmatter.date as string).getTime() - new Date(pageA.frontmatter.date as string).getTime(),
                path: "/timeline/",
                layout: "Timeline",
                frontmatter: () => ({ title: "Timeline", sidebar: false }),
            },
        ],
        hotReload: true,
    }),
  \`\`\`

  **\u6CE8\u610F**\uFF1A\u63D2\u4EF6\u4E2D\u6709\`category\`\u548C\`type\`\u533A\u5206\uFF0C\u5373\u7C7B\u522B\u548C\u7C7B\u578B\uFF0C\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u6587\u7AE0\u6761\u4EF6\u8D5B\u9009\u4E3A\u7C7B\u522B\uFF0C\u6BD4\u5982\uFF1A\u5206\u7C7B\uFF0C\u6807\u7B7E\u7B49\uFF0C\u7C7B\u578B\u4E3A\u6587\u7AE0\u96C6\u5408\uFF0C\u65F6\u95F4\u8F74\u7B49\u3002

- \u5BA2\u6237\u7AEF\u7EC4\u5408 API
  1\u3001\u5BA2\u6237\u7AEF\u53EF\u4EE5\u901A\u8FC7\`useBlogCategory()\` \u548C \`useBlogType()\`\u83B7\u53D6\u5F53\u524D\u8DEF\u7531\u7ED1\u5B9A\u7684\u7C7B\u522B\u6216\u7C7B\u578B\u3002

2\u3001\u53EF\u4EE5\u4F20\u9012\u53C2\u6570\u83B7\u53D6\u5177\u4F53\u7684\u7C7B\u522B\u4FE1\u606F\uFF0C\u6BD4\u5982\`useBlogCategory('category')\`

### 4 \u81EA\u5B9A\u4E49\u5BB9\u5668

::: tip
1\u3001\`vueprsss 2.x\` \u4E2D\u5185\u7F6E\u4E86\u81EA\u5B9A\u4E49\u5BB9\u5668\uFF0C\u8BE6\u60C5\u53C2\u8003[\u81EA\u5B9A\u4E49\u5BB9\u5668](https://v2.vuepress.vuejs.org/zh/reference/default-theme/markdown.html)\u3002

2\u3001\u81EA\u5B9A\u4E49\u5BB9\u5668\u4F9D\u8D56\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E\u63D2\u4EF6\`@vuepress/plugin-container\`,\u76F8\u5BF9\u4E8E\`vuepress-plugin-container\`(vuepress 1.x)\u800C\u8A00\u53D8\u52A8\u4E0D\u5927\uFF0C\u53EA\u662F\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u91C7\u7528\u51FD\u6570\u5F0F\u65B9\u5F0F\u96C6\u6210\u3002
:::

&emsp;\u535A\u5BA2\u4E2D\u5185\u7F6E\u4E86 2 \u4E2A\u81EA\u5B9A\u4E49\u5BB9\u5668\`cardList\`\u548C\`cardImgList\`,\u5206\u522B\u7528\u4E8E\u5C55\u793A\u6587\u672C\u5217\u8868\u548C\u56FE\u7247\u5217\u8868\uFF0C\u5177\u4F53\u6548\u679C\u770B\u4E0B\u56FE\uFF1A

\`cardList\` \u5C55\u793A\u6548\u679C
::: cardList 3

\`\`\`yaml
- name: \u5348\u540E\u5357\u6742
  avatar: https://www.recoluan.com/head.png
  desc: Enjoy when you can, and endure when you must.
  link: https://www.recoluan.com
  bgColor: 'rgb(165 216 243)'
  textColor: '#6854A1'
- name: \u897F\u74DC\u76AE\u513F
  desc: enjoy your grow up!
  avatar: https://coderhdy.com/assets/img/snapshot.png
  link: https://coderhdy.com/
  bgColor: '#FCE5BF'
  textColor: '#7B2532'
- name: \u5C0F\u7D2B\u5FF5\u6C81
  desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
  avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
  link: https://anyfork.gitee.io/blog-docs/
  bgColor: rgb(218 88 88 / 62%)
  textColor: rgb(5 41 14 / 75%)
\`\`\`

:::

\`cardImgList\`\u5C55\u793A\u6548\u679C
::: cardImgList 2

\`\`\`yaml
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
  name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/plugins/
  name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
- img: https://vuepress.vuejs.org/hero.png
  link: https://www.vuepress.cn/
  name: VuePress \u4E2D\u6587\u5B98\u7F51
  desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
- img: https://vuepress.vuejs.org/hero.png
  link: https://vuepress-community.netlify.app/zh/
  name: VuePress \u5B98\u65B9\u793E\u533A
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
\`\`\`

:::

- \u81EA\u5B9A\u4E49\u5BB9\u5668\u5B9E\u73B0\u65B9\u5F0F

  1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\`.vuepress/theme/config/container.ts\`\u4E0B\u521B\u5EFA\u81EA\u5B9A\u4E49\u5BB9\u5668\u6587\u4EF6\u3002

  \`\`\`ts
  import type { ContainerPluginOptions, MarkdownItContainerRenderFunction } from '@vuepress/plugin-container'
  const yaml = require('js-yaml')
  const CARD_LIST = 'cardList'
  const CARD_IMG_LIST = 'cardImgList'
  // \u6E32\u67D3md\u5BB9\u5668\u7684\u5361\u7247\u5217\u8868
  function renderCardList(tokens: any, idx: number) {
    const type = tokens[idx].type.split('_')[1]
    const END_TYPE = \`container_\${type}_close\`,
      _tokens$idx = tokens[idx],
      nesting = _tokens$idx.nesting,
      info = _tokens$idx.info
    if (nesting === 1) {
      // \u6E32\u67D3\u5F00\u5934\u7684 ':::' \u6807\u8BB0
      let yamlStr = ''
      for (let i = idx; i < tokens.length; i++) {
        let _tokens$i = tokens[i],
          type = _tokens$i.type,
          content = _tokens$i.content,
          _info = _tokens$i.info
        if (type === END_TYPE) break // \u9047\u5230\u7ED3\u675F\u7684 ':::' \u65F6
        if (!content) continue
        if (type === 'fence' && _info === 'yaml') {
          // \u662F\u4EE3\u7801\u5757\u7C7B\u578B\uFF0C\u5E76\u4E14\u662Fyaml\u4EE3\u7801
          yamlStr = content
        }
      }
      if (yamlStr) {
        // \u6B63\u786E\u89E3\u6790\u51FAyaml\u5B57\u7B26\u4E32\u540E
        const dataObj = yaml.load(yamlStr) // \u5C06yaml\u5B57\u7B26\u4E32\u89E3\u6790\u6210js\u5BF9\u8C61
        let dataList: Array<string> = []

        if (dataObj) {
          // \u6B63\u786E\u89E3\u6790\u51FA\u6570\u636E\u5BF9\u8C61
          dataList = Array.isArray(dataObj) ? dataObj : dataObj.list
        }

        if (dataList && dataList.length) {
          // \u6709\u5217\u8868\u6570\u636E

          // \u6BCF\u884C\u663E\u793A\u51E0\u4E2A
          let row = Number(info.split(' ').pop())
          if (!row || row > 4 || row < 1) {
            row = 3 // \u9ED8\u8BA4 3
          }

          let listDOM = ''
          if (type === CARD_LIST) {
            // \u666E\u901A\u5361\u7247\u5217\u8868
            listDOM = getCardListDOM(dataList, row)
          } else if (type === CARD_IMG_LIST) {
            // \u5361\u7247\u56FE\u7247\u5217\u8868
            listDOM = getCardImgListDOM(dataList, row)
          }

          return \`<div class="\${type}Container"><div class="card-list">\${listDOM}</div>\`
        }
      }
    } else {
      // \u6E32\u67D3':::' \u7ED3\u5C3E
      return '</div>'
    }
  }

  // \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u666E\u901A\u5361\u7247\u5217\u8868
  function getCardListDOM(dataList: Array<string>, row: number) {
    let listDOM = ''
    dataList.forEach((item: any) => {
      listDOM += \` <\${item.link ? 'a href="' + item.link + '" target="_blank"' : 'span'} class="card-item \${row ? 'row-' + row : ''}" style="\${item.bgColor ? 'background-color:' + item.bgColor + ';' : ''}\${item.textColor ? 'color:' + item.textColor + ';' : ''}" > \${
        item.avatar ? '<img src="' + item.avatar + '" class="no-zoom">' : ''
      } <div> <p class="name">\${item.name}</p> <p class="desc">\${item.desc}</p> </div> </\${item.link ? 'a' : 'span'}> \`
    })
    return listDOM
  }

  // \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u56FE\u6587\u5361\u7247\u5217\u8868
  function getCardImgListDOM(dataList: Array<string>, row: number) {
    let listDOM = ''
    dataList.forEach((item: any) => {
      listDOM += \` <div class="card-item \${row ? 'row-' + row : ''}" > <div class="box-img"> <a href="\${item.link}" target="_blank"> <img src="\${item.img}" class="no-zoom"> </a> </div> <div class="box-info"> <a href="\${item.link}" target="_blank"> <p class="name">\${item.name}</p> \${
        item.desc ? \`<p class="desc">\${item.desc}</p>\` : ''
      }
    </a>
    </div>
   \${item.avatar || item.author ? \`<div class="box-footer"><a href="\${item.link}" target="_blank">\${item.avatar ? \`<img src="\${item.avatar}" class="no-zoom">\` : ''} \${item.author ? \`<span>\${item.author}</span>\` : ''}</a></div>\` : ''}</div> \`
    })
    return listDOM
  }

  export const resolveContainerOptions = (type: string): ContainerPluginOptions => {
    const render: any = renderCardList
    return { type, render }
  }
  \`\`\`

  2\u3001\u5728\u63D2\u4EF6\u914D\u7F6E\u6587\u4EF6\`.vuepress/theme/plugins.ts\`\u4E2D\u8FDB\u884C\u63D2\u4EF6\u914D\u7F6E

  \`\`\`ts
  import { containerPlugin } from '@vuepress/plugin-container'
  import { resolveContainerOptions } from './container'
  export const plugins = [
    //\u81EA\u5B9A\u4E49\u5BB9\u5668cardList
    containerPlugin(resolveContainerOptions('cardList')),
    //\u81EA\u5B9A\u4E49\u5BB9\u5668cardImgList
    containerPlugin(resolveContainerOptions('cardImgList'))
  ]
  \`\`\`

  3\u3001\`cardList\`\u914D\u7F6E

  \`\`\`\`md
  ::: cardList 3

      \`\`\`yaml
      - name: \u5348\u540E\u5357\u6742
        avatar: https://www.recoluan.com/head.png
        desc: Enjoy when you can, and endure when you must.
        link: https://www.recoluan.com
        bgColor: 'rgb(165 216 243)'
        textColor: '#6854A1'
      - name: \u897F\u74DC\u76AE\u513F
        desc: enjoy your grow up!
        avatar: https://coderhdy.com/assets/img/snapshot.png
        link: https://coderhdy.com/
        bgColor: '#FCE5BF'
        textColor: '#7B2532'
      - name: \u5C0F\u7D2B\u5FF5\u6C81
        desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
        avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
        link: https://anyfork.gitee.io/blog-docs/
        bgColor: rgb(218 88 88 / 62%)
        textColor: rgb(5 41 14 / 75%)
      \`\`\`

  :::
  \`\`\`\`

  4\u3001\`cardImgList\`\u914D\u7F6E\u65B9\u5F0F

  \`\`\`\`md
  ::: cardImgList 2

      \`\`\`yaml
      - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
        link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
        name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
        desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
      - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
        link: https://vuepress-theme-reco.recoluan.com/views/plugins/
        name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
        desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
      - img: https://vuepress.vuejs.org/hero.png
        link: https://www.vuepress.cn/
        name: VuePress \u4E2D\u6587\u5B98\u7F51
        desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
      - img: https://vuepress.vuejs.org/hero.png
        link: https://vuepress-community.netlify.app/zh/
        name: VuePress \u5B98\u65B9\u793E\u533A
        desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
      \`\`\`

  :::
  \`\`\`\`

## \u4E09 \u63D2\u4EF6\u5B89\u88C5

&emsp;vuepress \u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u6269\u5C55\u63D2\u4EF6\u7684\u65B9\u5F0F\u6765\u62D3\u5C55\u529F\u80FD\uFF0C\u901A\u8FC7\u63D2\u4EF6\u53EF\u4EE5\u4E30\u5BCC\u6211\u4EEC\u535A\u5BA2\u529F\u80FD\uFF0C\u4F7F\u9875\u9762\u6548\u679C\u66F4\u52A0\`\u70AB\u9177\`\uFF0C\`\u589E\u5F3A\`\u7F51\u7AD9\u7684\`\u903C\u683C\`\uFF0C\u8BE6\u7EC6\u60C5\u51B5\u53C2\u8003[vuepress@2.x \u63D2\u4EF6\u914D\u7F6E\u65B9\u5F0F](https://v2.vuepress.vuejs.org/zh/guide/plugin.html)\u548C[vuepress@2.x \u5185\u7F6E\u63D2\u4EF6](https://v2.vuepress.vuejs.org/zh/reference/plugin/back-to-top.html)\u3002\`Vuepress 2.x\`\u63D2\u4EF6 API \u53D8\u5316\u6BD4\u8F83\u5927\uFF0C\u4F7F\u7528\u65B9\u5F0F\u4E5F\u91C7\u7528\u51FD\u6570\u5F0F\u8C03\u7528\uFF0C\u56E0\u6B64\u793E\u533A\`Vuepress 1.x\`\u63D2\u4EF6\u4E0D\u80FD\u4F7F\u7528\u3002\u535A\u4E3B\u535A\u5BA2\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u9488\u5BF9\`Vuepress 1.x\`\u7684\u90E8\u5206\u63D2\u4EF6\u8FDB\u884C\u4E86\u517C\u5BB9\`Vuepress 2.x\`\u9002\u914D\uFF0C\u4EE5\u4E0B\u662F\u535A\u5BA2\u4E2D\u7528\u5230\u7684\u63D2\u4EF6\uFF1A

### 1 PWA \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001[pwa](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html)\u63D2\u4EF6\u4E3A\`vuepress 2.x\`\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u4F7F\u4F60\u7684 VuePress \u7AD9\u70B9\u6210\u4E3A\u4E00\u4E2A[\u6E10\u8FDB\u5F0F Web \u5E94\u7528 (PWA)](https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps)\uFF0C\u8BE5\u63D2\u4EF6\u4F7F\u7528[workbox-build](https://developers.google.com/web/tools/workbox/modules/workbox-build?utm_source=devtools) \u6765\u751F\u6210 Service Worker \u6587\u4EF6\uFF0C\u5E76\u901A\u8FC7[register-service-worker](https://github.com/yyx990803/register-service-worker) \u6765\u6CE8\u518C Service Worker

2\u3001[pwa-popup](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html) \u63D2\u4EF6\u4E3A\`vuepress 2.x\`\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u63D0\u4F9B\u4E00\u4E2A\u5F39\u7A97\u7EC4\u4EF6\uFF0C\u5141\u8BB8\u7528\u6237\u624B\u52A8\u5237\u65B0 PWA Service Worker \u3002
\u8BE5\u63D2\u4EF6\u5FC5\u987B\u548C pwa \u63D2\u4EF6 \u4E00\u8D77\u4F7F\u7528\uFF0C\u5E76\u4E14 skipWaiting \u914D\u7F6E\u9879\u4E0D\u80FD\u8BBE\u7F6E\u4E3A true \u3002\u5F53\u65B0\u7684 Service Worker \u5C31\u7EEA\u65F6\uFF0C\u4F1A\u5728\u9875\u9762\u53F3\u4E0B\u89D2\u51FA\u73B0\u4E00\u4E2A\u5F39\u7A97\uFF0C\u8BE2\u95EE\u7528\u6237\u662F\u5426\u9700\u8981\u6FC0\u6D3B\u5904\u4E8E Waiting \u72B6\u6001\u7684 Service Worker \u3002

3\u3001\`pwa\`\u548C\`pwa-popup\`\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002
:::

- [pwa](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

  - \u5B89\u88C5\u4F9D\u8D56

  \`\`\`sh
   npm i -D @vuepress/plugin-pwa@next
  \`\`\`

  - \u63D2\u4EF6\u914D\u7F6E

  \`\`\`js
  import { pwaPlugin } from '@vuepress/plugin-pwa'
  module.exports = {
    plugins: [pwaPlugin()]
  }
  \`\`\`

- [pwa-popup](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

  - \u5B89\u88C5\u4F9D\u8D56

  \`\`\`sh
   npm i -D @vuepress/plugin-pwa-popup@next
  \`\`\`

  - \u63D2\u4EF6\u914D\u7F6E

  \`\`\`js
   pwaPopupPlugin({
        locales: {
            '/': {
                message: '\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528',
                buttonText: '\u70B9\u6211\u5237\u65B0',
            }
        },
    }),
  \`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003\`pwa\`\u5B98\u7F51\u914D\u7F6E\uFF1A<https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html>

### 2 DocSearch \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" />

::: info
1\u3001\u5C06 Algolia DocSearch \u96C6\u6210\u5230 VuePress \u4E2D\uFF0C\u4E3A\u4F60\u7684\u6587\u6863\u7F51\u7AD9\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002

2\u3001\u5F53\u4F60\u6B63\u786E\u914D\u7F6E\u8BE5\u63D2\u4EF6\u540E\uFF0C\u9ED8\u8BA4\u4E3B\u9898\u4F1A\u628A DocSearch \u6309\u94AE\u6DFB\u52A0\u5230\u5BFC\u822A\u680F\u3002

3\u3001\`DocSearch\`\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002
:::

- [DocSearch](https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

  \`\`\`sh
   npm i -D @vuepress/plugin-docsearch@next
  \`\`\`

- \u63D2\u4EF6\u914D\u7F6E

  \`\`\`js
  import { docsearchPlugin } from '@vuepress/plugin-docsearch'
  module.exports = {
    plugins: [
      //docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html
      docsearchPlugin({
        apiKey: 'e3224f6a8f05632af9c14c97******b54',
        indexName: 'anyfork',
        appId: '09V****WK61N',
        placeholder: '\u641C\u7D22\u6587\u6863',
        locales: {
          '/': {
            placeholder: '\u641C\u7D22\u6587\u6863',
            translations: {
              button: {
                buttonText: '\u641C\u7D22\u6587\u6863'
              }
            }
          }
        }
      })
    ]
  }
  \`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[DocSearch](https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95)\u5B98\u7F51\u914D\u7F6E\uFF0C\`Algolia\`\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A[VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22](./algoliaSearch.md)

### 3 ReadingTime \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`ReadingTime\u63D2\u4EF6\`\u7EDF\u8BA1\u6587\u7AE0\u5B57\u6570\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/reading-time/zh/>
:::

- [ReadingTime](https://vuepress-theme-hope.github.io/v2/reading-time/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-reading-time2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-reading-time2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-reading-time2@next@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { readingTimePlugin } from 'vuepress-plugin-reading-time2'
module.exports = {
  plugins: [readingTimePlugin({})]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[readingTime](https://vuepress-theme-hope.github.io/v2/reading-time/zh/)\u5B98\u7F51\u914D\u7F6E\u3002

### 4 SEO \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`SEO\u63D2\u4EF6\`\u672C\u63D2\u4EF6\u4F1A\u901A\u8FC7\u5411\u7F51\u7AD9\`<head>\` \u6CE8\u5165\u6807\u7B7E\uFF0C\u8BA9\u4F60\u7684\u7F51\u7AD9\u5B8C\u5168\u652F\u6301 \u5F00\u653E\u5185\u5BB9\u534F\u8BAE OGP \u548C JSON-LD 1.1\uFF0C\u4EE5\u5168\u9762\u589E\u5F3A\u7AD9\u70B9\u7684\u641C\u7D22\u5F15\u64CE\u4F18\u5316\u6027\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/seo/zh/guide.html>
:::

- [SEO](https://vuepress-theme-hope.github.io/v2/seo/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-seo2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-seo2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-seo2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { seoPlugin } from 'vuepress-plugin-seo2'
module.exports = {
  plugins: [
    // seo\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/seo/
    seoPlugin({
      hostname: 'https://anyfork.github.io/',
      author: {
        name: '\u5C0F\u7D2B\u5FF5\u6C81',
        url: 'https://anyfork.github.io/blog-docs/'
      }
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[SEO](https://vuepress-theme-hope.github.io/v2/seo/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 5 SiteMap \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`siteMap\u63D2\u4EF6\`\u672C\u63D2\u4EF6\u4F1A\u4E3A\u4F60\u7684\u7F51\u7AD9\u81EA\u52A8\u751F\u6210 Sitemap\u3002\u4E3A\u4E86\u4F7F\u63D2\u4EF6\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u4F60\u9700\u8981\u5C06\u90E8\u7F72\u7684\u57DF\u540D\u4F20\u9012\u7ED9\u63D2\u4EF6\u7684 hostname \u9009\u9879\u3002\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6839\u636E\u9875\u9762\u7684 Git \u7684\u65F6\u95F4\u6233\u751F\u6210\u9875\u9762\u7684\u6700\u540E\u66F4\u65B0\u65F6\u95F4\uFF0C\u540C\u65F6\u4F1A\u6839\u636E\u7AD9\u70B9\u7684\u591A\u8BED\u8A00\u914D\u7F6E\u58F0\u660E\u9875\u9762\u7684\u5176\u4ED6\u8BED\u8A00\u7248\u672C\u66FF\u4EE3\u5730\u5740\u3002\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/sitemap/zh/>
:::

- [SEO](https://vuepress-theme-hope.github.io/v2/seo/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-sitemap2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-sitemap2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-sitemap2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>
- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { sitemapPlugin } from 'vuepress-plugin-sitemap2'
module.exports = {
  plugins: [
    // siteMap\u7AD9\u70B9\u5730\u56FE\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html
    sitemapPlugin({
      hostname: 'https://anyfork.github.io/blog-docs/',
      extraUrls: ['https://anyfork.gitee.io/blog-docs/']
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[siteMap](https://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 6 Copyright \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`copyright\u63D2\u4EF6\`\u6B64\u63D2\u4EF6\u53EF\u4EE5\u5728\u8BBF\u95EE\u8005\u4ECE\u4F60\u7684\u7AD9\u70B9\u590D\u5236\u5185\u5BB9\u65F6\uFF0C\u81EA\u52A8\u8FFD\u52A0\u7248\u6743\u4FE1\u606F\uFF0C\u4E5F\u53EF\u4EE5\u7981\u6B62\u7AD9\u70B9\u7684\u590D\u5236\u6216\u8005\u9009\u62E9\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/copyright/zh/>
:::

- [copyright](https://vuepress-theme-hope.github.io/v2/copyright/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-copyright2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-copyright2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-copyright2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { copyrightPlugin } from 'vuepress-plugin-copyright2'
module.exports = {
  plugins: [
    //\u590D\u5236\u52A0\u7248\u6743\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copyright/zh/config.html
    copyrightPlugin({
      hostname: 'https://anyfork.github.io/blog-docs/',
      author: '\u5C0F\u7D2B\u5FF5\u6C81',
      global: true
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[copyright](https://vuepress-theme-hope.github.io/v2/copyright/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 7 CopyCode \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`copyCode\u63D2\u4EF6\`\u6B64\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6DFB\u52A0\u590D\u5236\u6309\u94AE\u5230\u6BCF\u4E2A\u4EE3\u7801\u5757\u7684\u53F3\u4E0B\u89D2\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6309\u94AE\u4EC5\u5728\u684C\u9762\u6A21\u5F0F\u663E\u793A\uFF0C\u5982\u679C\u4F60\u9700\u8981\u5728\u79FB\u52A8\u7AEF\u5C55\u793A\u8FD9\u4E2A\u6309\u94AE\uFF0C\u8BF7\u5C06 showInMobile \u8BBE\u7F6E\u4E3A true\u3002\u5728\u7528\u6237\u70B9\u51FB\u590D\u5236\u6309\u94AE\u540E\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u663E\u793A\u4E00\u4E2A\u590D\u5236\u6210\u529F\u7684\u63D0\u793A\u3002\u9ED8\u8BA4\u7684\u63D0\u793A\u65F6\u957F\u4E3A 2000ms\uFF0C\u5982\u679C\u4F60\u9700\u8981\u66F4\u6539\u8FD9\u4E2A\u65F6\u957F\uFF0C\u8BF7\u8BBE\u7F6E duration(\u5355\u4F4D ms)\uFF0C\u5982\u679C\u4F60\u4E0D\u9700\u8981\u8FD9\u4E2A\u63D0\u793A\uFF0C\u8BF7\u5C06 duration \u8BBE\u7F6E\u4E3A 0\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/copy-code/zh/>
:::

- [CopyCode](https://vuepress-theme-hope.github.io/v2/copy-code/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-copy-code2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-copy-code2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-copy-code2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { copyCodePlugin } from 'vuepress-plugin-copy-code2'
module.exports = {
  plugins: [
    //\u4EE3\u7801\u590D\u5236\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copy-code/zh/
    copyCodePlugin({
      selector: '.theme-default-content div[class*="language-"] pre',
      locales: {
        '/': {
          copy: '\u590D\u5236\u6210\u529F!',
          hint: 'copy!'
        }
      }
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[copyCode](https://vuepress-theme-hope.github.io/v2/copy-code/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 8 Waline \u8BC4\u8BBA\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`Giscus\u63D2\u4EF6\`Giscus \u662F\u4E00\u4E2A\u57FA\u4E8E GitHub Discussion \u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u542F\u7528\u7B80\u4FBF\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/comment/zh/guide/giscus.html>,\u539F\u672C\u535A\u4E3B\u91C7\u7528\u7684\u662F\`Giscus\`\u4F5C\u4E3A\u8BC4\u8BBA\u63D2\u4EF6\uFF0C\u4F46\u53D1\u73B0\u5176\u6CA1\u6709\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u529F\u80FD\uFF0C\u540E\u91C7\u7528\`Waline\`\u63D2\u4EF6\uFF0C\u4E0D\u4EC5\u5177\u6709\u8BC4\u8BBA\u529F\u80FD\uFF0C\u8FD8\u80FD\u8FDB\u884C\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u3002

4\u3001\`Waline\u63D2\u4EF6\`\u662F\u5BF9\`valine\u63D2\u4EF6\`\u7684\u5C01\u88C5\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86\`valine\`\u6570\u636E\u4E0D\u5B89\u5168\u95EE\u9898\uFF0C\u540C\u65F6\u4E5F\u5177\u5907\`valine\`\u4E00\u5207\u529F\u80FD\u3002\u53EF\u4EE5\u4F7F\u7528 hope \u63D2\u4EF6\u7528\u6CD5\uFF0C\u5355\u9875\u9762\u96C6\u6210\u597D\u4E86\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u901A\u8FC7\u5BFB\u627E\u9ED8\u8BA4\u7C7B\u9009\u62E9\u5668\`waline-pageview-count\`\u8FDB\u884C\u6570\u636E\u81EA\u52A8\u586B\u5145\uFF0C\u4F46\u5BF9\u4E8E\u9996\u9875\u5217\u8868\u672A\u5B9E\u73B0\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u81EA\u884C\u5B9E\u73B0\u5373\u53EF\u3002\u63D2\u4EF6\u914D\u7F6E\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html>,\u4EA6\u53EF\u5355\u72EC\u4F7F\u7528\uFF0C\u8BE6\u89C1[waline \u5B98\u7F51](https://waline.js.org/guide/get-started.html)\u3002
:::

- [Waline](https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-comment2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-comment2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-comment2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

:::tip
1\u3001\u53EF\u4EE5\u6309\u7167\`hope\`\u63D2\u4EF6\u914D\u7F6E\u6D41\u7A0B\u8FDB\u884C\u914D\u7F6E\uFF0C\u91C7\u7528\`waline\`\u5B98\u65B9\u9ED8\u8BA4\u7684\`LeanCloud \`\u6570\u636E\u5E93\u548C\`Vercel\`\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u3002\u535A\u4E3B\u5C1D\u8BD5\u8FC7\u56FD\u5185\u6548\u679C\u4E0D\u592A\u597D\uFF0C\u4E0D\u5F00\u68AF\u5B50\u60C5\u51B5\u4E0B\`Vercel\`\u670D\u52A1\u7AEF\u5730\u5740\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u4E8E\u662F\u4FBF\u653E\u5F03\u4E86\u3002

2\u3001\u6309\u7167[waline \u5B98\u7F51](https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93)\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u8FDB\u884C\u670D\u52A1\u7AEF\u90E8\u7F72\u3002\u5404\u79CD\u65B9\u5F0F\u90FD\u5C1D\u8BD5\u4E86\u4E00\u4E0B,\u7ED3\u679C\u5982\u4E0B\uFF1A1 \u817E\u8BAF\u4E91\u4E91\u51FD\u6570\u8BA1\u7B97\u4ECA\u5E74 8 \u6708\u5F00\u59CB\u6536\u8D39\uFF0C\u6700\u4F4E\u6BCF\u6708 19.9\uFF0C\u653E\u5F03\u4E86\u30022 \u767E\u5EA6\u4E91\u6309\u7167\u5B98\u7F51\u6D41\u7A0B\u90E8\u7F72\uFF0C\u7A0B\u5E8F\u62A5\u9519\uFF0C\u4F9D\u8D56\u7248\u672C\u95EE\u9898\uFF0C\u4FBF\u653E\u5F03\u4E86\u30023 \u963F\u91CC\u4E91\u90E8\u7F72\u6210\u529F\u4E86\uFF0C\u4E91\u51FD\u6570\u8BA1\u7B97\u6BCF\u6708 100 \u4E07\u514D\u8D39\u6B21\u6570\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\uFF0C\u4F46\u670D\u52A1 url \u9700\u8981\u81EA\u5B9A\u4E49\u57DF\u540D\u8FDB\u884C\u6620\u5C04\uFF0C\u4E0D\u7136\u6CA1\u6CD5\u76F4\u63A5\u4F7F\u7528\uFF0C\u4F1A\u76F4\u63A5\u4E0B\u8F7D html\uFF0C\u9700\u8981\u6709\u963F\u91CC\u4E91\u57DF\u540D\u6216\u8005\u8BF4\u963F\u91CC\u4E91\u670D\u52A1\u5668\uFF0C\u535A\u4E3B\u6CA1\u6709\u963F\u91CC\u4E91\u670D\u52A1\u5668\u4FBF\u653E\u5F03\u4E86\u3002\u4E0A\u9762\u7684\u65B9\u5F0F\u963F\u91CC\u4E91\u6700\u5408\u9002\uFF0C\u6709\u6761\u4EF6\u7684\u5C0F\u4F19\u4F34\u53EF\u4EE5\u5C1D\u8BD5\u3002

3\u3001\u535A\u4E3B\u63A8\u8350\u901A\u8FC7\u81EA\u5DF1\u90E8\u7F72\`waline\`\u670D\u52A1\u5668\u7684\u65B9\u5F0F\uFF0C\u4E3B\u8981\u539F\u56E0\u662F\uFF1A\u90E8\u7F72\u7B80\u5355\uFF0C\u7075\u6D3B\uFF0C\u8BBF\u95EE\u901F\u5EA6\u66F4\u5FEB\uFF0C\u8FD8\u80FD\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\uFF0C\u524D\u63D0\u662F\u81EA\u5DF1\u8981\u6709\u4E91\u670D\u52A1\u5668\u548C\u57DF\u540D\u3002\u8BE6\u7EC6\u90E8\u7F72\u65B9\u5F0F\u53C2\u8003\u5B98\u7F51[\u72EC\u7ACB\u90E8\u7F72](https://waline.js.org/guide/server/vps-deploy.html)\u6216\u8005[Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848](./walineServer.md)\u3002\u6309\u7167\u4E0A\u8FF0\u64CD\u4F5C\u5373\u53EF\uFF0C\u53EA\u9700\u8981\u914D\u7F6E\u597D\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u4E0A\u7EBF\u90E8\u7F72\u5373\u53EF\u3002
:::

\`\`\`js
import { commentPlugin } from 'vuepress-plugin-comment2'
module.exports = {
  plugins: [
    commentPlugin({
      provider: 'Waline',
      //\u72EC\u7ACB\u90E8\u7F72\u7684waline\u670D\u52A1\u5668\u8BBF\u95EE\u5730\u5740
      serverURL: 'XXXX',
      //\u662F\u5426\u5F00\u542F\u8BBF\u95EE\u91CF
      pageview: true
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[Waline](https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93)\u5B98\u7F51\u914D\u7F6E\u3002

### 9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`Markdown\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6\`\u901A\u8FC7\u5B89\u88C5\u5E76\u542F\u7528\u6B64\u63D2\u4EF6\uFF0C\u4F60\u53EF\u4EE5\u5728 Markdown \u4E2D\u4F7F\u7528\u66F4\u591A\u7684\u8BED\u6CD5\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/md-enhance/zh/>
:::

- [Markdown \u8BED\u6CD5\u6269\u5C55](https://vuepress-theme-hope.github.io/v2/md-enhance/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-md-enhance@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-md-enhance@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-md-enhance@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { mdEnhancePlugin } from 'vuepress-plugin-md-enhance'
module.exports = {
  plugins: [
    //markdown \u589E\u5F3A\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/
    mdEnhancePlugin({
      // \u542F\u7528\u81EA\u5B9A\u4E49\u5BB9\u5668
      container: true
    })
  ]
}
\`\`\`

\u4F60\u53EF\u4EE5\u5728\u9009\u9879\u4E2D enableAll \u8BBE\u7F6E\u4E3A true \u6765\u542F\u7528\u63D2\u4EF6\u7684\u6240\u6709\u529F\u80FD,\u4E0D\u5EFA\u8BAE\u5F00\u542F\u5168\u90E8\u6269\u5C55\u529F\u80FD\uFF0C\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8FDB\u884C\u5F00\u542F

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[Markdown \u8BED\u6CD5\u6269\u5C55](https://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/)\u5B98\u7F51\u914D\u7F6E\u3002

### 10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6\`\u53EF\u4EE5\u5728\u7F51\u7AD9\u5168\u5C40\u6CE8\u518C\u97F3\u4E50\u64AD\u653E\u5668\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u914D\u7F6E\u672C\u5730\u6216\u7EBF\u4E0A\u97F3\u4E50\uFF0C\u5B9E\u73B0\u97F3\u4E50\u5728\u7EBF\u64AD\u653E\u3002
:::

- [\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D @anyfork/vuepress-plugin-bgm-player-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-bgm-player-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { bgmMusicPlayer } from '@anyfork/vuepress-plugin-bgm-player-next'
module.exports = {
  plugins: [
    //\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6\u3002
    bgmMusicPlayer({
      audios: [
        {
          name: '\u5361\u519C',
          artist: '\u5361\u519C\u94A2\u7434\u7248',
          url: '/blog-docs/music/canon/canon.mp3',
          cover: '/blog-docs/music/canon/canon.jpg'
        },
        {
          name: '\u98CE\u5C45\u4F4F\u7684\u8857\u9053',
          artist: '\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2',
          url: '/blog-docs/music/wind/wind.mp3',
          cover: '/blog-docs/music/wind/wind.jpg'
        },
        {
          name: '\u591C\u7684\u94A2\u7434\u66F2',
          artist: '\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB',
          url: '/blog-docs/music/night/night.mp3',
          cover: '/blog-docs/music/night/night.jpg'
        }
      ],
      autoShrink: true,
      floatStyle: { bottom: '100px', 'z-index': '999999' }
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6\`\u9F20\u6807\u70B9\u51FB\u65F6\u89E6\u53D1\u70B9\u51FB\u7279\u6548\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next>
:::

- [\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-cursor-effects-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-cursor-effects-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { cursorEffects } from '@anyfork/vuepress-plugin-cursor-effects-next'
module.exports = {
  plugins: [
    //\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6
    cursorEffects({
      size: 4,
      shape: 'star'
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6\`\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next>
:::

- [\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-dynamic-title-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-dynamic-title-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { dynamicTitle } from '@anyfork/vuepress-plugin-dynamic-title-next'
module.exports = {
  plugins: [dynamicTitle()]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 13 \u770B\u677F\u5A18\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u770B\u677F\u5A18\u63D2\u4EF6\`\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next>
:::

- [\u770B\u677F\u5A18\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-kan-ban-niang-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-kan-ban-niang-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { kanBanNiang } from '@anyfork/vuepress-plugin-kan-ban-niang-next'
module.exports = {
  plugins: [kanBanNiang()]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u770B\u677F\u5A18\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6\`\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next>
:::

- [\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-ribbon-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-ribbon-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { ribbon } from '@anyfork/vuepress-plugin-ribbon-next'
module.exports = {
  plugins: [
    //\u5F69\u5E26
    ribbon({
      size: 120, // \u9ED8\u8BA4\u6570\u636E
      opacity: 0.3, //  \u900F\u660E\u5EA6
      zIndex: -1, //  \u5C42\u7EA7
      option: {
        // \u8272\u5E26HSL\u9971\u548C\u5EA6
        colorSaturation: '80%',
        // \u8272\u5E26HSL\u4EAE\u5EA6\u91CF
        colorBrightness: '60%',
        // \u5E26\u72B6\u989C\u8272\u4E0D\u900F\u660E\u5EA6
        colorAlpha: 0.65,
        // \u5728HSL\u989C\u8272\u7A7A\u95F4\u4E2D\u5FAA\u73AF\u663E\u793A\u989C\u8272\u7684\u901F\u5EA6\u6709\u591A\u5FEB
        colorCycleSpeed: 6,
        // \u4ECE\u54EA\u4E00\u4FA7\u5F00\u59CBY\u8F74 (top|min, middle|center, bottom|max, random)
        verticalPosition: 'max',
        // \u5230\u8FBE\u5C4F\u5E55\u53E6\u4E00\u4FA7\u7684\u901F\u5EA6\u6709\u591A\u5FEB
        horizontalSpeed: 200,
        // \u5728\u4EFB\u4F55\u7ED9\u5B9A\u65F6\u95F4\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u4FDD\u7559\u591A\u5C11\u6761\u5E26
        ribbonCount: 3,
        // \u6DFB\u52A0\u7B14\u5212\u4EE5\u53CA\u8272\u5E26\u586B\u5145\u989C\u8272
        strokeSize: 0,
        // \u901A\u8FC7\u9875\u9762\u6EDA\u52A8\u4E0A\u7684\u56E0\u5B50\u5782\u76F4\u79FB\u52A8\u8272\u5E26
        parallaxAmount: -0.5,
        // \u968F\u7740\u65F6\u95F4\u7684\u63A8\u79FB\uFF0C\u4E3A\u6BCF\u4E2A\u529F\u80FD\u533A\u6DFB\u52A0\u52A8\u753B\u6548\u679C
        animateSections: true
      },
      //  \u70B9\u51FB\u5F69\u5E26  true\u663E\u793A  false\u4E3A\u4E0D\u663E\u793A
      ribbonShow: false,
      // \u6ED1\u52A8\u5F69\u5E26
      ribbonAnimationShow: true
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u6A31\u82B1\u7279\u6548\u63D2\u4EF6\`\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next>
:::

- [\u6A31\u82B1\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-sakura-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-sakura-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { sakura } from '@anyfork/vuepress-plugin-sakura-next'
module.exports = {
  plugins: [
    //\u6A31\u82B1\u7279\u6548
    sakura({
      sakura_zindex: 1,
      sakura_img: '/blog-docs/images/blue.png'
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u6A31\u82B1\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next)\u5B98\u7F51\u914D\u7F6E\u3002

## \u56DB \u9879\u76EE\u90E8\u7F72

\`vuepress\`\u9879\u76EE\u548C\u666E\u901A vue \u90FD\u5C5E\u4E8E\u5355\u9875\u9762\u5E94\u7528\uFF0C\u9879\u76EE\u6253\u5305\u90E8\u7F72\u65B9\u5F0F\u4E5F\u4E00\u81F4\uFF0C\u53EF\u4EE5\u91C7\u7528\u672C\u5730\u90E8\u7F72\uFF0C\u4E5F\u53EF\u4EE5\u91C7\u7528\u4E91\u670D\u52A1\u5668\u8FDB\u884C\u90E8\u7F72\u3002\u4E0B\u9762\u603B\u7ED3 2 \u79CD\u90E8\u7F72\u65B9\u5F0F\uFF1A

- 1 \u672C\u5730 nginx \u90E8\u7F72\u9759\u6001\u6587\u4EF6 \u3002
- 2 \u901A\u8FC7\`Gitee Actions\`\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\u5230\`Github Pages\`\u548C\`Gitee Pages\`\u3002

::: warning
1\u3001\u5982\u679C\u9879\u76EE\u8BBE\u7F6E\u4E86\`base\`,\u4E0D\u53EF\u76F4\u63A5\u5728\u672C\u5730\u5F00\u542F\u4E00\u4E2A\u670D\u52A1\u5668(eg:http-server)\u8FDB\u884C\u90E8\u7F72\uFF0C\u9700\u8981\u901A\u8FC7 nginx \u670D\u52A1\u5668\u8FDB\u884C\u53CD\u5411\u4EE3\u7406\u3002

2\u3001\u5982\u679C\u9879\u76EE\u6CA1\u6709\u8BBE\u7F6E\`base\`,\u53EF\u4EE5\u901A\u8FC7\u672C\u5730\u9759\u6001\u670D\u52A1\u5668\u6216 nginx \u670D\u52A1\u5668\u8FDB\u884C\u4EE3\u7406\u3002

3\u3001\`base\`\u7C7B\u578B: string,\u9ED8\u8BA4\u503C: /,\u90E8\u7F72\u7AD9\u70B9\u7684\u57FA\u7840\u8DEF\u5F84\uFF0C\u5982\u679C\u4F60\u60F3\u8BA9\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230\u4E00\u4E2A\u5B50\u8DEF\u5F84\u4E0B\uFF0C\u4F60\u5C06\u9700\u8981\u8BBE\u7F6E\u5B83\u3002\u5982 Github pages\uFF0C\u5982\u679C\u4F60\u60F3\u5C06\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230 https://foo.github.io/bar/\uFF0C\u90A3\u4E48 base \u5E94\u8BE5\u88AB\u8BBE\u7F6E\u6210 \u201C/bar/\u201D\uFF0C\u5B83\u7684\u503C\u5E94\u5F53\u603B\u662F\u4EE5\u659C\u6760\u5F00\u59CB\uFF0C\u5E76\u4EE5\u659C\u6760\u7ED3\u675F\u3002base \u5C06\u4F1A\u81EA\u52A8\u5730\u4F5C\u4E3A\u524D\u7F00\u63D2\u5165\u5230\u6240\u6709\u4EE5 / \u5F00\u59CB\u7684\u5176\u4ED6\u9009\u9879\u7684\u94FE\u63A5\u4E2D\uFF0C\u6240\u4EE5\u4F60\u53EA\u9700\u8981\u6307\u5B9A\u4E00\u6B21\u3002
:::

### 1 nginx \u670D\u52A1\u5668\u90E8\u7F72

- \`base\`\u4E3A\`/\`\u65F6\uFF0C\u76F8\u5E94\u7684 nginx \u914D\u7F6E\u5341\u5206\u7B80\u5355\uFF0C\u76F4\u63A5\u6307\u5B9A\u7AEF\u53E3\u5982\u4E0B\u9762\u793A\u4F8B\u7684 8080\uFF0C\u5E76\u6307\u5B9A root \u8DEF\u5F84\uFF08\u5373 build \u540E\u653E\u5728\u670D\u52A1\u5668\u7684\u8DEF\u5F84\uFF09nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A

  \`\`\`conf
  server {
    listen 8080;
    location / {
        root /root/doc/dist;
        try_files $uri $uri/ /index.html;
        index index.html index.htm;
      }
  }
  \`\`\`

- \`base\`\u4E3A\`/blog-docs\`\u65F6\uFF0C\u6BD4\u5982\u672C\u7AD9\uFF0C\u914D\u7F6E\u7684\u4E3A/blog-docs\uFF0C\u914D\u7F6E\u4E5F\u5F88\u7B80\u5355\uFF0C\u53EA\u9700\u8981\u4E0A\u9762\u7684 location \u7531/\u6539\u4E3A/blog-docs/\uFF0C\u6CE8\u610F\u6700\u540E\u4E00\u4E2A\u659C\u6760\u3002nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A
  \`\`\`conf
  server {
    listen 80;
    server_name localhost;
    client_max_body_size 20m;
    charset utf-8;
      #\u914D\u7F6E\u4E86\u8F6C\u53D1
    location /blog-docs/ {
      proxy_pass http://localhost:8081/;
    }
  }
  #\u57288081\u4E0A\u8D77\u4E86vuepress
  server {
    listen 8081;
    location / {
        root /root/doc/dist;
        try_files $uri $uri/ /index.html;
        index index.html index.htm;
    }
  }
  \`\`\`

### 2 \u90E8\u7F72\u5728\`Github Pages\`\u548C\`Gitee Pages\`

&emsp;\u9879\u76EE\u91C7\u7528\`Github Pages\`\u548C\`Gitee Pages\`\u65B9\u5F0F\u8FDB\u884C\u4EE3\u7406\u90E8\u7F72\uFF0C\u4F9D\u9760\`Github\`\u5F3A\u5927\u7684\u5DE5\u4F5C\u6D41\u673A\u5236\u5B9E\u73B0\u81EA\u52A8\u7F16\u8BD1\u6253\u5305\u90E8\u7F72\u3002\u5927\u81F4\u90E8\u7F72\u6D41\u7A0B\uFF1A\u672C\u5730\u901A\u8FC7 git \u63D0\u4EA4\u6E90\u4EE3\u7801\uFF0C\`Github Actions\`\u89E6\u53D1\u5DE5\u4F5C\u6D41\`workflows\`\u5B9E\u73B0\u5206\u652F\u4EE3\u7801\u68C0\u51FA\uFF0C\u4F9D\u8D56\u5B89\u88C5\uFF0C\u6253\u5305\u7F16\u8BD1\uFF0C\u521B\u5EFA\`gh-pages\`\u5206\u652F\uFF0C\u4E0A\u4F20\`dist\`\u7F16\u8BD1\u540E\u4EE3\u7801\u5230\`gh-pages\`\uFF0C\`gh-pages\`\u5206\u652F\u90E8\u7F72\u5230\`\`Github Pages\`\uFF0C\u540C\u6B65\`Github\`\u4ED3\u5E93\u4EE3\u7801\u81F3\`Giee\`,\`Gitee Pages\`\u90E8\u7F72\u3002\u4E0A\u8FF0\u6D41\u7A0B\u5B9E\u73B0\u4E86\u81EA\u52A8\u7F16\u8BD1\u90E8\u7F72\u548C\`github\`\u4EE3\u7801\u540C\u6B65\u90E8\u7F72\u81F3\`gitee\`\u3002

\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u8BF7\u53C2\u8003\uFF1A[GitHub Actions \u81EA\u52A8\u90E8\u7F72 GitHub Pages \u5E76\u540C\u6B65 Gitee Pages](./githubPages.md)
`,contentRendered:`<p>\u2003\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86<code v-pre>vuepress@2.x</code>\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}</p>
<!-- more -->
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u535A\u4E3B\u4EE5\u524D\u4E5F\u7528<code v-pre>vuepress-theme-reco@1.x</code>\u4E3B\u9898\u642D\u5EFA\u4E86\u4E00\u4E2A\u535A\u5BA2\uFF0C\u6BD4\u8F83\u559C\u6B22vuepress-theme-reco@1.x\u98CE\u683C\uFF0C\u7531\u4E8E<code v-pre>vuepress-theme-reco@1.x</code>\u91C7\u7528\u7684\u6280\u672F\u90FD\u76F8\u5BF9\u76EE\u524D\u6BD4\u8F83\u843D\u540E\uFF0C\u540E\u6765\u4FBF\u7528<code v-pre>vuepress 2.X</code>\u5F00\u53D1\u4E86\u73B0\u5728\u7684\u535A\u5BA2\uFF0C\u6574\u4F53\u9875\u9762\u98CE\u683C\u548C\u6837\u5F0F\u548C\u539F\u6765\u7684\u4E00\u6A21\u4E00\u6837\uFF0C\u4F46\u4E3B\u9898\u8FD8\u662F\u7EE7\u627F\u4E86<code v-pre>vuepress 2.X</code>\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u589E\u52A0\u4E86\u535A\u5BA2,\u5206\u7C7B\uFF0C\u6807\u7B7E\u529F\u80FD\u548C\u5176\u4ED6\u9996\u9875\u7279\u6548\u63D2\u4EF6\u3002</p>
<p>2\u3001\u535A\u5BA2\u5730\u5740\uFF1A<a href="https://anyfork.github.io/blog-docs/" target="_blank" rel="noopener noreferrer">https://anyfork.github.io/blog-docs/<ExternalLinkIcon/></a>\u6216<a href="https://anyfork.gitee.io/blog-docs/" target="_blank" rel="noopener noreferrer">https://anyfork.gitee.io/blog-docs/<ExternalLinkIcon/></a></p>
</div>
<h2 id="\u4E00-\u521D\u59CB\u5316\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u4E00-\u521D\u59CB\u5316\u9879\u76EE" aria-hidden="true">#</a> \u4E00 \u521D\u59CB\u5316\u9879\u76EE</h2>
<h3 id="_1-\u73AF\u5883\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#_1-\u73AF\u5883\u4F9D\u8D56" aria-hidden="true">#</a> 1 \u73AF\u5883\u4F9D\u8D56</h3>
<ul>
<li><a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js v14+<ExternalLinkIcon/></a>\uFF0C\u6700\u4F4E\u4F7F\u7528<code v-pre>Node 14+</code>\u7248\u672C\uFF0C\u5EFA\u8BAE\u4F7F\u7528<code v-pre>Node 14.16.0</code>\u7248\u672C</li>
</ul>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<ul>
<li>\u4F7F\u7528 <a href="https://pnpm.io/zh/" target="_blank" rel="noopener noreferrer">pnpm<ExternalLinkIcon/></a> \u65F6\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u5B89\u88C5 vue \u548C @vuepress/client \u4F5C\u4E3A peer-dependencies \uFF0C\u5373 pnpm add -D vue @vuepress/client@next \u3002</li>
<li>\u4F7F\u7528 <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">yarn 2<ExternalLinkIcon/></a> \u65F6\uFF0C\u4F60\u9700\u8981\u5728 <a href="https://yarnpkg.com/configuration/yarnrc#nodeLinker" target="_blank" rel="noopener noreferrer">.yarnrc.yml<ExternalLinkIcon/></a> \u6587\u4EF6\u4E2D\u8BBE\u7F6E nodeLinker: 'node-modules'</li>
</ul>
</div>
<h3 id="_2-\u5FEB\u901F\u5F00\u59CB" tabindex="-1"><a class="header-anchor" href="#_2-\u5FEB\u901F\u5F00\u59CB" aria-hidden="true">#</a> 2 \u5FEB\u901F\u5F00\u59CB</h3>
<ul>
<li>\u521B\u5EFA\u9879\u76EE\u76EE\u5F55</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u521B\u5EFA\u9879\u76EE\u76EE\u5F55</span>
<span class="token function">mkdir</span> blog-docs
<span class="token comment"># \u8FDB\u5165\u9879\u76EE\u76EE\u5F55</span>
<span class="token builtin class-name">cd</span> blog-docs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521D\u59CB\u5316\u9879\u76EE</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">git</span> init
<span class="token function">yarn</span> init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">git</span> init
<span class="token function">npm</span> init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u4F9D\u8D56\u5B89\u88C5</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> vuepress@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u5728<code v-pre>package.json</code>\u589E\u52A0\u4E2D\u6DFB\u52A0\u4E00\u4E9B scripts</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">{</span>
  <span class="token string">"scripts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">"dev"</span><span class="token builtin class-name">:</span> <span class="token string">"vuepress dev docs"</span>,
    <span class="token string">"build"</span><span class="token builtin class-name">:</span> <span class="token string">"vuepress build docs"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u5C06\u9ED8\u8BA4\u7684\u4E34\u65F6\u76EE\u5F55\u548C\u7F13\u5B58\u76EE\u5F55\u6DFB\u52A0\u5230<code v-pre>.gitignore</code>\u6587\u4EF6\u4E2D</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'node_modules'</span> <span class="token operator">>></span> .gitignore
<span class="token builtin class-name">echo</span> <span class="token string">'.temp'</span> <span class="token operator">>></span> .gitignore
<span class="token builtin class-name">echo</span> <span class="token string">'.cache'</span> <span class="token operator">>></span> .gitignore
<span class="token builtin class-name">echo</span> <span class="token string">'.history'</span> <span class="token operator">>></span> .gitignore
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521B\u5EFA\u6587\u6863\u76EE\u5F55</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">mkdir</span> docs
<span class="token builtin class-name">echo</span> <span class="token string">'# Hello VuePress'</span> <span class="token operator">></span> docs/README.md
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u9879\u76EE\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#_3-\u9879\u76EE\u542F\u52A8" aria-hidden="true">#</a> 3 \u9879\u76EE\u542F\u52A8</h3>
<p>\u7528 vscode \u6253\u5F00\u9879\u76EE\uFF0C\u65B0\u5EFA\u7EC8\u7AEF\uFF0C\u6267\u884C\u542F\u52A8\u811A\u672C\u547D\u4EE4</p>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run docs:dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<p>\u8BE6\u7EC6\u7684\u521B\u5EFA\u8FC7\u7A0B\u8BF7\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/guide/getting-started.html" target="_blank" rel="noopener noreferrer">vuepress \u5B98\u7F51\u5FEB\u901F\u4E0A\u624B<ExternalLinkIcon/></a>\uFF0C\u81F3\u6B64\u9879\u76EE\u642D\u5EFA\u57FA\u7840\u5C31\u8C03\u6574\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u5C31\u53EF\u4EE5\u5F00\u5F00\u5FC3\u5FC3\u7684\u5199<code v-pre>markdown</code>\u6587\u4EF6\u4E86\u3002</p>
<h2 id="\u4E8C-\u529F\u80FD\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E8C-\u529F\u80FD\u914D\u7F6E" aria-hidden="true">#</a> \u4E8C \u529F\u80FD\u914D\u7F6E</h2>
<p>\u2003<code v-pre>vuepress 2.x</code>\u9ED8\u8BA4\u4E3B\u9898\u96C6\u6210\u4E86\u5927\u90E8\u5206\u529F\u80FD\uFF0C\u57FA\u672C\u80FD\u591F\u6EE1\u8DB3\u6211\u4EEC\u7F16\u5199<code v-pre>markdown</code>\u7684\u9700\u6C42\uFF0C\u4F46\u5B98\u65B9\u4E3B\u9898\u4E3B\u8981\u4EE5\u6587\u6863\u4E3A\u4E3B\uFF0C\u5BF9\u4E8E\u535A\u5BA2\u529F\u80FD\u7684\u62D3\u5C55\u9700\u8981\u81EA\u5DF1\u5F00\u53D1\u3002\u9ED8\u8BA4\u4E3B\u9898\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7<code v-pre>\u7EE7\u627F\u7684\u65B9\u5F0F</code>\u6765\u62D3\u5C55\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51<a href="https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html" target="_blank" rel="noopener noreferrer">\u4E3B\u9898\u62D3\u5C55<ExternalLinkIcon/></a>\u3002</p>
<p>\u2003\u535A\u4E3B\u91C7\u7528\u4E86\u9ED8\u8BA4\u4E3B\u9898\u9884\u8BBE\u7684<code v-pre>\u5E03\u5C40\u63D2\u69FD</code>\u548C<code v-pre>\u7EC4\u4EF6\u66FF\u6362</code>2 \u79CD\u65B9\u5F0F\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898(\u5373:\u672C\u5730\u4E3B\u9898\u5F00\u53D1)\u3002<code v-pre>\u7EC4\u4EF6\u66FF\u6362</code>\u4E3B\u8981\u4F53\u73B0\u5728\u535A\u5BA2\u9996\u9875\u5E03\u5C40\uFF0C\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74\u5E03\u5C40\u7B49\uFF0C<code v-pre>\u5E03\u5C40\u63D2\u69FD</code>\u4E3B\u8981\u6D89\u53CA\u8BE6\u60C5\u9875\u9876\u90E8\u5206\u7C7B\u548C\u5E95\u90E8\u8BC4\u8BBA\u7B49\u3002\u540C\u65F6\u901A\u8FC7<code v-pre>vuepress-plugin-blog2</code>\u63D2\u4EF6\u62D3\u5C55\u4E86\u535A\u5BA2\u529F\u80FD(\u6587\u7AE0\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74)\uFF0C<code v-pre>vuepress-plugin-blog2</code><Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u8BBE\u8BA1\u6BD4\u8F83\u7075\u6D3B\uFF0C\u53EF\u4EE5\u6839\u636E\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u5B9A\u5236\uFF0C\u4E0D\u9650\u4E8E\u5206\u7C7B\u548C\u6807\u7B7E\u7B49\u529F\u80FD\uFF0C\u53EF\u4EE5\u81EA\u884C\u62D3\u5C55\u3002</p>
<h3 id="_1-\u5E03\u5C40\u63D2\u69FD" tabindex="-1"><a class="header-anchor" href="#_1-\u5E03\u5C40\u63D2\u69FD" aria-hidden="true">#</a> 1 \u5E03\u5C40\u63D2\u69FD</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E 11 \u4E2A\u5E03\u5C40\u63D2\u69FD\uFF0C\u5206\u522B\u4E3A\uFF1A<code v-pre>navbar</code>,<code v-pre>navbar-before</code>,<code v-pre>navbar-after</code>,<code v-pre>sidebar</code>,<code v-pre>sidebar-top</code>,<code v-pre>sidebar-bottom</code>,<code v-pre>page</code>,<code v-pre>page-top</code>,<code v-pre>page-bottom</code>,<code v-pre>page-content-top</code>,<code v-pre>page-content-bottom</code>,\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51<a href="https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html#%E5%B8%83%E5%B1%80%E6%8F%92%E6%A7%BD" target="_blank" rel="noopener noreferrer">\u5E03\u5C40\u63D2\u69FD<ExternalLinkIcon/></a></p>
<p>2\u3001\u535A\u5BA2\u4E2D\u7528\u5230\u4E86 2 \u4E2A\u63D2\u69FD<code v-pre>page-top</code>\u548C<code v-pre>page-bottom</code>\u3002\u524D\u8005\u7528\u4E8E\u62D3\u5C55\u6587\u7AE0\u9875\u9762\u6807\u9898\u4E0B\u9762\u6587\u7AE0\u4F5C\u8005\uFF0C\u6587\u7AE0\u5206\u7C7B\uFF0C\u6587\u7AE0\u6807\u7B7E\uFF0C\u5B57\u6570\u7EDF\u8BA1\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\u7B49\u4FE1\u606F\uFF0C\u540E\u8005\u4E3B\u8981\u5D4C\u5957<code v-pre>giscus</code>\u8BC4\u8BBA\u7EC4\u4EF6<code v-pre>&lt;CommentService /&gt;</code>,\u5B9E\u73B0\u6587\u7AE0\u8BC4\u8BBA\u529F\u80FD\u3002</p>
</div>
<ul>
<li>
<p>\u914D\u7F6E\u65B9\u6CD5</p>
<p>1\u3001\u521B\u5EFA\u81EA\u5B9A\u4E49\u5E03\u5C40\u7EC4\u4EF6<code v-pre>.vuepress/theme/layouts/layout.vue</code></p>

<CodeDemo id="code-demo-0b0e88d4" type="normal" title="layout%20%E9%85%8D%E7%BD%AE" code="%7B%22js%22%3A%22%3Ctemplate%3E%5Cn%20%20%3CParentLayout%3E%5Cn%20%20%20%20%3Ctemplate%20%23page-top%3E%5Cn%20%20%20%20%20%20%3Cdiv%20class%3D%5C%22title%20w-%5Bvar(--content-width)%5D%20my-0%20mx-auto%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%5C%22flex%20items-center%20justify-between%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3Ch1%3E%7B%7B%20page.title%20%7D%7D%3C%2Fh1%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3CIcon%20icon%3D%5C%22RollbackOutlined%5C%22%20text%3D%5C%22%E8%BF%94%E5%9B%9E%5C%22%20%40click%3D%5C%22%24router.go(-1)%5C%22%20class%3D%5C%22cursor-pointer%5C%22%3E%3C%2FIcon%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%3CBlogItemInfo%20%3Apage%3D%5C%22page%5C%22%3E%3C%2FBlogItemInfo%3E%5Cn%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%3C%2Ftemplate%3E%5Cn%20%20%20%20%3Ctemplate%20%23page-bottom%3E%5Cn%20%20%20%20%20%20%3CCommentService%20%2F%3E%5Cn%20%20%20%20%3C%2Ftemplate%3E%5Cn%20%20%3C%2FParentLayout%3E%5Cn%3C%2Ftemplate%3E%5Cn%3Cscript%20setup%20lang%3D%5C%22ts%5C%22%3E%5Cnimport%20ParentLayout%20from%20'%40vuepress%2Ftheme-default%2Flib%2Fclient%2Flayouts%2FLayout.vue'%5Cnimport%20BlogItemInfo%20from%20'..%2Fcomponents%2FBlog%2FBlogItemInfo.vue'%5Cnimport%20%7B%20usePageData%20%7D%20from%20'%40vuepress%2Fclient'%5Cnconst%20page%20%3D%20usePageData()%5Cn%3C%2Fscript%3E%5Cn%5Cn%22%7D">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>ParentLayout<span class="token operator">></span>
    <span class="token operator">&lt;</span>template #page<span class="token operator">-</span>top<span class="token operator">></span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title w-[var(--content-width)] my-0 mx-auto"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"flex items-center justify-between"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> page<span class="token punctuation">.</span>title <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
          <span class="token operator">&lt;</span>Icon icon<span class="token operator">=</span><span class="token string">"RollbackOutlined"</span> text<span class="token operator">=</span><span class="token string">"\u8FD4\u56DE"</span> @click<span class="token operator">=</span><span class="token string">"$router.go(-1)"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cursor-pointer"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Icon<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>BlogItemInfo <span class="token operator">:</span>page<span class="token operator">=</span><span class="token string">"page"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>BlogItemInfo<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
    <span class="token operator">&lt;</span>template #page<span class="token operator">-</span>bottom<span class="token operator">></span>
      <span class="token operator">&lt;</span>CommentService <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ParentLayout<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>
<span class="token keyword">import</span> ParentLayout <span class="token keyword">from</span> <span class="token string">'@vuepress/theme-default/lib/client/layouts/Layout.vue'</span>
<span class="token keyword">import</span> BlogItemInfo <span class="token keyword">from</span> <span class="token string">'../components/Blog/BlogItemInfo.vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePageData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/client'</span>
<span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token function">usePageData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></CodeDemo><p>2\u3001\u521B\u5EFA\u4F60\u7684\u672C\u5730\u4E3B\u9898<code v-pre>.vuepress/theme/index.ts</code>\uFF0C\u5E76\u8986\u76D6\u9ED8\u8BA4\u4E3B\u9898\u5E03\u5C40\u3002</p>

<CodeDemo id="code-demo-31a1aab0" type="normal" title="index.ts%20%E9%85%8D%E7%BD%AE" code="%7B%22ts%22%3A%22import%20type%20%7B%20Theme%20%7D%20from%20'%40vuepress%2Fcore'%5Cnimport%20%7B%20defaultTheme%20%7D%20from%20'%40vuepress%2Ftheme-default'%5Cnimport%20%7B%20path%20%7D%20from%20'%40vuepress%2Futils'%5Cnimport%20%7B%20AnyForkThemeOptions%20%7D%20from%20'.%2Ftypes%2Ftheme'%5Cn%5Cnexport%20const%20AnyForkTheme%20%3D%20(options%3A%20AnyForkThemeOptions)%3A%20Theme%20%3D%3E%20%7B%5Cn%20%20return%20%7B%5Cn%20%20%20%20name%3A%20'vuepress-theme-AnyFork'%2C%5Cn%20%20%20%20extends%3A%20defaultTheme(options)%2C%5Cn%20%20%20%20alias%3A%20%7B%5Cn%20%20%20%20%20%20'%40theme%2FHome.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHome.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FNavbarItems.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FNavbarItems.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FHomeFooter.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHomeFooter.vue')%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20layouts%3A%20%7B%5Cn%20%20%20%20%20%20Layout%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FLayout.vue')%2C%5Cn%20%20%20%20%20%20Category%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FCategory.vue')%2C%5Cn%20%20%20%20%20%20Tag%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTag.vue')%2C%5Cn%20%20%20%20%20%20Timeline%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTimeline.vue')%2C%5Cn%20%20%20%20%20%20404%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2F404.vue')%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22%7D">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Theme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defaultTheme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/theme-default'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/utils'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AnyForkThemeOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types/theme'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AnyForkTheme <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> AnyForkThemeOptions<span class="token punctuation">)</span><span class="token operator">:</span> Theme <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'vuepress-theme-AnyFork'</span><span class="token punctuation">,</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token function">defaultTheme</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@theme/Home.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/NavbarItems.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/NavbarItems.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/HomeFooter.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/HomeFooter.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    layouts<span class="token operator">:</span> <span class="token punctuation">{</span>
      Layout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Layout.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Category<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Category.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Tag<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Tag.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Timeline<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Timeline.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token number">404</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/404.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></CodeDemo></li>
</ul>
<h3 id="_2-\u7EC4\u4EF6\u66FF\u6362" tabindex="-1"><a class="header-anchor" href="#_2-\u7EC4\u4EF6\u66FF\u6362" aria-hidden="true">#</a> 2 \u7EC4\u4EF6\u66FF\u6362</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u5E03\u5C40\u63D2\u69FD\u5341\u5206\u5B9E\u7528\uFF0C\u4F46\u6709\u65F6\u5019\u4F60\u53EF\u80FD\u4F1A\u89C9\u5F97\u5B83\u4E0D\u591F\u7075\u6D3B\u3002\u9ED8\u8BA4\u4E3B\u9898\u540C\u6837\u63D0\u4F9B\u4E86\u66FF\u6362\u5355\u4E2A\u7EC4\u4EF6\u7684\u80FD\u529B\u3002</p>
<p>2\u3001\u9ED8\u8BA4\u4E3B\u9898\u5C06\u6240\u6709 \u975E\u5168\u5C40\u7684\u7EC4\u4EF6 \u90FD\u6CE8\u518C\u4E86\u4E00\u4E2A\u5E26 @theme \u524D\u7F00\u7684 alias \u3002\u4F8B\u5982\uFF0CHomeFooter.vue \u7684\u522B\u540D\u662F @theme/HomeFooter.vue \u3002</p>
</div>
<ul>
<li>
<p>\u914D\u7F6E\u65B9\u6CD5</p>
<p>1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u7EC4\u4EF6\u76EE\u5F55<code v-pre>.vuepress/theme/components</code>\u4E0B\u521B\u5EFA\u81EA\u5DF1\u9700\u8981\u8986\u76D6\u7684\u7EC4\u4EF6\u3002</p>
<p>2\u3001\u5728\u914D\u7F6E\u6587\u4EF6<code v-pre>.vuepress/theme/index.ts</code>\u4E2D\u8FDB\u884C\u7EC4\u4EF6\u8986\u76D6</p>

<CodeDemo id="code-demo-31a1aab0" type="normal" title="index.ts%20%E9%85%8D%E7%BD%AE" code="%7B%22ts%22%3A%22import%20type%20%7B%20Theme%20%7D%20from%20'%40vuepress%2Fcore'%5Cnimport%20%7B%20defaultTheme%20%7D%20from%20'%40vuepress%2Ftheme-default'%5Cnimport%20%7B%20path%20%7D%20from%20'%40vuepress%2Futils'%5Cnimport%20%7B%20AnyForkThemeOptions%20%7D%20from%20'.%2Ftypes%2Ftheme'%5Cn%5Cnexport%20const%20AnyForkTheme%20%3D%20(options%3A%20AnyForkThemeOptions)%3A%20Theme%20%3D%3E%20%7B%5Cn%20%20return%20%7B%5Cn%20%20%20%20name%3A%20'vuepress-theme-AnyFork'%2C%5Cn%20%20%20%20extends%3A%20defaultTheme(options)%2C%5Cn%20%20%20%20alias%3A%20%7B%5Cn%20%20%20%20%20%20'%40theme%2FHome.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHome.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FNavbarItems.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FNavbarItems.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FHomeFooter.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHomeFooter.vue')%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20layouts%3A%20%7B%5Cn%20%20%20%20%20%20Layout%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FLayout.vue')%2C%5Cn%20%20%20%20%20%20Category%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FCategory.vue')%2C%5Cn%20%20%20%20%20%20Tag%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTag.vue')%2C%5Cn%20%20%20%20%20%20Timeline%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTimeline.vue')%2C%5Cn%20%20%20%20%20%20404%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2F404.vue')%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22%7D">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Theme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defaultTheme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/theme-default'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/utils'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AnyForkThemeOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types/theme'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AnyForkTheme <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> AnyForkThemeOptions<span class="token punctuation">)</span><span class="token operator">:</span> Theme <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'vuepress-theme-AnyFork'</span><span class="token punctuation">,</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token function">defaultTheme</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@theme/Home.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/NavbarItems.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/NavbarItems.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/HomeFooter.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/HomeFooter.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    layouts<span class="token operator">:</span> <span class="token punctuation">{</span>
      Layout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Layout.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Category<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Category.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Tag<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Tag.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Timeline<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Timeline.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token number">404</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/404.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></CodeDemo></li>
</ul>
<h3 id="_3-\u535A\u5BA2\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-\u535A\u5BA2\u63D2\u4EF6" aria-hidden="true">#</a> 3 \u535A\u5BA2\u63D2\u4EF6</h3>
<p>\u2003\u535A\u5BA2\u63D2\u4EF6\u4F7F\u7528\u7684\u662F\u7B2C\u4E09\u65B9<a href="https://vuepress-theme-hope.github.io/v2/blog/zh/" target="_blank" rel="noopener noreferrer">vuepress-plugin-blog2<ExternalLinkIcon/></a><Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u63D2\u4EF6\u3002\u6B64\u63D2\u4EF6\u548C\u666E\u901A\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u4E00\u6837\uFF0C\u6839\u636E<a href="https://vuepress-theme-hope.github.io/v2/blog/zh/config.html" target="_blank" rel="noopener noreferrer">\u5B98\u7F51\u914D\u7F6E<ExternalLinkIcon/></a>\u5373\u53EF\u3002</p>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<p><code v-pre>vuepress-plugin-blog2</code>\u535A\u5BA2\u63D2\u4EF6\u4E3B\u8981\u7528\u6237\u6269\u5C55\u535A\u5BA2\u529F\u80FD\uFF0C\u672A\u5B9E\u73B0\u5206\u9875\u529F\u80FD\uFF0C\u9700\u8981\u81EA\u884C\u5B9E\u73B0\u5206\u9875\u529F\u80FD\u3002</p>
</div>
<ul>
<li>
<p>\u9879\u76EE\u914D\u7F6E</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code> <span class="token comment">//\u535A\u5BA2\u63D2\u4EF6,https://vuepress-theme-hope.github.io/v2/blog/zh/guide.html</span>
  <span class="token function">blogPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// \u9875\u9762\u8FC7\u6EE4\u5668\uFF0C\u6B64\u51FD\u6570\u7528\u4E8E\u9274\u522B\u9875\u9762\u662F\u5426\u4F5C\u4E3A\u6587\u7AE0\u3002</span>
      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> filePathRelative <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> filePathRelative <span class="token operator">?</span> filePathRelative<span class="token operator">?.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"posts/"</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// \u83B7\u53D6\u6587\u7AE0\u4FE1\u606F\u7684\u51FD\u6570\u3002</span>
      <span class="token function-variable function">getInfo</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token operator">...</span>page
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      category<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"category"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">getter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>category <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Category"</span><span class="token punctuation">,</span>
              itemLayout<span class="token operator">:</span> <span class="token string">"Category"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Categories"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function-variable function">itemFrontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                  title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Category </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
                  sidebar<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"tag"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">getter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>tag <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Tag"</span><span class="token punctuation">,</span>
              itemLayout<span class="token operator">:</span> <span class="token string">"Tag"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Tags"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function-variable function">itemFrontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                  title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Tag </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
                  sidebar<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>

      type<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"article"</span><span class="token punctuation">,</span>
              <span class="token comment">//\u9700\u8981\u8FC7\u6EE4\u7684\u6761\u4EF6</span>
              <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">!</span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>archive<span class="token punctuation">,</span>
              path<span class="token operator">:</span> <span class="token string">"/article/"</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Layout"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Articles"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token comment">// sort pages with time and sticky</span>
              <span class="token function-variable function">sorter</span><span class="token operator">:</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">,</span> pageB<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token operator">&amp;&amp;</span> pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky<span class="token punctuation">)</span>
                      <span class="token keyword">return</span> pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token keyword">as</span> <span class="token builtin">number</span> <span class="token operator">-</span> <span class="token punctuation">(</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky<span class="token punctuation">)</span>
                      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token operator">&amp;&amp;</span> pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">return</span> <span class="token punctuation">(</span>
                      <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"timeline"</span><span class="token punctuation">,</span>
              <span class="token comment">// only article with date should be added to timeline</span>
              <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token comment">// sort pages with time</span>
              <span class="token function-variable function">sorter</span><span class="token operator">:</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">,</span> pageB<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              path<span class="token operator">:</span> <span class="token string">"/timeline/"</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Timeline"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Timeline"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      hotReload<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F</strong>\uFF1A\u63D2\u4EF6\u4E2D\u6709<code v-pre>category</code>\u548C<code v-pre>type</code>\u533A\u5206\uFF0C\u5373\u7C7B\u522B\u548C\u7C7B\u578B\uFF0C\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u6587\u7AE0\u6761\u4EF6\u8D5B\u9009\u4E3A\u7C7B\u522B\uFF0C\u6BD4\u5982\uFF1A\u5206\u7C7B\uFF0C\u6807\u7B7E\u7B49\uFF0C\u7C7B\u578B\u4E3A\u6587\u7AE0\u96C6\u5408\uFF0C\u65F6\u95F4\u8F74\u7B49\u3002</p>
</li>
<li>
<p>\u5BA2\u6237\u7AEF\u7EC4\u5408 API
1\u3001\u5BA2\u6237\u7AEF\u53EF\u4EE5\u901A\u8FC7<code v-pre>useBlogCategory()</code> \u548C <code v-pre>useBlogType()</code>\u83B7\u53D6\u5F53\u524D\u8DEF\u7531\u7ED1\u5B9A\u7684\u7C7B\u522B\u6216\u7C7B\u578B\u3002</p>
</li>
</ul>
<p>2\u3001\u53EF\u4EE5\u4F20\u9012\u53C2\u6570\u83B7\u53D6\u5177\u4F53\u7684\u7C7B\u522B\u4FE1\u606F\uFF0C\u6BD4\u5982<code v-pre>useBlogCategory('category')</code></p>
<h3 id="_4-\u81EA\u5B9A\u4E49\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_4-\u81EA\u5B9A\u4E49\u5BB9\u5668" aria-hidden="true">#</a> 4 \u81EA\u5B9A\u4E49\u5BB9\u5668</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>vueprsss 2.x</code> \u4E2D\u5185\u7F6E\u4E86\u81EA\u5B9A\u4E49\u5BB9\u5668\uFF0C\u8BE6\u60C5\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/reference/default-theme/markdown.html" target="_blank" rel="noopener noreferrer">\u81EA\u5B9A\u4E49\u5BB9\u5668<ExternalLinkIcon/></a>\u3002</p>
<p>2\u3001\u81EA\u5B9A\u4E49\u5BB9\u5668\u4F9D\u8D56\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E\u63D2\u4EF6<code v-pre>@vuepress/plugin-container</code>,\u76F8\u5BF9\u4E8E<code v-pre>vuepress-plugin-container</code>(vuepress 1.x)\u800C\u8A00\u53D8\u52A8\u4E0D\u5927\uFF0C\u53EA\u662F\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u91C7\u7528\u51FD\u6570\u5F0F\u65B9\u5F0F\u96C6\u6210\u3002</p>
</div>
<p>\u2003\u535A\u5BA2\u4E2D\u5185\u7F6E\u4E86 2 \u4E2A\u81EA\u5B9A\u4E49\u5BB9\u5668<code v-pre>cardList</code>\u548C<code v-pre>cardImgList</code>,\u5206\u522B\u7528\u4E8E\u5C55\u793A\u6587\u672C\u5217\u8868\u548C\u56FE\u7247\u5217\u8868\uFF0C\u5177\u4F53\u6548\u679C\u770B\u4E0B\u56FE\uFF1A</p>
<p><code v-pre>cardList</code> \u5C55\u793A\u6548\u679C</p>
<div class="cardListContainer"><div class="card-list">
        <a href="https://www.recoluan.com" target="_blank" class="card-item row-3"
          style="background-color:rgb(165 216 243);color:#6854A1;"
        >
          <img src="https://www.recoluan.com/head.png" class="no-zoom">
          <div>
            <p class="name">\u5348\u540E\u5357\u6742</p>
            <p class="desc">Enjoy when you can, and endure when you must.</p>
          </div>
        </a>
      
        <a href="https://coderhdy.com/" target="_blank" class="card-item row-3"
          style="background-color:#FCE5BF;color:#7B2532;"
        >
          <img src="https://coderhdy.com/assets/img/snapshot.png" class="no-zoom">
          <div>
            <p class="name">\u897F\u74DC\u76AE\u513F</p>
            <p class="desc">enjoy your grow up!</p>
          </div>
        </a>
      
        <a href="https://anyfork.gitee.io/blog-docs/" target="_blank" class="card-item row-3"
          style="background-color:rgb(218 88 88 / 62%);color:rgb(5 41 14 / 75%);"
        >
          <img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png" class="no-zoom">
          <div>
            <p class="name">\u5C0F\u7D2B\u5FF5\u6C81</p>
            <p class="desc">\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77</p>
          </div>
        </a>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5348\u540E\u5357\u6742
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com/head.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> Enjoy when you can<span class="token punctuation">,</span> and endure when you must.
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(165 216 243)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#6854A1'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u897F\u74DC\u76AE\u513F
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> enjoy your grow up<span class="token tag">!</span>
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/assets/img/snapshot.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#FCE5BF'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#7B2532'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C0F\u7D2B\u5FF5\u6C81
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E0D\u79EF\u8DEC\u6B65<span class="token punctuation">,</span>\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41<span class="token punctuation">,</span>\u65E0\u4EE5\u6210\u6C5F\u6D77
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.staticaly.com/gh/AnyFork/blog<span class="token punctuation">-</span>images/main/markdown/202208241822713.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(218 88 88 / 62%)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> rgb(5 41 14 / 75%)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p><code v-pre>cardImgList</code>\u5C55\u793A\u6548\u679C</p>
<div class="cardImgListContainer"><div class="card-list">
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://www.vuepress.cn/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://www.vuepress.cn/" target="_blank">
              <p class="name">VuePress \u4E2D\u6587\u5B98\u7F51</p>
              <p class="desc">VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <p class="name">VuePress \u5B98\u65B9\u793E\u533A</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/other/theme<span class="token punctuation">-</span>example.html
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u7F51\u6848\u4F8B
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/plugins/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u65B9\u63D2\u4EF6
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.vuepress.cn/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>community.netlify.app/zh/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u5B98\u65B9\u793E\u533A
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><ul>
<li>
<p>\u81EA\u5B9A\u4E49\u5BB9\u5668\u5B9E\u73B0\u65B9\u5F0F</p>
<p>1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55<code v-pre>.vuepress/theme/config/container.ts</code>\u4E0B\u521B\u5EFA\u81EA\u5B9A\u4E49\u5BB9\u5668\u6587\u4EF6\u3002</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> ContainerPluginOptions<span class="token punctuation">,</span> MarkdownItContainerRenderFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-container'</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'js-yaml'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token constant">CARD_LIST</span> <span class="token operator">=</span> <span class="token string">'cardList'</span>
<span class="token keyword">const</span> <span class="token constant">CARD_IMG_LIST</span> <span class="token operator">=</span> <span class="token string">'cardImgList'</span>
<span class="token comment">// \u6E32\u67D3md\u5BB9\u5668\u7684\u5361\u7247\u5217\u8868</span>
<span class="token keyword">function</span> <span class="token function">renderCardList</span><span class="token punctuation">(</span>tokens<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> idx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> type <span class="token operator">=</span> tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token constant">END_TYPE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">container_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_close</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
    _tokens$idx <span class="token operator">=</span> tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">,</span>
    nesting <span class="token operator">=</span> _tokens$idx<span class="token punctuation">.</span>nesting<span class="token punctuation">,</span>
    info <span class="token operator">=</span> _tokens$idx<span class="token punctuation">.</span>info
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nesting <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6E32\u67D3\u5F00\u5934\u7684 ':::' \u6807\u8BB0</span>
    <span class="token keyword">let</span> yamlStr <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> _tokens$i <span class="token operator">=</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
        type <span class="token operator">=</span> _tokens$i<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
        content <span class="token operator">=</span> _tokens$i<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
        _info <span class="token operator">=</span> _tokens$i<span class="token punctuation">.</span>info
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token constant">END_TYPE</span><span class="token punctuation">)</span> <span class="token keyword">break</span> <span class="token comment">// \u9047\u5230\u7ED3\u675F\u7684 ':::' \u65F6</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">)</span> <span class="token keyword">continue</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'fence'</span> <span class="token operator">&amp;&amp;</span> _info <span class="token operator">===</span> <span class="token string">'yaml'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u662F\u4EE3\u7801\u5757\u7C7B\u578B\uFF0C\u5E76\u4E14\u662Fyaml\u4EE3\u7801</span>
        yamlStr <span class="token operator">=</span> content
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>yamlStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u6B63\u786E\u89E3\u6790\u51FAyaml\u5B57\u7B26\u4E32\u540E</span>
      <span class="token keyword">const</span> dataObj <span class="token operator">=</span> yaml<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>yamlStr<span class="token punctuation">)</span> <span class="token comment">// \u5C06yaml\u5B57\u7B26\u4E32\u89E3\u6790\u6210js\u5BF9\u8C61</span>
      <span class="token keyword">let</span> dataList<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>dataObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6B63\u786E\u89E3\u6790\u51FA\u6570\u636E\u5BF9\u8C61</span>
        dataList <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>dataObj<span class="token punctuation">)</span> <span class="token operator">?</span> dataObj <span class="token operator">:</span> dataObj<span class="token punctuation">.</span>list
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>dataList <span class="token operator">&amp;&amp;</span> dataList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6709\u5217\u8868\u6570\u636E</span>

        <span class="token comment">// \u6BCF\u884C\u663E\u793A\u51E0\u4E2A</span>
        <span class="token keyword">let</span> row <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>row <span class="token operator">||</span> row <span class="token operator">></span> <span class="token number">4</span> <span class="token operator">||</span> row <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          row <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// \u9ED8\u8BA4 3</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> listDOM <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token constant">CARD_LIST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u666E\u901A\u5361\u7247\u5217\u8868</span>
          listDOM <span class="token operator">=</span> <span class="token function">getCardListDOM</span><span class="token punctuation">(</span>dataList<span class="token punctuation">,</span> row<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token constant">CARD_IMG_LIST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u5361\u7247\u56FE\u7247\u5217\u8868</span>
          listDOM <span class="token operator">=</span> <span class="token function">getCardImgListDOM</span><span class="token punctuation">(</span>dataList<span class="token punctuation">,</span> row<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">Container">&lt;div class="card-list"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>listDOM<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">\`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6E32\u67D3':::' \u7ED3\u5C3E</span>
    <span class="token keyword">return</span> <span class="token string">'&lt;/div>'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u666E\u901A\u5361\u7247\u5217\u8868</span>
<span class="token keyword">function</span> <span class="token function">getCardListDOM</span><span class="token punctuation">(</span>dataList<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span> row<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> listDOM <span class="token operator">=</span> <span class="token string">''</span>
  dataList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    listDOM <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"> &lt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link <span class="token operator">?</span> <span class="token string">'a href="'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>link <span class="token operator">+</span> <span class="token string">'" target="_blank"'</span> <span class="token operator">:</span> <span class="token string">'span'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> class="card-item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>row <span class="token operator">?</span> <span class="token string">'row-'</span> <span class="token operator">+</span> row <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" style="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>bgColor <span class="token operator">?</span> <span class="token string">'background-color:'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>bgColor <span class="token operator">+</span> <span class="token string">';'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>textColor <span class="token operator">?</span> <span class="token string">'color:'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>textColor <span class="token operator">+</span> <span class="token string">';'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" > </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>
      item<span class="token punctuation">.</span>avatar <span class="token operator">?</span> <span class="token string">'&lt;img src="'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>avatar <span class="token operator">+</span> <span class="token string">'" class="no-zoom">'</span> <span class="token operator">:</span> <span class="token string">''</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;div> &lt;p class="name"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p> &lt;p class="desc"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>desc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p> &lt;/div> &lt;/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link <span class="token operator">?</span> <span class="token string">'a'</span> <span class="token operator">:</span> <span class="token string">'span'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">> </span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> listDOM
<span class="token punctuation">}</span>

<span class="token comment">// \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u56FE\u6587\u5361\u7247\u5217\u8868</span>
<span class="token keyword">function</span> <span class="token function">getCardImgListDOM</span><span class="token punctuation">(</span>dataList<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span> row<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> listDOM <span class="token operator">=</span> <span class="token string">''</span>
  dataList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    listDOM <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"> &lt;div class="card-item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>row <span class="token operator">?</span> <span class="token string">'row-'</span> <span class="token operator">+</span> row <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" > &lt;div class="box-img"> &lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" target="_blank"> &lt;img src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>img<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="no-zoom"> &lt;/a> &lt;/div> &lt;div class="box-info"> &lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" target="_blank"> &lt;p class="name"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>
      item<span class="token punctuation">.</span>desc <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;p class="desc"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>desc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &lt;/a>
  &lt;/div>
 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>avatar <span class="token operator">||</span> item<span class="token punctuation">.</span>author <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div class="box-footer">&lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" target="_blank"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>avatar <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;img src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>avatar<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="no-zoom"></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>author <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a>&lt;/div></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div> </span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> listDOM
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> resolveContainerOptions <span class="token operator">=</span> <span class="token punctuation">(</span>type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> ContainerPluginOptions <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> render<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> renderCardList
  <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> render <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001\u5728\u63D2\u4EF6\u914D\u7F6E\u6587\u4EF6<code v-pre>.vuepress/theme/plugins.ts</code>\u4E2D\u8FDB\u884C\u63D2\u4EF6\u914D\u7F6E</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> containerPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-container'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resolveContainerOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./container'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">//\u81EA\u5B9A\u4E49\u5BB9\u5668cardList</span>
  <span class="token function">containerPlugin</span><span class="token punctuation">(</span><span class="token function">resolveContainerOptions</span><span class="token punctuation">(</span><span class="token string">'cardList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">//\u81EA\u5B9A\u4E49\u5BB9\u5668cardImgList</span>
  <span class="token function">containerPlugin</span><span class="token punctuation">(</span><span class="token function">resolveContainerOptions</span><span class="token punctuation">(</span><span class="token string">'cardImgList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3\u3001<code v-pre>cardList</code>\u914D\u7F6E</p>
<div class="language-markdown ext-md line-numbers-mode"><pre v-pre class="language-markdown"><code>::: cardList 3

<span class="token code keyword">    \`\`\`yaml
    - name: \u5348\u540E\u5357\u6742
      avatar: https://www.recoluan.com/head.png
      desc: Enjoy when you can, and endure when you must.
      link: https://www.recoluan.com
      bgColor: 'rgb(165 216 243)'
      textColor: '#6854A1'
    - name: \u897F\u74DC\u76AE\u513F
      desc: enjoy your grow up!
      avatar: https://coderhdy.com/assets/img/snapshot.png
      link: https://coderhdy.com/
      bgColor: '#FCE5BF'
      textColor: '#7B2532'
    - name: \u5C0F\u7D2B\u5FF5\u6C81
      desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
      avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
      link: https://anyfork.gitee.io/blog-docs/
      bgColor: rgb(218 88 88 / 62%)
      textColor: rgb(5 41 14 / 75%)
    \`\`\`</span>

:::
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4\u3001<code v-pre>cardImgList</code>\u914D\u7F6E\u65B9\u5F0F</p>
<div class="language-markdown ext-md line-numbers-mode"><pre v-pre class="language-markdown"><code>::: cardImgList 2

<span class="token code keyword">    \`\`\`yaml
    - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
      link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
      name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
      desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
    - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
      link: https://vuepress-theme-reco.recoluan.com/views/plugins/
      name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
      desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
    - img: https://vuepress.vuejs.org/hero.png
      link: https://www.vuepress.cn/
      name: VuePress \u4E2D\u6587\u5B98\u7F51
      desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
    - img: https://vuepress.vuejs.org/hero.png
      link: https://vuepress-community.netlify.app/zh/
      name: VuePress \u5B98\u65B9\u793E\u533A
      desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
    \`\`\`</span>

:::
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h2 id="\u4E09-\u63D2\u4EF6\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E09-\u63D2\u4EF6\u5B89\u88C5" aria-hidden="true">#</a> \u4E09 \u63D2\u4EF6\u5B89\u88C5</h2>
<p>\u2003vuepress \u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u6269\u5C55\u63D2\u4EF6\u7684\u65B9\u5F0F\u6765\u62D3\u5C55\u529F\u80FD\uFF0C\u901A\u8FC7\u63D2\u4EF6\u53EF\u4EE5\u4E30\u5BCC\u6211\u4EEC\u535A\u5BA2\u529F\u80FD\uFF0C\u4F7F\u9875\u9762\u6548\u679C\u66F4\u52A0<code v-pre>\u70AB\u9177</code>\uFF0C<code v-pre>\u589E\u5F3A</code>\u7F51\u7AD9\u7684<code v-pre>\u903C\u683C</code>\uFF0C\u8BE6\u7EC6\u60C5\u51B5\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/guide/plugin.html" target="_blank" rel="noopener noreferrer">vuepress@2.x \u63D2\u4EF6\u914D\u7F6E\u65B9\u5F0F<ExternalLinkIcon/></a>\u548C<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/back-to-top.html" target="_blank" rel="noopener noreferrer">vuepress@2.x \u5185\u7F6E\u63D2\u4EF6<ExternalLinkIcon/></a>\u3002<code v-pre>Vuepress 2.x</code>\u63D2\u4EF6 API \u53D8\u5316\u6BD4\u8F83\u5927\uFF0C\u4F7F\u7528\u65B9\u5F0F\u4E5F\u91C7\u7528\u51FD\u6570\u5F0F\u8C03\u7528\uFF0C\u56E0\u6B64\u793E\u533A<code v-pre>Vuepress 1.x</code>\u63D2\u4EF6\u4E0D\u80FD\u4F7F\u7528\u3002\u535A\u4E3B\u535A\u5BA2\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u9488\u5BF9<code v-pre>Vuepress 1.x</code>\u7684\u90E8\u5206\u63D2\u4EF6\u8FDB\u884C\u4E86\u517C\u5BB9<code v-pre>Vuepress 2.x</code>\u9002\u914D\uFF0C\u4EE5\u4E0B\u662F\u535A\u5BA2\u4E2D\u7528\u5230\u7684\u63D2\u4EF6\uFF1A</p>
<h3 id="_1-pwa-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-pwa-\u63D2\u4EF6" aria-hidden="true">#</a> 1 PWA \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html" target="_blank" rel="noopener noreferrer">pwa<ExternalLinkIcon/></a>\u63D2\u4EF6\u4E3A<code v-pre>vuepress 2.x</code>\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u4F7F\u4F60\u7684 VuePress \u7AD9\u70B9\u6210\u4E3A\u4E00\u4E2A<a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noopener noreferrer">\u6E10\u8FDB\u5F0F Web \u5E94\u7528 (PWA)<ExternalLinkIcon/></a>\uFF0C\u8BE5\u63D2\u4EF6\u4F7F\u7528<a href="https://developers.google.com/web/tools/workbox/modules/workbox-build?utm_source=devtools" target="_blank" rel="noopener noreferrer">workbox-build<ExternalLinkIcon/></a> \u6765\u751F\u6210 Service Worker \u6587\u4EF6\uFF0C\u5E76\u901A\u8FC7<a href="https://github.com/yyx990803/register-service-worker" target="_blank" rel="noopener noreferrer">register-service-worker<ExternalLinkIcon/></a> \u6765\u6CE8\u518C Service Worker</p>
<p>2\u3001<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html" target="_blank" rel="noopener noreferrer">pwa-popup<ExternalLinkIcon/></a> \u63D2\u4EF6\u4E3A<code v-pre>vuepress 2.x</code>\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u63D0\u4F9B\u4E00\u4E2A\u5F39\u7A97\u7EC4\u4EF6\uFF0C\u5141\u8BB8\u7528\u6237\u624B\u52A8\u5237\u65B0 PWA Service Worker \u3002
\u8BE5\u63D2\u4EF6\u5FC5\u987B\u548C pwa \u63D2\u4EF6 \u4E00\u8D77\u4F7F\u7528\uFF0C\u5E76\u4E14 skipWaiting \u914D\u7F6E\u9879\u4E0D\u80FD\u8BBE\u7F6E\u4E3A true \u3002\u5F53\u65B0\u7684 Service Worker \u5C31\u7EEA\u65F6\uFF0C\u4F1A\u5728\u9875\u9762\u53F3\u4E0B\u89D2\u51FA\u73B0\u4E00\u4E2A\u5F39\u7A97\uFF0C\u8BE2\u95EE\u7528\u6237\u662F\u5426\u9700\u8981\u6FC0\u6D3B\u5904\u4E8E Waiting \u72B6\u6001\u7684 Service Worker \u3002</p>
<p>3\u3001<code v-pre>pwa</code>\u548C<code v-pre>pwa-popup</code>\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002</p>
</div>
<ul>
<li>
<p><a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html" target="_blank" rel="noopener noreferrer">pwa<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
<ul>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code> <span class="token function">npm</span> i <span class="token parameter variable">-D</span> @vuepress/plugin-pwa@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> pwaPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-pwa'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">pwaPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html" target="_blank" rel="noopener noreferrer">pwa-popup<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
<ul>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code> <span class="token function">npm</span> i <span class="token parameter variable">-D</span> @vuepress/plugin-pwa-popup@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code> <span class="token function">pwaPopupPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">buttonText</span><span class="token operator">:</span> <span class="token string">'\u70B9\u6211\u5237\u65B0'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<code v-pre>pwa</code>\u5B98\u7F51\u914D\u7F6E\uFF1A<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html" target="_blank" rel="noopener noreferrer">https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html<ExternalLinkIcon/></a></p>
</li>
</ul>
<h3 id="_2-docsearch-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-docsearch-\u63D2\u4EF6" aria-hidden="true">#</a> 2 DocSearch \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container info"><p class="custom-container-title">\u76F8\u5173\u4FE1\u606F</p>
<p>1\u3001\u5C06 Algolia DocSearch \u96C6\u6210\u5230 VuePress \u4E2D\uFF0C\u4E3A\u4F60\u7684\u6587\u6863\u7F51\u7AD9\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
<p>2\u3001\u5F53\u4F60\u6B63\u786E\u914D\u7F6E\u8BE5\u63D2\u4EF6\u540E\uFF0C\u9ED8\u8BA4\u4E3B\u9898\u4F1A\u628A DocSearch \u6309\u94AE\u6DFB\u52A0\u5230\u5BFC\u822A\u680F\u3002</p>
<p>3\u3001<code v-pre>DocSearch</code>\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002</p>
</div>
<ul>
<li>
<p><a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">DocSearch<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code> <span class="token function">npm</span> i <span class="token parameter variable">-D</span> @vuepress/plugin-docsearch@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
<li>
<p>\u63D2\u4EF6\u914D\u7F6E</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> docsearchPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-docsearch'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html</span>
    <span class="token function">docsearchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'e3224f6a8f05632af9c14c97******b54'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'anyfork'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'09V****WK61N'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">translations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">buttonText</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">DocSearch<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\uFF0C<code v-pre>Algolia</code>\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<RouterLink to="/posts/other/algoliaSearch.html">VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22</RouterLink></p>
</li>
</ul>
<h3 id="_3-readingtime-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-readingtime-\u63D2\u4EF6" aria-hidden="true">#</a> 3 ReadingTime \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>ReadingTime\u63D2\u4EF6</code>\u7EDF\u8BA1\u6587\u7AE0\u5B57\u6570\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/reading-time/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/reading-time/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li>
<p><a href="https://vuepress-theme-hope.github.io/v2/reading-time/zh/" target="_blank" rel="noopener noreferrer">ReadingTime<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-reading-time2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-reading-time2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-reading-time2@next@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readingTimePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-reading-time2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">readingTimePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/reading-time/zh/" target="_blank" rel="noopener noreferrer">readingTime<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_4-seo-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_4-seo-\u63D2\u4EF6" aria-hidden="true">#</a> 4 SEO \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>SEO\u63D2\u4EF6</code>\u672C\u63D2\u4EF6\u4F1A\u901A\u8FC7\u5411\u7F51\u7AD9<code v-pre>&lt;head&gt;</code> \u6CE8\u5165\u6807\u7B7E\uFF0C\u8BA9\u4F60\u7684\u7F51\u7AD9\u5B8C\u5168\u652F\u6301 \u5F00\u653E\u5185\u5BB9\u534F\u8BAE OGP \u548C JSON-LD 1.1\uFF0C\u4EE5\u5168\u9762\u589E\u5F3A\u7AD9\u70B9\u7684\u641C\u7D22\u5F15\u64CE\u4F18\u5316\u6027\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/seo/zh/guide.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/seo/zh/guide.html<ExternalLinkIcon/></a></p>
</div>
<ul>
<li>
<p><a href="https://vuepress-theme-hope.github.io/v2/seo/zh/" target="_blank" rel="noopener noreferrer">SEO<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-seo2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-seo2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-seo2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> seoPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-seo2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// seo\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/seo/</span>
    <span class="token function">seoPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u5C0F\u7D2B\u5FF5\u6C81'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/blog-docs/'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/seo/zh/config.html" target="_blank" rel="noopener noreferrer">SEO<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_5-sitemap-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_5-sitemap-\u63D2\u4EF6" aria-hidden="true">#</a> 5 SiteMap \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>siteMap\u63D2\u4EF6</code>\u672C\u63D2\u4EF6\u4F1A\u4E3A\u4F60\u7684\u7F51\u7AD9\u81EA\u52A8\u751F\u6210 Sitemap\u3002\u4E3A\u4E86\u4F7F\u63D2\u4EF6\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u4F60\u9700\u8981\u5C06\u90E8\u7F72\u7684\u57DF\u540D\u4F20\u9012\u7ED9\u63D2\u4EF6\u7684 hostname \u9009\u9879\u3002\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6839\u636E\u9875\u9762\u7684 Git \u7684\u65F6\u95F4\u6233\u751F\u6210\u9875\u9762\u7684\u6700\u540E\u66F4\u65B0\u65F6\u95F4\uFF0C\u540C\u65F6\u4F1A\u6839\u636E\u7AD9\u70B9\u7684\u591A\u8BED\u8A00\u914D\u7F6E\u58F0\u660E\u9875\u9762\u7684\u5176\u4ED6\u8BED\u8A00\u7248\u672C\u66FF\u4EE3\u5730\u5740\u3002\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/sitemap/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/sitemap/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li>
<p><a href="https://vuepress-theme-hope.github.io/v2/seo/zh/" target="_blank" rel="noopener noreferrer">SEO<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-sitemap2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-sitemap2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-sitemap2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
- \u63D2\u4EF6\u914D\u7F6E
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> sitemapPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-sitemap2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// siteMap\u7AD9\u70B9\u5730\u56FE\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html</span>
    <span class="token function">sitemapPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/blog-docs/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">extraUrls</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://anyfork.gitee.io/blog-docs/'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html" target="_blank" rel="noopener noreferrer">siteMap<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_6-copyright-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_6-copyright-\u63D2\u4EF6" aria-hidden="true">#</a> 6 Copyright \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>copyright\u63D2\u4EF6</code>\u6B64\u63D2\u4EF6\u53EF\u4EE5\u5728\u8BBF\u95EE\u8005\u4ECE\u4F60\u7684\u7AD9\u70B9\u590D\u5236\u5185\u5BB9\u65F6\uFF0C\u81EA\u52A8\u8FFD\u52A0\u7248\u6743\u4FE1\u606F\uFF0C\u4E5F\u53EF\u4EE5\u7981\u6B62\u7AD9\u70B9\u7684\u590D\u5236\u6216\u8005\u9009\u62E9\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/copyright/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/copyright/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/copyright/zh/" target="_blank" rel="noopener noreferrer">copyright<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copyright2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-copyright2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copyright2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> copyrightPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-copyright2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u590D\u5236\u52A0\u7248\u6743\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copyright/zh/config.html</span>
    <span class="token function">copyrightPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/blog-docs/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">'\u5C0F\u7D2B\u5FF5\u6C81'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/copyright/zh/config.html" target="_blank" rel="noopener noreferrer">copyright<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_7-copycode-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_7-copycode-\u63D2\u4EF6" aria-hidden="true">#</a> 7 CopyCode \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>copyCode\u63D2\u4EF6</code>\u6B64\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6DFB\u52A0\u590D\u5236\u6309\u94AE\u5230\u6BCF\u4E2A\u4EE3\u7801\u5757\u7684\u53F3\u4E0B\u89D2\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6309\u94AE\u4EC5\u5728\u684C\u9762\u6A21\u5F0F\u663E\u793A\uFF0C\u5982\u679C\u4F60\u9700\u8981\u5728\u79FB\u52A8\u7AEF\u5C55\u793A\u8FD9\u4E2A\u6309\u94AE\uFF0C\u8BF7\u5C06 showInMobile \u8BBE\u7F6E\u4E3A true\u3002\u5728\u7528\u6237\u70B9\u51FB\u590D\u5236\u6309\u94AE\u540E\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u663E\u793A\u4E00\u4E2A\u590D\u5236\u6210\u529F\u7684\u63D0\u793A\u3002\u9ED8\u8BA4\u7684\u63D0\u793A\u65F6\u957F\u4E3A 2000ms\uFF0C\u5982\u679C\u4F60\u9700\u8981\u66F4\u6539\u8FD9\u4E2A\u65F6\u957F\uFF0C\u8BF7\u8BBE\u7F6E duration(\u5355\u4F4D ms)\uFF0C\u5982\u679C\u4F60\u4E0D\u9700\u8981\u8FD9\u4E2A\u63D0\u793A\uFF0C\u8BF7\u5C06 duration \u8BBE\u7F6E\u4E3A 0\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/copy-code/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/copy-code/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/copy-code/zh/" target="_blank" rel="noopener noreferrer">CopyCode<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copy-code2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-copy-code2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copy-code2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> copyCodePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-copy-code2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u4EE3\u7801\u590D\u5236\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copy-code/zh/</span>
    <span class="token function">copyCodePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'.theme-default-content div[class*="language-"] pre'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">copy</span><span class="token operator">:</span> <span class="token string">'\u590D\u5236\u6210\u529F!'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">hint</span><span class="token operator">:</span> <span class="token string">'copy!'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/copy-code/zh/config.html" target="_blank" rel="noopener noreferrer">copyCode<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_8-waline-\u8BC4\u8BBA\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_8-waline-\u8BC4\u8BBA\u63D2\u4EF6" aria-hidden="true">#</a> 8 Waline \u8BC4\u8BBA\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>Giscus\u63D2\u4EF6</code>Giscus \u662F\u4E00\u4E2A\u57FA\u4E8E GitHub Discussion \u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u542F\u7528\u7B80\u4FBF\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/comment/zh/guide/giscus.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/comment/zh/guide/giscus.html<ExternalLinkIcon/></a>,\u539F\u672C\u535A\u4E3B\u91C7\u7528\u7684\u662F<code v-pre>Giscus</code>\u4F5C\u4E3A\u8BC4\u8BBA\u63D2\u4EF6\uFF0C\u4F46\u53D1\u73B0\u5176\u6CA1\u6709\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u529F\u80FD\uFF0C\u540E\u91C7\u7528<code v-pre>Waline</code>\u63D2\u4EF6\uFF0C\u4E0D\u4EC5\u5177\u6709\u8BC4\u8BBA\u529F\u80FD\uFF0C\u8FD8\u80FD\u8FDB\u884C\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u3002</p>
<p>4\u3001<code v-pre>Waline\u63D2\u4EF6</code>\u662F\u5BF9<code v-pre>valine\u63D2\u4EF6</code>\u7684\u5C01\u88C5\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86<code v-pre>valine</code>\u6570\u636E\u4E0D\u5B89\u5168\u95EE\u9898\uFF0C\u540C\u65F6\u4E5F\u5177\u5907<code v-pre>valine</code>\u4E00\u5207\u529F\u80FD\u3002\u53EF\u4EE5\u4F7F\u7528 hope \u63D2\u4EF6\u7528\u6CD5\uFF0C\u5355\u9875\u9762\u96C6\u6210\u597D\u4E86\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u901A\u8FC7\u5BFB\u627E\u9ED8\u8BA4\u7C7B\u9009\u62E9\u5668<code v-pre>waline-pageview-count</code>\u8FDB\u884C\u6570\u636E\u81EA\u52A8\u586B\u5145\uFF0C\u4F46\u5BF9\u4E8E\u9996\u9875\u5217\u8868\u672A\u5B9E\u73B0\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u81EA\u884C\u5B9E\u73B0\u5373\u53EF\u3002\u63D2\u4EF6\u914D\u7F6E\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html<ExternalLinkIcon/></a>,\u4EA6\u53EF\u5355\u72EC\u4F7F\u7528\uFF0C\u8BE6\u89C1<a href="https://waline.js.org/guide/get-started.html" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u3002</p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html" target="_blank" rel="noopener noreferrer">Waline<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-comment2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-comment2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-comment2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u53EF\u4EE5\u6309\u7167<code v-pre>hope</code>\u63D2\u4EF6\u914D\u7F6E\u6D41\u7A0B\u8FDB\u884C\u914D\u7F6E\uFF0C\u91C7\u7528<code v-pre>waline</code>\u5B98\u65B9\u9ED8\u8BA4\u7684<code v-pre>LeanCloud </code>\u6570\u636E\u5E93\u548C<code v-pre>Vercel</code>\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u3002\u535A\u4E3B\u5C1D\u8BD5\u8FC7\u56FD\u5185\u6548\u679C\u4E0D\u592A\u597D\uFF0C\u4E0D\u5F00\u68AF\u5B50\u60C5\u51B5\u4E0B<code v-pre>Vercel</code>\u670D\u52A1\u7AEF\u5730\u5740\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u4E8E\u662F\u4FBF\u653E\u5F03\u4E86\u3002</p>
<p>2\u3001\u6309\u7167<a href="https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u8FDB\u884C\u670D\u52A1\u7AEF\u90E8\u7F72\u3002\u5404\u79CD\u65B9\u5F0F\u90FD\u5C1D\u8BD5\u4E86\u4E00\u4E0B,\u7ED3\u679C\u5982\u4E0B\uFF1A1 \u817E\u8BAF\u4E91\u4E91\u51FD\u6570\u8BA1\u7B97\u4ECA\u5E74 8 \u6708\u5F00\u59CB\u6536\u8D39\uFF0C\u6700\u4F4E\u6BCF\u6708 19.9\uFF0C\u653E\u5F03\u4E86\u30022 \u767E\u5EA6\u4E91\u6309\u7167\u5B98\u7F51\u6D41\u7A0B\u90E8\u7F72\uFF0C\u7A0B\u5E8F\u62A5\u9519\uFF0C\u4F9D\u8D56\u7248\u672C\u95EE\u9898\uFF0C\u4FBF\u653E\u5F03\u4E86\u30023 \u963F\u91CC\u4E91\u90E8\u7F72\u6210\u529F\u4E86\uFF0C\u4E91\u51FD\u6570\u8BA1\u7B97\u6BCF\u6708 100 \u4E07\u514D\u8D39\u6B21\u6570\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\uFF0C\u4F46\u670D\u52A1 url \u9700\u8981\u81EA\u5B9A\u4E49\u57DF\u540D\u8FDB\u884C\u6620\u5C04\uFF0C\u4E0D\u7136\u6CA1\u6CD5\u76F4\u63A5\u4F7F\u7528\uFF0C\u4F1A\u76F4\u63A5\u4E0B\u8F7D html\uFF0C\u9700\u8981\u6709\u963F\u91CC\u4E91\u57DF\u540D\u6216\u8005\u8BF4\u963F\u91CC\u4E91\u670D\u52A1\u5668\uFF0C\u535A\u4E3B\u6CA1\u6709\u963F\u91CC\u4E91\u670D\u52A1\u5668\u4FBF\u653E\u5F03\u4E86\u3002\u4E0A\u9762\u7684\u65B9\u5F0F\u963F\u91CC\u4E91\u6700\u5408\u9002\uFF0C\u6709\u6761\u4EF6\u7684\u5C0F\u4F19\u4F34\u53EF\u4EE5\u5C1D\u8BD5\u3002</p>
<p>3\u3001\u535A\u4E3B\u63A8\u8350\u901A\u8FC7\u81EA\u5DF1\u90E8\u7F72<code v-pre>waline</code>\u670D\u52A1\u5668\u7684\u65B9\u5F0F\uFF0C\u4E3B\u8981\u539F\u56E0\u662F\uFF1A\u90E8\u7F72\u7B80\u5355\uFF0C\u7075\u6D3B\uFF0C\u8BBF\u95EE\u901F\u5EA6\u66F4\u5FEB\uFF0C\u8FD8\u80FD\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\uFF0C\u524D\u63D0\u662F\u81EA\u5DF1\u8981\u6709\u4E91\u670D\u52A1\u5668\u548C\u57DF\u540D\u3002\u8BE6\u7EC6\u90E8\u7F72\u65B9\u5F0F\u53C2\u8003\u5B98\u7F51<a href="https://waline.js.org/guide/server/vps-deploy.html" target="_blank" rel="noopener noreferrer">\u72EC\u7ACB\u90E8\u7F72<ExternalLinkIcon/></a>\u6216\u8005<RouterLink to="/posts/other/walineServer.html">Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848</RouterLink>\u3002\u6309\u7167\u4E0A\u8FF0\u64CD\u4F5C\u5373\u53EF\uFF0C\u53EA\u9700\u8981\u914D\u7F6E\u597D\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u4E0A\u7EBF\u90E8\u7F72\u5373\u53EF\u3002</p>
</div>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> commentPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-comment2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">commentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">provider</span><span class="token operator">:</span> <span class="token string">'Waline'</span><span class="token punctuation">,</span>
      <span class="token comment">//\u72EC\u7ACB\u90E8\u7F72\u7684waline\u670D\u52A1\u5668\u8BBF\u95EE\u5730\u5740</span>
      <span class="token literal-property property">serverURL</span><span class="token operator">:</span> <span class="token string">'XXXX'</span><span class="token punctuation">,</span>
      <span class="token comment">//\u662F\u5426\u5F00\u542F\u8BBF\u95EE\u91CF</span>
      <span class="token literal-property property">pageview</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93" target="_blank" rel="noopener noreferrer">Waline<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6" aria-hidden="true">#</a> 9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>Markdown\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6</code>\u901A\u8FC7\u5B89\u88C5\u5E76\u542F\u7528\u6B64\u63D2\u4EF6\uFF0C\u4F60\u53EF\u4EE5\u5728 Markdown \u4E2D\u4F7F\u7528\u66F4\u591A\u7684\u8BED\u6CD5\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/md-enhance/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/md-enhance/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/md-enhance/zh/" target="_blank" rel="noopener noreferrer">Markdown \u8BED\u6CD5\u6269\u5C55<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-md-enhance@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-md-enhance@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-md-enhance@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mdEnhancePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-md-enhance'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//markdown \u589E\u5F3A\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/</span>
    <span class="token function">mdEnhancePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// \u542F\u7528\u81EA\u5B9A\u4E49\u5BB9\u5668</span>
      <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u53EF\u4EE5\u5728\u9009\u9879\u4E2D enableAll \u8BBE\u7F6E\u4E3A true \u6765\u542F\u7528\u63D2\u4EF6\u7684\u6240\u6709\u529F\u80FD,\u4E0D\u5EFA\u8BAE\u5F00\u542F\u5168\u90E8\u6269\u5C55\u529F\u80FD\uFF0C\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8FDB\u884C\u5F00\u542F</p>
<ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/" target="_blank" rel="noopener noreferrer">Markdown \u8BED\u6CD5\u6269\u5C55<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6" aria-hidden="true">#</a> 10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6</code>\u53EF\u4EE5\u5728\u7F51\u7AD9\u5168\u5C40\u6CE8\u518C\u97F3\u4E50\u64AD\u653E\u5668\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u914D\u7F6E\u672C\u5730\u6216\u7EBF\u4E0A\u97F3\u4E50\uFF0C\u5B9E\u73B0\u97F3\u4E50\u5728\u7EBF\u64AD\u653E\u3002</p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next" target="_blank" rel="noopener noreferrer">\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-bgm-player-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-bgm-player-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> bgmMusicPlayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-bgm-player-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6\u3002</span>
    <span class="token function">bgmMusicPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">audios</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u5361\u519C'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">artist</span><span class="token operator">:</span> <span class="token string">'\u5361\u519C\u94A2\u7434\u7248'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/canon/canon.mp3'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cover</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/canon/canon.jpg'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u98CE\u5C45\u4F4F\u7684\u8857\u9053'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">artist</span><span class="token operator">:</span> <span class="token string">'\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/wind/wind.mp3'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cover</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/wind/wind.jpg'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u591C\u7684\u94A2\u7434\u66F2'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">artist</span><span class="token operator">:</span> <span class="token string">'\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/night/night.mp3'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cover</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/night/night.jpg'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">autoShrink</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">floatStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span> <span class="token string-property property">'z-index'</span><span class="token operator">:</span> <span class="token string">'999999'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next" target="_blank" rel="noopener noreferrer">\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6" aria-hidden="true">#</a> 11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6</code>\u9F20\u6807\u70B9\u51FB\u65F6\u89E6\u53D1\u70B9\u51FB\u7279\u6548\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next" target="_blank" rel="noopener noreferrer">\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-cursor-effects-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-cursor-effects-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> cursorEffects <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-cursor-effects-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6</span>
    <span class="token function">cursorEffects</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'star'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next" target="_blank" rel="noopener noreferrer">\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6" aria-hidden="true">#</a> 12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6</code>\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next" target="_blank" rel="noopener noreferrer">\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-dynamic-title-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-dynamic-title-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> dynamicTitle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-dynamic-title-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">dynamicTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next" target="_blank" rel="noopener noreferrer">\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_13-\u770B\u677F\u5A18\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_13-\u770B\u677F\u5A18\u63D2\u4EF6" aria-hidden="true">#</a> 13 \u770B\u677F\u5A18\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u770B\u677F\u5A18\u63D2\u4EF6</code>\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next" target="_blank" rel="noopener noreferrer">\u770B\u677F\u5A18\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-kan-ban-niang-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-kan-ban-niang-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> kanBanNiang <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-kan-ban-niang-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">kanBanNiang</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next" target="_blank" rel="noopener noreferrer">\u770B\u677F\u5A18\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6" aria-hidden="true">#</a> 14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6</code>\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next" target="_blank" rel="noopener noreferrer">\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-ribbon-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-ribbon-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ribbon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-ribbon-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u5F69\u5E26</span>
    <span class="token function">ribbon</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token comment">// \u9ED8\u8BA4\u6570\u636E</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">//  \u900F\u660E\u5EA6</span>
      <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//  \u5C42\u7EA7</span>
      <span class="token literal-property property">option</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u8272\u5E26HSL\u9971\u548C\u5EA6</span>
        <span class="token literal-property property">colorSaturation</span><span class="token operator">:</span> <span class="token string">'80%'</span><span class="token punctuation">,</span>
        <span class="token comment">// \u8272\u5E26HSL\u4EAE\u5EA6\u91CF</span>
        <span class="token literal-property property">colorBrightness</span><span class="token operator">:</span> <span class="token string">'60%'</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5E26\u72B6\u989C\u8272\u4E0D\u900F\u660E\u5EA6</span>
        <span class="token literal-property property">colorAlpha</span><span class="token operator">:</span> <span class="token number">0.65</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5728HSL\u989C\u8272\u7A7A\u95F4\u4E2D\u5FAA\u73AF\u663E\u793A\u989C\u8272\u7684\u901F\u5EA6\u6709\u591A\u5FEB</span>
        <span class="token literal-property property">colorCycleSpeed</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        <span class="token comment">// \u4ECE\u54EA\u4E00\u4FA7\u5F00\u59CBY\u8F74 (top|min, middle|center, bottom|max, random)</span>
        <span class="token literal-property property">verticalPosition</span><span class="token operator">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5230\u8FBE\u5C4F\u5E55\u53E6\u4E00\u4FA7\u7684\u901F\u5EA6\u6709\u591A\u5FEB</span>
        <span class="token literal-property property">horizontalSpeed</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5728\u4EFB\u4F55\u7ED9\u5B9A\u65F6\u95F4\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u4FDD\u7559\u591A\u5C11\u6761\u5E26</span>
        <span class="token literal-property property">ribbonCount</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token comment">// \u6DFB\u52A0\u7B14\u5212\u4EE5\u53CA\u8272\u5E26\u586B\u5145\u989C\u8272</span>
        <span class="token literal-property property">strokeSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token comment">// \u901A\u8FC7\u9875\u9762\u6EDA\u52A8\u4E0A\u7684\u56E0\u5B50\u5782\u76F4\u79FB\u52A8\u8272\u5E26</span>
        <span class="token literal-property property">parallaxAmount</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>
        <span class="token comment">// \u968F\u7740\u65F6\u95F4\u7684\u63A8\u79FB\uFF0C\u4E3A\u6BCF\u4E2A\u529F\u80FD\u533A\u6DFB\u52A0\u52A8\u753B\u6548\u679C</span>
        <span class="token literal-property property">animateSections</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//  \u70B9\u51FB\u5F69\u5E26  true\u663E\u793A  false\u4E3A\u4E0D\u663E\u793A</span>
      <span class="token literal-property property">ribbonShow</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// \u6ED1\u52A8\u5F69\u5E26</span>
      <span class="token literal-property property">ribbonAnimationShow</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next" target="_blank" rel="noopener noreferrer">\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6" aria-hidden="true">#</a> 15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u6A31\u82B1\u7279\u6548\u63D2\u4EF6</code>\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next" target="_blank" rel="noopener noreferrer">\u6A31\u82B1\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-sakura-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-sakura-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> sakura <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-sakura-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u6A31\u82B1\u7279\u6548</span>
    <span class="token function">sakura</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">sakura_zindex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">sakura_img</span><span class="token operator">:</span> <span class="token string">'/blog-docs/images/blue.png'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next" target="_blank" rel="noopener noreferrer">\u6A31\u82B1\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h2 id="\u56DB-\u9879\u76EE\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u56DB-\u9879\u76EE\u90E8\u7F72" aria-hidden="true">#</a> \u56DB \u9879\u76EE\u90E8\u7F72</h2>
<p><code v-pre>vuepress</code>\u9879\u76EE\u548C\u666E\u901A vue \u90FD\u5C5E\u4E8E\u5355\u9875\u9762\u5E94\u7528\uFF0C\u9879\u76EE\u6253\u5305\u90E8\u7F72\u65B9\u5F0F\u4E5F\u4E00\u81F4\uFF0C\u53EF\u4EE5\u91C7\u7528\u672C\u5730\u90E8\u7F72\uFF0C\u4E5F\u53EF\u4EE5\u91C7\u7528\u4E91\u670D\u52A1\u5668\u8FDB\u884C\u90E8\u7F72\u3002\u4E0B\u9762\u603B\u7ED3 2 \u79CD\u90E8\u7F72\u65B9\u5F0F\uFF1A</p>
<ul>
<li>1 \u672C\u5730 nginx \u90E8\u7F72\u9759\u6001\u6587\u4EF6 \u3002</li>
<li>2 \u901A\u8FC7<code v-pre>Gitee Actions</code>\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\u5230<code v-pre>Github Pages</code>\u548C<code v-pre>Gitee Pages</code>\u3002</li>
</ul>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<p>1\u3001\u5982\u679C\u9879\u76EE\u8BBE\u7F6E\u4E86<code v-pre>base</code>,\u4E0D\u53EF\u76F4\u63A5\u5728\u672C\u5730\u5F00\u542F\u4E00\u4E2A\u670D\u52A1\u5668(eg:http-server)\u8FDB\u884C\u90E8\u7F72\uFF0C\u9700\u8981\u901A\u8FC7 nginx \u670D\u52A1\u5668\u8FDB\u884C\u53CD\u5411\u4EE3\u7406\u3002</p>
<p>2\u3001\u5982\u679C\u9879\u76EE\u6CA1\u6709\u8BBE\u7F6E<code v-pre>base</code>,\u53EF\u4EE5\u901A\u8FC7\u672C\u5730\u9759\u6001\u670D\u52A1\u5668\u6216 nginx \u670D\u52A1\u5668\u8FDB\u884C\u4EE3\u7406\u3002</p>
<p>3\u3001<code v-pre>base</code>\u7C7B\u578B: string,\u9ED8\u8BA4\u503C: /,\u90E8\u7F72\u7AD9\u70B9\u7684\u57FA\u7840\u8DEF\u5F84\uFF0C\u5982\u679C\u4F60\u60F3\u8BA9\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230\u4E00\u4E2A\u5B50\u8DEF\u5F84\u4E0B\uFF0C\u4F60\u5C06\u9700\u8981\u8BBE\u7F6E\u5B83\u3002\u5982 Github pages\uFF0C\u5982\u679C\u4F60\u60F3\u5C06\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230 https://foo.github.io/bar/\uFF0C\u90A3\u4E48 base \u5E94\u8BE5\u88AB\u8BBE\u7F6E\u6210 \u201C/bar/\u201D\uFF0C\u5B83\u7684\u503C\u5E94\u5F53\u603B\u662F\u4EE5\u659C\u6760\u5F00\u59CB\uFF0C\u5E76\u4EE5\u659C\u6760\u7ED3\u675F\u3002base \u5C06\u4F1A\u81EA\u52A8\u5730\u4F5C\u4E3A\u524D\u7F00\u63D2\u5165\u5230\u6240\u6709\u4EE5 / \u5F00\u59CB\u7684\u5176\u4ED6\u9009\u9879\u7684\u94FE\u63A5\u4E2D\uFF0C\u6240\u4EE5\u4F60\u53EA\u9700\u8981\u6307\u5B9A\u4E00\u6B21\u3002</p>
</div>
<h3 id="_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72" aria-hidden="true">#</a> 1 nginx \u670D\u52A1\u5668\u90E8\u7F72</h3>
<ul>
<li>
<p><code v-pre>base</code>\u4E3A<code v-pre>/</code>\u65F6\uFF0C\u76F8\u5E94\u7684 nginx \u914D\u7F6E\u5341\u5206\u7B80\u5355\uFF0C\u76F4\u63A5\u6307\u5B9A\u7AEF\u53E3\u5982\u4E0B\u9762\u793A\u4F8B\u7684 8080\uFF0C\u5E76\u6307\u5B9A root \u8DEF\u5F84\uFF08\u5373 build \u540E\u653E\u5728\u670D\u52A1\u5668\u7684\u8DEF\u5F84\uFF09nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A</p>
<div class="language-conf ext-conf line-numbers-mode"><pre v-pre class="language-conf"><code>server {
  listen 8080;
  location / {
      root /root/doc/dist;
      try_files $uri $uri/ /index.html;
      index index.html index.htm;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><code v-pre>base</code>\u4E3A<code v-pre>/blog-docs</code>\u65F6\uFF0C\u6BD4\u5982\u672C\u7AD9\uFF0C\u914D\u7F6E\u7684\u4E3A/blog-docs\uFF0C\u914D\u7F6E\u4E5F\u5F88\u7B80\u5355\uFF0C\u53EA\u9700\u8981\u4E0A\u9762\u7684 location \u7531/\u6539\u4E3A/blog-docs/\uFF0C\u6CE8\u610F\u6700\u540E\u4E00\u4E2A\u659C\u6760\u3002nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A</p>
<div class="language-conf ext-conf line-numbers-mode"><pre v-pre class="language-conf"><code>server {
  listen 80;
  server_name localhost;
  client_max_body_size 20m;
  charset utf-8;
    #\u914D\u7F6E\u4E86\u8F6C\u53D1
  location /blog-docs/ {
    proxy_pass http://localhost:8081/;
  }
}
#\u57288081\u4E0A\u8D77\u4E86vuepress
server {
  listen 8081;
  location / {
      root /root/doc/dist;
      try_files $uri $uri/ /index.html;
      index index.html index.htm;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h3 id="_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages" tabindex="-1"><a class="header-anchor" href="#_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages" aria-hidden="true">#</a> 2 \u90E8\u7F72\u5728<code v-pre>Github Pages</code>\u548C<code v-pre>Gitee Pages</code></h3>
<p>\u2003\u9879\u76EE\u91C7\u7528<code v-pre>Github Pages</code>\u548C<code v-pre>Gitee Pages</code>\u65B9\u5F0F\u8FDB\u884C\u4EE3\u7406\u90E8\u7F72\uFF0C\u4F9D\u9760<code v-pre>Github</code>\u5F3A\u5927\u7684\u5DE5\u4F5C\u6D41\u673A\u5236\u5B9E\u73B0\u81EA\u52A8\u7F16\u8BD1\u6253\u5305\u90E8\u7F72\u3002\u5927\u81F4\u90E8\u7F72\u6D41\u7A0B\uFF1A\u672C\u5730\u901A\u8FC7 git \u63D0\u4EA4\u6E90\u4EE3\u7801\uFF0C<code v-pre>Github Actions</code>\u89E6\u53D1\u5DE5\u4F5C\u6D41<code v-pre>workflows</code>\u5B9E\u73B0\u5206\u652F\u4EE3\u7801\u68C0\u51FA\uFF0C\u4F9D\u8D56\u5B89\u88C5\uFF0C\u6253\u5305\u7F16\u8BD1\uFF0C\u521B\u5EFA<code v-pre>gh-pages</code>\u5206\u652F\uFF0C\u4E0A\u4F20<code v-pre>dist</code>\u7F16\u8BD1\u540E\u4EE3\u7801\u5230<code v-pre>gh-pages</code>\uFF0C<code v-pre>gh-pages</code>\u5206\u652F\u90E8\u7F72\u5230\`\`Github Pages<code v-pre>\uFF0C\u540C\u6B65</code>Github<code v-pre>\u4ED3\u5E93\u4EE3\u7801\u81F3</code>Giee<code v-pre>,</code>Gitee Pages<code v-pre>\u90E8\u7F72\u3002\u4E0A\u8FF0\u6D41\u7A0B\u5B9E\u73B0\u4E86\u81EA\u52A8\u7F16\u8BD1\u90E8\u7F72\u548C</code>github<code v-pre>\u4EE3\u7801\u540C\u6B65\u90E8\u7F72\u81F3</code>gitee\`\u3002</p>
<p>\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u8BF7\u53C2\u8003\uFF1A<RouterLink to="/posts/other/githubPages.html">GitHub Actions \u81EA\u52A8\u90E8\u7F72 GitHub Pages \u5E76\u540C\u6B65 Gitee Pages</RouterLink></p>
`,date:"2022-08-23",deps:[],links:[{raw:"./algoliaSearch.md",relative:"posts/other/algoliaSearch.md",absolute:"/blog-docs/posts/other/algoliaSearch.md"},{raw:"./walineServer.md",relative:"posts/other/walineServer.md",absolute:"/blog-docs/posts/other/walineServer.md"},{raw:"./githubPages.md",relative:"posts/other/githubPages.md",absolute:"/blog-docs/posts/other/githubPages.md"}],pathInferred:"/posts/other/blogDocs.html",pathLocale:"/",permalink:null,routeMeta:{title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"},sfcBlocks:[],slug:"blogDocs",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/blogDocs.md",filePathRelative:"posts/other/blogDocs.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/blogDocs.html.vue",componentFilePathRelative:"pages/posts/other/blogDocs.html.vue",componentFileChunkName:"v-65bd7028",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/blogDocs.html.js",dataFilePathRelative:"pages/posts/other/blogDocs.html.js",dataFileChunkName:"v-65bd7028",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/blogDocs.html",htmlFilePathRelative:"posts/other/blogDocs.html"},title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"},["/posts/other/blogDocs","/posts/other/blogDocs.md"]],["v-9b67abf4","/posts/other/firends.html",{_blog:{data:{key:"v-9b67abf4",path:"/posts/other/firends.html",title:"\u670B\u53CB\u5708",lang:"zh-CN",frontmatter:{title:"\u670B\u53CB\u5708",date:"2022-02-14T15:34:34.000Z",description:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708",lang:"zh-CN",tag:["\u5176\u4ED6"],category:["\u5176\u4ED6"],head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/firends.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"\u670B\u53CB\u5708"}],["meta",{property:"og:description",content:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-14T15:34:34.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</p>
`,headers:[{level:3,title:"\u670B\u53CB\u5708\u96C6\u9526",slug:"\u670B\u53CB\u5708\u96C6\u9526",children:[]},{level:3,title:"\u670B\u53CB\u5708\u4E92\u6362",slug:"\u670B\u53CB\u5708\u4E92\u6362",children:[]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/firends.md",readingTime:{minutes:3.07,words:922},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/firends.html`},key:"v-9b67abf4",path:"/posts/other/firends.html",title:"\u670B\u53CB\u5708",lang:"zh-CN",frontmatter:{title:"\u670B\u53CB\u5708",date:"2022-02-14T15:34:34.000Z",description:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708",lang:"zh-CN",tag:["\u5176\u4ED6"],category:["\u5176\u4ED6"],head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/firends.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"\u670B\u53CB\u5708"}],["meta",{property:"og:description",content:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-14T15:34:34.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</p>
`,headers:[{level:3,title:"\u670B\u53CB\u5708\u96C6\u9526",slug:"\u670B\u53CB\u5708\u96C6\u9526",children:[]},{level:3,title:"\u670B\u53CB\u5708\u4E92\u6362",slug:"\u670B\u53CB\u5708\u4E92\u6362",children:[]}],content:`---
title: \u670B\u53CB\u5708
date: 2022-02-14 15:34:34
description: \u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708
lang: zh-CN
tag:
  - \u5176\u4ED6
category:
  - \u5176\u4ED6
---

\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002

<!-- more -->

### \u670B\u53CB\u5708\u96C6\u9526

- \u5FD7\u5408\u8005\uFF0C\u4E0D\u4EE5\u5C71\u6D77\u4E3A\u8FDC\uFF1B\u9053\u4E56\u8005\uFF0C\u4E0D\u4EE5\u54AB\u5C3A\u4E3A\u8FD1\u3002\u2014\u2014\u664B\xB7\u845B\u6D2A
- \u6B64\u5904\u5C55\u793A\u4E86\u6240\u6709\u9AD8\u8D28\u91CF\u7684\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u6392\u540D\u4E0D\u5206\u5148\u540E\uFF01
- \u53CB\u60C5\u94FE\u63A5\u662F\u6211\u5728\u5F00\u53D1\u535A\u5BA2\u4E2D\u7F51\u4E0A\u67E5\u9605\u8D44\u6599\u627E\u5230\u7684\uFF0C\u5982\u6709\u4FB5\u6743\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u6211\uFF01
- \u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002

::: cardList 3

\`\`\`yaml
- name: \u5348\u540E\u5357\u6742
  avatar: https://www.recoluan.com/head.png
  desc: Enjoy when you can, and endure when you must.
  link: https://www.recoluan.com
  bgColor: 'rgb(165 216 243)'
  textColor: '#6854A1'
- name: \u897F\u74DC\u76AE\u513F
  desc: enjoy your grow up!
  avatar: https://coderhdy.com/assets/img/snapshot.png
  link: https://coderhdy.com/
  bgColor: '#FCE5BF'
  textColor: '#7B2532'
- name: znote
  desc: \u8377\u5C3D\u5DF2\u65E0\u64CE\u96E8\u76D6\uFF0C\u83CA\u6B8B\u72B9\u6709\u50B2\u971C\u679D\u3002
  avatar: https://zpj80231.gitee.io/znote/vuepress/head-fish.jpg
  link: https://zpj80231.gitee.io/znote/
  bgColor: rgb(212 162 72)
  textColor: '#A05F2C'
- name: \u534A\u843D\u6C99\u75D5
  desc: Everything Wins\uFF01
  avatar: http://img.dracarys.top/avatar.jpg
  link: http://www.dracarys.top
  bgColor: '#1abc9c'
  textColor: '#c0392b'
- name: Evan's blog
  avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg
  desc: \u79EF\u8DEC\u6B65\u4EE5\u81F3\u5343\u91CC\uFF0C\u81F4\u656C\u6BCF\u4E2A\u7231\u5B66\u4E60\u7684\u4F60\u3002
  link: https://xugaoyi.com/
  bgColor: '#2980b9'
  textColor: '#ecf0f1'
- name: \u53CB\u4EBAc
  avatar: https://www.ihewro.com/usr/uploads/2020/02/863730882.jpg
  desc: \u53EA\u8981\u5FC3\u8FD8\u773A\u3002
  link: https://www.ihewro.com/
  bgColor: 'rgb(136,181,214)'
  textColor: 'rgb(249,249,249)'
- name: \u7530\u5C0F\u6CE2
  avatar: https://www.tianxiaobo.com/images/avatar.jpg
  desc: \u6B22\u8FCE\u8BBF\u95EE\u7530\u5C0F\u6CE2\u7684\u6280\u672F\u535A\u5BA2\u3002
  link: http://www.tianxiaobo.com/
  bgColor: '#B39CD0'
  textColor: '#FBEAFF'
- name: \u6613\u826F\u540C\u5B66\u7684\u535A\u5BA2
  desc: \u6B63\u5728\u52AA\u529B\uFF01
  avatar: https://yiliang.site/assets/images/avatar.jpeg
  link: https://yiliang.site
  bgColor: 'rgb(220 218 218)'
  textColor: '#2c3e50'
- name: \u4F1A\u98DE\u7684\u5C0F\u5F0B
  link: https://lovelijunyi.gitee.io/
  avatar: https://lovelijunyi.gitee.io/img/avatar.gif
  desc: \u559C\u6B22\u5927\u6570\u636E\uFF0C\u5D4C\u5165\u5F0F\u548C\u673A\u5668\u89C6\u89C9
  bgColor: 'rgb(243 126 126)'
  textColor: 'rgb(102 48 72)'
- name: \u996D\u56E2\u4E5F\u6709\u6625\u5929
  link: http://www.zpzpup.com/blog/
  avatar: https://www.zpzpup.com/assets/image/avatar.png
  desc: \u4E00\u4E2A\u88AB\u7A0B\u5E8F\u5458\u751F\u6DAF\u803D\u8BEF\u7684\u4F18\u79C0\u53A8\u5B50
  bgColor: 'rgb(163 243 126)'
  textColor: 'rgb(102 48 72)'
- name: \u5C71\u6D77\u4EE5\u5357
  link: https://mu-yan.cn/
  avatar: https://cdn.staticaly.com/gh/Mu-Yan/Mu-Yan.github.io/avatar.jpg
  desc: \u5DF1\u6240\u4E0D\u6B32\u52FF\u65BD\u4E8E\u4EBA
  bgColor: rgb(213 136 216);
  textColor: 'rgb(102 48 72)'
- name: WangScaler
  link: https://blog.wangscaler.com/
  avatar: https://blog.wangscaler.com/logo.png
  desc: WangScaler
  bgColor: rgb(220 46 122);
  textColor: 'rgb(102 48 72)'
- name: \u6D9B\u6D9B\u4E4B\u6D77
  link: https://claa.gitee.io/vuepress-theme-vdoing/
  avatar: https://claa.gitee.io/vuepress-theme-vdoing/img/taotao.jpg
  desc: \u6E05\u9192\u65F6\u505A\u4E8B\uFF0C\u7CCA\u6D82\u65F6\u8BFB\u4E66\uFF0C\u5927\u6012\u65F6\u7761\u89C9\uFF0C\u72EC\u5904\u65F6\u601D\u8003\u3002
  bgColor: rgb(114 173 87);
  textColor: 'rgb(102 48 72)'
- name: \u5E73\u51E1\u7684\u4F60\u6211
  link: https://reinness.com/
  avatar: https://reinness.com/avatar.png
  desc: \u7406\u60F3\u6210\u4E3A\u5927\u725B\u7684\u5C0F\u9648\u540C\u5B66
  bgColor: rgb(243 126 150);
  textColor: 'rgb(102 48 72)'
- name: \u5C0F\u7D2B\u5FF5\u6C81
  desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
  avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
  link: https://anyfork.gitee.io/blog-docs/
  bgColor: rgb(218 88 88 / 62%)
  textColor: rgb(5 41 14 / 75%)
\`\`\`

:::

::: cardImgList 2

\`\`\`yaml
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
  name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/plugins/
  name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
- img: https://vuepress.vuejs.org/hero.png
  link: https://www.vuepress.cn/
  name: VuePress \u4E2D\u6587\u5B98\u7F51
  desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
- img: https://vuepress.vuejs.org/hero.png
  link: https://vuepress-community.netlify.app/zh/
  name: VuePress \u5B98\u65B9\u793E\u533A
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
\`\`\`

:::

### \u670B\u53CB\u5708\u4E92\u6362

\u5982\u9700\u8981\u53CB\u94FE\uFF0C\u8BF7<a> \u7559\u8A00 \u{1F447} </a> \u544A\u77E5\uFF0C\u7533\u8BF7\u524D\u8BF7\u8BB0\u5F97\u5148\u6DFB\u52A0\u672C\u7AD9\u54E6\uFF5E, \u5E76\u4F7F\u7528\u5982\u4E0B\u683C\u5F0F\uFF1A

\`\`\`yaml
- name: \u5C0F\u7D2B\u5FF5\u6C81
  desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
  avatar: https://anyfork.gitee.io/blog-docs/images/user.jpg
  link: https://anyfork.gitee.io/blog-docs/
  bgColor: rgb(218 88 88 / 62%)
  textColor: rgb(5 41 14 / 75%)
\`\`\`
`,contentRendered:`<p>\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</p>
<!-- more -->
<h3 id="\u670B\u53CB\u5708\u96C6\u9526" tabindex="-1"><a class="header-anchor" href="#\u670B\u53CB\u5708\u96C6\u9526" aria-hidden="true">#</a> \u670B\u53CB\u5708\u96C6\u9526</h3>
<ul>
<li>\u5FD7\u5408\u8005\uFF0C\u4E0D\u4EE5\u5C71\u6D77\u4E3A\u8FDC\uFF1B\u9053\u4E56\u8005\uFF0C\u4E0D\u4EE5\u54AB\u5C3A\u4E3A\u8FD1\u3002\u2014\u2014\u664B\xB7\u845B\u6D2A</li>
<li>\u6B64\u5904\u5C55\u793A\u4E86\u6240\u6709\u9AD8\u8D28\u91CF\u7684\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u6392\u540D\u4E0D\u5206\u5148\u540E\uFF01</li>
<li>\u53CB\u60C5\u94FE\u63A5\u662F\u6211\u5728\u5F00\u53D1\u535A\u5BA2\u4E2D\u7F51\u4E0A\u67E5\u9605\u8D44\u6599\u627E\u5230\u7684\uFF0C\u5982\u6709\u4FB5\u6743\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u6211\uFF01</li>
<li>\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</li>
</ul>
<div class="cardListContainer"><div class="card-list">
        <a href="https://www.recoluan.com" target="_blank" class="card-item row-3"
          style="background-color:rgb(165 216 243);color:#6854A1;"
        >
          <img src="https://www.recoluan.com/head.png" class="no-zoom">
          <div>
            <p class="name">\u5348\u540E\u5357\u6742</p>
            <p class="desc">Enjoy when you can, and endure when you must.</p>
          </div>
        </a>
      
        <a href="https://coderhdy.com/" target="_blank" class="card-item row-3"
          style="background-color:#FCE5BF;color:#7B2532;"
        >
          <img src="https://coderhdy.com/assets/img/snapshot.png" class="no-zoom">
          <div>
            <p class="name">\u897F\u74DC\u76AE\u513F</p>
            <p class="desc">enjoy your grow up!</p>
          </div>
        </a>
      
        <a href="https://zpj80231.gitee.io/znote/" target="_blank" class="card-item row-3"
          style="background-color:rgb(212 162 72);color:#A05F2C;"
        >
          <img src="https://zpj80231.gitee.io/znote/vuepress/head-fish.jpg" class="no-zoom">
          <div>
            <p class="name">znote</p>
            <p class="desc">\u8377\u5C3D\u5DF2\u65E0\u64CE\u96E8\u76D6\uFF0C\u83CA\u6B8B\u72B9\u6709\u50B2\u971C\u679D\u3002</p>
          </div>
        </a>
      
        <a href="http://www.dracarys.top" target="_blank" class="card-item row-3"
          style="background-color:#1abc9c;color:#c0392b;"
        >
          <img src="http://img.dracarys.top/avatar.jpg" class="no-zoom">
          <div>
            <p class="name">\u534A\u843D\u6C99\u75D5</p>
            <p class="desc">Everything Wins\uFF01</p>
          </div>
        </a>
      
        <a href="https://xugaoyi.com/" target="_blank" class="card-item row-3"
          style="background-color:#2980b9;color:#ecf0f1;"
        >
          <img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg" class="no-zoom">
          <div>
            <p class="name">Evan's blog</p>
            <p class="desc">\u79EF\u8DEC\u6B65\u4EE5\u81F3\u5343\u91CC\uFF0C\u81F4\u656C\u6BCF\u4E2A\u7231\u5B66\u4E60\u7684\u4F60\u3002</p>
          </div>
        </a>
      
        <a href="https://www.ihewro.com/" target="_blank" class="card-item row-3"
          style="background-color:rgb(136,181,214);color:rgb(249,249,249);"
        >
          <img src="https://www.ihewro.com/usr/uploads/2020/02/863730882.jpg" class="no-zoom">
          <div>
            <p class="name">\u53CB\u4EBAc</p>
            <p class="desc">\u53EA\u8981\u5FC3\u8FD8\u773A\u3002</p>
          </div>
        </a>
      
        <a href="http://www.tianxiaobo.com/" target="_blank" class="card-item row-3"
          style="background-color:#B39CD0;color:#FBEAFF;"
        >
          <img src="https://www.tianxiaobo.com/images/avatar.jpg" class="no-zoom">
          <div>
            <p class="name">\u7530\u5C0F\u6CE2</p>
            <p class="desc">\u6B22\u8FCE\u8BBF\u95EE\u7530\u5C0F\u6CE2\u7684\u6280\u672F\u535A\u5BA2\u3002</p>
          </div>
        </a>
      
        <a href="https://yiliang.site" target="_blank" class="card-item row-3"
          style="background-color:rgb(220 218 218);color:#2c3e50;"
        >
          <img src="https://yiliang.site/assets/images/avatar.jpeg" class="no-zoom">
          <div>
            <p class="name">\u6613\u826F\u540C\u5B66\u7684\u535A\u5BA2</p>
            <p class="desc">\u6B63\u5728\u52AA\u529B\uFF01</p>
          </div>
        </a>
      
        <a href="https://lovelijunyi.gitee.io/" target="_blank" class="card-item row-3"
          style="background-color:rgb(243 126 126);color:rgb(102 48 72);"
        >
          <img src="https://lovelijunyi.gitee.io/img/avatar.gif" class="no-zoom">
          <div>
            <p class="name">\u4F1A\u98DE\u7684\u5C0F\u5F0B</p>
            <p class="desc">\u559C\u6B22\u5927\u6570\u636E\uFF0C\u5D4C\u5165\u5F0F\u548C\u673A\u5668\u89C6\u89C9</p>
          </div>
        </a>
      
        <a href="http://www.zpzpup.com/blog/" target="_blank" class="card-item row-3"
          style="background-color:rgb(163 243 126);color:rgb(102 48 72);"
        >
          <img src="https://www.zpzpup.com/assets/image/avatar.png" class="no-zoom">
          <div>
            <p class="name">\u996D\u56E2\u4E5F\u6709\u6625\u5929</p>
            <p class="desc">\u4E00\u4E2A\u88AB\u7A0B\u5E8F\u5458\u751F\u6DAF\u803D\u8BEF\u7684\u4F18\u79C0\u53A8\u5B50</p>
          </div>
        </a>
      
        <a href="https://mu-yan.cn/" target="_blank" class="card-item row-3"
          style="background-color:rgb(213 136 216);;color:rgb(102 48 72);"
        >
          <img src="https://cdn.staticaly.com/gh/Mu-Yan/Mu-Yan.github.io/avatar.jpg" class="no-zoom">
          <div>
            <p class="name">\u5C71\u6D77\u4EE5\u5357</p>
            <p class="desc">\u5DF1\u6240\u4E0D\u6B32\u52FF\u65BD\u4E8E\u4EBA</p>
          </div>
        </a>
      
        <a href="https://blog.wangscaler.com/" target="_blank" class="card-item row-3"
          style="background-color:rgb(220 46 122);;color:rgb(102 48 72);"
        >
          <img src="https://blog.wangscaler.com/logo.png" class="no-zoom">
          <div>
            <p class="name">WangScaler</p>
            <p class="desc">WangScaler</p>
          </div>
        </a>
      
        <a href="https://claa.gitee.io/vuepress-theme-vdoing/" target="_blank" class="card-item row-3"
          style="background-color:rgb(114 173 87);;color:rgb(102 48 72);"
        >
          <img src="https://claa.gitee.io/vuepress-theme-vdoing/img/taotao.jpg" class="no-zoom">
          <div>
            <p class="name">\u6D9B\u6D9B\u4E4B\u6D77</p>
            <p class="desc">\u6E05\u9192\u65F6\u505A\u4E8B\uFF0C\u7CCA\u6D82\u65F6\u8BFB\u4E66\uFF0C\u5927\u6012\u65F6\u7761\u89C9\uFF0C\u72EC\u5904\u65F6\u601D\u8003\u3002</p>
          </div>
        </a>
      
        <a href="https://reinness.com/" target="_blank" class="card-item row-3"
          style="background-color:rgb(243 126 150);;color:rgb(102 48 72);"
        >
          <img src="https://reinness.com/avatar.png" class="no-zoom">
          <div>
            <p class="name">\u5E73\u51E1\u7684\u4F60\u6211</p>
            <p class="desc">\u7406\u60F3\u6210\u4E3A\u5927\u725B\u7684\u5C0F\u9648\u540C\u5B66</p>
          </div>
        </a>
      
        <a href="https://anyfork.gitee.io/blog-docs/" target="_blank" class="card-item row-3"
          style="background-color:rgb(218 88 88 / 62%);color:rgb(5 41 14 / 75%);"
        >
          <img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png" class="no-zoom">
          <div>
            <p class="name">\u5C0F\u7D2B\u5FF5\u6C81</p>
            <p class="desc">\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77</p>
          </div>
        </a>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5348\u540E\u5357\u6742
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com/head.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> Enjoy when you can<span class="token punctuation">,</span> and endure when you must.
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(165 216 243)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#6854A1'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u897F\u74DC\u76AE\u513F
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> enjoy your grow up<span class="token tag">!</span>
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/assets/img/snapshot.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#FCE5BF'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#7B2532'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> znote
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u8377\u5C3D\u5DF2\u65E0\u64CE\u96E8\u76D6\uFF0C\u83CA\u6B8B\u72B9\u6709\u50B2\u971C\u679D\u3002
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//zpj80231.gitee.io/znote/vuepress/head<span class="token punctuation">-</span>fish.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//zpj80231.gitee.io/znote/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(212 162 72)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#A05F2C'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u534A\u843D\u6C99\u75D5
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> Everything Wins\uFF01
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//img.dracarys.top/avatar.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.dracarys.top
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#1abc9c'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#c0392b'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Evan's blog
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u79EF\u8DEC\u6B65\u4EE5\u81F3\u5343\u91CC\uFF0C\u81F4\u656C\u6BCF\u4E2A\u7231\u5B66\u4E60\u7684\u4F60\u3002
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xugaoyi.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#2980b9'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#ecf0f1'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u53CB\u4EBAc
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.ihewro.com/usr/uploads/2020/02/863730882.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u53EA\u8981\u5FC3\u8FD8\u773A\u3002
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.ihewro.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(136,181,214)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(249,249,249)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u7530\u5C0F\u6CE2
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.tianxiaobo.com/images/avatar.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u6B22\u8FCE\u8BBF\u95EE\u7530\u5C0F\u6CE2\u7684\u6280\u672F\u535A\u5BA2\u3002
  <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.tianxiaobo.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#B39CD0'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#FBEAFF'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u6613\u826F\u540C\u5B66\u7684\u535A\u5BA2
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u6B63\u5728\u52AA\u529B\uFF01
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//yiliang.site/assets/images/avatar.jpeg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//yiliang.site
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(220 218 218)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#2c3e50'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u4F1A\u98DE\u7684\u5C0F\u5F0B
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//lovelijunyi.gitee.io/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//lovelijunyi.gitee.io/img/avatar.gif
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u559C\u6B22\u5927\u6570\u636E\uFF0C\u5D4C\u5165\u5F0F\u548C\u673A\u5668\u89C6\u89C9
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(243 126 126)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u996D\u56E2\u4E5F\u6709\u6625\u5929
  <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.zpzpup.com/blog/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.zpzpup.com/assets/image/avatar.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E00\u4E2A\u88AB\u7A0B\u5E8F\u5458\u751F\u6DAF\u803D\u8BEF\u7684\u4F18\u79C0\u53A8\u5B50
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(163 243 126)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C71\u6D77\u4EE5\u5357
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//mu<span class="token punctuation">-</span>yan.cn/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.staticaly.com/gh/Mu<span class="token punctuation">-</span>Yan/Mu<span class="token punctuation">-</span>Yan.github.io/avatar.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5DF1\u6240\u4E0D\u6B32\u52FF\u65BD\u4E8E\u4EBA
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(213 136 216);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> WangScaler
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//blog.wangscaler.com/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//blog.wangscaler.com/logo.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> WangScaler
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(220 46 122);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u6D9B\u6D9B\u4E4B\u6D77
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//claa.gitee.io/vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>vdoing/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//claa.gitee.io/vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>vdoing/img/taotao.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u6E05\u9192\u65F6\u505A\u4E8B\uFF0C\u7CCA\u6D82\u65F6\u8BFB\u4E66\uFF0C\u5927\u6012\u65F6\u7761\u89C9\uFF0C\u72EC\u5904\u65F6\u601D\u8003\u3002
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(114 173 87);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5E73\u51E1\u7684\u4F60\u6211
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//reinness.com/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//reinness.com/avatar.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u7406\u60F3\u6210\u4E3A\u5927\u725B\u7684\u5C0F\u9648\u540C\u5B66
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(243 126 150);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C0F\u7D2B\u5FF5\u6C81
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E0D\u79EF\u8DEC\u6B65<span class="token punctuation">,</span>\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41<span class="token punctuation">,</span>\u65E0\u4EE5\u6210\u6C5F\u6D77
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.staticaly.com/gh/AnyFork/blog<span class="token punctuation">-</span>images/main/markdown/202208241822713.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(218 88 88 / 62%)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> rgb(5 41 14 / 75%)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="cardImgListContainer"><div class="card-list">
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://www.vuepress.cn/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://www.vuepress.cn/" target="_blank">
              <p class="name">VuePress \u4E2D\u6587\u5B98\u7F51</p>
              <p class="desc">VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <p class="name">VuePress \u5B98\u65B9\u793E\u533A</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/other/theme<span class="token punctuation">-</span>example.html
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u7F51\u6848\u4F8B
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/plugins/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u65B9\u63D2\u4EF6
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.vuepress.cn/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>community.netlify.app/zh/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u5B98\u65B9\u793E\u533A
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="\u670B\u53CB\u5708\u4E92\u6362" tabindex="-1"><a class="header-anchor" href="#\u670B\u53CB\u5708\u4E92\u6362" aria-hidden="true">#</a> \u670B\u53CB\u5708\u4E92\u6362</h3>
<p>\u5982\u9700\u8981\u53CB\u94FE\uFF0C\u8BF7<a> \u7559\u8A00 \u{1F447} </a> \u544A\u77E5\uFF0C\u7533\u8BF7\u524D\u8BF7\u8BB0\u5F97\u5148\u6DFB\u52A0\u672C\u7AD9\u54E6\uFF5E, \u5E76\u4F7F\u7528\u5982\u4E0B\u683C\u5F0F\uFF1A</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C0F\u7D2B\u5FF5\u6C81
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E0D\u79EF\u8DEC\u6B65<span class="token punctuation">,</span>\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41<span class="token punctuation">,</span>\u65E0\u4EE5\u6210\u6C5F\u6D77
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/images/user.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(218 88 88 / 62%)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> rgb(5 41 14 / 75%)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-02-14",deps:[],links:[],pathInferred:"/posts/other/firends.html",pathLocale:"/",permalink:null,routeMeta:{title:"\u670B\u53CB\u5708"},sfcBlocks:[],slug:"firends",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/firends.md",filePathRelative:"posts/other/firends.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/firends.html.vue",componentFilePathRelative:"pages/posts/other/firends.html.vue",componentFileChunkName:"v-9b67abf4",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/firends.html.js",dataFilePathRelative:"pages/posts/other/firends.html.js",dataFileChunkName:"v-9b67abf4",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/firends.html",htmlFilePathRelative:"posts/other/firends.html"},title:"\u670B\u53CB\u5708"},["/posts/other/firends","/posts/other/firends.md"]],["v-22a1c62c","/posts/other/githubPages.html",{_blog:{data:{key:"v-22a1c62c",path:"/posts/other/githubPages.html",title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",frontmatter:{title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",date:"2022-07-20T14:07:35.000Z",description:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",tag:["Github Pages"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201555438.jpg",sticky:2,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/githubPages.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:description",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Github Pages"}],["meta",{property:"article:published_time",content:"2022-07-20T14:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
`,headers:[{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[]},{level:2,title:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",slug:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",children:[]},{level:2,title:"\u63D0\u4EA4\u4EE3\u7801",slug:"\u63D0\u4EA4\u4EE3\u7801",children:[]},{level:2,title:"\u76F8\u5173 Aciton \u5730\u5740",slug:"\u76F8\u5173-aciton-\u5730\u5740",children:[]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/githubPages.md",readingTime:{minutes:4.21,words:1262},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/githubPages.html`},key:"v-22a1c62c",path:"/posts/other/githubPages.html",title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",frontmatter:{title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",date:"2022-07-20T14:07:35.000Z",description:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",tag:["Github Pages"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201555438.jpg",sticky:2,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/githubPages.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:description",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Github Pages"}],["meta",{property:"article:published_time",content:"2022-07-20T14:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
`,headers:[{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[]},{level:2,title:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",slug:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",children:[]},{level:2,title:"\u63D0\u4EA4\u4EE3\u7801",slug:"\u63D0\u4EA4\u4EE3\u7801",children:[]},{level:2,title:"\u76F8\u5173 Aciton \u5730\u5740",slug:"\u76F8\u5173-aciton-\u5730\u5740",children:[]}],content:`---
title: GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages
date: 2022-07-20 14:07:35
description: GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages
lang: zh-CN
tag:
  - Github Pages
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201555438.jpg
sticky: 2
---

&emsp;GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002

<!-- more -->

## \u51C6\u5907\u5DE5\u4F5C

- **\u521B\u5EFA\u516C\u5F00\u4ED3\u5E93**\uFF1A

  \u5206\u522B\u5728 Github \u548C Gitee \u5404\u521B\u5EFA\u4E00\u4E2A\u516C\u5F00\u7684\u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u79F0\u4EFB\u610F\u53D6\uFF0C\u4ED3\u5E93\u5FC5\u987B\u516C\u5F00\u3002

- **SSH \u79D8\u94A5\u521B\u5EFA**\uFF1A

  \u901A\u8FC7 SSH \u65B9\u5F0F\u63A8\u9001\u548C\u62C9\u53D6\u4EE3\u7801\uFF0C\u907F\u514D\u767B\u5F55\u8D26\u53F7\u5BC6\u7801\u3002\u79D8\u94A5\u521B\u521B\u5EFA\u6D41\u7A0B\u5982\u4E0B\uFF1A

  1\u3001\u5728\u547D\u4EE4\u884C\u7EC8\u7AEF\u6216\`Git Bash\`\u4F7F\u7528\u547D\u4EE4 ssh-keygen -t rsa -C "youremail@example.com"\u751F\u6210 SSH Key\uFF0C\u6CE8\u610F\u66FF\u6362\u4E3A\u81EA\u5DF1\u7684\u90AE\u7BB1\uFF0C\u8FDE\u7EED\u4E09\u6B21\u56DE\u8F66\u3002\u751F\u6210\u7684 id_rsa \u662F\u79C1\u94A5\uFF0Cid_rsa.pub \u662F\u516C\u94A5\u3002(\u26A0\uFE0F \u6CE8\u610F\u6B64\u5904\u4E0D\u8981\u8BBE\u7F6E\u5BC6\u7801)\uFF0C\u79D8\u94A5\u751F\u6210\u5728\`C:\\Users\\Administrator\\.ssh\`\u76EE\u5F55\u4E0B\u9762\u3002\u5982\u679C\u51FA\u73B0\`'ssh-keygen' \u4E0D\u662F\u5185\u90E8\u6216\u5916\u90E8\u547D\u4EE4\uFF0C\u4E5F\u4E0D\u662F\u53EF\u8FD0\u884C\u7684\u7A0B\u5E8F \u6216\u6279\u5904\u7406\u6587\u4EF6\u3002\`\u95EE\u9898\u65F6\u3002\u9700\u8981\u8FDB\u5165\u5230 git \u5B89\u88C5\u76EE\u5F55\u4E0B\u9762\u7684\`/usr/bin\`\u76EE\u5F55\u6267\u884C\u547D\u4EE4\u3002

  2\u3001\u5728 GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300CSettings -> SSH and GPG keys\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A
  ![GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201634013.png)

  3\u3001\u5728 Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300C\u5B89\u5168\u8BBE\u7F6E -> SSH \u516C\u94A5\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A![ Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201636995.png)

  4\u3001\u5728 GitHub \u9879\u76EE\u7684\u300C\u200BSettings -> Secrets\u300D\u8DEF\u5F84\u4E0B\u914D\u7F6E\u597D\u547D\u540D\u4E3A GITEE_RSA_PRIVATE_KEY \u5BC6\u94A5\u548C GITEE_PASSWORD \u5BC6\u94A5\u3002GITEE_RSA_PRIVATE_KEY \u5B58\u653E id_rsa \u79C1\u94A5\uFF0CGITEE_PASSWORD \u8D26\u53F7\u767B\u5F55\u7684\u5BC6\u7801\u3002\u5982\u4E0B\u56FE\uFF1A![setting](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201641069.png)

  5\u3001\u5728\u7AD9\u70B9\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u5982\u4E0B\u76EE\u5F55\`.github/workflows/xxx.yml\`\uFF0C\u6587\u4EF6\u540D\u4EFB\u610F\u8D77\uFF0CGitHub \u7684 Actions \u4F1A\u5904\u7406.github \u4E0B\u7684\u5DE5\u4F5C\u6D41\u6587\u4EF6\u5939 workflows \u7684\u5DE5\u4F5C\u6D41\u7A0B\u3002

## \u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199

\u6BD4\u5982\u5728\u76EE\u5F55\`.github/workflows/deploy.yml\`\u4E2D\u7F16\u5199\u5982\u4E0B\u4EE3\u7801:

\`\`\`yaml
name: Build and Deploy to github & gitee
on:
  push:
    branches:
      - main
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      # \u6784\u5EFANode\u73AF\u5883
      - name: Build Node.js Env
        uses: actions/setup-node@v1
        with:
          node-version: '14'
      # \u68C0\u51FAmain\u5206\u652F\u4EE3\u7801
      - name: Checkout Code
        uses: actions/checkout@v2.3.1
        with:
          persist-credentials: false
      # \u5B89\u88C5\u4F9D\u8D56
      - name: Install dependencies
        run: npm install
      # \u9879\u76EE\u6253\u5305
      - name: Build Project
        run: npm run build
      # github \u90E8\u7F72\u5206\u652Fgh-pages \u5230github pages
      - name: Deploy dist on gh-pages
        uses: JamesIves/github-pages-deploy-action@4.2.0
        with:
          BRANCH: gh-pages
          FOLDER: dist
          ACCESS_TOKEN: \${{ secrets.ACCESS_TOKEN }}

      # \u540C\u6B65github\u4EE3\u7801\u5230gitee
      - name: Sync to Gitee
        uses: wearerequired/git-mirror-action@master
        env:
          # \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_RSA_PRIVATE_KEY
          SSH_PRIVATE_KEY: \${{ secrets.GITEE_RSA_PRIVATE_KEY }}
        with:
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 GitHub \u6E90\u4ED3\u5E93\u5730\u5740
          source-repo: git@github.com:AnyFork/blog-docs.git
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u76EE\u6807\u4ED3\u5E93\u5730\u5740
          destination-repo: git@gitee.com:AnyFork/blog-docs.git

      # \u81EA\u52A8\u90E8\u7F72gitee gh-pages\u5206\u652F
      - name: Build Gitee Pages
        uses: yanglbme/gitee-pages-action@main
        with:
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u7528\u6237\u540D
          gitee-username: 874957743@qq.com
          # \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_PASSWORD
          gitee-password: \${{ secrets.GITEE_PASSWORD }}
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u4E25\u683C\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u8BF7\u51C6\u786E\u586B\u5199\uFF0C\u5426\u5219\u4F1A\u51FA\u9519
          gitee-repo: AnyFork/blog-docs
          # \u8981\u90E8\u7F72\u7684\u5206\u652F\uFF0C\u9ED8\u8BA4\u662F master\uFF0C\u82E5\u662F\u5176\u4ED6\u5206\u652F\uFF0C\u5219\u9700\u8981\u6307\u5B9A\uFF08\u6307\u5B9A\u7684\u5206\u652F\u5FC5\u987B\u5B58\u5728\uFF09
          branch: gh-pages
\`\`\`

\u6BCF\u6B21\u63D0\u4EA4\u4EE3\u7801\u540E\uFF0C\u81EA\u52A8\u89E6\u53D1 Aciton \u6267\u884C\u5DE5\u4F5C\u4EFB\u52A1\u3002\u5F53\u7136\u4F60\u5982\u679C\u4E0D\u60F3\u5728 Githup \u4E0A\u90E8\u7F72\u4EE3\u7801\uFF0C\u53EF\u4EE5\u53BB\u6389\u524D\u9762\u51E0\u6B65\uFF0C\u76F4\u63A5\u901A\u8FC7 Action \u540C\u6B65 github \u4EE3\u7801\u5230 gitee\uFF0C\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002

## \u63D0\u4EA4\u4EE3\u7801

- **\u914D\u7F6E\u7AD9\u70B9**\uFF1A\u4EE3\u7801\u63D0\u4EA4\u65B9\u5F0F\`SSH\`,\u5177\u4F53\u914D\u7F6E\u65B9\u5F0F\u6709\u4E00\u4E0B 2 \u79CD\uFF1A
  - 1\u3001\u5C06 GitHub \u4ED3\u5E93\u901A\u8FC7 SSH \u65B9\u5F0F Clone \u5230\u672C\u5730\u3002
  - 2\u3001\u5C06\u672C\u5730\u8FDC\u7A0B\u4ED3\u5E93\u8BBE\u7F6E\u4E3A GitHub \u4ED3\u5E93 SSH \u5730\u5740,\u4F8B\u5982\uFF1A\`git remote set-url origin git@github.com:xxx/blog-docs.git\`
- **\u63A8\u9001\u4EE3\u7801**\uFF1A\u6BCF\u6B21\u6587\u6863\u7F16\u5199\u5B8C\u6BD5\uFF0C\u53EF\u4EE5\u901A\u8FC7\`vscode\uFF0Cgit-bash\u6216\u8005\u547D\u4EE4\u884C\u7A97\u53E3\`\u63A8\u9001\u4EE3\u7801\uFF0C\u89E6\u53D1 Aciton\uFF0C\u5B9E\u73B0 GitHub \u548C Gitee \u81EA\u52A8\u90E8\u7F72 Pages,

## \u76F8\u5173 Aciton \u5730\u5740

**actions/setup-node@v1**\uFF1A<https://github.com/actions/setup-node/>

**actions/checkout@v2.3.1**\uFF1A<https://github.com/actions/checkout/>

**JamesIves/github-pages-deploy-action@4.2.0**\uFF1A<https://github.com/JamesIves/github-pages-deploy-action/>

**wearerequired/git-mirror-action@master**\uFF1A<https://github.com/wearerequired/git-mirror-action/>

**yanglbme/gitee-pages-action@main**\uFF1A<https://github.com/yanglbme/gitee-pages-action/>

\u81F3\u6B64\uFF0C\u901A\u8FC7 GitHub Actions \u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72 GitHub Pages \u548C Gitee Pages \u6D41\u7A0B\u5C31\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u8BD5\u8BD5\u5427\u3002
`,contentRendered:`<p>\u2003GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
<!-- more -->
<h2 id="\u51C6\u5907\u5DE5\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u5DE5\u4F5C" aria-hidden="true">#</a> \u51C6\u5907\u5DE5\u4F5C</h2>
<ul>
<li>
<p><strong>\u521B\u5EFA\u516C\u5F00\u4ED3\u5E93</strong>\uFF1A</p>
<p>\u5206\u522B\u5728 Github \u548C Gitee \u5404\u521B\u5EFA\u4E00\u4E2A\u516C\u5F00\u7684\u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u79F0\u4EFB\u610F\u53D6\uFF0C\u4ED3\u5E93\u5FC5\u987B\u516C\u5F00\u3002</p>
</li>
<li>
<p><strong>SSH \u79D8\u94A5\u521B\u5EFA</strong>\uFF1A</p>
<p>\u901A\u8FC7 SSH \u65B9\u5F0F\u63A8\u9001\u548C\u62C9\u53D6\u4EE3\u7801\uFF0C\u907F\u514D\u767B\u5F55\u8D26\u53F7\u5BC6\u7801\u3002\u79D8\u94A5\u521B\u521B\u5EFA\u6D41\u7A0B\u5982\u4E0B\uFF1A</p>
<p>1\u3001\u5728\u547D\u4EE4\u884C\u7EC8\u7AEF\u6216<code v-pre>Git Bash</code>\u4F7F\u7528\u547D\u4EE4 ssh-keygen -t rsa -C &quot;youremail@example.com&quot;\u751F\u6210 SSH Key\uFF0C\u6CE8\u610F\u66FF\u6362\u4E3A\u81EA\u5DF1\u7684\u90AE\u7BB1\uFF0C\u8FDE\u7EED\u4E09\u6B21\u56DE\u8F66\u3002\u751F\u6210\u7684 id_rsa \u662F\u79C1\u94A5\uFF0Cid_rsa.pub \u662F\u516C\u94A5\u3002(\u26A0\uFE0F \u6CE8\u610F\u6B64\u5904\u4E0D\u8981\u8BBE\u7F6E\u5BC6\u7801)\uFF0C\u79D8\u94A5\u751F\u6210\u5728<code v-pre>C:\\Users\\Administrator\\.ssh</code>\u76EE\u5F55\u4E0B\u9762\u3002\u5982\u679C\u51FA\u73B0<code v-pre>'ssh-keygen' \u4E0D\u662F\u5185\u90E8\u6216\u5916\u90E8\u547D\u4EE4\uFF0C\u4E5F\u4E0D\u662F\u53EF\u8FD0\u884C\u7684\u7A0B\u5E8F \u6216\u6279\u5904\u7406\u6587\u4EF6\u3002</code>\u95EE\u9898\u65F6\u3002\u9700\u8981\u8FDB\u5165\u5230 git \u5B89\u88C5\u76EE\u5F55\u4E0B\u9762\u7684<code v-pre>/usr/bin</code>\u76EE\u5F55\u6267\u884C\u547D\u4EE4\u3002</p>
<p>2\u3001\u5728 GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300CSettings -&gt; SSH and GPG keys\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201634013.png" alt="GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762"></p>
<p>3\u3001\u5728 Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300C\u5B89\u5168\u8BBE\u7F6E -&gt; SSH \u516C\u94A5\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201636995.png" alt=" Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762"></p>
<p>4\u3001\u5728 GitHub \u9879\u76EE\u7684\u300C\u200BSettings -&gt; Secrets\u300D\u8DEF\u5F84\u4E0B\u914D\u7F6E\u597D\u547D\u540D\u4E3A GITEE_RSA_PRIVATE_KEY \u5BC6\u94A5\u548C GITEE_PASSWORD \u5BC6\u94A5\u3002GITEE_RSA_PRIVATE_KEY \u5B58\u653E id_rsa \u79C1\u94A5\uFF0CGITEE_PASSWORD \u8D26\u53F7\u767B\u5F55\u7684\u5BC6\u7801\u3002\u5982\u4E0B\u56FE\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201641069.png" alt="setting"></p>
<p>5\u3001\u5728\u7AD9\u70B9\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u5982\u4E0B\u76EE\u5F55<code v-pre>.github/workflows/xxx.yml</code>\uFF0C\u6587\u4EF6\u540D\u4EFB\u610F\u8D77\uFF0CGitHub \u7684 Actions \u4F1A\u5904\u7406.github \u4E0B\u7684\u5DE5\u4F5C\u6D41\u6587\u4EF6\u5939 workflows \u7684\u5DE5\u4F5C\u6D41\u7A0B\u3002</p>
</li>
</ul>
<h2 id="\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199" aria-hidden="true">#</a> \u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199</h2>
<p>\u6BD4\u5982\u5728\u76EE\u5F55<code v-pre>.github/workflows/deploy.yml</code>\u4E2D\u7F16\u5199\u5982\u4E0B\u4EE3\u7801:</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Build and Deploy to github &amp; gitee
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># \u6784\u5EFANode\u73AF\u5883</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Node.js Env
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">'14'</span>
      <span class="token comment"># \u68C0\u51FAmain\u5206\u652F\u4EE3\u7801</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout Code
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2.3.1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">persist-credentials</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token comment"># \u5B89\u88C5\u4F9D\u8D56</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install
      <span class="token comment"># \u9879\u76EE\u6253\u5305</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Project
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run build
      <span class="token comment"># github \u90E8\u7F72\u5206\u652Fgh-pages \u5230github pages</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy dist on gh<span class="token punctuation">-</span>pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@4.2.0
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> dist
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>

      <span class="token comment"># \u540C\u6B65github\u4EE3\u7801\u5230gitee</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sync to Gitee
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> wearerequired/git<span class="token punctuation">-</span>mirror<span class="token punctuation">-</span>action@master
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token comment"># \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_RSA_PRIVATE_KEY</span>
          <span class="token key atrule">SSH_PRIVATE_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_RSA_PRIVATE_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 GitHub \u6E90\u4ED3\u5E93\u5730\u5740</span>
          <span class="token key atrule">source-repo</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>AnyFork/blog<span class="token punctuation">-</span>docs.git
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u76EE\u6807\u4ED3\u5E93\u5730\u5740</span>
          <span class="token key atrule">destination-repo</span><span class="token punctuation">:</span> git@gitee.com<span class="token punctuation">:</span>AnyFork/blog<span class="token punctuation">-</span>docs.git

      <span class="token comment"># \u81EA\u52A8\u90E8\u7F72gitee gh-pages\u5206\u652F</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Gitee Pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> yanglbme/gitee<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>action@main
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u7528\u6237\u540D</span>
          <span class="token key atrule">gitee-username</span><span class="token punctuation">:</span> 874957743@qq.com
          <span class="token comment"># \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_PASSWORD</span>
          <span class="token key atrule">gitee-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u4E25\u683C\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u8BF7\u51C6\u786E\u586B\u5199\uFF0C\u5426\u5219\u4F1A\u51FA\u9519</span>
          <span class="token key atrule">gitee-repo</span><span class="token punctuation">:</span> AnyFork/blog<span class="token punctuation">-</span>docs
          <span class="token comment"># \u8981\u90E8\u7F72\u7684\u5206\u652F\uFF0C\u9ED8\u8BA4\u662F master\uFF0C\u82E5\u662F\u5176\u4ED6\u5206\u652F\uFF0C\u5219\u9700\u8981\u6307\u5B9A\uFF08\u6307\u5B9A\u7684\u5206\u652F\u5FC5\u987B\u5B58\u5728\uFF09</span>
          <span class="token key atrule">branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BCF\u6B21\u63D0\u4EA4\u4EE3\u7801\u540E\uFF0C\u81EA\u52A8\u89E6\u53D1 Aciton \u6267\u884C\u5DE5\u4F5C\u4EFB\u52A1\u3002\u5F53\u7136\u4F60\u5982\u679C\u4E0D\u60F3\u5728 Githup \u4E0A\u90E8\u7F72\u4EE3\u7801\uFF0C\u53EF\u4EE5\u53BB\u6389\u524D\u9762\u51E0\u6B65\uFF0C\u76F4\u63A5\u901A\u8FC7 Action \u540C\u6B65 github \u4EE3\u7801\u5230 gitee\uFF0C\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
<h2 id="\u63D0\u4EA4\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u63D0\u4EA4\u4EE3\u7801" aria-hidden="true">#</a> \u63D0\u4EA4\u4EE3\u7801</h2>
<ul>
<li><strong>\u914D\u7F6E\u7AD9\u70B9</strong>\uFF1A\u4EE3\u7801\u63D0\u4EA4\u65B9\u5F0F<code v-pre>SSH</code>,\u5177\u4F53\u914D\u7F6E\u65B9\u5F0F\u6709\u4E00\u4E0B 2 \u79CD\uFF1A
<ul>
<li>1\u3001\u5C06 GitHub \u4ED3\u5E93\u901A\u8FC7 SSH \u65B9\u5F0F Clone \u5230\u672C\u5730\u3002</li>
<li>2\u3001\u5C06\u672C\u5730\u8FDC\u7A0B\u4ED3\u5E93\u8BBE\u7F6E\u4E3A GitHub \u4ED3\u5E93 SSH \u5730\u5740,\u4F8B\u5982\uFF1A<code v-pre>git remote set-url origin git@github.com:xxx/blog-docs.git</code></li>
</ul>
</li>
<li><strong>\u63A8\u9001\u4EE3\u7801</strong>\uFF1A\u6BCF\u6B21\u6587\u6863\u7F16\u5199\u5B8C\u6BD5\uFF0C\u53EF\u4EE5\u901A\u8FC7<code v-pre>vscode\uFF0Cgit-bash\u6216\u8005\u547D\u4EE4\u884C\u7A97\u53E3</code>\u63A8\u9001\u4EE3\u7801\uFF0C\u89E6\u53D1 Aciton\uFF0C\u5B9E\u73B0 GitHub \u548C Gitee \u81EA\u52A8\u90E8\u7F72 Pages,</li>
</ul>
<h2 id="\u76F8\u5173-aciton-\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173-aciton-\u5730\u5740" aria-hidden="true">#</a> \u76F8\u5173 Aciton \u5730\u5740</h2>
<p><strong>actions/setup-node@v1</strong>\uFF1A<a href="https://github.com/actions/setup-node/" target="_blank" rel="noopener noreferrer">https://github.com/actions/setup-node/<ExternalLinkIcon/></a></p>
<p><strong>actions/checkout@v2.3.1</strong>\uFF1A<a href="https://github.com/actions/checkout/" target="_blank" rel="noopener noreferrer">https://github.com/actions/checkout/<ExternalLinkIcon/></a></p>
<p><strong>JamesIves/github-pages-deploy-action@4.2.0</strong>\uFF1A<a href="https://github.com/JamesIves/github-pages-deploy-action/" target="_blank" rel="noopener noreferrer">https://github.com/JamesIves/github-pages-deploy-action/<ExternalLinkIcon/></a></p>
<p><strong>wearerequired/git-mirror-action@master</strong>\uFF1A<a href="https://github.com/wearerequired/git-mirror-action/" target="_blank" rel="noopener noreferrer">https://github.com/wearerequired/git-mirror-action/<ExternalLinkIcon/></a></p>
<p><strong>yanglbme/gitee-pages-action@main</strong>\uFF1A<a href="https://github.com/yanglbme/gitee-pages-action/" target="_blank" rel="noopener noreferrer">https://github.com/yanglbme/gitee-pages-action/<ExternalLinkIcon/></a></p>
<p>\u81F3\u6B64\uFF0C\u901A\u8FC7 GitHub Actions \u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72 GitHub Pages \u548C Gitee Pages \u6D41\u7A0B\u5C31\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u8BD5\u8BD5\u5427\u3002</p>
`,date:"2022-07-20",deps:[],links:[],pathInferred:"/posts/other/githubPages.html",pathLocale:"/",permalink:null,routeMeta:{title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"},sfcBlocks:[],slug:"githubPages",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/githubPages.md",filePathRelative:"posts/other/githubPages.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/githubPages.html.vue",componentFilePathRelative:"pages/posts/other/githubPages.html.vue",componentFileChunkName:"v-22a1c62c",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/githubPages.html.js",dataFilePathRelative:"pages/posts/other/githubPages.html.js",dataFileChunkName:"v-22a1c62c",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/githubPages.html",htmlFilePathRelative:"posts/other/githubPages.html"},title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"},["/posts/other/githubPages","/posts/other/githubPages.md"]],["v-57fe6fac","/posts/other/hotlinking.html",{_blog:{data:{key:"v-57fe6fac",path:"/posts/other/hotlinking.html",title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",date:"2022-03-01T19:06:46.000Z",description:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",tag:["\u5176\u4ED6"],category:["\u76D7\u94FE"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021637553.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/hotlinking.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:description",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-01T19:06:46.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002</p>
`,headers:[{level:2,title:"\u76D7\u94FE",slug:"\u76D7\u94FE",children:[]},{level:2,title:"\u9632\u76D7\u94FE",slug:"\u9632\u76D7\u94FE",children:[]},{level:2,title:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",slug:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",children:[{level:3,title:"\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E",slug:"\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E",children:[{level:4,title:"1 referer \u5F15\u7528\u65B9\u5F0F",slug:"_1-referer-\u5F15\u7528\u65B9\u5F0F",children:[]},{level:4,title:"2 \u7B7E\u540D\u65B9\u5F0F",slug:"_2-\u7B7E\u540D\u65B9\u5F0F",children:[]}]}]},{level:2,title:"html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",slug:"html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",children:[]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/hotlinking.md",readingTime:{minutes:5.62,words:1687},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/hotlinking.html`},key:"v-57fe6fac",path:"/posts/other/hotlinking.html",title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",date:"2022-03-01T19:06:46.000Z",description:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",tag:["\u5176\u4ED6"],category:["\u76D7\u94FE"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021637553.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/hotlinking.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:description",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-01T19:06:46.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002</p>
`,headers:[{level:2,title:"\u76D7\u94FE",slug:"\u76D7\u94FE",children:[]},{level:2,title:"\u9632\u76D7\u94FE",slug:"\u9632\u76D7\u94FE",children:[]},{level:2,title:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",slug:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",children:[{level:3,title:"\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E",slug:"\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E",children:[{level:4,title:"1 referer \u5F15\u7528\u65B9\u5F0F",slug:"_1-referer-\u5F15\u7528\u65B9\u5F0F",children:[]},{level:4,title:"2 \u7B7E\u540D\u65B9\u5F0F",slug:"_2-\u7B7E\u540D\u65B9\u5F0F",children:[]}]}]},{level:2,title:"html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",slug:"html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",children:[]}],content:`---
title: html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5
date: 2022-03-01 19:06:46
description: html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5
tag:
  - \u5176\u4ED6
category:
  - \u76D7\u94FE
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021637553.jpg
---

&emsp;\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002

<!-- more -->

## \u76D7\u94FE

&emsp;\u76D7\u94FE\u662F\u6307\u670D\u52A1\u63D0\u4F9B\u5546\u81EA\u5DF1\u4E0D\u63D0\u4F9B\u670D\u52A1\u7684\u5185\u5BB9\uFF0C\u901A\u8FC7\u6280\u672F\u624B\u6BB5\u7ED5\u8FC7\u5176\u5B83\u6709\u5229\u76CA\u7684\u6700\u7EC8\u7528\u6237\u754C\u9762(\u5982\u5E7F\u544A)\uFF0C\u76F4\u63A5\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u5411\u6700\u7EC8\u7528\u6237\u63D0\u4F9B\u5176\u5B83\u670D\u52A1\u63D0\u4F9B\u5546\u7684\u670D\u52A1\u5185\u5BB9\uFF0C\u9A97\u53D6\u6700\u7EC8\u7528\u6237\u7684\u6D4F\u89C8\u548C\u70B9\u51FB\u7387\u3002\u53D7\u76CA\u8005\u4E0D\u63D0\u4F9B\u8D44\u6E90\u6216\u63D0\u4F9B\u5F88\u5C11\u7684\u8D44\u6E90\uFF0C\u800C\u771F\u6B63\u7684\u670D\u52A1\u63D0\u4F9B\u5546\u5374\u5F97\u4E0D\u5230\u4EFB\u4F55\u7684\u6536\u76CA\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF1A\u5047\u8BBE B \u7AD9\u70B9\u4F5C\u4E3A\u4E00\u4E2A\u5546\u4E1A\u7F51\u7AD9\uFF0C\u6709\u5F88\u591A\u81EA\u4E3B\u7248\u6743\u7684\u56FE\u7247\uFF0C\u81EA\u8EAB\u5C55\u793A\u7528\u4E8E\u5546\u4E1A\u76EE\u7684\u3002\u800C A \u7AD9\u70B9\uFF0C\u5E0C\u671B\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u9762\u4E5F\u5C55\u793A\u8FD9\u4E9B\u56FE\u7247\uFF0C\u76F4\u63A5\u4F7F\u7528\uFF1A\`<img src="http://b.com/photo.jpg"/>\`\u8FD9\u6837\uFF0C\u5927\u91CF\u7684\u5BA2\u6237\u7AEF\u5728\u8BBF\u95EE A \u7AD9\u70B9\u65F6\uFF0C\u5B9E\u9645\u4E0A\u6D88\u8017\u4E86 B \u7AD9\u70B9\u7684\u6D41\u91CF\uFF0C\u800C A \u7AD9\u70B9\u5374\u4ECE\u4E2D\u8FBE\u6210\u5546\u4E1A\u76EE\u7684\u3002\u4ECE\u800C\u4E0D\u52B3\u800C\u83B7\u3002\u8FD9\u6837\u7684 A \u7AD9\u70B9\u7740\u5B9E\u4EE4 B \u7AD9\u70B9\u4E0D\u5FEB\u7684\u3002

## \u9632\u76D7\u94FE

&emsp;\u4E3A\u4E86\u89E3\u51B3\u76D7\u94FE\u7684\u95EE\u9898\uFF0C\u901A\u8FC7\u4E00\u5B9A\u7684\u65B9\u5F0F\u7981\u6B62\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5B9E\u73B0\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7684\u7B56\u7565\u5C31\u662F\u9632\u76D7\u94FE\u3002\u9632\u76D7\u901A\u8FC7 Referer \u6216\u8005\u7B7E\u540D\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u9875\uFF0C\u5982\u679C\u662F\u6307\u5B9A\u7684\u7F51\u7AD9\u6216\u7B26\u5408\u6761\u4EF6\u7684\u7F51\u7AD9\uFF0C\u5C31\u53EF\u4EE5\u8DDF\u8E2A\u5230\u663E\u793A\u5B83\u7684\u7F51\u9875\u5730\u5740\u3002HTTP \u534F\u8BAE\u548C\u6807\u51C6\u7684\u6D4F\u89C8\u5668\u5BF9\u4E8E\u89E3\u51B3\u76D7\u94FE\u63D0\u4F9B\u4FBF\u5229\uFF0C\u6D4F\u89C8\u5668\u5728\u52A0\u8F7D\u975E\u672C\u7AD9\u7684\u8D44\u6E90\u65F6\uFF0C\u4F1A\u589E\u52A0\u4E00\u4E2A\u5934\u57DF\uFF0C\u5934\u57DF\u540D\u5B57\u56FA\u5B9A\u4E3A\uFF1A\`Referer\`\uFF0C\u800C\u5728\u76F4\u63A5\u7C98\u8D34\u5730\u5740\u5230\u6D4F\u89C8\u5668\u5730\u5740\u680F\u8BBF\u95EE\u65F6\uFF0C\u8BF7\u6C42\u7684\u662F\u672C\u7AD9\u7684\u8BE5 url \u7684\u9875\u9762\uFF0C\u662F\u4E0D\u4F1A\u6709\u8FD9\u4E2A referer \u8FD9\u4E2A http \u5934\u57DF\u7684\u3002\u9488\u5BF9\u975E\u540C\u57DF\u540D\u4E0B\u9762\u7684\u8BF7\u6C42\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5BF9\`Referer\`\u62E6\u622A\u8BBE\u7F6E\uFF0C\u5224\u65AD\u662F\u5426\u5141\u8BB8\u8BBF\u95EE\uFF0C\u5BF9\u4E8E\u4E0D\u5141\u8BB8\u7684\u57DF\u540D\u8BBF\u95EE\u8FDB\u884C\u9632\u76D7\u3002\u5927\u90E8\u5206\u7F51\u7AD9\u73B0\u5728\u901A\u8FC7 Nginx \u914D\u7F6E referer \u5F15\u7528\u7684\u65B9\u5F0F\u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u6709\u7684\u8BBE\u7F6E\u4E86\`valid_referers none blocked \u5339\u914D\u57DF\u540D\`\u8FD9\u79CD\u65B9\u5F0F\u53EA\u662F\u9632\u6B62\u7B2C\u4E09\u65B9\u76D7\u7528\u56FE\u7247\uFF0C\u4F46\u53EF\u4EE5\u901A\u8FC7\u6D4F\u89C8\u5668\u6253\u5F00\uFF0C\u53F3\u952E\u4E0B\u8F7D;\u6709\u7684\u8BBE\u7F6E\u4E86\`valid_referers \u5339\u914D\u57DF\u540D;\`\u8FD9\u79CD\u65B9\u5F0F\u5C5E\u4E8E\`\u5F3A\`\u9632\u76D7\u94FE,\u9664\u4E86\u767D\u540D\u5355\u4E2D\u7684\u57DF\u540D\uFF0C\u7981\u6B62\u4EFB\u4F55\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5305\u62EC\u6D4F\u89C8\u5668\u76F4\u63A5\u8BBF\u95EE\u548C\u53F3\u952E\u4E0B\u8F7D\u3002

## \u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE

:::tip
\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7B56\u7565\u5F88\u591A\uFF0C\u4F46\u5927\u591A\u6570\u7F51\u7AD9\u901A\u8FC7 nginx \u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u7981\u6B62\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u3002
:::

### **\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E**

#### **1 referer \u5F15\u7528\u65B9\u5F0F**

&emsp;\u901A\u8FC7 Referer\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u7F51\u9875\u662F\u5426\u5408\u6CD5\uFF0C\u53EA\u6709\u5728\u8BBE\u5B9A\u7684\u5141\u8BB8\u8303\u56F4\u5185\u7684 referer \u624D\u80FD\u8BBF\u95EE\u6307\u5B9A\u7684\u8D44\u6E90\uFF0C\u4ECE\u800C\u5B9E\u73B0\u4E86\u9632\u76D7\u94FE\u7684\u76EE\u7684\u3002
\u5DE5\u4F5C\u6A21\u5757\uFF1A\`ngx_http_referer_module\`\u3002\u4F5C\u7528\u53D8\u91CF\uFF1A\`$invalid_referer\`\u5168\u5C40\u53D8\u91CF\u3002\u914D\u7F6E\u57DF\uFF1A\`server, location\`

\`\`\`bash
# \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B
server {
   listen 80;
   server_name www.imcati.com;
   root /usr/share/nginx/html;
   location ~*\\.(gif|jpg|jpeg|png|bmp|swf)$ {
        valid_referers none blocked www.imcati.com;
        if ($invalid_referer) {
\u3000\u3000\u3000\u3000\u3000\u3000  #rewrite ^/ http://www.youdomain.com/404.jpg;
            return 403;
        }
   }
}

# \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55
server {
   listen 80;
   server_name www.imcati.com;
   root /usr/share/nginx/html;
   location /img/ {
    root /data/img/;
    valid_referers none blocked www.imcati.com;
      if ($invalid_referer) {
          rewrite  ^/  http://www.765h.com/images/error.gif;
          #return   403;
      }
   }
}
\`\`\`

1\u3001valid_referers: \u6307\u5B9A\u8D44\u6E90\u8BBF\u95EE\u662F\u901A\u8FC7\u4EE5\u4E0B\u51E0\u79CD\u65B9\u5F0F\u4E3A\u5408\u6CD5\uFF0C\u5373\u767D\u540D\u5355\u3002  
2\u3001none\uFF1A\u5141\u8BB8\u7F3A\u5931\u7684\u5934\u90E8\u8BBF\u95EE\u3002\u53EF\u4EE5\u628A none \u53BB\u6389\uFF0C\u9632\u6B62\u522B\u4EBA\u901A\u8FC7\u53F3\u952E\u53E6\u5B58\u56FE\u7247\u5730\u5740  
3\u3001blocked\uFF1A\u4EE3\u8868\u6709 referer \u4F46\u662F\u88AB\u9632\u706B\u5899\u6216\u8005\u662F\u4EE3\u7406\u7ED9\u53BB\u9664\u4E86\u3002  
4\u3001server_names\uFF1A\u82E5 referer \u7AD9\u70B9\u57DF\u540D\u4E0E server_name \u4E2D\u672C\u673A\u914D\u7684\u57DF\u540D\u4E00\u6837\u5141\u8BB8\u8BBF\u95EE\u3002
5\u3001\u9996\u5148\u5F53\u6211\u8F93\u5165\u6211\u8981\u6253\u5F00\u7684\u7F51\u5740\u7684\u65F6\u5019\uFF0C\u56E0\u4E3A\u662F\u76F4\u63A5\u8F93\u5165\u7684\u6CA1\u6709 referer \u6240\u4EE5\u5339\u914D\u4E86 valid_referers \u540E\u9762\u7684 none \u6216\u8005\u662F blocked \u6240\u4EE5 invalid_referer \u503C\u4E3A 0 \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C.
\u5F53\u6211\u662F\u4ECE\u8FD9\u4E2A\u7F51\u7AD9\u91CC\u9762\u7684\u94FE\u63A5\u8DF3\u5230\u8BE5\u7F51\u7AD9\u9996\u9875\u7684\u65F6\u5019 \u56E0\u4E3A referer \u7684\u503C\u662F\u80AF\u5B9A\u5305\u542B srever_names \u6240\u4EE5\u5339\u914D\u4E86 server_names \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C\u3002\u5F53\u6211\u4ECE\u641C\u7D20\u5F15\u64CE\u8FDB\u53BB\u7684\u65F6\u5019\u56E0\u4E3A referer \u5B57\u6BB5\u7C7B\u4F3C\u4E8Ewww.google.com.hk/search\u5F00\u59CB\u8FDB\u884C\u5339\u914D \u53D1\u73B0\u6CA1\u6709\u4E00\u4E2A\u5339\u914D\uFF0C\u5219\u6B64\u65F6\u4F1A\u8BBE\u7F6E invalid_referer \u503C\u4E3A 1 if \u8BED\u53E5\u6210\u529F\u6267\u884C\uFF0C\u8FDB\u884C\u4E86\u8DF3\u8F6C,\u8FBE\u5230\u529F\u80FD\u3002\u5982\u679C\u628A\u8FD9\u4E24\u4E2A\uFF08none,blocked\uFF09\u53BB\u6389\u5C31\u53EF\u4EE5\u771F\u6B63\u7684\u5B9E\u73B0\u9632\u76D7\u8FDE\u4E86\uFF01\u56E0\u4E3A\u53EA\u6709\u5339\u914D\u5230 server_name \u7684\u65F6\u5019\uFF0C\u624D\u4E0D\u4F1A\u8FDB\u884C\u8DF3\u8F6C\u3002

#### **2 \u7B7E\u540D\u65B9\u5F0F**

&emsp;\u5F53\u7136\u522B\u4EBA\u4E5F\u53EF\u4EE5\u901A\u8FC7\u7BE1\u6539\u4F2A\u9020 refer \u6765\u8FDB\u884C\u8BBF\u95EE\uFF0C\u5BFC\u81F4 referer \u5F15\u7528\u65B9\u5F0F\u65E0\u6CD5\u5F7B\u5E95\u89E3\u51B3\u9632\u76D7\u95EE\u9898\uFF0C\u7B7E\u540D\u65B9\u5F0F\u53EF\u4EE5\u5F7B\u5E95\u89E3\u51B3\u95EE\u9898\u3002\u4F7F\u7528\u7B7E\u540D\u65B9\u5F0F\u9700\u8981\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757 \`HttpAccessKeyModule\`\u3002
\u7136\u540E\u6309\u7167\u5982\u4E0B\u914D\u7F6E\u5373\u53EF\uFF1A

\`\`\`bash
# \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B
server {
    listen       80;
    server_name  www.imcati.com;
    root /usr/share/nginx/html;
    location ~*\\.(gif|jpg|jpeg|png|bmp|swf)$ {
        accesskey on;
        accesskey_hashmethod md5;
        accesskey_arg "key";
        accesskey_signature "mypass$remote_addr";
    }
}
# \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55
server {
    listen       80;
    server_name  www.imcati.com;
    root /usr/share/nginx/html;
    location /img/ {
        root /data/img/;
        accesskey on;
        accesskey_hashmethod md5;
        accesskey_arg "key";
        accesskey_signature "mypass$remote_addr";
    }
}
\`\`\`

1\u3001accesskey on | off: \u6A21\u5757\u5F00\u5173  
2\u3001accesskey_hashmethod md5|sha\u20141: \u7B7E\u540D\u52A0\u5BC6\u65B9\u5F0F  
3\u3001accesskey_arg: GET \u53C2\u6570\u540D\u79F0  
4\u3001accesskey_signature\uFF1A\u4E3A\u52A0\u5BC6\u503C\uFF0C\u6B64\u5904\u4E3A mypass \u548C\u8BBF\u95EE IP \u6784\u6210\u7684\u5B57\u7B26\u4E32\u3002  
5\u3001$sign = md5('mypass' . $_SERVICE['REMOTE_ADDR']);  
6\u3001\u901A\u8FC7\`img src=/test.png?key=<?=$sign?>\`\u65B9\u5F0F\u8BBF\u95EE\u56FE\u7247\u3002

## html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5

&emsp;\u5982\u679C\u91C7\u7528 referer \u5E94\u7528\u65B9\u5F0F\u5904\u7406\u9632\u76D7\u94FE\u95EE\u9898\uFF0C\u6211\u4EEC\u60F3\u8981\u76D7\u7528\u5176\u4ED6\u7F51\u7AD9\u7684\u8D44\u6E90\uFF0C\u53EF\u4EE5\u5728 html \u901A\u8FC7\u4EE5\u4E0B\u8BBE\u7F6E\u7ED5\u5F00\u9632\u76D7\u94FE\u3002\u5728\u6807\u7B7E\u91CC\u52A0 meta\u3002\u4F8B\u5982\uFF1A\`<meta name="referrer" content="never">\`\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u51FA\u4E8E\u4E00\u4E9B\u539F\u56E0\uFF0C\u7F51\u7AD9\u60F3\u8981\u63A7\u5236\u9875\u9762\u53D1\u9001\u7ED9 server \u7684 referrer \u4FE1\u606F\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8FD9 referer metadata \u53C2\u6570\u3002
referer \u7684 metedata \u5C5E\u6027\u53EF\u8BBE\u7F6E content \u5C5E\u6027\u503C\u4E3A\u4EE5\u4E0B\u96C6\u5408\uFF1A\`never\`,\`always\`,\`origin\`,\`default\`

- \u5982\u679C referer-policy \u7684\u503C\u4E3A never\uFF1A\u5220\u9664 http head \u4E2D\u7684 referer\uFF1B\u503C\u9700\u8981\u662F never\uFF0C\u6D4F\u89C8\u5668\u90FD\u53EF\u4EE5\u517C\u5BB9\uFF0Cno-referrer \u8FD9\u79CD\u6709\u4E9B\u6D4F\u89C8\u5668\u4E0D\u517C\u5BB9
- \u5982\u679C referer-policy \u7684\u503C\u4E3A default\uFF1A\u5982\u679C\u5F53\u524D\u9875\u9762\u4F7F\u7528\u7684\u662F https \u534F\u8BAE\uFF0C\u800C\u6B63\u8981\u52A0\u8F7D\u8D44\u6E90\u4F7F\u7528\u7684\u662F\u666E\u901A\u7684 http \u534F\u8BAE\uFF0C\u5219\u5C06 http header \u4E2D\u989D referer \u7F6E\u4E3A\u7A7A\uFF1B
- \u5982\u679C referer-policy \u7684\u503C origin\uFF1A\u53EA\u53D1\u9001 origin \u90E8\u5206\uFF1B
- \u5982\u679C referer-policy \u7684\u503C\u4E3A always\uFF1A\u4E0D\u6539\u53D8 http header \u4E2D\u7684 referer \u7684\u503C
`,contentRendered:`<p>\u2003\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002</p>
<!-- more -->
<h2 id="\u76D7\u94FE" tabindex="-1"><a class="header-anchor" href="#\u76D7\u94FE" aria-hidden="true">#</a> \u76D7\u94FE</h2>
<p>\u2003\u76D7\u94FE\u662F\u6307\u670D\u52A1\u63D0\u4F9B\u5546\u81EA\u5DF1\u4E0D\u63D0\u4F9B\u670D\u52A1\u7684\u5185\u5BB9\uFF0C\u901A\u8FC7\u6280\u672F\u624B\u6BB5\u7ED5\u8FC7\u5176\u5B83\u6709\u5229\u76CA\u7684\u6700\u7EC8\u7528\u6237\u754C\u9762(\u5982\u5E7F\u544A)\uFF0C\u76F4\u63A5\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u5411\u6700\u7EC8\u7528\u6237\u63D0\u4F9B\u5176\u5B83\u670D\u52A1\u63D0\u4F9B\u5546\u7684\u670D\u52A1\u5185\u5BB9\uFF0C\u9A97\u53D6\u6700\u7EC8\u7528\u6237\u7684\u6D4F\u89C8\u548C\u70B9\u51FB\u7387\u3002\u53D7\u76CA\u8005\u4E0D\u63D0\u4F9B\u8D44\u6E90\u6216\u63D0\u4F9B\u5F88\u5C11\u7684\u8D44\u6E90\uFF0C\u800C\u771F\u6B63\u7684\u670D\u52A1\u63D0\u4F9B\u5546\u5374\u5F97\u4E0D\u5230\u4EFB\u4F55\u7684\u6536\u76CA\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF1A\u5047\u8BBE B \u7AD9\u70B9\u4F5C\u4E3A\u4E00\u4E2A\u5546\u4E1A\u7F51\u7AD9\uFF0C\u6709\u5F88\u591A\u81EA\u4E3B\u7248\u6743\u7684\u56FE\u7247\uFF0C\u81EA\u8EAB\u5C55\u793A\u7528\u4E8E\u5546\u4E1A\u76EE\u7684\u3002\u800C A \u7AD9\u70B9\uFF0C\u5E0C\u671B\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u9762\u4E5F\u5C55\u793A\u8FD9\u4E9B\u56FE\u7247\uFF0C\u76F4\u63A5\u4F7F\u7528\uFF1A<code v-pre>&lt;img src=&quot;http://b.com/photo.jpg&quot;/&gt;</code>\u8FD9\u6837\uFF0C\u5927\u91CF\u7684\u5BA2\u6237\u7AEF\u5728\u8BBF\u95EE A \u7AD9\u70B9\u65F6\uFF0C\u5B9E\u9645\u4E0A\u6D88\u8017\u4E86 B \u7AD9\u70B9\u7684\u6D41\u91CF\uFF0C\u800C A \u7AD9\u70B9\u5374\u4ECE\u4E2D\u8FBE\u6210\u5546\u4E1A\u76EE\u7684\u3002\u4ECE\u800C\u4E0D\u52B3\u800C\u83B7\u3002\u8FD9\u6837\u7684 A \u7AD9\u70B9\u7740\u5B9E\u4EE4 B \u7AD9\u70B9\u4E0D\u5FEB\u7684\u3002</p>
<h2 id="\u9632\u76D7\u94FE" tabindex="-1"><a class="header-anchor" href="#\u9632\u76D7\u94FE" aria-hidden="true">#</a> \u9632\u76D7\u94FE</h2>
<p>\u2003\u4E3A\u4E86\u89E3\u51B3\u76D7\u94FE\u7684\u95EE\u9898\uFF0C\u901A\u8FC7\u4E00\u5B9A\u7684\u65B9\u5F0F\u7981\u6B62\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5B9E\u73B0\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7684\u7B56\u7565\u5C31\u662F\u9632\u76D7\u94FE\u3002\u9632\u76D7\u901A\u8FC7 Referer \u6216\u8005\u7B7E\u540D\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u9875\uFF0C\u5982\u679C\u662F\u6307\u5B9A\u7684\u7F51\u7AD9\u6216\u7B26\u5408\u6761\u4EF6\u7684\u7F51\u7AD9\uFF0C\u5C31\u53EF\u4EE5\u8DDF\u8E2A\u5230\u663E\u793A\u5B83\u7684\u7F51\u9875\u5730\u5740\u3002HTTP \u534F\u8BAE\u548C\u6807\u51C6\u7684\u6D4F\u89C8\u5668\u5BF9\u4E8E\u89E3\u51B3\u76D7\u94FE\u63D0\u4F9B\u4FBF\u5229\uFF0C\u6D4F\u89C8\u5668\u5728\u52A0\u8F7D\u975E\u672C\u7AD9\u7684\u8D44\u6E90\u65F6\uFF0C\u4F1A\u589E\u52A0\u4E00\u4E2A\u5934\u57DF\uFF0C\u5934\u57DF\u540D\u5B57\u56FA\u5B9A\u4E3A\uFF1A<code v-pre>Referer</code>\uFF0C\u800C\u5728\u76F4\u63A5\u7C98\u8D34\u5730\u5740\u5230\u6D4F\u89C8\u5668\u5730\u5740\u680F\u8BBF\u95EE\u65F6\uFF0C\u8BF7\u6C42\u7684\u662F\u672C\u7AD9\u7684\u8BE5 url \u7684\u9875\u9762\uFF0C\u662F\u4E0D\u4F1A\u6709\u8FD9\u4E2A referer \u8FD9\u4E2A http \u5934\u57DF\u7684\u3002\u9488\u5BF9\u975E\u540C\u57DF\u540D\u4E0B\u9762\u7684\u8BF7\u6C42\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5BF9<code v-pre>Referer</code>\u62E6\u622A\u8BBE\u7F6E\uFF0C\u5224\u65AD\u662F\u5426\u5141\u8BB8\u8BBF\u95EE\uFF0C\u5BF9\u4E8E\u4E0D\u5141\u8BB8\u7684\u57DF\u540D\u8BBF\u95EE\u8FDB\u884C\u9632\u76D7\u3002\u5927\u90E8\u5206\u7F51\u7AD9\u73B0\u5728\u901A\u8FC7 Nginx \u914D\u7F6E referer \u5F15\u7528\u7684\u65B9\u5F0F\u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u6709\u7684\u8BBE\u7F6E\u4E86<code v-pre>valid_referers none blocked \u5339\u914D\u57DF\u540D</code>\u8FD9\u79CD\u65B9\u5F0F\u53EA\u662F\u9632\u6B62\u7B2C\u4E09\u65B9\u76D7\u7528\u56FE\u7247\uFF0C\u4F46\u53EF\u4EE5\u901A\u8FC7\u6D4F\u89C8\u5668\u6253\u5F00\uFF0C\u53F3\u952E\u4E0B\u8F7D;\u6709\u7684\u8BBE\u7F6E\u4E86<code v-pre>valid_referers \u5339\u914D\u57DF\u540D;</code>\u8FD9\u79CD\u65B9\u5F0F\u5C5E\u4E8E<code v-pre>\u5F3A</code>\u9632\u76D7\u94FE,\u9664\u4E86\u767D\u540D\u5355\u4E2D\u7684\u57DF\u540D\uFF0C\u7981\u6B62\u4EFB\u4F55\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5305\u62EC\u6D4F\u89C8\u5668\u76F4\u63A5\u8BBF\u95EE\u548C\u53F3\u952E\u4E0B\u8F7D\u3002</p>
<h2 id="\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE" aria-hidden="true">#</a> \u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE</h2>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7B56\u7565\u5F88\u591A\uFF0C\u4F46\u5927\u591A\u6570\u7F51\u7AD9\u901A\u8FC7 nginx \u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u7981\u6B62\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u3002</p>
</div>
<h3 id="\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E" aria-hidden="true">#</a> <strong>\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E</strong></h3>
<h4 id="_1-referer-\u5F15\u7528\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-referer-\u5F15\u7528\u65B9\u5F0F" aria-hidden="true">#</a> <strong>1 referer \u5F15\u7528\u65B9\u5F0F</strong></h4>
<p>\u2003\u901A\u8FC7 Referer\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u7F51\u9875\u662F\u5426\u5408\u6CD5\uFF0C\u53EA\u6709\u5728\u8BBE\u5B9A\u7684\u5141\u8BB8\u8303\u56F4\u5185\u7684 referer \u624D\u80FD\u8BBF\u95EE\u6307\u5B9A\u7684\u8D44\u6E90\uFF0C\u4ECE\u800C\u5B9E\u73B0\u4E86\u9632\u76D7\u94FE\u7684\u76EE\u7684\u3002
\u5DE5\u4F5C\u6A21\u5757\uFF1A<code v-pre>ngx_http_referer_module</code>\u3002\u4F5C\u7528\u53D8\u91CF\uFF1A<code v-pre>$invalid_referer</code>\u5168\u5C40\u53D8\u91CF\u3002\u914D\u7F6E\u57DF\uFF1A<code v-pre>server, location</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B</span>
server <span class="token punctuation">{</span>
   listen <span class="token number">80</span><span class="token punctuation">;</span>
   server_name www.imcati.com<span class="token punctuation">;</span>
   root /usr/share/nginx/html<span class="token punctuation">;</span>
   location ~*<span class="token punctuation">\\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        valid_referers none blocked www.imcati.com<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$invalid_referer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
\u3000\u3000\u3000\u3000\u3000\u3000  <span class="token comment">#rewrite ^/ http://www.youdomain.com/404.jpg;</span>
            <span class="token builtin class-name">return</span> <span class="token number">403</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55</span>
server <span class="token punctuation">{</span>
   listen <span class="token number">80</span><span class="token punctuation">;</span>
   server_name www.imcati.com<span class="token punctuation">;</span>
   root /usr/share/nginx/html<span class="token punctuation">;</span>
   location /img/ <span class="token punctuation">{</span>
    root /data/img/<span class="token punctuation">;</span>
    valid_referers none blocked www.imcati.com<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$invalid_referer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          rewrite  ^/  http://www.765h.com/images/error.gif<span class="token punctuation">;</span>
          <span class="token comment">#return   403;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1\u3001valid_referers: \u6307\u5B9A\u8D44\u6E90\u8BBF\u95EE\u662F\u901A\u8FC7\u4EE5\u4E0B\u51E0\u79CD\u65B9\u5F0F\u4E3A\u5408\u6CD5\uFF0C\u5373\u767D\u540D\u5355\u3002<br>
2\u3001none\uFF1A\u5141\u8BB8\u7F3A\u5931\u7684\u5934\u90E8\u8BBF\u95EE\u3002\u53EF\u4EE5\u628A none \u53BB\u6389\uFF0C\u9632\u6B62\u522B\u4EBA\u901A\u8FC7\u53F3\u952E\u53E6\u5B58\u56FE\u7247\u5730\u5740<br>
3\u3001blocked\uFF1A\u4EE3\u8868\u6709 referer \u4F46\u662F\u88AB\u9632\u706B\u5899\u6216\u8005\u662F\u4EE3\u7406\u7ED9\u53BB\u9664\u4E86\u3002<br>
4\u3001server_names\uFF1A\u82E5 referer \u7AD9\u70B9\u57DF\u540D\u4E0E server_name \u4E2D\u672C\u673A\u914D\u7684\u57DF\u540D\u4E00\u6837\u5141\u8BB8\u8BBF\u95EE\u3002
5\u3001\u9996\u5148\u5F53\u6211\u8F93\u5165\u6211\u8981\u6253\u5F00\u7684\u7F51\u5740\u7684\u65F6\u5019\uFF0C\u56E0\u4E3A\u662F\u76F4\u63A5\u8F93\u5165\u7684\u6CA1\u6709 referer \u6240\u4EE5\u5339\u914D\u4E86 valid_referers \u540E\u9762\u7684 none \u6216\u8005\u662F blocked \u6240\u4EE5 invalid_referer \u503C\u4E3A 0 \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C.
\u5F53\u6211\u662F\u4ECE\u8FD9\u4E2A\u7F51\u7AD9\u91CC\u9762\u7684\u94FE\u63A5\u8DF3\u5230\u8BE5\u7F51\u7AD9\u9996\u9875\u7684\u65F6\u5019 \u56E0\u4E3A referer \u7684\u503C\u662F\u80AF\u5B9A\u5305\u542B srever_names \u6240\u4EE5\u5339\u914D\u4E86 server_names \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C\u3002\u5F53\u6211\u4ECE\u641C\u7D20\u5F15\u64CE\u8FDB\u53BB\u7684\u65F6\u5019\u56E0\u4E3A referer \u5B57\u6BB5\u7C7B\u4F3C\u4E8Ewww.google.com.hk/search\u5F00\u59CB\u8FDB\u884C\u5339\u914D \u53D1\u73B0\u6CA1\u6709\u4E00\u4E2A\u5339\u914D\uFF0C\u5219\u6B64\u65F6\u4F1A\u8BBE\u7F6E invalid_referer \u503C\u4E3A 1 if \u8BED\u53E5\u6210\u529F\u6267\u884C\uFF0C\u8FDB\u884C\u4E86\u8DF3\u8F6C,\u8FBE\u5230\u529F\u80FD\u3002\u5982\u679C\u628A\u8FD9\u4E24\u4E2A\uFF08none,blocked\uFF09\u53BB\u6389\u5C31\u53EF\u4EE5\u771F\u6B63\u7684\u5B9E\u73B0\u9632\u76D7\u8FDE\u4E86\uFF01\u56E0\u4E3A\u53EA\u6709\u5339\u914D\u5230 server_name \u7684\u65F6\u5019\uFF0C\u624D\u4E0D\u4F1A\u8FDB\u884C\u8DF3\u8F6C\u3002</p>
<h4 id="_2-\u7B7E\u540D\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-\u7B7E\u540D\u65B9\u5F0F" aria-hidden="true">#</a> <strong>2 \u7B7E\u540D\u65B9\u5F0F</strong></h4>
<p>\u2003\u5F53\u7136\u522B\u4EBA\u4E5F\u53EF\u4EE5\u901A\u8FC7\u7BE1\u6539\u4F2A\u9020 refer \u6765\u8FDB\u884C\u8BBF\u95EE\uFF0C\u5BFC\u81F4 referer \u5F15\u7528\u65B9\u5F0F\u65E0\u6CD5\u5F7B\u5E95\u89E3\u51B3\u9632\u76D7\u95EE\u9898\uFF0C\u7B7E\u540D\u65B9\u5F0F\u53EF\u4EE5\u5F7B\u5E95\u89E3\u51B3\u95EE\u9898\u3002\u4F7F\u7528\u7B7E\u540D\u65B9\u5F0F\u9700\u8981\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757 <code v-pre>HttpAccessKeyModule</code>\u3002
\u7136\u540E\u6309\u7167\u5982\u4E0B\u914D\u7F6E\u5373\u53EF\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B</span>
server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  www.imcati.com<span class="token punctuation">;</span>
    root /usr/share/nginx/html<span class="token punctuation">;</span>
    location ~*<span class="token punctuation">\\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        accesskey on<span class="token punctuation">;</span>
        accesskey_hashmethod md5<span class="token punctuation">;</span>
        accesskey_arg <span class="token string">"key"</span><span class="token punctuation">;</span>
        accesskey_signature <span class="token string">"mypass<span class="token variable">$remote_addr</span>"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55</span>
server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  www.imcati.com<span class="token punctuation">;</span>
    root /usr/share/nginx/html<span class="token punctuation">;</span>
    location /img/ <span class="token punctuation">{</span>
        root /data/img/<span class="token punctuation">;</span>
        accesskey on<span class="token punctuation">;</span>
        accesskey_hashmethod md5<span class="token punctuation">;</span>
        accesskey_arg <span class="token string">"key"</span><span class="token punctuation">;</span>
        accesskey_signature <span class="token string">"mypass<span class="token variable">$remote_addr</span>"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1\u3001accesskey on | off: \u6A21\u5757\u5F00\u5173<br>
2\u3001accesskey_hashmethod md5|sha\u20141: \u7B7E\u540D\u52A0\u5BC6\u65B9\u5F0F<br>
3\u3001accesskey_arg: GET \u53C2\u6570\u540D\u79F0<br>
4\u3001accesskey_signature\uFF1A\u4E3A\u52A0\u5BC6\u503C\uFF0C\u6B64\u5904\u4E3A mypass \u548C\u8BBF\u95EE IP \u6784\u6210\u7684\u5B57\u7B26\u4E32\u3002<br>
5\u3001$sign = md5('mypass' . $_SERVICE['REMOTE_ADDR']);<br>
6\u3001\u901A\u8FC7<code v-pre>img src=/test.png?key=&lt;?=$sign?&gt;</code>\u65B9\u5F0F\u8BBF\u95EE\u56FE\u7247\u3002</p>
<h2 id="html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5" aria-hidden="true">#</a> html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5</h2>
<p>\u2003\u5982\u679C\u91C7\u7528 referer \u5E94\u7528\u65B9\u5F0F\u5904\u7406\u9632\u76D7\u94FE\u95EE\u9898\uFF0C\u6211\u4EEC\u60F3\u8981\u76D7\u7528\u5176\u4ED6\u7F51\u7AD9\u7684\u8D44\u6E90\uFF0C\u53EF\u4EE5\u5728 html \u901A\u8FC7\u4EE5\u4E0B\u8BBE\u7F6E\u7ED5\u5F00\u9632\u76D7\u94FE\u3002\u5728\u6807\u7B7E\u91CC\u52A0 meta\u3002\u4F8B\u5982\uFF1A<code v-pre>&lt;meta name=&quot;referrer&quot; content=&quot;never&quot;&gt;</code>\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u51FA\u4E8E\u4E00\u4E9B\u539F\u56E0\uFF0C\u7F51\u7AD9\u60F3\u8981\u63A7\u5236\u9875\u9762\u53D1\u9001\u7ED9 server \u7684 referrer \u4FE1\u606F\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8FD9 referer metadata \u53C2\u6570\u3002
referer \u7684 metedata \u5C5E\u6027\u53EF\u8BBE\u7F6E content \u5C5E\u6027\u503C\u4E3A\u4EE5\u4E0B\u96C6\u5408\uFF1A<code v-pre>never</code>,<code v-pre>always</code>,<code v-pre>origin</code>,<code v-pre>default</code></p>
<ul>
<li>\u5982\u679C referer-policy \u7684\u503C\u4E3A never\uFF1A\u5220\u9664 http head \u4E2D\u7684 referer\uFF1B\u503C\u9700\u8981\u662F never\uFF0C\u6D4F\u89C8\u5668\u90FD\u53EF\u4EE5\u517C\u5BB9\uFF0Cno-referrer \u8FD9\u79CD\u6709\u4E9B\u6D4F\u89C8\u5668\u4E0D\u517C\u5BB9</li>
<li>\u5982\u679C referer-policy \u7684\u503C\u4E3A default\uFF1A\u5982\u679C\u5F53\u524D\u9875\u9762\u4F7F\u7528\u7684\u662F https \u534F\u8BAE\uFF0C\u800C\u6B63\u8981\u52A0\u8F7D\u8D44\u6E90\u4F7F\u7528\u7684\u662F\u666E\u901A\u7684 http \u534F\u8BAE\uFF0C\u5219\u5C06 http header \u4E2D\u989D referer \u7F6E\u4E3A\u7A7A\uFF1B</li>
<li>\u5982\u679C referer-policy \u7684\u503C origin\uFF1A\u53EA\u53D1\u9001 origin \u90E8\u5206\uFF1B</li>
<li>\u5982\u679C referer-policy \u7684\u503C\u4E3A always\uFF1A\u4E0D\u6539\u53D8 http header \u4E2D\u7684 referer \u7684\u503C</li>
</ul>
`,date:"2022-03-01",deps:[],links:[],pathInferred:"/posts/other/hotlinking.html",pathLocale:"/",permalink:null,routeMeta:{title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"},sfcBlocks:[],slug:"hotlinking",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/hotlinking.md",filePathRelative:"posts/other/hotlinking.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/hotlinking.html.vue",componentFilePathRelative:"pages/posts/other/hotlinking.html.vue",componentFileChunkName:"v-57fe6fac",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/hotlinking.html.js",dataFilePathRelative:"pages/posts/other/hotlinking.html.js",dataFileChunkName:"v-57fe6fac",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/hotlinking.html",htmlFilePathRelative:"posts/other/hotlinking.html"},title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"},["/posts/other/hotlinking","/posts/other/hotlinking.md"]],["v-3ba2686a","/posts/other/imageHost.html",{_blog:{data:{key:"v-3ba2686a",path:"/posts/other/imageHost.html",title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",lang:"zh-CN",frontmatter:{title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",date:"2022-03-02T16:42:35.000Z",description:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",tag:["\u5176\u4ED6"],category:["\u56FE\u5E8A"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021636834.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/imageHost.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:description",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-02T16:42:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
`,headers:[{level:2,title:"\u4EC0\u4E48\u662F\u56FE\u5E8A",slug:"\u4EC0\u4E48\u662F\u56FE\u5E8A",children:[]},{level:2,title:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",slug:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",children:[]},{level:2,title:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",slug:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",children:[]},{level:2,title:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",slug:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",children:[]},{level:2,title:"PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",slug:"picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",children:[]},{level:2,title:"PicGO \u914D\u7F6E github \u56FE\u5E8A",slug:"picgo-\u914D\u7F6E-github-\u56FE\u5E8A",children:[]},{level:2,title:"\u514D\u8D39\u7684 CDN \u52A0\u901F",slug:"\u514D\u8D39\u7684-cdn-\u52A0\u901F",children:[{level:3,title:"jsdelivr",slug:"jsdelivr",children:[]},{level:3,title:"staticaly",slug:"staticaly",children:[]},{level:3,title:"githack",slug:"githack",children:[]}]},{level:2,title:"\u5176\u4ED6\u56FE\u5E8A",slug:"\u5176\u4ED6\u56FE\u5E8A",children:[{level:3,title:"\u5BA2\u6765\u56FE\u5E8A",slug:"\u5BA2\u6765\u56FE\u5E8A",children:[]}]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/imageHost.md",readingTime:{minutes:7.46,words:2237},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/imageHost.html`},key:"v-3ba2686a",path:"/posts/other/imageHost.html",title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",lang:"zh-CN",frontmatter:{title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",date:"2022-03-02T16:42:35.000Z",description:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",tag:["\u5176\u4ED6"],category:["\u56FE\u5E8A"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021636834.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/imageHost.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:description",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-02T16:42:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
`,headers:[{level:2,title:"\u4EC0\u4E48\u662F\u56FE\u5E8A",slug:"\u4EC0\u4E48\u662F\u56FE\u5E8A",children:[]},{level:2,title:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",slug:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",children:[]},{level:2,title:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",slug:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",children:[]},{level:2,title:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",slug:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",children:[]},{level:2,title:"PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",slug:"picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",children:[]},{level:2,title:"PicGO \u914D\u7F6E github \u56FE\u5E8A",slug:"picgo-\u914D\u7F6E-github-\u56FE\u5E8A",children:[]},{level:2,title:"\u514D\u8D39\u7684 CDN \u52A0\u901F",slug:"\u514D\u8D39\u7684-cdn-\u52A0\u901F",children:[{level:3,title:"jsdelivr",slug:"jsdelivr",children:[]},{level:3,title:"staticaly",slug:"staticaly",children:[]},{level:3,title:"githack",slug:"githack",children:[]}]},{level:2,title:"\u5176\u4ED6\u56FE\u5E8A",slug:"\u5176\u4ED6\u56FE\u5E8A",children:[{level:3,title:"\u5BA2\u6765\u56FE\u5E8A",slug:"\u5BA2\u6765\u56FE\u5E8A",children:[]}]}],content:`---
title: \u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A
date: 2022-03-02 16:42:35
description: \u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A
tag:
  - \u5176\u4ED6
category:
  - \u56FE\u5E8A
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021636834.jpg
---

&emsp;\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002

<!-- more -->

::: info
1\u3001github \u56FE\u5E8A\u539F\u7406\uFF1A\u901A\u8FC7 github Api \u548C\u4E2A\u4EBA\u6388\u6743 Token,\u901A\u8FC7\u7B2C\u4E09\u65B9\u5DE5\u5177\u5C06\u672C\u5730\u56FE\u7247\u4E0A\u4F20\u5230\u4E2A\u4EBA github \u4ED3\u5E93\u8FDB\u884C\u56FE\u7247\u5B58\u50A8\uFF0C\u7136\u540E\u751F\u6210\u4E00\u4E2A\u901A\u8FC7 CND \u52A0\u901F\u7684\u94FE\u63A5\uFF0C\u63D0\u4F9B\u7528\u6237\u8BBF\u95EE\u3002 **\u6CE8\u610F\uFF1A** github \u4E2A\u4EBA\u6388\u6743\u4EE4\u724C Token \u4E00\u65E6\u521B\u5EFA\u518D\u65E0\u6CD5\u83B7\u53D6\uFF0C\u4E00\u5B9A\u7262\u8BB0\u4F4F\uFF0C\u5982\u679C\u9057\u5931\uFF0C\u53EA\u80FD\u91CD\u65B0\u751F\u6210\u4E00\u4E2A\u3002

2\u3001github \u56FE\u5E8A\u6700\u597D\u5355\u72EC\u521B\u5EFA\u4E00\u4E2A\u4ED3\u5E93\uFF0C\u5E76\u4E14\u4ED3\u5E93\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 100M\uFF0C\u5426\u5219\u4F1A\u88AB\u5B98\u65B9\u89C6\u4E3A\u56FE\u5E8A\u5C01\u7981\uFF0C\u5982\u679C\u8D85\u8FC7 100M\uFF0C\u9700\u8981\u91CD\u65B0\u521B\u5EFA\u65B0\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002
:::

## \u4EC0\u4E48\u662F\u56FE\u5E8A

&emsp;\u56FE\u5E8A\u5176\u5B9E\u662F\u4E92\u8054\u7F51\u4E2D\u5B58\u50A8\u56FE\u7247\u7684\u7A7A\u95F4\uFF0C\u4E3E\u4E2A\u6817\u5B50\uFF1A\u5047\u8BBE\u4F60\u5728\u5FAE\u535A\u5206\u4EAB\u4E00\u5F20\u56FE\u7247\uFF0C\u4F60\u7684\u7C89\u4E1D\u53EF\u4EE5\u901A\u8FC7\u4E92\u8054\u7F51\u770B\u5230\u4F60\u5206\u4EAB\u7684\u56FE\u7247\uFF0C\u90A3\u4E48\u4ED6\u662F\u53BB\u8BBF\u95EE\u4F60\u7684\u624B\u673A\u7684\u76F8\u518C\u5417\uFF1F\u5176\u5B9E\u4E0D\u662F\u7684\uFF0C\u4F60\u5206\u4EAB\u56FE\u7247\uFF0C\u4E5F\u5C31\u662F\u628A\u56FE\u7247\u4E0A\u4F20\u5230\u5FAE\u535A\u7684\u670D\u52A1\u5668\uFF0C\u5FAE\u535A\u5C06\u4E3A\u4F60\u751F\u6210\u4E00\u4E2A\u72EC\u4E00\u65E0\u4E8C\u7684\u8BBF\u95EE\u94FE\u63A5\uFF0C\u8FD9\u4E2A\u94FE\u63A5\u6307\u5411\u7684\u7A7A\u95F4\u5176\u5B9E\u5C31\u662F\u56FE\u5E8A\u3002

## \u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A

&emsp;\u4F1A\u53BB\u63A5\u89E6\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u90FD\u662F\u4E00\u4E9B\u70ED\u7231\u5728\u7F51\u4E0A\u5206\u4EAB\u535A\u5BA2\u6216\u8005\u559C\u6B22\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u4EBA\uFF0C\u4F7F\u7528\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u91C7\u7528 Markdown \u7684\u65B9\u5F0F\u53BB\u7F16\u8F91\u6587\u5B57\u3002\u6211\u4EEC\u90FD\u77E5\u9053\u73B0\u5728\u901A\u5E38\u6D41\u884C\u4E24\u79CD\u65B9\u5F0F\u7F16\u8F91\u6587\u5B57\uFF1A\u5BCC\u6587\u672C\u7F16\u8F91\uFF0CWord \u5C31\u662F\u5176\u4E2D\u975E\u5E38\u5177\u6709\u4EE3\u8868\u6027\u7684\uFF0C\u6587\u5B57\u7684\u5404\u79CD\u683C\u5F0F\u90FD\u662F\u901A\u8FC7\u4EA4\u4E92\u6309\u94AE\u8BBE\u7F6E\u7684\uFF0C\u8FD9\u65F6\u5019\u9700\u8981\u9891\u7E41\u7684\u9F20\u6807\u914D\u5408\u64CD\u4F5C\u3002\u8FD9\u79CD\u65B9\u5F0F\u64CD\u4F5C\u6E10\u53D8\uFF0C\u4F46\u662F\u5BF9\u4E8E\u5927\u91CF\u7F16\u8F91\u5DE5\u4F5C\u7684\u6587\u5B57\u5DE5\u4F5C\u8005\uFF0C\u53CC\u624B\u79BB\u5F00\u952E\u76D8\u4F7F\u7528\u9F20\u6807\u5176\u5B9E\u662F\u4E00\u79CD\u8D1F\u62C5\u3002
Markdown \u7F16\u8F91\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7 Markdown \u6807\u8BB0\u8BED\u8A00\u53BB\u89C4\u5B9A\u683C\u5F0F\u7684\u7EAF\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u3002\u8FD9\u79CD\u65B9\u5F0F\u4F7F\u5F97\u6587\u5B57\u5DE5\u4F5C\u8005\u4E13\u6CE8\u4E8E\u6587\u5B57\uFF0C\u800C\u975E\u683C\u5F0F\uFF0C\u53CC\u624B\u53EF\u4EE5\u5F7B\u5E95\u7684\u89E3\u653E\u9F20\u6807\uFF0C\u5927\u5927\u63D0\u9AD8\u4E86\u6548\u7387\u3002\u8FD8\u6709\u4E00\u4E2A\u4F18\u70B9\u5C31\u662F\uFF0CMarkdown \u6BD4\u5BCC\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u66F4\u52A0\u5177\u6709\u901A\u7528\u6027\uFF0Cword \u7684\u6587\u5B57\u6574\u7BC7\u590D\u5236\u5230\u6709\u9053\u4E91\u7B14\u8BB0\u683C\u5F0F\u4F1A\u51FA\u73B0\u5DEE\u5F02\uFF0C\u8FD9\u4E5F\u662F\u5BCC\u6587\u672C\u7F16\u8F91\u7684\u5DE8\u5927\u7F3A\u9677\u3002

## \u600E\u6837\u83B7\u5F97\u56FE\u5E8A

\u76EE\u524D\u6709\u8BB8\u591A\u83B7\u5F97\u56FE\u5E8A\u7684\u9014\u5F84\u975E\u5E38\u591A\uFF0C\u901A\u5E38\u5206\u4E3A\u6536\u8D39\u7684\u548C\u514D\u8D39\u7684\u3002\u6536\u8D39\u56FE\u5E8A\uFF1A\u4F18\u70B9\u5728\u4E8E\u5730\u5740\u4FDD\u6301\u3001\u72EC\u7ACB\u57DF\u540D\u3001\u53EF\u80FD\u901F\u5EA6\u66F4\u5FEB\u5427\u3002\u514D\u8D39\u56FE\u5E8A\uFF1A\u63A8\u8350\u521A\u63A5\u89E6\u7684\u540C\u5B66\u53EF\u4EE5\u4F7F\u7528\u6709\u9053\u4E91\u7B14\u8BB0\u548C\u5FAE\u535A\uFF0C\u56E0\u4E3A\u8FD9\u4E24\u4E2A\u8F6F\u4EF6\u5927\u5BB6\u90FD\u6BD4\u8F83\u719F\u6089\uFF0C\u64CD\u4F5C\u4E5F\u7B80\u5355\u3002 \u5E38\u7528\u7684\u56FE\u5E8A\u6709\uFF1A\u5FAE\u535A\uFF0C\u6709\u9053\u4E91\u7B14\u8BB0\uFF0Cgithub \u56FE\u5E8A,\u817E\u8BAF\u4E91 cos,\u4E03\u725B\u56FE\u5E8A\uFF0C\u963F\u91CC\u4E91 OSS\uFF0CSM.MS \u56FE\u5E8A\u3002\u4ECA\u65E5\u4E3B\u8981\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E\u514D\u8D39\u7684 github \u56FE\u5E8A\u7684\u521B\u5EFA\u65B9\u5F0F\u3002\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B\uFF1A![\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021701018.png)

## \u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA

1\u3001\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684\`github\`\u4ED3\u5E93
![\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684github\u4ED3\u5E93](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717135.png)
2\u3001\u521B\u5EFA Token\uFF0C\u3010\u8FDB\u5165 github\u3011-\u3010\u70B9\u51FB\u5934\u50CF\u3011-\u3010settings\u3011-\u3010developer settings\u3011-\u3010Personal access tokens\u3011\uFF0C\u4E2A\u4EBA\u8BBF\u95EE\u4EE4\u724C\u521B\u5EFA\u6210\u529F\uFF0C\u8BF7\u590D\u5236\u4F60\u7684 token\uFF0C\u5B83\u53EA\u663E\u793A\u4E00\u6B21\uFF0C\u8BF7\u59A5\u5584\u4FDD\u7BA1\u3002\u64CD\u4F5C\u5982\u4E0B\u56FE\uFF1A![\u521B\u5EFAToken](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717283.png)

## PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5

&emsp;PicGO \u662F\u4E00\u6B3E\u91C7\u7528 electron+Vue \u5F00\u53D1\u4E0A\u4F20\u56FE\u7247\u7684\u684C\u9762\u7AEF\u5DE5\u5177\u3002\u9996\u5148\u9700\u8981\u672C\u5730\u4E0B\u8F7D\u5B89\u88C5\u5BA2\u6237\u7AEF\uFF0C\u5B98\u7F51\u5F00\u6E90\u5730\u5740\uFF1A<https://github.com/Molunerfinn/PicGo/releases>; \u5B89\u88C5\u5B8C\u6253\u5F00\u5BA2\u6237\u7AEF\u8FDB\u884C\u914D\u7F6E\uFF1A\u6709\u5F88\u591A\u56FE\u5E8A\uFF0C\u6211\u4EEC\u9009\u62E9 github \u56FE\u5E8A\uFF0C\u914D\u7F6E\u76F8\u5173\u7684\u4ED3\u5E93\u4FE1\u606F\u548C token \u4FE1\u606F\u3002

## PicGO \u914D\u7F6E github \u56FE\u5E8A

1\u3001\u586B\u5199\u56FE\u5E8A\u4ED3\u5E93\u540D\u79F0\uFF0C\u5206\u652F\uFF0C\u56FE\u7247\u5B58\u653E\u76EE\u5F55\uFF0C\u4E2A\u4EBA\u4EE4\u724C Token\uFF0C\u914D\u7F6E\u5982\u4E0B\uFF1A
![token\u914D\u7F6E](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021709999.png)  
\u8FD9\u91CC\u7684\u81EA\u5B9A\u4E49\u57DF\u540D\u7684\u683C\u5F0F\uFF1A\`https://cdn.jsdelivr.net/gh/\u7528\u6237\u540D/\u4ED3\u5E93\u540D\`\uFF0C\u8FD9\u662F\u4E2A\u514D\u8D39\u7684 CDN \u52A0\u901F\uFF0C\u53EF\u4EE5\u52A0\u5FEB\u56FE\u7247\u7684\u8BBF\u95EE\u901F\u5EA6\uFF0C\u4E5F\u53EF\u4EE5\u4E0D\u52A0\u3002
2\u3001\u901A\u8FC7 PicGO \u4E0A\u4F20\u533A\u4E0A\u4F20\u56FE\u7247
![\u4E0A\u4F20\u56FE\u4F8B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726001.png)  
3\u3001\u5728\u76F8\u518C\u4E2D\u67E5\u770B\u56FE\u7247\uFF0C\u70B9\u51FB\u5BF9\u5E94\u7684\u56FE\u7247\u590D\u5236\u4E0D\u540C\u683C\u5F0F\u8FDE\u63A5\uFF0C\u76F4\u63A5\u4F7F\u7528\u3002
![\u9884\u89C8\u56FE\u4F8B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726886.png)  
4\u3001\u67E5\u770B github \u56FE\u5E8A\u4ED3\u5E93\u56FE\u7247\u5B58\u50A8\u60C5\u51B5
![\u4ED3\u5E93\u9884\u89C8](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021730066.png)  
\u81F3\u6B64 github \u56FE\u5E8A\u521B\u5EFA\u5B8C\u6210\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u53EF\u4EE5\u5F00\u5FC3\u7684\u73A9\u800D\u4E86 :grinning:\u3002

## \u514D\u8D39\u7684 CDN \u52A0\u901F

:::note
CDN \u7684\u5168\u79F0\u662F Content Delivery Network\uFF0C\u5373\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\u3002CDN \u662F\u6784\u5EFA\u5728\u7F51\u7EDC\u4E4B\u4E0A\u7684\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\uFF0C\u4F9D\u9760\u90E8\u7F72\u5728\u5404\u5730\u7684\u8FB9\u7F18\u670D\u52A1\u5668\uFF0C\u901A\u8FC7\u4E2D\u5FC3\u5E73\u53F0\u7684\u8D1F\u8F7D\u5747\u8861\u3001\u5185\u5BB9\u5206\u53D1\u3001\u8C03\u5EA6\u7B49\u529F\u80FD\u6A21\u5757\uFF0C\u4F7F\u7528\u6237\u5C31\u8FD1\u83B7\u53D6\u6240\u9700\u5185\u5BB9\uFF0C\u964D\u4F4E\u7F51\u7EDC\u62E5\u585E\uFF0C\u63D0\u9AD8\u7528\u6237\u8BBF\u95EE\u54CD\u5E94\u901F\u5EA6\u548C\u547D\u4E2D\u7387\u3002CDN \u7684\u5173\u952E\u6280\u672F\u4E3B\u8981\u6709\u5185\u5BB9\u5B58\u50A8\u548C\u5206\u53D1\u6280\u672F\u3002\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\uFF0C\u5F88\u591A\u516C\u7528\u514D\u8D39\u7684 CDN \u8D44\u6E90\u5728\u4E2D\u56FD\u5927\u9646\u5E76\u4E0D\u5F88\u597D\u7528\uFF0C\u5C31\u7B97\u662F\u4ED8\u8D39\u7684\uFF0C\u4E5F\u6709\u4E00\u5B9A\u7684\u9650\u5236\uFF0C\u4F8B\u5982\u6BCF\u5929\u7684\u5237\u65B0\u6B21\u6570\u6709\u9650\u4E4B\u7C7B\u7684\u3002
:::

&emsp;\u6700\u8FD1 CDN\`https://cdn.jsdelivr.net\`\u7531\u4E8E dns \u6C61\u67D3\u4E00\u81F4\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u5BFC\u81F4\u52A0\u901F\u5931\u6548\u3002\u4E0B\u9762\u4FBF\u6536\u96C6\u4E86\u4E00\u4E9B\u514D\u8D39\u7684 CDN \u94FE\u63A5\uFF0C\u4EE5\u5907\u66F4\u6362\u3002\u4E3B\u8981\u4ECB\u7ECD\uFF1Ajsdelivr\uFF0Cstaticaly\uFF0Cgithack

### jsdelivr

:::tip
1\u3001\u8FD9\u662F\u5728\u4E2D\u56FD\u5927\u9646\u552F\u4E00\u6709 license \u7684\u516C\u6709 CDN\uFF0C\u800C\u4E14\u5B9E\u9645\u4F7F\u7528\u4E2D\u7684\u8BBF\u95EE\u901F\u5EA6\u4E5F\u662F\u6781\u5FEB\u7684\u3002

2\u3001[\u5B98\u7F51\u5730\u5740](https://www.jsdelivr.com),\u6CA1\u68AF\u5B50\u8BBF\u95EE\u53EF\u80FD\u6709\u70B9\u6162\uFF0C\u4E0D\u8FC7 CDN \u7684\u8282\u70B9\u662F\u5F88\u5FEB\u7684 \u53EF\u4EE5\u5F15\u7528\u7684\u8D44\u6E90\u5305\u62EC NPM\u3001github\u3001wordpress \u7684\u6240\u6709\u8D44\u6E90\uFF0Cgithub \u53EF\u4EE5\u662F\u4EFB\u610F\u4F53\u79EF\u5C0F\u4E8E 50M \u7684\u4ED3\u5E93\u3002
:::
\u4EE5 github \u4E3A\u4F8B\uFF0C\u53EA\u9700\u8981\u901A\u8FC7\u7B26\u5408 JSDelivr \u89C4\u5219\u7684 URL \u5F15\u7528\uFF0C\u5373\u53EF\u76F4\u63A5\u4F7F\u7528 Github \u4E2D\u7684\u8D44\u6E90\u3002

\`\`\`bash
// \u7528\u6237\u540D/\u4ED3\u5E93\u540D@\u7248\u672C\u53F7/\u6587\u4EF6\u540D
https://cdn.jsdelivr.net/gh/user/repo@version/file
// load jQuery v3.2.1
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js


// \u4F7F\u7528\u4E00\u4E2A\u8303\u56F4\u5185\u7684\u7248\u672C
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2/dist/jquery.min.js
https://cdn.jsdelivr.net/gh/jquery/jquery@3/dist/jquery.min.js


// \u5FFD\u7565\u7248\u672C\u53F7\u5219\u9ED8\u8BA4\u4F7F\u7528\u6700\u65B0\u7248
// you should NOT use this in production
https://cdn.jsdelivr.net/gh/jquery/jquery/dist/jquery.min.js


// \u5728\u4EFB\u610FJS/CSS\u6587\u4EF6\u540E\u6DFB\u52A0 .min \u80FD\u5F97\u5230\u4E00\u4E2A\u7F29\u5C0F\u7248
// \u5982\u679C\u5B83\u672C\u8EAB\u4E0D\u5B58\u5728\uFF0C\u6211\u4EEC\u5C06\u4F1A\u4E3A\u4F60\u751F\u6210
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/src/core.min.js


// \u5728\u672B\u5C3E\u52A0 / \u5219\u5F97\u5230\u76EE\u5F55\u5217\u8868
https://cdn.jsdelivr.net/gh/jquery/jquery/
\`\`\`

### staticaly

\u5B98\u7F51\u5730\u5740\uFF1A<https://www.staticaly.com>,\u8F7B\u677E\u5730\u4ECEGitHub / GitLab / Bitbucket \u7B49\u52A0\u8F7D\u60A8\u7684\u9879\u76EE \u6CA1\u6709\u6D41\u91CF\u9650\u5236\u6216\u9650\u5236\u3002\u6587\u4EF6\u901A\u8FC7\u8D85\u5FEB\u901F\u5168\u7403 CDN \u63D0\u4F9B\u3002 \u5728 URL\uFF08\u4E0D\u662F\u5206\u652F\uFF09\u4E2D\u4F7F\u7528\u7279\u5B9A\u6807\u8BB0\u6216\u63D0\u4EA4\u54C8\u5E0C\u3002\u6839\u636E URL \u6C38\u4E45\u7F13\u5B58\u6587\u4EF6\u3002 \u9664 master \u5206\u652F\u5916\uFF0C\u6587\u4EF6\u5728\u6D4F\u89C8\u5668\u4E2D\u7F13\u5B58 1 \u5E74\u3002 \u5177\u4F53\u7528\u6CD5\uFF1A

\`\`\`bash
# GitHub CDN
https://cdn.staticaly.com/gh/:user/:repo/:tag/:file
https://cdn.staticaly.com/gh/growvv/growvv.github.io/master/README.md

# GitLab CDN
https://cdn.staticaly.com/gl/:user/:repo/:tag/:file

# Bitbucket CDN
https://cdn.staticaly.com/bb/:user/:repo/:tag/:file

# WordPress CDN
https://cdn.staticaly.com/wp/c/:version/wp-includes/:file
https://cdn.staticaly.com/wp/p/:plugin_name/:version/:file
https://cdn.staticaly.com/wp/t/:theme_name/:version/:file

# Imgpx CDN
https://cdn.staticaly.com/img/:image_url

# Favicons CDN
https://cdn.staticaly.com/favicons/:favicon_url
\`\`\`

### githack

\u5B98\u7F51\u5730\u5740\uFF1A<http://raw.githack.com/> \u5177\u4F53\u7528\u6CD5\u548C\u4E0A\u9762\u7684 staticaly \u5F88\u7C7B\u4F3C\uFF0C\u76F4\u63A5\u4ECE GitHub\uFF0CBitbucket \u6216 GitLab \u63D0\u4F9B\u539F\u59CB\u6587\u4EF6\u3002\u7528\u6CD5\u5982\u4E0B\uFF1A

\`\`\`bash
# Github CDN
//\u4E3B\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/master/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png

//\u7248\u672C\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/8806f440d3f9a7cc3e6125d7d75564e40262c6a8/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png
\`\`\`

## \u5176\u4ED6\u56FE\u5E8A

### \u5BA2\u6765\u56FE\u5E8A

&emsp;\u53E6\u5916\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E web \u6D4F\u89C8\u5668\u7F51\u7AD9\u5DE5\u5177\uFF0C\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u5230\u6211\u4EEC\u7684 github \u56FE\u5E8A\u4ED3\u5E93\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u53EF\u4EE5\u907F\u514D\u7279\u6B8A\u60C5\u51B5\u4E0B\u5B89\u88C5\u684C\u9762\u7AEF\u7A0B\u5E8F\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u3002\u5B98\u7F51\u5730\u5740\uFF1A<https://img.itclan.cn/#/upload>\u3002\u4F7F\u7528\u548C PicGo \u5F88\u76F8\u4F3C\uFF0C\u8F93\u5165\u4E2A\u4EBA\u4EE4\u724C\uFF0C\u4F1A\u81EA\u52A8\u8C03\u7528 github Api \u83B7\u53D6\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u7136\u540E\u9009\u62E9\u56FE\u5E8A\u4ED3\u5E93\uFF0C\u914D\u7F6E\u56FE\u5E8A\u6587\u4EF6\u8DEF\u5F84\uFF0C\u5982\u4E0B\u56FE\uFF1A  
![\u914D\u7F6E](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021749103.png)  
\u7136\u540E\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247\uFF0C\u4E0A\u4F20\u540E\u53EF\u4EE5\u7B5B\u9009\u4E0D\u540C\u76EE\u5F55\u4E0B\u7684\u56FE\u7247\uFF0C\u4E5F\u53EF\u4EE5\u9884\u89C8 PicGo \u4E0A\u4F20\u7684\u56FE\u7247\uFF0C\u540C\u65F6\u53EF\u4EE5\u83B7\u53D6 github \u5916\u7F51\u94FE\u63A5\u548C CND \u52A0\u901F\u94FE\u63A5\uFF0Cmarkdown \u683C\u5F0F\u7684\u94FE\u63A5\u76F4\u63A5\u4F7F\u7528\uFF0C\u5982\u4E0B\u56FE\uFF1A
![\u56FE\u4F8B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021750165.png)
`,contentRendered:`<p>\u2003\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
<!-- more -->
<div class="custom-container info"><p class="custom-container-title">\u76F8\u5173\u4FE1\u606F</p>
<p>1\u3001github \u56FE\u5E8A\u539F\u7406\uFF1A\u901A\u8FC7 github Api \u548C\u4E2A\u4EBA\u6388\u6743 Token,\u901A\u8FC7\u7B2C\u4E09\u65B9\u5DE5\u5177\u5C06\u672C\u5730\u56FE\u7247\u4E0A\u4F20\u5230\u4E2A\u4EBA github \u4ED3\u5E93\u8FDB\u884C\u56FE\u7247\u5B58\u50A8\uFF0C\u7136\u540E\u751F\u6210\u4E00\u4E2A\u901A\u8FC7 CND \u52A0\u901F\u7684\u94FE\u63A5\uFF0C\u63D0\u4F9B\u7528\u6237\u8BBF\u95EE\u3002 <strong>\u6CE8\u610F\uFF1A</strong> github \u4E2A\u4EBA\u6388\u6743\u4EE4\u724C Token \u4E00\u65E6\u521B\u5EFA\u518D\u65E0\u6CD5\u83B7\u53D6\uFF0C\u4E00\u5B9A\u7262\u8BB0\u4F4F\uFF0C\u5982\u679C\u9057\u5931\uFF0C\u53EA\u80FD\u91CD\u65B0\u751F\u6210\u4E00\u4E2A\u3002</p>
<p>2\u3001github \u56FE\u5E8A\u6700\u597D\u5355\u72EC\u521B\u5EFA\u4E00\u4E2A\u4ED3\u5E93\uFF0C\u5E76\u4E14\u4ED3\u5E93\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 100M\uFF0C\u5426\u5219\u4F1A\u88AB\u5B98\u65B9\u89C6\u4E3A\u56FE\u5E8A\u5C01\u7981\uFF0C\u5982\u679C\u8D85\u8FC7 100M\uFF0C\u9700\u8981\u91CD\u65B0\u521B\u5EFA\u65B0\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
</div>
<h2 id="\u4EC0\u4E48\u662F\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662F\u56FE\u5E8A" aria-hidden="true">#</a> \u4EC0\u4E48\u662F\u56FE\u5E8A</h2>
<p>\u2003\u56FE\u5E8A\u5176\u5B9E\u662F\u4E92\u8054\u7F51\u4E2D\u5B58\u50A8\u56FE\u7247\u7684\u7A7A\u95F4\uFF0C\u4E3E\u4E2A\u6817\u5B50\uFF1A\u5047\u8BBE\u4F60\u5728\u5FAE\u535A\u5206\u4EAB\u4E00\u5F20\u56FE\u7247\uFF0C\u4F60\u7684\u7C89\u4E1D\u53EF\u4EE5\u901A\u8FC7\u4E92\u8054\u7F51\u770B\u5230\u4F60\u5206\u4EAB\u7684\u56FE\u7247\uFF0C\u90A3\u4E48\u4ED6\u662F\u53BB\u8BBF\u95EE\u4F60\u7684\u624B\u673A\u7684\u76F8\u518C\u5417\uFF1F\u5176\u5B9E\u4E0D\u662F\u7684\uFF0C\u4F60\u5206\u4EAB\u56FE\u7247\uFF0C\u4E5F\u5C31\u662F\u628A\u56FE\u7247\u4E0A\u4F20\u5230\u5FAE\u535A\u7684\u670D\u52A1\u5668\uFF0C\u5FAE\u535A\u5C06\u4E3A\u4F60\u751F\u6210\u4E00\u4E2A\u72EC\u4E00\u65E0\u4E8C\u7684\u8BBF\u95EE\u94FE\u63A5\uFF0C\u8FD9\u4E2A\u94FE\u63A5\u6307\u5411\u7684\u7A7A\u95F4\u5176\u5B9E\u5C31\u662F\u56FE\u5E8A\u3002</p>
<h2 id="\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A</h2>
<p>\u2003\u4F1A\u53BB\u63A5\u89E6\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u90FD\u662F\u4E00\u4E9B\u70ED\u7231\u5728\u7F51\u4E0A\u5206\u4EAB\u535A\u5BA2\u6216\u8005\u559C\u6B22\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u4EBA\uFF0C\u4F7F\u7528\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u91C7\u7528 Markdown \u7684\u65B9\u5F0F\u53BB\u7F16\u8F91\u6587\u5B57\u3002\u6211\u4EEC\u90FD\u77E5\u9053\u73B0\u5728\u901A\u5E38\u6D41\u884C\u4E24\u79CD\u65B9\u5F0F\u7F16\u8F91\u6587\u5B57\uFF1A\u5BCC\u6587\u672C\u7F16\u8F91\uFF0CWord \u5C31\u662F\u5176\u4E2D\u975E\u5E38\u5177\u6709\u4EE3\u8868\u6027\u7684\uFF0C\u6587\u5B57\u7684\u5404\u79CD\u683C\u5F0F\u90FD\u662F\u901A\u8FC7\u4EA4\u4E92\u6309\u94AE\u8BBE\u7F6E\u7684\uFF0C\u8FD9\u65F6\u5019\u9700\u8981\u9891\u7E41\u7684\u9F20\u6807\u914D\u5408\u64CD\u4F5C\u3002\u8FD9\u79CD\u65B9\u5F0F\u64CD\u4F5C\u6E10\u53D8\uFF0C\u4F46\u662F\u5BF9\u4E8E\u5927\u91CF\u7F16\u8F91\u5DE5\u4F5C\u7684\u6587\u5B57\u5DE5\u4F5C\u8005\uFF0C\u53CC\u624B\u79BB\u5F00\u952E\u76D8\u4F7F\u7528\u9F20\u6807\u5176\u5B9E\u662F\u4E00\u79CD\u8D1F\u62C5\u3002
Markdown \u7F16\u8F91\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7 Markdown \u6807\u8BB0\u8BED\u8A00\u53BB\u89C4\u5B9A\u683C\u5F0F\u7684\u7EAF\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u3002\u8FD9\u79CD\u65B9\u5F0F\u4F7F\u5F97\u6587\u5B57\u5DE5\u4F5C\u8005\u4E13\u6CE8\u4E8E\u6587\u5B57\uFF0C\u800C\u975E\u683C\u5F0F\uFF0C\u53CC\u624B\u53EF\u4EE5\u5F7B\u5E95\u7684\u89E3\u653E\u9F20\u6807\uFF0C\u5927\u5927\u63D0\u9AD8\u4E86\u6548\u7387\u3002\u8FD8\u6709\u4E00\u4E2A\u4F18\u70B9\u5C31\u662F\uFF0CMarkdown \u6BD4\u5BCC\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u66F4\u52A0\u5177\u6709\u901A\u7528\u6027\uFF0Cword \u7684\u6587\u5B57\u6574\u7BC7\u590D\u5236\u5230\u6709\u9053\u4E91\u7B14\u8BB0\u683C\u5F0F\u4F1A\u51FA\u73B0\u5DEE\u5F02\uFF0C\u8FD9\u4E5F\u662F\u5BCC\u6587\u672C\u7F16\u8F91\u7684\u5DE8\u5927\u7F3A\u9677\u3002</p>
<h2 id="\u600E\u6837\u83B7\u5F97\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u600E\u6837\u83B7\u5F97\u56FE\u5E8A" aria-hidden="true">#</a> \u600E\u6837\u83B7\u5F97\u56FE\u5E8A</h2>
<p>\u76EE\u524D\u6709\u8BB8\u591A\u83B7\u5F97\u56FE\u5E8A\u7684\u9014\u5F84\u975E\u5E38\u591A\uFF0C\u901A\u5E38\u5206\u4E3A\u6536\u8D39\u7684\u548C\u514D\u8D39\u7684\u3002\u6536\u8D39\u56FE\u5E8A\uFF1A\u4F18\u70B9\u5728\u4E8E\u5730\u5740\u4FDD\u6301\u3001\u72EC\u7ACB\u57DF\u540D\u3001\u53EF\u80FD\u901F\u5EA6\u66F4\u5FEB\u5427\u3002\u514D\u8D39\u56FE\u5E8A\uFF1A\u63A8\u8350\u521A\u63A5\u89E6\u7684\u540C\u5B66\u53EF\u4EE5\u4F7F\u7528\u6709\u9053\u4E91\u7B14\u8BB0\u548C\u5FAE\u535A\uFF0C\u56E0\u4E3A\u8FD9\u4E24\u4E2A\u8F6F\u4EF6\u5927\u5BB6\u90FD\u6BD4\u8F83\u719F\u6089\uFF0C\u64CD\u4F5C\u4E5F\u7B80\u5355\u3002 \u5E38\u7528\u7684\u56FE\u5E8A\u6709\uFF1A\u5FAE\u535A\uFF0C\u6709\u9053\u4E91\u7B14\u8BB0\uFF0Cgithub \u56FE\u5E8A,\u817E\u8BAF\u4E91 cos,\u4E03\u725B\u56FE\u5E8A\uFF0C\u963F\u91CC\u4E91 OSS\uFF0CSM.MS \u56FE\u5E8A\u3002\u4ECA\u65E5\u4E3B\u8981\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E\u514D\u8D39\u7684 github \u56FE\u5E8A\u7684\u521B\u5EFA\u65B9\u5F0F\u3002\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021701018.png" alt="\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B"></p>
<h2 id="\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA" tabindex="-1"><a class="header-anchor" href="#\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA" aria-hidden="true">#</a> \u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA</h2>
<p>1\u3001\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684<code v-pre>github</code>\u4ED3\u5E93
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717135.png" alt="\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684github\u4ED3\u5E93">
2\u3001\u521B\u5EFA Token\uFF0C\u3010\u8FDB\u5165 github\u3011-\u3010\u70B9\u51FB\u5934\u50CF\u3011-\u3010settings\u3011-\u3010developer settings\u3011-\u3010Personal access tokens\u3011\uFF0C\u4E2A\u4EBA\u8BBF\u95EE\u4EE4\u724C\u521B\u5EFA\u6210\u529F\uFF0C\u8BF7\u590D\u5236\u4F60\u7684 token\uFF0C\u5B83\u53EA\u663E\u793A\u4E00\u6B21\uFF0C\u8BF7\u59A5\u5584\u4FDD\u7BA1\u3002\u64CD\u4F5C\u5982\u4E0B\u56FE\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717283.png" alt="\u521B\u5EFAToken"></p>
<h2 id="picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5" aria-hidden="true">#</a> PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5</h2>
<p>\u2003PicGO \u662F\u4E00\u6B3E\u91C7\u7528 electron+Vue \u5F00\u53D1\u4E0A\u4F20\u56FE\u7247\u7684\u684C\u9762\u7AEF\u5DE5\u5177\u3002\u9996\u5148\u9700\u8981\u672C\u5730\u4E0B\u8F7D\u5B89\u88C5\u5BA2\u6237\u7AEF\uFF0C\u5B98\u7F51\u5F00\u6E90\u5730\u5740\uFF1A<a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noopener noreferrer">https://github.com/Molunerfinn/PicGo/releases<ExternalLinkIcon/></a>; \u5B89\u88C5\u5B8C\u6253\u5F00\u5BA2\u6237\u7AEF\u8FDB\u884C\u914D\u7F6E\uFF1A\u6709\u5F88\u591A\u56FE\u5E8A\uFF0C\u6211\u4EEC\u9009\u62E9 github \u56FE\u5E8A\uFF0C\u914D\u7F6E\u76F8\u5173\u7684\u4ED3\u5E93\u4FE1\u606F\u548C token \u4FE1\u606F\u3002</p>
<h2 id="picgo-\u914D\u7F6E-github-\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#picgo-\u914D\u7F6E-github-\u56FE\u5E8A" aria-hidden="true">#</a> PicGO \u914D\u7F6E github \u56FE\u5E8A</h2>
<p>1\u3001\u586B\u5199\u56FE\u5E8A\u4ED3\u5E93\u540D\u79F0\uFF0C\u5206\u652F\uFF0C\u56FE\u7247\u5B58\u653E\u76EE\u5F55\uFF0C\u4E2A\u4EBA\u4EE4\u724C Token\uFF0C\u914D\u7F6E\u5982\u4E0B\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021709999.png" alt="token\u914D\u7F6E"><br>
\u8FD9\u91CC\u7684\u81EA\u5B9A\u4E49\u57DF\u540D\u7684\u683C\u5F0F\uFF1A<code v-pre>https://cdn.jsdelivr.net/gh/\u7528\u6237\u540D/\u4ED3\u5E93\u540D</code>\uFF0C\u8FD9\u662F\u4E2A\u514D\u8D39\u7684 CDN \u52A0\u901F\uFF0C\u53EF\u4EE5\u52A0\u5FEB\u56FE\u7247\u7684\u8BBF\u95EE\u901F\u5EA6\uFF0C\u4E5F\u53EF\u4EE5\u4E0D\u52A0\u3002
2\u3001\u901A\u8FC7 PicGO \u4E0A\u4F20\u533A\u4E0A\u4F20\u56FE\u7247
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726001.png" alt="\u4E0A\u4F20\u56FE\u4F8B"><br>
3\u3001\u5728\u76F8\u518C\u4E2D\u67E5\u770B\u56FE\u7247\uFF0C\u70B9\u51FB\u5BF9\u5E94\u7684\u56FE\u7247\u590D\u5236\u4E0D\u540C\u683C\u5F0F\u8FDE\u63A5\uFF0C\u76F4\u63A5\u4F7F\u7528\u3002
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726886.png" alt="\u9884\u89C8\u56FE\u4F8B"><br>
4\u3001\u67E5\u770B github \u56FE\u5E8A\u4ED3\u5E93\u56FE\u7247\u5B58\u50A8\u60C5\u51B5
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021730066.png" alt="\u4ED3\u5E93\u9884\u89C8"><br>
\u81F3\u6B64 github \u56FE\u5E8A\u521B\u5EFA\u5B8C\u6210\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u53EF\u4EE5\u5F00\u5FC3\u7684\u73A9\u800D\u4E86 \u{1F600}\u3002</p>
<h2 id="\u514D\u8D39\u7684-cdn-\u52A0\u901F" tabindex="-1"><a class="header-anchor" href="#\u514D\u8D39\u7684-cdn-\u52A0\u901F" aria-hidden="true">#</a> \u514D\u8D39\u7684 CDN \u52A0\u901F</h2>
<div class="custom-container note"><p class="custom-container-title">\u6CE8</p>
<p>CDN \u7684\u5168\u79F0\u662F Content Delivery Network\uFF0C\u5373\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\u3002CDN \u662F\u6784\u5EFA\u5728\u7F51\u7EDC\u4E4B\u4E0A\u7684\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\uFF0C\u4F9D\u9760\u90E8\u7F72\u5728\u5404\u5730\u7684\u8FB9\u7F18\u670D\u52A1\u5668\uFF0C\u901A\u8FC7\u4E2D\u5FC3\u5E73\u53F0\u7684\u8D1F\u8F7D\u5747\u8861\u3001\u5185\u5BB9\u5206\u53D1\u3001\u8C03\u5EA6\u7B49\u529F\u80FD\u6A21\u5757\uFF0C\u4F7F\u7528\u6237\u5C31\u8FD1\u83B7\u53D6\u6240\u9700\u5185\u5BB9\uFF0C\u964D\u4F4E\u7F51\u7EDC\u62E5\u585E\uFF0C\u63D0\u9AD8\u7528\u6237\u8BBF\u95EE\u54CD\u5E94\u901F\u5EA6\u548C\u547D\u4E2D\u7387\u3002CDN \u7684\u5173\u952E\u6280\u672F\u4E3B\u8981\u6709\u5185\u5BB9\u5B58\u50A8\u548C\u5206\u53D1\u6280\u672F\u3002\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\uFF0C\u5F88\u591A\u516C\u7528\u514D\u8D39\u7684 CDN \u8D44\u6E90\u5728\u4E2D\u56FD\u5927\u9646\u5E76\u4E0D\u5F88\u597D\u7528\uFF0C\u5C31\u7B97\u662F\u4ED8\u8D39\u7684\uFF0C\u4E5F\u6709\u4E00\u5B9A\u7684\u9650\u5236\uFF0C\u4F8B\u5982\u6BCF\u5929\u7684\u5237\u65B0\u6B21\u6570\u6709\u9650\u4E4B\u7C7B\u7684\u3002</p>
</div>
<p>\u2003\u6700\u8FD1 CDN<code v-pre>https://cdn.jsdelivr.net</code>\u7531\u4E8E dns \u6C61\u67D3\u4E00\u81F4\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u5BFC\u81F4\u52A0\u901F\u5931\u6548\u3002\u4E0B\u9762\u4FBF\u6536\u96C6\u4E86\u4E00\u4E9B\u514D\u8D39\u7684 CDN \u94FE\u63A5\uFF0C\u4EE5\u5907\u66F4\u6362\u3002\u4E3B\u8981\u4ECB\u7ECD\uFF1Ajsdelivr\uFF0Cstaticaly\uFF0Cgithack</p>
<h3 id="jsdelivr" tabindex="-1"><a class="header-anchor" href="#jsdelivr" aria-hidden="true">#</a> jsdelivr</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u8FD9\u662F\u5728\u4E2D\u56FD\u5927\u9646\u552F\u4E00\u6709 license \u7684\u516C\u6709 CDN\uFF0C\u800C\u4E14\u5B9E\u9645\u4F7F\u7528\u4E2D\u7684\u8BBF\u95EE\u901F\u5EA6\u4E5F\u662F\u6781\u5FEB\u7684\u3002</p>
<p>2\u3001<a href="https://www.jsdelivr.com" target="_blank" rel="noopener noreferrer">\u5B98\u7F51\u5730\u5740<ExternalLinkIcon/></a>,\u6CA1\u68AF\u5B50\u8BBF\u95EE\u53EF\u80FD\u6709\u70B9\u6162\uFF0C\u4E0D\u8FC7 CDN \u7684\u8282\u70B9\u662F\u5F88\u5FEB\u7684 \u53EF\u4EE5\u5F15\u7528\u7684\u8D44\u6E90\u5305\u62EC NPM\u3001github\u3001wordpress \u7684\u6240\u6709\u8D44\u6E90\uFF0Cgithub \u53EF\u4EE5\u662F\u4EFB\u610F\u4F53\u79EF\u5C0F\u4E8E 50M \u7684\u4ED3\u5E93\u3002</p>
</div>
<p>\u4EE5 github \u4E3A\u4F8B\uFF0C\u53EA\u9700\u8981\u901A\u8FC7\u7B26\u5408 JSDelivr \u89C4\u5219\u7684 URL \u5F15\u7528\uFF0C\u5373\u53EF\u76F4\u63A5\u4F7F\u7528 Github \u4E2D\u7684\u8D44\u6E90\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>// \u7528\u6237\u540D/\u4ED3\u5E93\u540D@\u7248\u672C\u53F7/\u6587\u4EF6\u540D
https://cdn.jsdelivr.net/gh/user/repo@version/file
// load jQuery v3.2.1
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js


// \u4F7F\u7528\u4E00\u4E2A\u8303\u56F4\u5185\u7684\u7248\u672C
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2/dist/jquery.min.js
https://cdn.jsdelivr.net/gh/jquery/jquery@3/dist/jquery.min.js


// \u5FFD\u7565\u7248\u672C\u53F7\u5219\u9ED8\u8BA4\u4F7F\u7528\u6700\u65B0\u7248
// you should NOT use this <span class="token keyword">in</span> production
https://cdn.jsdelivr.net/gh/jquery/jquery/dist/jquery.min.js


// \u5728\u4EFB\u610FJS/CSS\u6587\u4EF6\u540E\u6DFB\u52A0 .min \u80FD\u5F97\u5230\u4E00\u4E2A\u7F29\u5C0F\u7248
// \u5982\u679C\u5B83\u672C\u8EAB\u4E0D\u5B58\u5728\uFF0C\u6211\u4EEC\u5C06\u4F1A\u4E3A\u4F60\u751F\u6210
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/src/core.min.js


// \u5728\u672B\u5C3E\u52A0 / \u5219\u5F97\u5230\u76EE\u5F55\u5217\u8868
https://cdn.jsdelivr.net/gh/jquery/jquery/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="staticaly" tabindex="-1"><a class="header-anchor" href="#staticaly" aria-hidden="true">#</a> staticaly</h3>
<p>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://www.staticaly.com" target="_blank" rel="noopener noreferrer">https://www.staticaly.com<ExternalLinkIcon/></a>,\u8F7B\u677E\u5730\u4ECEGitHub / GitLab / Bitbucket \u7B49\u52A0\u8F7D\u60A8\u7684\u9879\u76EE \u6CA1\u6709\u6D41\u91CF\u9650\u5236\u6216\u9650\u5236\u3002\u6587\u4EF6\u901A\u8FC7\u8D85\u5FEB\u901F\u5168\u7403 CDN \u63D0\u4F9B\u3002 \u5728 URL\uFF08\u4E0D\u662F\u5206\u652F\uFF09\u4E2D\u4F7F\u7528\u7279\u5B9A\u6807\u8BB0\u6216\u63D0\u4EA4\u54C8\u5E0C\u3002\u6839\u636E URL \u6C38\u4E45\u7F13\u5B58\u6587\u4EF6\u3002 \u9664 master \u5206\u652F\u5916\uFF0C\u6587\u4EF6\u5728\u6D4F\u89C8\u5668\u4E2D\u7F13\u5B58 1 \u5E74\u3002 \u5177\u4F53\u7528\u6CD5\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># GitHub CDN</span>
https://cdn.staticaly.com/gh/:user/:repo/:tag/:file
https://cdn.staticaly.com/gh/growvv/growvv.github.io/master/README.md

<span class="token comment"># GitLab CDN</span>
https://cdn.staticaly.com/gl/:user/:repo/:tag/:file

<span class="token comment"># Bitbucket CDN</span>
https://cdn.staticaly.com/bb/:user/:repo/:tag/:file

<span class="token comment"># WordPress CDN</span>
https://cdn.staticaly.com/wp/c/:version/wp-includes/:file
https://cdn.staticaly.com/wp/p/:plugin_name/:version/:file
https://cdn.staticaly.com/wp/t/:theme_name/:version/:file

<span class="token comment"># Imgpx CDN</span>
https://cdn.staticaly.com/img/:image_url

<span class="token comment"># Favicons CDN</span>
https://cdn.staticaly.com/favicons/:favicon_url
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="githack" tabindex="-1"><a class="header-anchor" href="#githack" aria-hidden="true">#</a> githack</h3>
<p>\u5B98\u7F51\u5730\u5740\uFF1A<a href="http://raw.githack.com/" target="_blank" rel="noopener noreferrer">http://raw.githack.com/<ExternalLinkIcon/></a> \u5177\u4F53\u7528\u6CD5\u548C\u4E0A\u9762\u7684 staticaly \u5F88\u7C7B\u4F3C\uFF0C\u76F4\u63A5\u4ECE GitHub\uFF0CBitbucket \u6216 GitLab \u63D0\u4F9B\u539F\u59CB\u6587\u4EF6\u3002\u7528\u6CD5\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># Github CDN</span>
//\u4E3B\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/master/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png

//\u7248\u672C\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/8806f440d3f9a7cc3e6125d7d75564e40262c6a8/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5176\u4ED6\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u5176\u4ED6\u56FE\u5E8A" aria-hidden="true">#</a> \u5176\u4ED6\u56FE\u5E8A</h2>
<h3 id="\u5BA2\u6765\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6765\u56FE\u5E8A" aria-hidden="true">#</a> \u5BA2\u6765\u56FE\u5E8A</h3>
<p>\u2003\u53E6\u5916\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E web \u6D4F\u89C8\u5668\u7F51\u7AD9\u5DE5\u5177\uFF0C\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u5230\u6211\u4EEC\u7684 github \u56FE\u5E8A\u4ED3\u5E93\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u53EF\u4EE5\u907F\u514D\u7279\u6B8A\u60C5\u51B5\u4E0B\u5B89\u88C5\u684C\u9762\u7AEF\u7A0B\u5E8F\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u3002\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://img.itclan.cn/#/upload" target="_blank" rel="noopener noreferrer">https://img.itclan.cn/#/upload<ExternalLinkIcon/></a>\u3002\u4F7F\u7528\u548C PicGo \u5F88\u76F8\u4F3C\uFF0C\u8F93\u5165\u4E2A\u4EBA\u4EE4\u724C\uFF0C\u4F1A\u81EA\u52A8\u8C03\u7528 github Api \u83B7\u53D6\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u7136\u540E\u9009\u62E9\u56FE\u5E8A\u4ED3\u5E93\uFF0C\u914D\u7F6E\u56FE\u5E8A\u6587\u4EF6\u8DEF\u5F84\uFF0C\u5982\u4E0B\u56FE\uFF1A<br>
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021749103.png" alt="\u914D\u7F6E"><br>
\u7136\u540E\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247\uFF0C\u4E0A\u4F20\u540E\u53EF\u4EE5\u7B5B\u9009\u4E0D\u540C\u76EE\u5F55\u4E0B\u7684\u56FE\u7247\uFF0C\u4E5F\u53EF\u4EE5\u9884\u89C8 PicGo \u4E0A\u4F20\u7684\u56FE\u7247\uFF0C\u540C\u65F6\u53EF\u4EE5\u83B7\u53D6 github \u5916\u7F51\u94FE\u63A5\u548C CND \u52A0\u901F\u94FE\u63A5\uFF0Cmarkdown \u683C\u5F0F\u7684\u94FE\u63A5\u76F4\u63A5\u4F7F\u7528\uFF0C\u5982\u4E0B\u56FE\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021750165.png" alt="\u56FE\u4F8B"></p>
`,date:"2022-03-02",deps:[],links:[],pathInferred:"/posts/other/imageHost.html",pathLocale:"/",permalink:null,routeMeta:{title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"},sfcBlocks:[],slug:"imageHost",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/imageHost.md",filePathRelative:"posts/other/imageHost.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/imageHost.html.vue",componentFilePathRelative:"pages/posts/other/imageHost.html.vue",componentFileChunkName:"v-3ba2686a",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/imageHost.html.js",dataFilePathRelative:"pages/posts/other/imageHost.html.js",dataFileChunkName:"v-3ba2686a",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/imageHost.html",htmlFilePathRelative:"posts/other/imageHost.html"},title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"},["/posts/other/imageHost","/posts/other/imageHost.md"]],["v-a60cbc14","/posts/other/internetResource.html",{_blog:{data:{key:"v-a60cbc14",path:"/posts/other/internetResource.html",title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",lang:"zh-CN",frontmatter:{title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",date:"2022-02-12T22:07:35.000Z",description:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",tag:["\u5176\u4ED6"],category:["\u7F51\u7EDC\u8D44\u6E90"],image:"https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/internetResource.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:description",content:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-12T22:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u5DE5\u5177\u7C7B",slug:"\u5DE5\u5177\u7C7B",children:[]},{level:2,title:"\u56FE\u7247\u7C7B",slug:"\u56FE\u7247\u7C7B",children:[]},{level:2,title:"CSS \u7279\u6548",slug:"css-\u7279\u6548",children:[]},{level:2,title:"\u5E94\u7528\u7F51\u7AD9\u7C7B",slug:"\u5E94\u7528\u7F51\u7AD9\u7C7B",children:[]},{level:2,title:"\u7CFB\u7EDF\u7C7B",slug:"\u7CFB\u7EDF\u7C7B",children:[]},{level:2,title:"GitHub \u4ED3\u5E93",slug:"github-\u4ED3\u5E93",children:[]},{level:2,title:"\u4F18\u79C0\u535A\u5BA2\u7C7B",slug:"\u4F18\u79C0\u535A\u5BA2\u7C7B",children:[]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/internetResource.md",readingTime:{minutes:3.51,words:1054},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/internetResource.html`},key:"v-a60cbc14",path:"/posts/other/internetResource.html",title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",lang:"zh-CN",frontmatter:{title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",date:"2022-02-12T22:07:35.000Z",description:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",tag:["\u5176\u4ED6"],category:["\u7F51\u7EDC\u8D44\u6E90"],image:"https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/internetResource.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:description",content:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-12T22:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u5DE5\u5177\u7C7B",slug:"\u5DE5\u5177\u7C7B",children:[]},{level:2,title:"\u56FE\u7247\u7C7B",slug:"\u56FE\u7247\u7C7B",children:[]},{level:2,title:"CSS \u7279\u6548",slug:"css-\u7279\u6548",children:[]},{level:2,title:"\u5E94\u7528\u7F51\u7AD9\u7C7B",slug:"\u5E94\u7528\u7F51\u7AD9\u7C7B",children:[]},{level:2,title:"\u7CFB\u7EDF\u7C7B",slug:"\u7CFB\u7EDF\u7C7B",children:[]},{level:2,title:"GitHub \u4ED3\u5E93",slug:"github-\u4ED3\u5E93",children:[]},{level:2,title:"\u4F18\u79C0\u535A\u5BA2\u7C7B",slug:"\u4F18\u79C0\u535A\u5BA2\u7C7B",children:[]}],content:`---
title: \u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9
date: 2022-02-12 22:07:35
description: \u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9
tag:
  - \u5176\u4ED6
category:
  - \u7F51\u7EDC\u8D44\u6E90
image: https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg
---

&emsp;\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}

<!-- more -->

## \u5DE5\u5177\u7C7B

- [SCSS \u5728\u7EBF\u8F6C CSS](https://www.sassmeister.com/): \u5728\u7EBF Scss \u8F6C css \u7F51\u7AD9\u3002
- [Stylus \u5728\u7EBF\u8F6C CSS](https://www.cssportal.com/stylus-to-css/): \u5728\u7EBF Stylus \u8F6C css \u7F51\u7AD9\u3002
- [100 \u7D20\u6750\u7F51](http://www.100sucai.com/): \u5404\u79CD\u5728\u7EBF\u7D20\u6750\u8D44\u6E90\uFF0Ccss3 \u52A8\u753B\u7279\u6548\uFF0Cswiper \u5E7B\u706F\u7247\u4EE5\u53CA\u5404\u79CD\u524D\u7AEF\u7279\u6548\u6A21\u677F\u3002

## \u56FE\u7247\u7C7B

- [\u5F7C\u5CB8\u56FE\u7F51](https://pic.netbian.com/): 4k \u9AD8\u6E05\u7F8E\u5973,\u98CE\u666F\u8D44\u6E90\u7F51,\u6BCF\u65E5\u9650\u91CF\u514D\u8D39\u4E0B\u8F7D,\u4E5F\u53EF\u4EE5\u901A\u8FC7\u722C\u866B\u83B7\u53D6\uFF0C\u52A8\u6F2B\u8D85\u559C\u6B22,\u4F60\u503C\u5F97\u62E5\u6709! \u672C\u7AD9\u9996\u9875\u56FE\u7247\u6765\u6E90\u4E8E\u6B64\u7F51\u7AD9\u3002

## CSS \u7279\u6548

- [Flux Slider](https://www.joelambert.co.uk/flux/): Flux Slider \u4E00\u6B3E\u529F\u80FD\u5F3A\u5927\u7684\u56FE\u7247 2D \u6216 3D \u7279\u6548\u63D2\u4EF6

## \u5E94\u7528\u7F51\u7AD9\u7C7B

- [vite@2.x](https://vitejs.cn/): \u4E0B\u4E00\u4EE3\u524D\u7AEF\u5F00\u53D1\u4E0E\u6784\u5EFA\u5DE5\u5177 \u3002
- [vue@2.X](https://cn.vuejs.org/index.html): \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002
- [vue@3.X](https://v3.cn.vuejs.org/): \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002
- [ant-design-vue@3.X](https://next.antdv.com/docs/vue/introduce-cn/): \u5F00\u7BB1\u5373\u7528\u7684\u9AD8\u8D28\u91CF Vue \u7EC4\u4EF6\uFF0C\u5171\u4EAB Ant Design of React \u8BBE\u8BA1\u5DE5\u5177\u4F53\u7CFB\u3002
- [vuepress@1.X](https://v1.vuepress.vuejs.org/zh/): vuepress 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress@2.X](https://v2.vuepress.vuejs.org/zh/): vuepress 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress-theme-reco@1.X](https://vuepress-theme-reco.recoluan.com/): vuepress-theme-reco 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress-theme-reco@2.X](http://v2.vuepress-reco.recoluan.com//): vuepress-theme-reco 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [xicons](https://www.xicons.org/#/zh-CN/): \u524D\u7AEF SVG \u56FE\u6807\u7EC4\u4EF6\u5E93\uFF0C\u6574\u5408\u81EA fluentui-system-icons\u3001ionicons\u3001ant-design-icons\u3001material-design-icons\u3001Font-Awesome tabler-icons \u548C carbon \u7684 SVG Vue/React \u7EC4\u4EF6,\u63D0\u4F9B\u4E86\u4E00\u4E9B\u56FE\u6807\u5DE5\u5177\u7EC4\u4EF6\u6765\u81EA\u5B9A\u4E49\u56FE\u6807\u7684\u989C\u8272\u548C\u5C3A\u5BF8\u3002[\u56FE\u6807\u9884\u89C8\u7F51\u5740](https://www.xicons.org)\u548C[github \u4ED3\u5E93](https://github.com/07akioni/xicons/blob/main/README.zh-CN.md#%E5%AE%89%E8%A3%85)\u3002
- [markdown-it-emoji](https://github.com/markdown-it/markdown-it-emoji): \u4E00\u6B3E markdown \u6587\u4EF6\u8868\u60C5\u89E3\u6790\u63D2\u4EF6\u3002\u8BE6\u7EC6\u7528\u6CD5\u53C2\u8003[\u5B98\u7F51\u4ED3\u5E93](https://github.com/markdown-it/markdown-it-emoji)\u548C\u5E38\u7528\u7684[\u8868\u60C5\u5217\u8868](https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json),\u7528\u6CD5\uFF1A\`:hear_no_evil:\`\uFF0C\u663E\u793A\uFF1A:hear_no_evil: \u3002
- [Valine](https://valine.js.org/quickstart.html): \u4E00\u6B3E\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002
- [gitalk](https://github.com/gitalk/gitalk/blob/master/readme-cn.md): \u4E00\u4E2A\u57FA\u4E8E GitHub Issue \u548C Preact \u5F00\u53D1\u7684\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002
- [typed.js](https://mattboldt.com/demos/typed-js/): \u4E00\u6B3E\u6587\u672C\u6253\u5370\u673A\u7279\u6548\u7684\u63D2\u4EF6\u3002
- [fontAwesome](https://fontawesome.com/): \u4E00\u5957\u7EDD\u4F73\u7684\u56FE\u6807\u5B57\u4F53\u5E93\u548C CSS \u6846\u67B6\u3002 [Vue](https://fontawesome.com/docs/web/use-with/vue/)\u4E2D\u4F7F\u7528\u65B9\u6CD5\uFF0C\u7F51\u7AD9\u8BBF\u95EE\u9700\u8981\u68AF\u5B50\u3002
- [vue-i18n-next](https://github.com/intlify/vue-i18n-next): \u4E00\u6B3E\u57FA\u4E8E vue3 \u7684 i18n \u63D2\u4EF6\u3002
- [\u5BA2\u6765\u56FE\u5E8A](https://img.itclan.cn/#/help):\u4E00\u4E2A\u56FE\u7247\u4E0A\u4F20\u5230 github \u56FE\u5E8A\u7684\u5DE5\u5177\u3002
- [IT \u8D44\u6E90\u7F51](https://itclan.cn/): IT \u8D44\u6E90\u7F51
- [\u7231\u5BA2\u6765\u535A\u5BA2](https://coder.itclan.cn/):\u4E00\u6B3E\u7EFC\u5408\u6027\u535A\u5BA2\u3002
- [TypeScript \u4E2D\u6587\u624B\u518C](https://bosens-china.github.io/Typescript-manual/): TypeScript \u4E2D\u6587\u624B\u518C
- [CSS Tricks](https://qishaoxuan.github.io/css_tricks/): \u4E00\u6B3E\u524D\u7AEF\u7279\u6548\u53CA\u5176 css \u6587\u6863\u3002
- [vuepress-theme-hope@2.X](https://vuepress-theme-hope.github.io/v2/zh/guide/): vuepress-theme-hope\u4E3B\u9898\u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress-plugin-hope](https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html): vuepress-plugin-hope\u63D2\u4EF6\u5730\u5740\u3002
- [vuepress-theme-hope](https://mrhope.site/): vuepress-theme-home\u4E3B\u9898\u7F51\u7AD9\u793A\u4F8B\u5730\u5740\u3002

## \u7CFB\u7EDF\u7C7B

- [vbenAdmin](https://vvbin.cn/next/#/login): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\uFF0C[github](https://github.com/vbenjs/vue-vben-admin)\u4ED3\u5E93\u3002
- [Vue-Antd-Admin](https://iczer.gitee.io/vue-antd-admin/#/login): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [jeecgBoot](http://boot3.jeecg.com/login?redirect=/dashboard/analysis): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [vue-netx-admin](https://lyt-top.gitee.io/vue-next-admin-preview/#/login): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [ant-design-pro](https://preview.pro.antdv.com/dashboard/workplace): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [admin-pro](https://admin.makeit.vip/start): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002

## GitHub \u4ED3\u5E93

- [TypeScript \u4E2D\u6587\u624B\u518C](https://github.com/bosens-China/Typescript-manual): TypeScript \u4E2D\u6587\u624B\u518C\u4ED3\u5E93

## \u4F18\u79C0\u535A\u5BA2\u7C7B

\u6B64\u6A21\u5757\u6536\u96C6\u4E86\u4E00\u4E9B\u4F18\u79C0\u7684\u535A\u4E3B\u94FE\u63A5\uFF0C\u539F\u521B\u6587\u7AE0\u591A\uFF0C\u6D89\u53CA\u8303\u56F4\u5E7F\uFF0C\u53EF\u4EE5\u76F8\u4E92\u501F\u9274\u5B66\u4E60\u3002

::: cardList 3

\`\`\`yaml
- name: \u516E\u52A8\u4EBA
  avatar: https://avatar.csdnimg.cn/F/7/6/3_qq_41684621_1612151476.jpg
  desc: \u4E16\u95F4\u5473\u8DA3\u4EA6\u5982\u6B64\uFF0C\u4E07\u7269\u4E14\u53BB\u8F6E\u6D6E\u751F.
  link: https://xdr630.blog.csdn.net/?type=blog
  bgColor: 'rgb(165 216 243)'
  textColor: '#6854A1'
\`\`\`
`,contentRendered:`<p>\u2003\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}</p>
<!-- more -->
<h2 id="\u5DE5\u5177\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u5177\u7C7B" aria-hidden="true">#</a> \u5DE5\u5177\u7C7B</h2>
<ul>
<li><a href="https://www.sassmeister.com/" target="_blank" rel="noopener noreferrer">SCSS \u5728\u7EBF\u8F6C CSS<ExternalLinkIcon/></a>: \u5728\u7EBF Scss \u8F6C css \u7F51\u7AD9\u3002</li>
<li><a href="https://www.cssportal.com/stylus-to-css/" target="_blank" rel="noopener noreferrer">Stylus \u5728\u7EBF\u8F6C CSS<ExternalLinkIcon/></a>: \u5728\u7EBF Stylus \u8F6C css \u7F51\u7AD9\u3002</li>
<li><a href="http://www.100sucai.com/" target="_blank" rel="noopener noreferrer">100 \u7D20\u6750\u7F51<ExternalLinkIcon/></a>: \u5404\u79CD\u5728\u7EBF\u7D20\u6750\u8D44\u6E90\uFF0Ccss3 \u52A8\u753B\u7279\u6548\uFF0Cswiper \u5E7B\u706F\u7247\u4EE5\u53CA\u5404\u79CD\u524D\u7AEF\u7279\u6548\u6A21\u677F\u3002</li>
</ul>
<h2 id="\u56FE\u7247\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u56FE\u7247\u7C7B" aria-hidden="true">#</a> \u56FE\u7247\u7C7B</h2>
<ul>
<li><a href="https://pic.netbian.com/" target="_blank" rel="noopener noreferrer">\u5F7C\u5CB8\u56FE\u7F51<ExternalLinkIcon/></a>: 4k \u9AD8\u6E05\u7F8E\u5973,\u98CE\u666F\u8D44\u6E90\u7F51,\u6BCF\u65E5\u9650\u91CF\u514D\u8D39\u4E0B\u8F7D,\u4E5F\u53EF\u4EE5\u901A\u8FC7\u722C\u866B\u83B7\u53D6\uFF0C\u52A8\u6F2B\u8D85\u559C\u6B22,\u4F60\u503C\u5F97\u62E5\u6709! \u672C\u7AD9\u9996\u9875\u56FE\u7247\u6765\u6E90\u4E8E\u6B64\u7F51\u7AD9\u3002</li>
</ul>
<h2 id="css-\u7279\u6548" tabindex="-1"><a class="header-anchor" href="#css-\u7279\u6548" aria-hidden="true">#</a> CSS \u7279\u6548</h2>
<ul>
<li><a href="https://www.joelambert.co.uk/flux/" target="_blank" rel="noopener noreferrer">Flux Slider<ExternalLinkIcon/></a>: Flux Slider \u4E00\u6B3E\u529F\u80FD\u5F3A\u5927\u7684\u56FE\u7247 2D \u6216 3D \u7279\u6548\u63D2\u4EF6</li>
</ul>
<h2 id="\u5E94\u7528\u7F51\u7AD9\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u7F51\u7AD9\u7C7B" aria-hidden="true">#</a> \u5E94\u7528\u7F51\u7AD9\u7C7B</h2>
<ul>
<li><a href="https://vitejs.cn/" target="_blank" rel="noopener noreferrer">vite@2.x<ExternalLinkIcon/></a>: \u4E0B\u4E00\u4EE3\u524D\u7AEF\u5F00\u53D1\u4E0E\u6784\u5EFA\u5DE5\u5177 \u3002</li>
<li><a href="https://cn.vuejs.org/index.html" target="_blank" rel="noopener noreferrer">vue@2.X<ExternalLinkIcon/></a>: \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002</li>
<li><a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer">vue@3.X<ExternalLinkIcon/></a>: \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002</li>
<li><a href="https://next.antdv.com/docs/vue/introduce-cn/" target="_blank" rel="noopener noreferrer">ant-design-vue@3.X<ExternalLinkIcon/></a>: \u5F00\u7BB1\u5373\u7528\u7684\u9AD8\u8D28\u91CF Vue \u7EC4\u4EF6\uFF0C\u5171\u4EAB Ant Design of React \u8BBE\u8BA1\u5DE5\u5177\u4F53\u7CFB\u3002</li>
<li><a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vuepress@1.X<ExternalLinkIcon/></a>: vuepress 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://v2.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vuepress@2.X<ExternalLinkIcon/></a>: vuepress 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco@1.X<ExternalLinkIcon/></a>: vuepress-theme-reco 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="http://v2.vuepress-reco.recoluan.com//" target="_blank" rel="noopener noreferrer">vuepress-theme-reco@2.X<ExternalLinkIcon/></a>: vuepress-theme-reco 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://www.xicons.org/#/zh-CN/" target="_blank" rel="noopener noreferrer">xicons<ExternalLinkIcon/></a>: \u524D\u7AEF SVG \u56FE\u6807\u7EC4\u4EF6\u5E93\uFF0C\u6574\u5408\u81EA fluentui-system-icons\u3001ionicons\u3001ant-design-icons\u3001material-design-icons\u3001Font-Awesome tabler-icons \u548C carbon \u7684 SVG Vue/React \u7EC4\u4EF6,\u63D0\u4F9B\u4E86\u4E00\u4E9B\u56FE\u6807\u5DE5\u5177\u7EC4\u4EF6\u6765\u81EA\u5B9A\u4E49\u56FE\u6807\u7684\u989C\u8272\u548C\u5C3A\u5BF8\u3002<a href="https://www.xicons.org" target="_blank" rel="noopener noreferrer">\u56FE\u6807\u9884\u89C8\u7F51\u5740<ExternalLinkIcon/></a>\u548C<a href="https://github.com/07akioni/xicons/blob/main/README.zh-CN.md#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">github \u4ED3\u5E93<ExternalLinkIcon/></a>\u3002</li>
<li><a href="https://github.com/markdown-it/markdown-it-emoji" target="_blank" rel="noopener noreferrer">markdown-it-emoji<ExternalLinkIcon/></a>: \u4E00\u6B3E markdown \u6587\u4EF6\u8868\u60C5\u89E3\u6790\u63D2\u4EF6\u3002\u8BE6\u7EC6\u7528\u6CD5\u53C2\u8003<a href="https://github.com/markdown-it/markdown-it-emoji" target="_blank" rel="noopener noreferrer">\u5B98\u7F51\u4ED3\u5E93<ExternalLinkIcon/></a>\u548C\u5E38\u7528\u7684<a href="https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json" target="_blank" rel="noopener noreferrer">\u8868\u60C5\u5217\u8868<ExternalLinkIcon/></a>,\u7528\u6CD5\uFF1A<code v-pre>:hear_no_evil:</code>\uFF0C\u663E\u793A\uFF1A\u{1F649} \u3002</li>
<li><a href="https://valine.js.org/quickstart.html" target="_blank" rel="noopener noreferrer">Valine<ExternalLinkIcon/></a>: \u4E00\u6B3E\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002</li>
<li><a href="https://github.com/gitalk/gitalk/blob/master/readme-cn.md" target="_blank" rel="noopener noreferrer">gitalk<ExternalLinkIcon/></a>: \u4E00\u4E2A\u57FA\u4E8E GitHub Issue \u548C Preact \u5F00\u53D1\u7684\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002</li>
<li><a href="https://mattboldt.com/demos/typed-js/" target="_blank" rel="noopener noreferrer">typed.js<ExternalLinkIcon/></a>: \u4E00\u6B3E\u6587\u672C\u6253\u5370\u673A\u7279\u6548\u7684\u63D2\u4EF6\u3002</li>
<li><a href="https://fontawesome.com/" target="_blank" rel="noopener noreferrer">fontAwesome<ExternalLinkIcon/></a>: \u4E00\u5957\u7EDD\u4F73\u7684\u56FE\u6807\u5B57\u4F53\u5E93\u548C CSS \u6846\u67B6\u3002 <a href="https://fontawesome.com/docs/web/use-with/vue/" target="_blank" rel="noopener noreferrer">Vue<ExternalLinkIcon/></a>\u4E2D\u4F7F\u7528\u65B9\u6CD5\uFF0C\u7F51\u7AD9\u8BBF\u95EE\u9700\u8981\u68AF\u5B50\u3002</li>
<li><a href="https://github.com/intlify/vue-i18n-next" target="_blank" rel="noopener noreferrer">vue-i18n-next<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E vue3 \u7684 i18n \u63D2\u4EF6\u3002</li>
<li><a href="https://img.itclan.cn/#/help" target="_blank" rel="noopener noreferrer">\u5BA2\u6765\u56FE\u5E8A<ExternalLinkIcon/></a>:\u4E00\u4E2A\u56FE\u7247\u4E0A\u4F20\u5230 github \u56FE\u5E8A\u7684\u5DE5\u5177\u3002</li>
<li><a href="https://itclan.cn/" target="_blank" rel="noopener noreferrer">IT \u8D44\u6E90\u7F51<ExternalLinkIcon/></a>: IT \u8D44\u6E90\u7F51</li>
<li><a href="https://coder.itclan.cn/" target="_blank" rel="noopener noreferrer">\u7231\u5BA2\u6765\u535A\u5BA2<ExternalLinkIcon/></a>:\u4E00\u6B3E\u7EFC\u5408\u6027\u535A\u5BA2\u3002</li>
<li><a href="https://bosens-china.github.io/Typescript-manual/" target="_blank" rel="noopener noreferrer">TypeScript \u4E2D\u6587\u624B\u518C<ExternalLinkIcon/></a>: TypeScript \u4E2D\u6587\u624B\u518C</li>
<li><a href="https://qishaoxuan.github.io/css_tricks/" target="_blank" rel="noopener noreferrer">CSS Tricks<ExternalLinkIcon/></a>: \u4E00\u6B3E\u524D\u7AEF\u7279\u6548\u53CA\u5176 css \u6587\u6863\u3002</li>
<li><a href="https://vuepress-theme-hope.github.io/v2/zh/guide/" target="_blank" rel="noopener noreferrer">vuepress-theme-hope@2.X<ExternalLinkIcon/></a>: vuepress-theme-hope\u4E3B\u9898\u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">vuepress-plugin-hope<ExternalLinkIcon/></a>: vuepress-plugin-hope\u63D2\u4EF6\u5730\u5740\u3002</li>
<li><a href="https://mrhope.site/" target="_blank" rel="noopener noreferrer">vuepress-theme-hope<ExternalLinkIcon/></a>: vuepress-theme-home\u4E3B\u9898\u7F51\u7AD9\u793A\u4F8B\u5730\u5740\u3002</li>
</ul>
<h2 id="\u7CFB\u7EDF\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u7CFB\u7EDF\u7C7B" aria-hidden="true">#</a> \u7CFB\u7EDF\u7C7B</h2>
<ul>
<li><a href="https://vvbin.cn/next/#/login" target="_blank" rel="noopener noreferrer">vbenAdmin<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\uFF0C<a href="https://github.com/vbenjs/vue-vben-admin" target="_blank" rel="noopener noreferrer">github<ExternalLinkIcon/></a>\u4ED3\u5E93\u3002</li>
<li><a href="https://iczer.gitee.io/vue-antd-admin/#/login" target="_blank" rel="noopener noreferrer">Vue-Antd-Admin<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="http://boot3.jeecg.com/login?redirect=/dashboard/analysis" target="_blank" rel="noopener noreferrer">jeecgBoot<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="https://lyt-top.gitee.io/vue-next-admin-preview/#/login" target="_blank" rel="noopener noreferrer">vue-netx-admin<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="https://preview.pro.antdv.com/dashboard/workplace" target="_blank" rel="noopener noreferrer">ant-design-pro<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="https://admin.makeit.vip/start" target="_blank" rel="noopener noreferrer">admin-pro<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
</ul>
<h2 id="github-\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#github-\u4ED3\u5E93" aria-hidden="true">#</a> GitHub \u4ED3\u5E93</h2>
<ul>
<li><a href="https://github.com/bosens-China/Typescript-manual" target="_blank" rel="noopener noreferrer">TypeScript \u4E2D\u6587\u624B\u518C<ExternalLinkIcon/></a>: TypeScript \u4E2D\u6587\u624B\u518C\u4ED3\u5E93</li>
</ul>
<h2 id="\u4F18\u79C0\u535A\u5BA2\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u4F18\u79C0\u535A\u5BA2\u7C7B" aria-hidden="true">#</a> \u4F18\u79C0\u535A\u5BA2\u7C7B</h2>
<p>\u6B64\u6A21\u5757\u6536\u96C6\u4E86\u4E00\u4E9B\u4F18\u79C0\u7684\u535A\u4E3B\u94FE\u63A5\uFF0C\u539F\u521B\u6587\u7AE0\u591A\uFF0C\u6D89\u53CA\u8303\u56F4\u5E7F\uFF0C\u53EF\u4EE5\u76F8\u4E92\u501F\u9274\u5B66\u4E60\u3002</p>
<div class="cardListContainer"><div class="card-list">
        <a href="https://xdr630.blog.csdn.net/?type=blog" target="_blank" class="card-item row-3"
          style="background-color:rgb(165 216 243);color:#6854A1;"
        >
          <img src="https://avatar.csdnimg.cn/F/7/6/3_qq_41684621_1612151476.jpg" class="no-zoom">
          <div>
            <p class="name">\u516E\u52A8\u4EBA</p>
            <p class="desc">\u4E16\u95F4\u5473\u8DA3\u4EA6\u5982\u6B64\uFF0C\u4E07\u7269\u4E14\u53BB\u8F6E\u6D6E\u751F.</p>
          </div>
        </a>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u516E\u52A8\u4EBA
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//avatar.csdnimg.cn/F/7/6/3_qq_41684621_1612151476.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E16\u95F4\u5473\u8DA3\u4EA6\u5982\u6B64\uFF0C\u4E07\u7269\u4E14\u53BB\u8F6E\u6D6E\u751F.
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xdr630.blog.csdn.net/<span class="token punctuation">?</span>type=blog
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(165 216 243)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#6854A1'</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,date:"2022-02-12",deps:[],links:[],pathInferred:"/posts/other/internetResource.html",pathLocale:"/",permalink:null,routeMeta:{title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"},sfcBlocks:[],slug:"internetResource",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/internetResource.md",filePathRelative:"posts/other/internetResource.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/internetResource.html.vue",componentFilePathRelative:"pages/posts/other/internetResource.html.vue",componentFileChunkName:"v-a60cbc14",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/internetResource.html.js",dataFilePathRelative:"pages/posts/other/internetResource.html.js",dataFileChunkName:"v-a60cbc14",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/internetResource.html",htmlFilePathRelative:"posts/other/internetResource.html"},title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"},["/posts/other/internetResource","/posts/other/internetResource.md"]],["v-351c6704","/posts/other/walineServer.html",{_blog:{data:{key:"v-351c6704",path:"/posts/other/walineServer.html",title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",lang:"zh-CN",frontmatter:{title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",date:"2022-08-23T15:30:27.000Z",description:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002",lang:"zh-CN",tag:["waline"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208311312129.png",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/walineServer.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"}],["meta",{property:"og:description",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"waline"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002</p>
`,headers:[{level:2,title:"\u7B80\u8FF0",slug:"\u7B80\u8FF0",children:[]},{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[{level:3,title:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",slug:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",children:[{level:4,title:"\u65B9\u5F0F\u4E00\uFF1A",slug:"\u65B9\u5F0F\u4E00",children:[]},{level:4,title:"\u65B9\u6848\u4E8C\uFF1A",slug:"\u65B9\u6848\u4E8C",children:[]}]},{level:3,title:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",slug:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",children:[]},{level:3,title:"\u670D\u52A1\u5668\u90E8\u7F72",slug:"\u670D\u52A1\u5668\u90E8\u7F72",children:[]}]}],git:{updatedTime:1661925989e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/walineServer.md",readingTime:{minutes:6.05,words:1815},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/walineServer.html`},key:"v-351c6704",path:"/posts/other/walineServer.html",title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",lang:"zh-CN",frontmatter:{title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",date:"2022-08-23T15:30:27.000Z",description:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002",lang:"zh-CN",tag:["waline"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208311312129.png",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/walineServer.html"}],["meta",{property:"og:site_name",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"og:title",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"}],["meta",{property:"og:description",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-08-31T06:06:29.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"waline"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-08-31T06:06:29.000Z"}]]},excerpt:`<p>\u2003waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002</p>
`,headers:[{level:2,title:"\u7B80\u8FF0",slug:"\u7B80\u8FF0",children:[]},{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[{level:3,title:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",slug:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",children:[{level:4,title:"\u65B9\u5F0F\u4E00\uFF1A",slug:"\u65B9\u5F0F\u4E00",children:[]},{level:4,title:"\u65B9\u6848\u4E8C\uFF1A",slug:"\u65B9\u6848\u4E8C",children:[]}]},{level:3,title:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",slug:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",children:[]},{level:3,title:"\u670D\u52A1\u5668\u90E8\u7F72",slug:"\u670D\u52A1\u5668\u90E8\u7F72",children:[]}]}],content:`---
title: Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848
date: 2022-8-23 15:30:27
description: Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002
lang: zh-CN
tag:
  - waline
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208311312129.png
---

&emsp;waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002

<!-- more -->

## \u7B80\u8FF0

&emsp;waline \u4F5C\u4E3A valine \u7684\u52A0\u5F3A\u7248\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u652F\u6301\u591A\u79CD\u6570\u636E\u5E93\u548C\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\u6A21\u5F0F\uFF0C\u6570\u636E\u5B58\u50A8\u66F4\u52A0\u5B89\u5168\u3002waline \u9ED8\u8BA4\u6570\u636E\u5E93:[LeanCloud](https://console.leancloud.app/login)\uFF0C\`LeanCloud\`\u6709[\u56FD\u5185\u7248](https://console.leancloud.cn/login?from=%2Fapps)\u548C[\u56FD\u9645\u7248](https://console.leancloud.app/login?from=%2Fapps)2 \u4E2A\u7248\u672C\uFF0C\u56FD\u5185\u7248\u9700\u8981\u914D\u7F6E\u81EA\u5B9A\u4E49\u57DF\u540D\uFF0C\u56FD\u9645\u7248\u8BBF\u95EE\u5B58\u5728\u5F88\u9AD8\u5EF6\u8FDF\uFF0C\u5982\u679C\u4E0D\u8003\u8651\u6570\u636E\u5B89\u5168\u6027\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\`leancloud\`\u6570\u636E\u5E93\u3002\u9ED8\u8BA4\u90E8\u7F72\u65B9\u6848\uFF1A[Vercel](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample)\uFF0C\`Vercel\`\u662F\u4E00\u79CD\u514D\u8D39\u7684\u90E8\u7F72\u65B9\u6848\uFF0C\u90E8\u7F72\u4E5F\u6BD4\u8F83\u7B80\u5355\uFF0C\u6CE8\u518C\u767B\u5F55\u540E\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u6253\u5305\u7F16\u8BD1\u5373\u53EF(\u4F9D\u8D56 github \u4ED3\u5E93)\uFF0C\u4F46\u6700\u8FD1\`vercel\`\u597D\u50CF\u6302\u4E86\uFF0C\u6CA1\u6709\u68AF\u5B50\u6839\u672C\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u6240\u6709\u535A\u4E3B\u653E\u5F03\u4E86\u9ED8\u8BA4\u90E8\u7F72\u65B9\u5F0F\uFF0C\u91C7\u7528\`waline\`\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u65B9\u6848\u3002\u66F4\u591A\u5176\u4ED6\u90E8\u7F72\u65B9\u6848\uFF0C\u8BF7\u53C2\u8003[waline \u5B98\u7F51](https://waline.js.org/)\u3002

:::warning
\`waline\`\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u9700\u8981\u5177\u5907\u4EE5\u4E0B\u6761\u4EF6\uFF1A

1\u3001\u4E00\u53F0\u4E91\u670D\u52A1\u5668\u548C\u5B89\u88C5\u597D\u7684\u6570\u636E\u5E93(\u4F8B\u5982\uFF1AMySQL)\uFF0C\u5176\u4ED6\u6570\u636E\u5E93\u53C2\u8003[\u591A\u6570\u636E\u6E90\u53C2\u8003](https://waline.js.org/guide/server/databases.html)\u3002

2\u3001\`Nodejs\`\u73AF\u5883\u5B89\u88C5\u914D\u7F6E\uFF0C\u9879\u76EE\u90E8\u7F72\u4F9D\u8D56 Node \u73AF\u5883\uFF0C\u9700\u8981\u63D0\u524D\u5B89\u88C5\u597D\u73AF\u5883\u3002
:::

## \u51C6\u5907\u5DE5\u4F5C

&emsp;\`waline\`\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u5F88\u7B80\u5355\uFF0C\u53EF\u4EE5\u53C2\u8003[waline \u5B98\u7F51](https://waline.js.org/guide/server/vps-deploy.html)\u72EC\u7ACB\u90E8\u7F72\uFF0C\u5B98\u7F51\u63CF\u8FF0\u6BD4\u8F83\u7B80\u5355\uFF0C\u4EC5\u4F9B\u53C2\u8003\u3002\u672C\u6587\u72EC\u7ACB\u90E8\u7F72\u53EA\u9700\u8981 3 \u5927\u6B65\u9AA4\uFF1A\`\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\`\uFF0C\`\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E\`\u548C\`\u670D\u52A1\u5668\u90E8\u7F72\`\u3002\u4E0B\u9762\u8BB2\u8FF0\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\u3002

### \u73AF\u5883\u53D8\u91CF\u914D\u7F6E

&emsp;\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u6307\uFF1A\u914D\u7F6E\`waline\`\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\u3002\`waline\`\u91C7\u7528\u73AF\u5883\u53D8\u91CF\u7684\u65B9\u5F0F\u8BFB\u53D6\u914D\u7F6E\u4FE1\u606F\uFF0C\u5185\u7F6E\u4E86\u591A\u79CD\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u5177\u4F53\u53C2\u8003[\u591A\u6570\u636E\u6E90\u73AF\u5883\u53D8\u91CF](https://waline.js.org/guide/server/databases.html)\u3002\u6211\u4EEC\u53EA\u9700\u8981\u6309\u7167\u5185\u7F6E\u914D\u7F6E\u9879\u8FDB\u884C\u914D\u7F6E\uFF0C\u5C31\u53EF\u4EE5\u66F4\u6362\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u3002\u4E0B\u9762\u4EE5\`MySQL\`\u4E3A\u4F8B\uFF0C\u4F7F\u7528\u65F6\u8BF7\u5148\u5BFC\u5165 [waline.sql](https://github.com/walinejs/waline/blob/main/assets/waline.sql) \u4EE5\u5B8C\u6210\u8868\u548C\u8868\u7ED3\u6784\u7684\u521B\u5EFA\uFF0C\u4E4B\u540E\u5728\u9879\u76EE\u4E2D\u914D\u7F6E\u5982\u4E0B\u73AF\u5883\u53D8\u91CF\uFF1A
| \u73AF\u5883\u53D8\u91CF\u540D\u79F0 | \u5FC5\u586B | \u9ED8\u8BA4\u503C | \u5907\u6CE8 |
| ---------------- | ---- | --------- | ----------------------------- |
| MYSQL*HOST | | 127.0.0.1 | MySQL \u670D\u52A1\u7684\u5730\u5740 |
| MYSQL_PORT | | 3306 | MySQL \u670D\u52A1\u7684\u7AEF\u53E3 |
| MYSQL_DB | \u2705 | | MySQL \u6570\u636E\u5E93\u5E93\u540D |
| MYSQL_USER | \u2705 | | MySQL \u6570\u636E\u5E93\u7684\u7528\u6237\u540D |
| MYSQL_PASSWORD | \u2705 | | MySQL \u6570\u636E\u5E93\u7684\u5BC6\u7801 |
| MYSQL_PREFIX | | wl* | MySQL \u6570\u636E\u8868\u7684\u8868\u524D\u7F00 |
| MYSQL_CHARSET | | utf8mb4 | MySQL \u6570\u636E\u8868\u7684\u5B57\u7B26\u96C6 |
| MYSQL_SSL | | | \u662F\u5426\u4F7F\u7528 SSL MYSQL \u8FDE\u63A5\u6570\u636E\u5E93 |

&emsp;\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u53EF\u4EE5\u53EA\u914D\u7F6E\u5FC5\u586B\u9879\uFF0C\u5176\u4ED6\u9009\u9879\u91C7\u7528\u9ED8\u8BA4\u503C\u5373\u53EF\u3002\u5176\u4ED6\u6570\u636E\u5E93\u914D\u7F6E\u4E5F\u4E00\u6837\uFF0C\u53EA\u662F\u914D\u7F6E\u9879\u5B58\u5728\u5DEE\u5F02\u800C\u5DF2\uFF0C\u5F88\u7B80\u5355\u3002\u73AF\u5883\u53D8\u91CF\u4F7F\u7528\u6709\u4EE5\u4E0B 2 \u79CD\u65B9\u5F0F\uFF1A

#### \u65B9\u5F0F\u4E00\uFF1A

&emsp;\u5982\u679C\u4F60\u7684\u670D\u52A1\u5668\u662F linux \u64CD\u4F5C\u7CFB\u7EDF\u7684\u8BDD\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\u5C5E\u4E3B\u76EE\u5F55\u4E0B\u7684.bashrc \u6587\u4EF6\uFF0C\u5E76\u5199\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A

\`\`\`bash
export MYSQL_HOST=12.12.12.12
export MYSQL_PORT=3306
export MYSQL_DB=waline
#\u4EE5\u8FD9\u4E09\u4E2A\u4E3A\u4F8B\uFF0C\u66F4\u591A\u8BF7\u5BF9\u7167\u53C2\u6570\u8868\u4E00\u4E00\u586B\u5199\u5373\u53EF
\`\`\`

&emsp;\u586B\u5199\u5B8C\u6210\u540E\u4FDD\u5B58\u6587\u4EF6\u5E76\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5237\u65B0\uFF1A

\`\`\`bash
source ~/.bashrc
\`\`\`

&emsp;\u8BE5\u65B9\u6CD5\u662F\u76F4\u63A5\u5BFC\u51FA\u7CFB\u7EDF\u7EA7\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u4F7F\`waline\` \u670D\u52A1\u7AEF\u53EF\u4EE5\u4ECE\`process.env\`\u5BF9\u8C61\u4E2D\u987A\u5229\u8BFB\u53D6\u5230\uFF0C\u800C\u8FD9\u6837\u5B9A\u4E49\u7684\u5168\u5C40\u73AF\u5883\u53D8\u91CF\u5B58\u5728\u4E00\u4E2A\u5F0A\u7AEF\uFF0C\u5C31\u662F\u4F1A\u6C61\u67D3\u5230\u5168\u5C40\uFF0C\u53EF\u80FD\u4F1A\u5E72\u9884\u5230\u5176\u4ED6\u9879\u76EE\uFF0C\u800C\u4E14 windows \u4E0E linux \u7684\u914D\u7F6E\u65B9\u6CD5\u5404\u4E0D\u76F8\u540C\u3002\u6240\u4EE5\u8FD9\u91CC\u5E76\u4E0D\u63A8\u8350\uFF0C\u800C\u662F\u66F4\u63A8\u8350\u4F7F\u7528\u65B9\u6848\u4E8C

#### \u65B9\u6848\u4E8C\uFF1A

&emsp;\u6211\u4EEC\u9700\u8981\u4E86\u89E3\u7684\u662F\uFF0C\u5728\`nodejs\` \u4E2D\uFF0C\u901A\u8FC7 \`process.env\` \u5BF9\u8C61\u53EF\u4EE5\u62FF\u5230\u5168\u5C40\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u800C\u6709\u8FD9\u4E48\u4E00\u4E2A\u7B2C\u4E09\u65B9\u5E93\uFF0C\u53EF\u4EE5\u505A\u5230\u65E2\u4E0D\u6C61\u67D3\u5168\u5C40\u73AF\u5883\u53D8\u91CF\uFF0C\u4E5F\u80FD\u5B9E\u73B0\u4EE3\u7801\u4E0E\u914D\u7F6E\u5206\u5F00\u7BA1\u7406\uFF1Adotenv\u3002\u8BE5\u5E93\u652F\u6301\u5C06\u73AF\u5883\u53D8\u91CF\u5199\u5165\u5230\u4E00\u4E2A\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u7684.env \u6587\u4EF6\u4E2D\uFF0C\u5E76\u5728\u4EE3\u7801\u4E2D\u901A\u8FC7\`dotenv.config()\`\u65B9\u6CD5\u5C06\u53D8\u91CF\u5408\u5E76\u81F3\`process.env\`\u5BF9\u8C61\u4E2D\uFF0C\u6BCF\u4E2A\u9879\u76EE\u7684.env \u6587\u4EF6\u90FD\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u4F5C\u7528\u57DF\uFF0C\u5728\u9879\u76EE\u7ED3\u675F\u8FD0\u884C\u65F6\uFF0C\`.env \`\u6587\u4EF6\u4E2D\u7684\u5168\u5C40\u53D8\u91CF\u5C06\u88AB\u9500\u6BC1\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u7F16\u5199\u4E00\u4E2A javascript \u811A\u672C\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u8C03\u7528\`dotenv.config()\`\u65B9\u6CD5\u5199\u5165\u5168\u5C40\u53D8\u91CF\uFF0C\u4E4B\u540E\u5F15\u5165\u5E76\u6267\u884C\`@waline/vercel/vanilla.js\` \u8FD9\u4E2A\u6587\u4EF6\u5373\u53EF\u3002

### \u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E

&emsp;\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E\uFF1A\u6784\u5EFA\u9879\u76EE\u76EE\u5F55\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5728\u670D\u52A1\u5668\u4E2D\u642D\u5EFA\uFF0C\u4E5F\u53EF\u4EE5\u5728\u672C\u5730\u521B\u5EFA\u597D\u9879\u76EE\uFF0C\u518D\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u3002\u4E0B\u9762\u8BB2\u8FF0\u672C\u5730\u9879\u76EE\u6784\u5EFA\u65B9\u5F0F\uFF0C\u9879\u76EE\u540D\u79F0\u4E3A\uFF1A\`waline-server\`\u4E3A\u4F8B\u3002

- \u521B\u5EFA\u9879\u76EE\u76EE\u5F55

\`\`\`bash
mkdir waline-server
\`\`\`

- \u521D\u59CB\u5316\u9879\u76EE

\`\`\`bash
npm init -y
\`\`\`

- \u5B89\u88C5\u4F9D\u8D56

\`\`\`bash
# dotenv\u73AF\u5883\u53D8\u91CF\u4F9D\u8D56
npm install dotenv
# waline \u670D\u52A1\u5668\u7AEF\u4F9D\u8D56
npm install @waline/vercel

\`\`\`

- \u521B\u5EFA\u73AF\u5883\u53D8\u91CF\`.env\`\u6587\u4EF6,\u5199\u5165\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u9879

\`\`\`bash
# \u6570\u636E\u5E93\u8FDE\u63A5\u5730\u5740
MYSQL_HOST=127.0.0.1
# \u6570\u636E\u5E93\u8FDE\u63A5\u7AEF\u53E3\u53F7
MYSQL_PORT=3306
# \u6570\u636E\u5E93\u540D
MYSQL_DB=waline
# \u8FDE\u63A5\u6570\u636E\u5E93\u7528\u6237\u540D
MYSQL_USER=root
# \u8FDE\u63A5\u5BC6\u7801
MYSQL_PASSWORD=thbbx09
\`\`\`

- \u521B\u5EFA\u7A0B\u5E8F\u5165\u53E3\u6587\u4EF6\`main.js\`

\`\`\`js
// \u5F15\u5165dotenv
const dotenv = require('dotenv')
// \u8C03\u7528config\u65B9\u6CD5\u5408\u5E76.env\u73AF\u5883\u53D8\u91CF
dotenv.config()
// \u5F15\u5165\u5E76\u6267\u884C\u8BE5\u6587\u4EF6
require('@waline/vercel/vanilla.js')
\`\`\`

- \`package.json\`\u914D\u7F6E\`script\`

\`\`\`js
"scripts": {
    "start": "node ./main.js"
  }
\`\`\`

&emsp;\u81F3\u6B64\uFF0C\u9879\u76EE\u6784\u5EFA\u5B8C\u6210\uFF0C\u53EF\u4EE5\u5728\u672C\u5730\u542F\u52A8\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u9ED8\u8BA4\u8BBF\u95EE\u5730\u5740\uFF1A\`http://127.0.0.1:8360\`,\u9ED8\u8BA4\u7AEF\u53E3\uFF1A\`8360\`\u3002\u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B\uFF0C\u8FDB\u884C\u90E8\u7F72\u3002\u9879\u76EE\u4EE3\u7801\u83B7\u53D6\u65B9\u5F0F\uFF1A

\`\`\`bash
git clone https://github.com/AnyFork/waline-server.git
\`\`\`

### \u670D\u52A1\u5668\u90E8\u7F72

&emsp;\u670D\u52A1\u5668\u90E8\u7F72\u5206\u4E3A 2 \u4E2A\u6B65\u9AA4\uFF0C1 \u4E0A\u4F20\u4EE3\u7801\u81F3\u670D\u52A1\u5668\u5E76\u8FD0\u884C\uFF1B 2 \u914D\u7F6E nginx \u53CD\u5411\u4EE3\u7406\u3002

- \u9879\u76EE\u542F\u52A8
  \u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u9884\u8BBE\u76EE\u5F55\uFF0C\u7136\u540E\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A

\`\`\`bash
# \u5B89\u88C5\u4F9D\u8D56
npm install
# \u9879\u76EE\u542F\u52A8
npm run start
\`\`\`

- Nginx \u53CD\u5411\u4EE3\u7406
  \u5982\u679C\u4F60\u4E0D\u60F3\u5E26\u7AEF\u53E3\u8BBF\u95EE\u7684\u8BDD\uFF0C\u53EF\u4EE5\u589E\u52A0 Nginx 80 \u548C 443 \u7AEF\u53E3\u7684\u53CD\u4EE3\u3002\u53EF\u53C2\u8003\u5982\u4E0B\u914D\u7F6E:

\`\`\`bash
server
{
  listen 80;
  listen 443 ssl http2;
  server_name your.domain.server.name;
  root /www/wwwroot/your.domain.server.name;
  if ($server_port !~ 443){
    rewrite ^(/.*)$ https://$host$1 permanent;
  }

  # SSL setting
  ssl_certificate fullchain.pem;
  ssl_certificate_key privkey.pem;
  ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
  ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
  ssl_prefer_server_ciphers on;
  ssl_session_cache shared:SSL:10m;
  ssl_session_timeout 10m;
  add_header Strict-Transport-Security "max-age=31536000";

  # proxy to 8360
  location / {
    proxy_pass http://127.0.0.1:8360;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header REMOTE-HOST $remote_addr;
    add_header X-Cache $upstream_cache_status;
    # cache
    add_header Cache-Control no-cache;
    expires 12h;
  }
}
\`\`\`
`,contentRendered:`<p>\u2003waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002</p>
<!-- more -->
<h2 id="\u7B80\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u7B80\u8FF0" aria-hidden="true">#</a> \u7B80\u8FF0</h2>
<p>\u2003waline \u4F5C\u4E3A valine \u7684\u52A0\u5F3A\u7248\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u652F\u6301\u591A\u79CD\u6570\u636E\u5E93\u548C\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\u6A21\u5F0F\uFF0C\u6570\u636E\u5B58\u50A8\u66F4\u52A0\u5B89\u5168\u3002waline \u9ED8\u8BA4\u6570\u636E\u5E93:<a href="https://console.leancloud.app/login" target="_blank" rel="noopener noreferrer">LeanCloud<ExternalLinkIcon/></a>\uFF0C<code v-pre>LeanCloud</code>\u6709<a href="https://console.leancloud.cn/login?from=%2Fapps" target="_blank" rel="noopener noreferrer">\u56FD\u5185\u7248<ExternalLinkIcon/></a>\u548C<a href="https://console.leancloud.app/login?from=%2Fapps" target="_blank" rel="noopener noreferrer">\u56FD\u9645\u7248<ExternalLinkIcon/></a>2 \u4E2A\u7248\u672C\uFF0C\u56FD\u5185\u7248\u9700\u8981\u914D\u7F6E\u81EA\u5B9A\u4E49\u57DF\u540D\uFF0C\u56FD\u9645\u7248\u8BBF\u95EE\u5B58\u5728\u5F88\u9AD8\u5EF6\u8FDF\uFF0C\u5982\u679C\u4E0D\u8003\u8651\u6570\u636E\u5B89\u5168\u6027\uFF0C\u53EF\u4EE5\u5C1D\u8BD5<code v-pre>leancloud</code>\u6570\u636E\u5E93\u3002\u9ED8\u8BA4\u90E8\u7F72\u65B9\u6848\uFF1A<a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample" target="_blank" rel="noopener noreferrer">Vercel<ExternalLinkIcon/></a>\uFF0C<code v-pre>Vercel</code>\u662F\u4E00\u79CD\u514D\u8D39\u7684\u90E8\u7F72\u65B9\u6848\uFF0C\u90E8\u7F72\u4E5F\u6BD4\u8F83\u7B80\u5355\uFF0C\u6CE8\u518C\u767B\u5F55\u540E\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u6253\u5305\u7F16\u8BD1\u5373\u53EF(\u4F9D\u8D56 github \u4ED3\u5E93)\uFF0C\u4F46\u6700\u8FD1<code v-pre>vercel</code>\u597D\u50CF\u6302\u4E86\uFF0C\u6CA1\u6709\u68AF\u5B50\u6839\u672C\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u6240\u6709\u535A\u4E3B\u653E\u5F03\u4E86\u9ED8\u8BA4\u90E8\u7F72\u65B9\u5F0F\uFF0C\u91C7\u7528<code v-pre>waline</code>\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u65B9\u6848\u3002\u66F4\u591A\u5176\u4ED6\u90E8\u7F72\u65B9\u6848\uFF0C\u8BF7\u53C2\u8003<a href="https://waline.js.org/" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u3002</p>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<p><code v-pre>waline</code>\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u9700\u8981\u5177\u5907\u4EE5\u4E0B\u6761\u4EF6\uFF1A</p>
<p>1\u3001\u4E00\u53F0\u4E91\u670D\u52A1\u5668\u548C\u5B89\u88C5\u597D\u7684\u6570\u636E\u5E93(\u4F8B\u5982\uFF1AMySQL)\uFF0C\u5176\u4ED6\u6570\u636E\u5E93\u53C2\u8003<a href="https://waline.js.org/guide/server/databases.html" target="_blank" rel="noopener noreferrer">\u591A\u6570\u636E\u6E90\u53C2\u8003<ExternalLinkIcon/></a>\u3002</p>
<p>2\u3001<code v-pre>Nodejs</code>\u73AF\u5883\u5B89\u88C5\u914D\u7F6E\uFF0C\u9879\u76EE\u90E8\u7F72\u4F9D\u8D56 Node \u73AF\u5883\uFF0C\u9700\u8981\u63D0\u524D\u5B89\u88C5\u597D\u73AF\u5883\u3002</p>
</div>
<h2 id="\u51C6\u5907\u5DE5\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u5DE5\u4F5C" aria-hidden="true">#</a> \u51C6\u5907\u5DE5\u4F5C</h2>
<p>\u2003<code v-pre>waline</code>\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u5F88\u7B80\u5355\uFF0C\u53EF\u4EE5\u53C2\u8003<a href="https://waline.js.org/guide/server/vps-deploy.html" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u72EC\u7ACB\u90E8\u7F72\uFF0C\u5B98\u7F51\u63CF\u8FF0\u6BD4\u8F83\u7B80\u5355\uFF0C\u4EC5\u4F9B\u53C2\u8003\u3002\u672C\u6587\u72EC\u7ACB\u90E8\u7F72\u53EA\u9700\u8981 3 \u5927\u6B65\u9AA4\uFF1A<code v-pre>\u73AF\u5883\u53D8\u91CF\u914D\u7F6E</code>\uFF0C<code v-pre>\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E</code>\u548C<code v-pre>\u670D\u52A1\u5668\u90E8\u7F72</code>\u3002\u4E0B\u9762\u8BB2\u8FF0\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\u3002</p>
<h3 id="\u73AF\u5883\u53D8\u91CF\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u53D8\u91CF\u914D\u7F6E" aria-hidden="true">#</a> \u73AF\u5883\u53D8\u91CF\u914D\u7F6E</h3>
<p>\u2003\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u6307\uFF1A\u914D\u7F6E<code v-pre>waline</code>\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\u3002<code v-pre>waline</code>\u91C7\u7528\u73AF\u5883\u53D8\u91CF\u7684\u65B9\u5F0F\u8BFB\u53D6\u914D\u7F6E\u4FE1\u606F\uFF0C\u5185\u7F6E\u4E86\u591A\u79CD\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u5177\u4F53\u53C2\u8003<a href="https://waline.js.org/guide/server/databases.html" target="_blank" rel="noopener noreferrer">\u591A\u6570\u636E\u6E90\u73AF\u5883\u53D8\u91CF<ExternalLinkIcon/></a>\u3002\u6211\u4EEC\u53EA\u9700\u8981\u6309\u7167\u5185\u7F6E\u914D\u7F6E\u9879\u8FDB\u884C\u914D\u7F6E\uFF0C\u5C31\u53EF\u4EE5\u66F4\u6362\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u3002\u4E0B\u9762\u4EE5<code v-pre>MySQL</code>\u4E3A\u4F8B\uFF0C\u4F7F\u7528\u65F6\u8BF7\u5148\u5BFC\u5165 <a href="https://github.com/walinejs/waline/blob/main/assets/waline.sql" target="_blank" rel="noopener noreferrer">waline.sql<ExternalLinkIcon/></a> \u4EE5\u5B8C\u6210\u8868\u548C\u8868\u7ED3\u6784\u7684\u521B\u5EFA\uFF0C\u4E4B\u540E\u5728\u9879\u76EE\u4E2D\u914D\u7F6E\u5982\u4E0B\u73AF\u5883\u53D8\u91CF\uFF1A</p>
<table>
<thead>
<tr>
<th>\u73AF\u5883\u53D8\u91CF\u540D\u79F0</th>
<th>\u5FC5\u586B</th>
<th>\u9ED8\u8BA4\u503C</th>
<th>\u5907\u6CE8</th>
</tr>
</thead>
<tbody>
<tr>
<td>MYSQL*HOST</td>
<td></td>
<td>127.0.0.1</td>
<td>MySQL \u670D\u52A1\u7684\u5730\u5740</td>
</tr>
<tr>
<td>MYSQL_PORT</td>
<td></td>
<td>3306</td>
<td>MySQL \u670D\u52A1\u7684\u7AEF\u53E3</td>
</tr>
<tr>
<td>MYSQL_DB</td>
<td>\u2705</td>
<td></td>
<td>MySQL \u6570\u636E\u5E93\u5E93\u540D</td>
</tr>
<tr>
<td>MYSQL_USER</td>
<td>\u2705</td>
<td></td>
<td>MySQL \u6570\u636E\u5E93\u7684\u7528\u6237\u540D</td>
</tr>
<tr>
<td>MYSQL_PASSWORD</td>
<td>\u2705</td>
<td></td>
<td>MySQL \u6570\u636E\u5E93\u7684\u5BC6\u7801</td>
</tr>
<tr>
<td>MYSQL_PREFIX</td>
<td></td>
<td>wl*</td>
<td>MySQL \u6570\u636E\u8868\u7684\u8868\u524D\u7F00</td>
</tr>
<tr>
<td>MYSQL_CHARSET</td>
<td></td>
<td>utf8mb4</td>
<td>MySQL \u6570\u636E\u8868\u7684\u5B57\u7B26\u96C6</td>
</tr>
<tr>
<td>MYSQL_SSL</td>
<td></td>
<td></td>
<td>\u662F\u5426\u4F7F\u7528 SSL MYSQL \u8FDE\u63A5\u6570\u636E\u5E93</td>
</tr>
</tbody>
</table>
<p>\u2003\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u53EF\u4EE5\u53EA\u914D\u7F6E\u5FC5\u586B\u9879\uFF0C\u5176\u4ED6\u9009\u9879\u91C7\u7528\u9ED8\u8BA4\u503C\u5373\u53EF\u3002\u5176\u4ED6\u6570\u636E\u5E93\u914D\u7F6E\u4E5F\u4E00\u6837\uFF0C\u53EA\u662F\u914D\u7F6E\u9879\u5B58\u5728\u5DEE\u5F02\u800C\u5DF2\uFF0C\u5F88\u7B80\u5355\u3002\u73AF\u5883\u53D8\u91CF\u4F7F\u7528\u6709\u4EE5\u4E0B 2 \u79CD\u65B9\u5F0F\uFF1A</p>
<h4 id="\u65B9\u5F0F\u4E00" tabindex="-1"><a class="header-anchor" href="#\u65B9\u5F0F\u4E00" aria-hidden="true">#</a> \u65B9\u5F0F\u4E00\uFF1A</h4>
<p>\u2003\u5982\u679C\u4F60\u7684\u670D\u52A1\u5668\u662F linux \u64CD\u4F5C\u7CFB\u7EDF\u7684\u8BDD\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\u5C5E\u4E3B\u76EE\u5F55\u4E0B\u7684.bashrc \u6587\u4EF6\uFF0C\u5E76\u5199\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">MYSQL_HOST</span><span class="token operator">=</span><span class="token number">12.12</span>.12.12
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MYSQL_PORT</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MYSQL_DB</span><span class="token operator">=</span>waline
<span class="token comment">#\u4EE5\u8FD9\u4E09\u4E2A\u4E3A\u4F8B\uFF0C\u66F4\u591A\u8BF7\u5BF9\u7167\u53C2\u6570\u8868\u4E00\u4E00\u586B\u5199\u5373\u53EF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u2003\u586B\u5199\u5B8C\u6210\u540E\u4FDD\u5B58\u6587\u4EF6\u5E76\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5237\u65B0\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">source</span> ~/.bashrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2003\u8BE5\u65B9\u6CD5\u662F\u76F4\u63A5\u5BFC\u51FA\u7CFB\u7EDF\u7EA7\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u4F7F<code v-pre>waline</code> \u670D\u52A1\u7AEF\u53EF\u4EE5\u4ECE<code v-pre>process.env</code>\u5BF9\u8C61\u4E2D\u987A\u5229\u8BFB\u53D6\u5230\uFF0C\u800C\u8FD9\u6837\u5B9A\u4E49\u7684\u5168\u5C40\u73AF\u5883\u53D8\u91CF\u5B58\u5728\u4E00\u4E2A\u5F0A\u7AEF\uFF0C\u5C31\u662F\u4F1A\u6C61\u67D3\u5230\u5168\u5C40\uFF0C\u53EF\u80FD\u4F1A\u5E72\u9884\u5230\u5176\u4ED6\u9879\u76EE\uFF0C\u800C\u4E14 windows \u4E0E linux \u7684\u914D\u7F6E\u65B9\u6CD5\u5404\u4E0D\u76F8\u540C\u3002\u6240\u4EE5\u8FD9\u91CC\u5E76\u4E0D\u63A8\u8350\uFF0C\u800C\u662F\u66F4\u63A8\u8350\u4F7F\u7528\u65B9\u6848\u4E8C</p>
<h4 id="\u65B9\u6848\u4E8C" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6848\u4E8C" aria-hidden="true">#</a> \u65B9\u6848\u4E8C\uFF1A</h4>
<p>\u2003\u6211\u4EEC\u9700\u8981\u4E86\u89E3\u7684\u662F\uFF0C\u5728<code v-pre>nodejs</code> \u4E2D\uFF0C\u901A\u8FC7 <code v-pre>process.env</code> \u5BF9\u8C61\u53EF\u4EE5\u62FF\u5230\u5168\u5C40\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u800C\u6709\u8FD9\u4E48\u4E00\u4E2A\u7B2C\u4E09\u65B9\u5E93\uFF0C\u53EF\u4EE5\u505A\u5230\u65E2\u4E0D\u6C61\u67D3\u5168\u5C40\u73AF\u5883\u53D8\u91CF\uFF0C\u4E5F\u80FD\u5B9E\u73B0\u4EE3\u7801\u4E0E\u914D\u7F6E\u5206\u5F00\u7BA1\u7406\uFF1Adotenv\u3002\u8BE5\u5E93\u652F\u6301\u5C06\u73AF\u5883\u53D8\u91CF\u5199\u5165\u5230\u4E00\u4E2A\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u7684.env \u6587\u4EF6\u4E2D\uFF0C\u5E76\u5728\u4EE3\u7801\u4E2D\u901A\u8FC7<code v-pre>dotenv.config()</code>\u65B9\u6CD5\u5C06\u53D8\u91CF\u5408\u5E76\u81F3<code v-pre>process.env</code>\u5BF9\u8C61\u4E2D\uFF0C\u6BCF\u4E2A\u9879\u76EE\u7684.env \u6587\u4EF6\u90FD\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u4F5C\u7528\u57DF\uFF0C\u5728\u9879\u76EE\u7ED3\u675F\u8FD0\u884C\u65F6\uFF0C<code v-pre>.env </code>\u6587\u4EF6\u4E2D\u7684\u5168\u5C40\u53D8\u91CF\u5C06\u88AB\u9500\u6BC1\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u7F16\u5199\u4E00\u4E2A javascript \u811A\u672C\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u8C03\u7528<code v-pre>dotenv.config()</code>\u65B9\u6CD5\u5199\u5165\u5168\u5C40\u53D8\u91CF\uFF0C\u4E4B\u540E\u5F15\u5165\u5E76\u6267\u884C<code v-pre>@waline/vercel/vanilla.js</code> \u8FD9\u4E2A\u6587\u4EF6\u5373\u53EF\u3002</p>
<h3 id="\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E" aria-hidden="true">#</a> \u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E</h3>
<p>\u2003\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E\uFF1A\u6784\u5EFA\u9879\u76EE\u76EE\u5F55\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5728\u670D\u52A1\u5668\u4E2D\u642D\u5EFA\uFF0C\u4E5F\u53EF\u4EE5\u5728\u672C\u5730\u521B\u5EFA\u597D\u9879\u76EE\uFF0C\u518D\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u3002\u4E0B\u9762\u8BB2\u8FF0\u672C\u5730\u9879\u76EE\u6784\u5EFA\u65B9\u5F0F\uFF0C\u9879\u76EE\u540D\u79F0\u4E3A\uFF1A<code v-pre>waline-server</code>\u4E3A\u4F8B\u3002</p>
<ul>
<li>\u521B\u5EFA\u9879\u76EE\u76EE\u5F55</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">mkdir</span> waline-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u521D\u59CB\u5316\u9879\u76EE</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> init <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># dotenv\u73AF\u5883\u53D8\u91CF\u4F9D\u8D56</span>
<span class="token function">npm</span> <span class="token function">install</span> dotenv
<span class="token comment"># waline \u670D\u52A1\u5668\u7AEF\u4F9D\u8D56</span>
<span class="token function">npm</span> <span class="token function">install</span> @waline/vercel

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521B\u5EFA\u73AF\u5883\u53D8\u91CF<code v-pre>.env</code>\u6587\u4EF6,\u5199\u5165\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u9879</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u6570\u636E\u5E93\u8FDE\u63A5\u5730\u5740</span>
<span class="token assign-left variable">MYSQL_HOST</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token comment"># \u6570\u636E\u5E93\u8FDE\u63A5\u7AEF\u53E3\u53F7</span>
<span class="token assign-left variable">MYSQL_PORT</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token comment"># \u6570\u636E\u5E93\u540D</span>
<span class="token assign-left variable">MYSQL_DB</span><span class="token operator">=</span>waline
<span class="token comment"># \u8FDE\u63A5\u6570\u636E\u5E93\u7528\u6237\u540D</span>
<span class="token assign-left variable">MYSQL_USER</span><span class="token operator">=</span>root
<span class="token comment"># \u8FDE\u63A5\u5BC6\u7801</span>
<span class="token assign-left variable">MYSQL_PASSWORD</span><span class="token operator">=</span>thbbx09
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521B\u5EFA\u7A0B\u5E8F\u5165\u53E3\u6587\u4EF6<code v-pre>main.js</code></li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// \u5F15\u5165dotenv</span>
<span class="token keyword">const</span> dotenv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span>
<span class="token comment">// \u8C03\u7528config\u65B9\u6CD5\u5408\u5E76.env\u73AF\u5883\u53D8\u91CF</span>
dotenv<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// \u5F15\u5165\u5E76\u6267\u884C\u8BE5\u6587\u4EF6</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@waline/vercel/vanilla.js'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><code v-pre>package.json</code>\u914D\u7F6E<code v-pre>script</code></li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"start"</span><span class="token operator">:</span> <span class="token string">"node ./main.js"</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u2003\u81F3\u6B64\uFF0C\u9879\u76EE\u6784\u5EFA\u5B8C\u6210\uFF0C\u53EF\u4EE5\u5728\u672C\u5730\u542F\u52A8\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u9ED8\u8BA4\u8BBF\u95EE\u5730\u5740\uFF1A<code v-pre>http://127.0.0.1:8360</code>,\u9ED8\u8BA4\u7AEF\u53E3\uFF1A<code v-pre>8360</code>\u3002\u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B\uFF0C\u8FDB\u884C\u90E8\u7F72\u3002\u9879\u76EE\u4EE3\u7801\u83B7\u53D6\u65B9\u5F0F\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/AnyFork/waline-server.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u670D\u52A1\u5668\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u5668\u90E8\u7F72" aria-hidden="true">#</a> \u670D\u52A1\u5668\u90E8\u7F72</h3>
<p>\u2003\u670D\u52A1\u5668\u90E8\u7F72\u5206\u4E3A 2 \u4E2A\u6B65\u9AA4\uFF0C1 \u4E0A\u4F20\u4EE3\u7801\u81F3\u670D\u52A1\u5668\u5E76\u8FD0\u884C\uFF1B 2 \u914D\u7F6E nginx \u53CD\u5411\u4EE3\u7406\u3002</p>
<ul>
<li>\u9879\u76EE\u542F\u52A8
\u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u9884\u8BBE\u76EE\u5F55\uFF0C\u7136\u540E\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u5B89\u88C5\u4F9D\u8D56</span>
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token comment"># \u9879\u76EE\u542F\u52A8</span>
<span class="token function">npm</span> run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>Nginx \u53CD\u5411\u4EE3\u7406
\u5982\u679C\u4F60\u4E0D\u60F3\u5E26\u7AEF\u53E3\u8BBF\u95EE\u7684\u8BDD\uFF0C\u53EF\u4EE5\u589E\u52A0 Nginx 80 \u548C 443 \u7AEF\u53E3\u7684\u53CD\u4EE3\u3002\u53EF\u53C2\u8003\u5982\u4E0B\u914D\u7F6E:</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>server
<span class="token punctuation">{</span>
  listen <span class="token number">80</span><span class="token punctuation">;</span>
  listen <span class="token number">443</span> ssl http2<span class="token punctuation">;</span>
  server_name your.domain.server.name<span class="token punctuation">;</span>
  root /www/wwwroot/your.domain.server.name<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$server_port</span> <span class="token operator">!</span>~ <span class="token number">443</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    rewrite ^<span class="token punctuation">(</span>/.*<span class="token punctuation">)</span>$ https://<span class="token variable">$host</span><span class="token variable">$1</span> permanent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment"># SSL setting</span>
  ssl_certificate fullchain.pem<span class="token punctuation">;</span>
  ssl_certificate_key privkey.pem<span class="token punctuation">;</span>
  ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3<span class="token punctuation">;</span>
  ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:<span class="token operator">!</span>MD5<span class="token punctuation">;</span>
  ssl_prefer_server_ciphers on<span class="token punctuation">;</span>
  ssl_session_cache shared:SSL:10m<span class="token punctuation">;</span>
  ssl_session_timeout 10m<span class="token punctuation">;</span>
  add_header Strict-Transport-Security <span class="token string">"max-age=31536000"</span><span class="token punctuation">;</span>

  <span class="token comment"># proxy to 8360</span>
  location / <span class="token punctuation">{</span>
    proxy_pass http://127.0.0.1:8360<span class="token punctuation">;</span>
    proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
    proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
    proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
    proxy_set_header X-Forwarded-Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>
    proxy_set_header REMOTE-HOST <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
    add_header X-Cache <span class="token variable">$upstream_cache_status</span><span class="token punctuation">;</span>
    <span class="token comment"># cache</span>
    add_header Cache-Control no-cache<span class="token punctuation">;</span>
    expires 12h<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-08-23",deps:[],links:[],pathInferred:"/posts/other/walineServer.html",pathLocale:"/",permalink:null,routeMeta:{title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"},sfcBlocks:[],slug:"walineServer",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/walineServer.md",filePathRelative:"posts/other/walineServer.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/walineServer.html.vue",componentFilePathRelative:"pages/posts/other/walineServer.html.vue",componentFileChunkName:"v-351c6704",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/walineServer.html.js",dataFilePathRelative:"pages/posts/other/walineServer.html.js",dataFileChunkName:"v-351c6704",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/walineServer.html",htmlFilePathRelative:"posts/other/walineServer.html"},title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"},["/posts/other/walineServer","/posts/other/walineServer.md"]],["v-3706649a","/404.html",{title:""},["/404"]],["v-5bc93818","/category/",{title:"Categories"},["/category/index.html"]],["v-744d024e","/tag/",{title:"Tags"},["/tag/index.html"]],["v-e52c881c","/article/",{title:"Articles"},["/article/index.html"]],["v-01560935","/timeline/",{title:"Timeline"},["/timeline/index.html"]],["v-5831b135","/category/java/",{title:"Category java"},["/category/java/index.html"]],["v-05b88e01","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/",{title:"Tag \u8BBE\u8BA1\u6A21\u5F0F"},["/tag/\u8BBE\u8BA1\u6A21\u5F0F/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html"]],["v-4110d7ce","/category/%E8%BF%90%E7%BB%B4/",{title:"Category \u8FD0\u7EF4"},["/category/\u8FD0\u7EF4/","/category/%E8%BF%90%E7%BB%B4/index.html"]],["v-1eec4968","/tag/algolia/",{title:"Tag Algolia"},["/tag/algolia/index.html"]],["v-13b66e9c","/category/%E5%85%B6%E4%BB%96/",{title:"Category \u5176\u4ED6"},["/category/\u5176\u4ED6/","/category/%E5%85%B6%E4%BB%96/index.html"]],["v-3a134560","/tag/%E5%8D%9A%E5%AE%A2/",{title:"Tag \u535A\u5BA2"},["/tag/\u535A\u5BA2/","/tag/%E5%8D%9A%E5%AE%A2/index.html"]],["v-9f17d77e","/category/%E7%9B%97%E9%93%BE/",{title:"Category \u76D7\u94FE"},["/category/\u76D7\u94FE/","/category/%E7%9B%97%E9%93%BE/index.html"]],["v-200bf6bc","/tag/%E5%85%B6%E4%BB%96/",{title:"Tag \u5176\u4ED6"},["/tag/\u5176\u4ED6/","/tag/%E5%85%B6%E4%BB%96/index.html"]],["v-2d060772","/category/%E5%9B%BE%E5%BA%8A/",{title:"Category \u56FE\u5E8A"},["/category/\u56FE\u5E8A/","/category/%E5%9B%BE%E5%BA%8A/index.html"]],["v-aac522f2","/tag/github-pages/",{title:"Tag Github Pages"},["/tag/github-pages/index.html"]],["v-726261d4","/category/%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90/",{title:"Category \u7F51\u7EDC\u8D44\u6E90"},["/category/\u7F51\u7EDC\u8D44\u6E90/","/category/%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90/index.html"]],["v-36b75823","/tag/waline/",{title:"Tag waline"},["/tag/waline/index.html"]]];var NS=()=>BS.reduce((n,[s,a,e,t])=>(n.push({name:s,path:a,component:Tl,meta:e},...t.map(o=>({path:o,redirect:a}))),n),[{name:"404",path:"/:catchAll(.*)",component:Tl}]),zS=Kh,HS=()=>{const n=Dg({history:zS($h(na.value.base)),routes:NS(),scrollBehavior:(s,a,e)=>e||(s.hash?{el:s.hash}:{top:0})});return n.beforeResolve(async(s,a)=>{var e;(s.path!==a.path||a===Ms)&&([Fs.value]=await Promise.all([ha.resolvePageData(s.name),(e=nd[s.name])==null?void 0:e.__asyncLoader()]))}),n},GS=n=>{n.component("ClientOnly",Ah),n.component("Content",Lh)},VS=(n,s)=>{const a=vn(()=>ha.resolveRouteLocale(na.value.locales,s.currentRoute.value.path)),e=vn(()=>ha.resolveSiteLocaleData(na.value,a.value)),t=vn(()=>ha.resolvePageFrontmatter(Fs.value)),o=vn(()=>ha.resolvePageHeadTitle(Fs.value,e.value)),i=vn(()=>ha.resolvePageHead(o.value,t.value,e.value)),p=vn(()=>ha.resolvePageLang(Fs.value));return n.provide(_p,a),n.provide(id,e),n.provide(ed,t),n.provide(Ih,o),n.provide(td,i),n.provide(od,p),Object.defineProperties(n.config.globalProperties,{$frontmatter:{get:()=>t.value},$head:{get:()=>i.value},$headTitle:{get:()=>o.value},$lang:{get:()=>p.value},$page:{get:()=>Fs.value},$routeLocale:{get:()=>a.value},$site:{get:()=>na.value},$siteLocale:{get:()=>e.value},$withBase:{get:()=>qt}}),{pageData:Fs,pageFrontmatter:t,pageHead:i,pageHeadTitle:o,pageLang:p,routeLocale:a,siteData:na,siteLocaleData:e}},US=()=>{const n=et(),s=Ph(),a=yp(),e=an([]),t=()=>{s.value.forEach(i=>{const p=qS(i);p&&e.value.push(p)})},o=()=>{document.documentElement.lang=a.value,e.value.forEach(i=>{i.parentNode===document.head&&document.head.removeChild(i)}),e.value.splice(0,e.value.length),s.value.forEach(i=>{const p=WS(i);p!==null&&(document.head.appendChild(p),e.value.push(p))})};zs(Oh,o),Qn(()=>{t(),o(),Vn(()=>n.path,()=>o())})},qS=([n,s,a=""])=>{const e=Object.entries(s).map(([p,l])=>Hn(l)?`[${p}="${l}"]`:l===!0?`[${p}]`:"").join(""),t=`head > ${n}${e}`;return Array.from(document.querySelectorAll(t)).find(p=>p.innerText===a)||null},WS=([n,s,a])=>{if(!Hn(n))return null;const e=document.createElement(n);return Qu(s)&&Object.entries(s).forEach(([t,o])=>{Hn(o)?e.setAttribute(t,o):o===!0&&e.setAttribute(t,"")}),Hn(a)&&e.appendChild(document.createTextNode(a)),e},YS=fh,XS=async()=>{var a;const n=YS({name:"VuepressApp",setup(){var e;US();for(const t of di)(e=t.setup)==null||e.call(t);return()=>[Z(gd),...di.flatMap(({rootComponents:t=[]})=>t.map(o=>Z(o)))]}}),s=HS();GS(n),VS(n,s);for(const e of di)await((a=e.enhance)==null?void 0:a.call(e,{app:n,router:s,siteData:na}));return n.use(s),{app:n,router:s}};XS().then(({app:n,router:s})=>{s.isReady().then(()=>{n.mount("#app")})});export{$h as $,So as A,et as B,yo as C,E_ as D,Ps as E,Rn as F,ks as G,pa as H,es as I,nx as J,Pd as K,Z as L,Ah as M,JS as N,xh as O,QS as P,ZS as Q,Tv as R,gp as S,tx as T,wp as U,st as V,Vn as W,qn as X,Jn as Y,Ch as Z,as as _,qu as a,Hn as a0,Xb as a1,ex as a2,Qu as a3,sx as a4,ho as a5,KS as a6,Kb as a7,Ke as a8,Qe as a9,iv as aa,ns as ab,Pi as ac,uh as ad,V as b,sn as c,XS as createVueApp,En as d,fs as e,jn as f,Qn as g,Ls as h,fn as i,ae as j,at as k,nt as l,qt as m,Je as n,J as o,ln as p,G2 as q,Kn as r,LS as s,Ln as t,ax as u,vn as v,Ba as w,Tn as x,db as y,an as z};
