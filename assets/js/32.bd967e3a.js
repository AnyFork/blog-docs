(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{673:function(n,s,a){"use strict";a.r(s);var t=a(4),e=Object(t.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[n._v("日常工作中，nginx 使用非常频繁。今日抽空，顺便整理一下 linux 环境下 nginx 的 2 种安装方式，以备日后使用，减少不必要的错误。普通方式需要手动编译，比较麻烦。docker方式比较简单，但一定要注意文件目录挂载配置要正确，配置不正确，即使容器启动起来，nginx也无法运行。")])]),a("h2",{attrs:{id:"普通安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#普通安装"}},[n._v("#")]),n._v(" 普通安装")]),n._v(" "),a("h3",{attrs:{id:"_1、下载-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载-nginx"}},[n._v("#")]),n._v(" 1、下载 Nginx")]),n._v(" "),a("p",[n._v(" Nginx 官网地址："),a("a",{attrs:{href:"https://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://nginx.org/en/download.html"),a("OutboundLink")],1),n._v("，选择对应的 linux 版本，通过"),a("code",[n._v("wget")]),n._v("进行下载。")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("wget")]),n._v(" http://nginx.org/download/nginx-1.20.1.tar.gz\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[a("strong",[n._v("注意")]),n._v("：如果"),a("code",[n._v("wget")]),n._v("没有安装，请执行"),a("code",[n._v("yum -y install wget")]),n._v(" 进行安装。")]),n._v(" "),a("h3",{attrs:{id:"_2、解压"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、解压"}},[n._v("#")]),n._v(" 2、解压")]),n._v(" "),a("p",[n._v("通过"),a("code",[n._v("tar")]),n._v("命令进行解压")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("tar")]),n._v(" -zvxf nginx-1.20.1.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("cd")]),n._v(" nginx-1.12.1\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("h3",{attrs:{id:"_3、译环境安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、译环境安装"}},[n._v("#")]),n._v(" 3、译环境安装")]),n._v(" "),a("p",[a("strong",[n._v("gcc 安装")]),n._v("：安装 nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境，如果没有 gcc 环境，则需要安装")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# gcc 安装")]),n._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" gcc-c++\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("p",[a("strong",[n._v("PCRE pcre-devel 安装")]),n._v("：PCRE(Perl Compatible Regular Expressions) 是一个 Perl 库，包括 perl 兼容的正则表达式库。nginx 的 http 模块使用 pcre 来解析正则表达式，所以需要在 linux 上安装 pcre 库，pcre-devel 是使用 pcre 开发的一个二次开发库，nginx 也需要此库。")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[n._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y pcre pcre-devel\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[a("strong",[n._v("zlib 安装")]),n._v("：zlib 库提供了很多种压缩和解压缩的方式， nginx 使用 zlib 对 http 包的内容进行 gzip ，所以需要在 Centos 上安装 zlib 库。")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[n._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y zlib zlib-devel\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[a("strong",[n._v("OpenSSL 安装")]),n._v("：OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及 SSL 协议，并提供丰富的应用程序供测试或其它目的使用。\nnginx 不仅支持 http 协议，还支持 https（即在 ssl 协议上传输 http），所以需要在 Centos 安装 OpenSSL 库。")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[n._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y openssl openssl-devel\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h3",{attrs:{id:"_4、预编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、预编译"}},[n._v("#")]),n._v(" 4、预编译")]),n._v(" "),a("p",[n._v("进入解压后的目录 nginx-1.20.1 进行预编译 ./configure --prefix=/opt/nginx 注意：--prefix 是指定安装目录")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[n._v("./configure --prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("/opt/nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h3",{attrs:{id:"_5、编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、编译"}},[n._v("#")]),n._v(" 5、编译")]),n._v(" "),a("p",[n._v("通过"),a("code",[n._v("make")]),n._v("命令进行源码编译；如果"),a("code",[n._v("make")]),n._v("命令不存在，通过"),a("code",[n._v("yum -y install make autoconf")]),n._v("安装")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("make")]),n._v("\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h3",{attrs:{id:"_6、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、安装"}},[n._v("#")]),n._v(" 6、安装")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("make")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v("\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("安装完成后进入"),a("code",[n._v("/opt/nginx/sbin")]),n._v("目录，然后启动"),a("code",[n._v("./nginx")]),n._v(" 这条命令成功没有输出。通过一下命令查看"),a("code",[n._v("nginx")]),n._v("是否启动成功：")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("ps")]),n._v(" -ef "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("grep")]),n._v(" nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("如果出现"),a("code",[n._v("nginx")]),n._v("进程，则表示启动成功\n"),a("img",{attrs:{src:"/blog-docs/images/markdown/nginx.png",alt:"nginx"}})]),n._v(" "),a("p",[n._v("打开浏览器，输入"),a("code",[n._v("nginx")]),n._v("地址，默认监听 80 端口，如下图：\n"),a("img",{attrs:{src:"/blog-docs/images/markdown/nginxweb.png",alt:"nginxWeb"}})]),n._v(" "),a("p",[n._v("如果出现访问不了，尝试关闭防火墙"),a("code",[n._v("systemctl stop firewalld.service")]),n._v("或者永久关闭防火墙"),a("code",[n._v("systemctl disable firewalld.service")])]),n._v(" "),a("h3",{attrs:{id:"_7、创建-linux-全局软连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7、创建-linux-全局软连接"}},[n._v("#")]),n._v(" 7、创建 linux 全局软连接")]),n._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[n._v("通过软链接的方式设置 nginx 为全局变量，就可以实现全局任何地方通过 nginx 相关命令操作 nginx 不用到 nginx 安装目录或者 nginx 全路径进行命令执行，使操作变得更加简单。")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("ln")]),n._v(" -s /opt/nginx/sbin/nginx  /usr/bin/nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[a("strong",[n._v("上面的：/opt/nginx/sbin/nginx 为我们的 nginx 安装目录，若你的安装目录和我的不一样，自行修改为你的安装目录便可，建立软链接后，我们便可以在任意目录执行 nginx 命令了")])]),n._v(" "),a("h3",{attrs:{id:"_8、nginx-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8、nginx-命令"}},[n._v("#")]),n._v(" 8、nginx 命令")]),n._v(" "),a("p",[n._v("首先需要进入 nginx 安装目录："),a("code",[n._v("cd /opt/nginx/sbin/")])]),n._v(" "),a("p",[a("strong",[n._v("启动命令")]),n._v("："),a("code",[n._v("./nginx")])]),n._v(" "),a("p",[a("strong",[n._v("退出命令")]),n._v(": "),a("code",[n._v("./nginx -s quit")]),n._v("，此方式停止步骤是待 nginx 进程处理任务完毕进行停止。")]),n._v(" "),a("p",[a("strong",[n._v("停止命令")]),n._v("："),a("code",[n._v("./nginx -s stop")]),n._v("，此方式相当于先查出 nginx 进程 id 再使用 kill 命令强制杀掉进程。")]),n._v(" "),a("p",[a("strong",[n._v("单纯重启命令")]),n._v("：先停止再启动(推荐)，对 nginx 进行重启相当于先停止再启动，即先执行停止命令再执行启动命令。")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[n._v("./nginx -s quit\n./nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("p",[a("strong",[n._v("重新加载配置文件")]),n._v("：当 nginx 的配置文件 nginx.conf 修改后，要想让配置生效需要重启 nginx，使用 ./nginx -s reload 不用先停止 nginx 再启动 nginx, 即可将配置信息在 nginx 中生效，如下：")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[n._v("./nginx -s reload\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[a("strong",[n._v("指定配置文件启动")]),n._v(": /opt/nginx/sbin/nginx -c /opt/nginx/conf/nginx.conf")]),n._v(" "),a("p",[a("strong",[n._v("指定配置文件重启")]),n._v(": /opt/nginx/sbin/nginx -s reload -c /opt/nginx/conf/nginx.conf")]),n._v(" "),a("p",[a("strong",[n._v("测试 nginx 配置文件是否正确")]),n._v("：/nginx -t -c /opt/nginx/conf/nginx.conf")]),n._v(" "),a("p",[a("strong",[n._v("开启自启动")])]),n._v(" "),a("p",[n._v("1、在/etc/rc.d/rc.local 中添加 nginx 启动命令行：")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("vi")]),n._v(" /etc/rc.d/rc.local\n/opt/nginx/sbin/nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("p",[n._v("2、授权："),a("code",[n._v("chmod +x /etc/rc.d/rc.local")])]),n._v(" "),a("p",[n._v("3、重启："),a("code",[n._v("reboot")]),n._v(",通过命令"),a("code",[n._v("ps -ef | grep nginx")]),n._v("查看 nginx 是否开机自启动成功")]),n._v(" "),a("p",[a("strong",[n._v("上面这种是最简单的 nginx 开机自启动的，推荐大家使用")]),n._v("。")]),n._v(" "),a("h2",{attrs:{id:"docker-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装"}},[n._v("#")]),n._v(" Docker 安装")]),n._v(" "),a("h3",{attrs:{id:"_1、拉取-nginx-镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、拉取-nginx-镜像"}},[n._v("#")]),n._v(" 1、拉取 nginx 镜像")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" pull nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2、启动-nginx-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、启动-nginx-容器"}},[n._v("#")]),n._v(" 2、启动 nginx 容器")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" run --name nginx -p "),a("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 -d nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("至此一个简单的nginx容器就启动成功了，下面配置挂载目录。")]),n._v(" "),a("h3",{attrs:{id:"_3、创建挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、创建挂载目录"}},[n._v("#")]),n._v(" 3、创建挂载目录")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" -p /opt/nginx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" -p /opt/nginx/html\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" -p /opt/nginx/conf.d\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" -p /opt/nginx/logs\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br")])]),a("h3",{attrs:{id:"_4、复制容器中挂载文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、复制容器中挂载文件"}},[n._v("#")]),n._v(" 4、复制容器中挂载文件")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" 67e:/etc/nginx/nginx.conf /opt/nginx/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" 67e:/etc/nginx/conf.d /opt/nginx/conf.d/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" 67e:/usr/share/nginx/html/ /opt/nginx/html/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" 67e:/var/log/nginx/ /opt/nginx/logs/\n注：docker "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" 67e 中的 "),a("span",{pre:!0,attrs:{class:"token string"}},[n._v('"67e"')]),n._v(" 为容器ID前缀，只要唯一就好了\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("h3",{attrs:{id:"_5、删除旧的-nginx-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、删除旧的-nginx-容器"}},[n._v("#")]),n._v(" 5、删除旧的 nginx 容器")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 停止容器")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" stop 67e\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 移除容器")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("rm")]),n._v(" 67e\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#或者强制删除容器")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("rm")]),n._v(" -f 67e\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br")])]),a("h3",{attrs:{id:"_6、创建-nginx-挂载目录容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、创建-nginx-挂载目录容器"}},[n._v("#")]),n._v(" 6、创建 nginx 挂载目录容器")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" run -d --name nginx -p "),a("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[n._v("443")]),n._v(":443 -v /opt/nginx/nginx.conf:/etc/nginx/nginx.conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n-v /opt/nginx/html:/usr/share/nginx/html -v /opt/nginx/logs:/var/log/nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n-v /opt/nginx/conf.d:/etc/nginx/conf.d --privileged"),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("true --restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("always nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br")])]),a("p",[a("code",[n._v("--privileged=true")]),n._v(": 使用该参数，container内的root拥有真正的root权限。否则，container内的root只是外部的一个普通用户权限。privileged启动的容器，可以看到很多host上的设备，并且可以执行mount。甚至允许你在docker容器中启动docker容器"),a("br"),n._v(" "),a("code",[n._v("--restart=always")]),n._v(": 当Docker重启时，容器自动启动。"),a("br"),n._v("\n修改运行中的容器自启动："),a("code",[n._v("docker container update --restart=always 容器名字")]),a("br"),n._v("\n构建容器自启动：启动命令额外加上"),a("code",[n._v("--restart=always")])]),n._v(" "),a("h3",{attrs:{id:"_7、查看-nginx-容器运行情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7、查看-nginx-容器运行情况"}},[n._v("#")]),n._v(" 7、查看 nginx 容器运行情况")]),n._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 命令查看当前运行的容器")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("ps")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 通过浏览器访问80端口，查看是否显示正常页面")]),n._v("\nhttp:ip/\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("p",[n._v("如果浏览器访问不了，应该是防火墙的原因。可以通过命令"),a("code",[n._v("systemctl stop firewalld")]),n._v("关闭防火墙或者开通对应的端口"),a("code",[n._v("80")]),n._v("和"),a("code",[n._v("443")]),n._v("，端口开通命令参考："),a("RouterLink",{attrs:{to:"/others/linux/basecommand.html#_6-centos-端口开通"}},[n._v("linux常用指令")])],1),n._v(" "),a("Reward")],1)}),[],!1,null,null,null);s.default=e.exports}}]);